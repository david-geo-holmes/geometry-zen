/*! Geometry Zen - v0.1.10 - 2013-08-04 */
(function(){function e(e){var n=!1;return function(){if(n)throw Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var t,n,i={};t=this,null!=t&&(n=t.async),i.noConflict=function(){return t.async=n,i};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;e.length>n;n+=1)t(e[n],n,e)},s=function(e,t){if(e.map)return e.map(t);var n=[];return r(e,function(e,i,r){n.push(t(e,i,r))}),n},a=function(e,t,n){return e.reduce?e.reduce(t,n):(r(e,function(e,i,r){n=t(n,e,i,r)}),n)},o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};i.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},i.each=function(t,n,i){if(i=i||function(){},!t.length)return i();var s=0;r(t,function(r){n(r,e(function(e){e?(i(e),i=function(){}):(s+=1,s>=t.length&&i(null))}))})},i.forEach=i.each,i.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,s=function(){var a=!0;t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n(null):a?i.nextTick(s):s())}),a=!1};s()},i.forEachSeries=i.eachSeries,i.eachLimit=function(e,t,n,i){var r=l(t);r.apply(null,[e,n,i])},i.forEachLimit=i.eachLimit;var l=function(e){return function(t,n,i){if(i=i||function(){},!t.length||0>=e)return i();var r=0,s=0,a=0;(function o(){if(r>=t.length)return i();for(;e>a&&t.length>s;)s+=1,a+=1,n(t[s-1],function(e){e?(i(e),i=function(){}):(r+=1,a-=1,r>=t.length?i():o())})})()}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.each].concat(t))}},c=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(n))}},f=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.eachSeries].concat(t))}},h=function(e,t,n,i){var r=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,i){r[e.index]=i,t(n)})},function(e){i(e,r)})};i.map=u(h),i.mapSeries=f(h),i.mapLimit=function(e,t,n,i){return p(t)(e,n,i)};var p=function(e){return c(e,h)};i.reduce=function(e,t,n,r){i.eachSeries(e,function(e,i){n(t,e,function(e,n){t=n,i(e)})},function(e){r(e,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,t,n,r){var a=s(e,function(e){return e}).reverse();i.reduce(a,t,n,r)},i.foldr=i.reduceRight;var d=function(e,t,n,i){var r=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&r.push(e),t()})},function(){i(s(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.filter=u(d),i.filterSeries=f(d),i.select=i.filter,i.selectSeries=i.filterSeries;var m=function(e,t,n,i){var r=[];t=s(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||r.push(e),t()})},function(){i(s(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.reject=u(m),i.rejectSeries=f(m);var b=function(e,t,n,i){e(t,function(e,t){n(e,function(n){n?(i(e),i=function(){}):t()})},function(){i()})};i.detect=u(b),i.detectSeries=f(b),i.some=function(e,t,n){i.each(e,function(e,i){t(e,function(e){e&&(n(!0),n=function(){}),i()})},function(){n(!1)})},i.any=i.some,i.every=function(e,t,n){i.each(e,function(e,i){t(e,function(e){e||(n(!1),n=function(){}),i()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(e,t,n){i.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);var i=function(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0};n(null,s(t.sort(i),function(e){return e.value}))})},i.auto=function(e,t){t=t||function(){};var n=o(e);if(!n.length)return t(null);var s={},l=[],u=function(e){l.unshift(e)},c=function(e){for(var t=0;l.length>t;t+=1)if(l[t]===e)return l.splice(t,1),void 0},f=function(){r(l.slice(0),function(e){e()})};u(function(){o(s).length===n.length&&(t(null,s),t=function(){})}),r(n,function(n){var r=e[n]instanceof Function?[e[n]]:e[n],o=function(e){if(e)t(e),t=function(){};else{var r=Array.prototype.slice.call(arguments,1);1>=r.length&&(r=r[0]),s[n]=r,i.nextTick(f)}},l=r.slice(0,Math.abs(r.length-1))||[],h=function(){return a(l,function(e,t){return e&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(n)};if(h())r[r.length-1](o,s);else{var p=function(){h()&&(c(p),r[r.length-1](o,s))};u(p)}})},i.waterfall=function(e,t){if(t=t||function(){},!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var s=Array.prototype.slice.call(arguments,1),a=e.next();a?s.push(n(a)):s.push(t),i.nextTick(function(){e.apply(null,s)})}}};n(i.iterator(e))()};var g=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},n);else{var i={};e.each(o(t),function(e,n){t[e](function(t){var r=Array.prototype.slice.call(arguments,1);1>=r.length&&(r=r[0]),i[e]=r,n(t)})},function(e){n(e,i)})}};i.parallel=function(e,t){g({map:i.map,each:i.each},e,t)},i.parallelLimit=function(e,t,n){g({map:p(t),each:l(t)},e,n)},i.series=function(e,t){if(t=t||function(){},e.constructor===Array)i.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};i.eachSeries(o(e),function(t,i){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);1>=r.length&&(r=r[0]),n[t]=r,i(e)})},function(e){t(e,n)})}},i.iterator=function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return e.length-1>n?t(n+1):null},i};return t(0)},i.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,n,i){var r=[];e(t,function(e,t){n(e,function(e,n){r=r.concat(n||[]),t(e)})},function(e){i(e,r)})};i.concat=u(v),i.concatSeries=f(v),i.whilst=function(e,t,n){if(e()){var r=!0;t(function(s){return s?n(s):(r?i.nextTick(function(){i.whilst(e,t,n)}):i.whilst(e,t,n),void 0)}),r=!1}else n()},i.doWhilst=function(e,t,n){var r=!0;e(function(s){return s?n(s):(t()?r?i.nextTick(function(){i.doWhilst(e,t,n)}):i.doWhilst(e,t,n):n(),void 0)}),r=!1},i.until=function(e,t,n){if(e())n();else{var r=!0;t(function(s){return s?n(s):(r?i.nextTick(function(){i.until(e,t,n)}):i.until(e,t,n),void 0)}),r=!1}},i.doUntil=function(e,t,n){var r=!0;e(function(s){return s?n(s):(t()?n():r?i.nextTick(function(){i.doUntil(e,t,n)}):i.doUntil(e,t,n),void 0)}),r=!1},i.queue=function(t,n){function s(e,t,s,a){t.constructor!==Array&&(t=[t]),r(t,function(t){var r={data:t,callback:"function"==typeof a?a:null};s?e.tasks.unshift(r):e.tasks.push(r),e.saturated&&e.tasks.length===n&&e.saturated(),i.nextTick(e.process)})}var a=0,o={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(e,t){s(o,e,!1,t)},unshift:function(e,t){s(o,e,!0,t)},process:function(){if(o.concurrency>a&&o.tasks.length){var n=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var r=!0,s=function(){a-=1,n.callback&&n.callback.apply(n,arguments),o.drain&&0===o.tasks.length+a&&o.drain(),o.process()},l=e(function(){var e=arguments;r?i.nextTick(function(){s.apply(null,e)}):s.apply(null,arguments)});t(n.data,l),r=!1}},length:function(){return o.tasks.length},running:function(){return a}};return o},i.cargo=function(e,t){var n=!1,a=[],o={tasks:a,payload:t,saturated:null,empty:null,drain:null,push:function(e,n){e.constructor!==Array&&(e=[e]),r(e,function(e){a.push({data:e,callback:"function"==typeof n?n:null}),o.saturated&&a.length===t&&o.saturated()}),i.nextTick(o.process)},process:function l(){if(!n){if(0===a.length)return o.drain&&o.drain(),void 0;var i="number"==typeof t?a.splice(0,t):a.splice(0),u=s(i,function(e){return e.data});o.empty&&o.empty(),n=!0,e(u,function(){n=!1;var e=arguments;r(i,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return a.length},running:function(){return n}};return o};var _=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&r(n,function(t){console[e](t)}))}]))}};i.log=_("log"),i.dir=_("dir"),i.memoize=function(e,t){var n={},i={};t=t||function(e){return e};var r=function(){var r=Array.prototype.slice.call(arguments),s=r.pop(),a=t.apply(null,r);a in n?s.apply(null,n[a]):a in i?i[a].push(s):(i[a]=[s],e.apply(null,r.concat([function(){n[a]=arguments;var e=i[a];delete i[a];for(var t=0,r=e.length;r>t;t++)e[t].apply(null,arguments)}])))};return r.memo=n,r.unmemoized=e,r},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},i.times=function(e,t,n){for(var r=[],s=0;e>s;s++)r.push(s);return i.map(r,t,n)},i.timesSeries=function(e,t,n){for(var r=[],s=0;e>s;s++)r.push(s);return i.mapSeries(r,t,n)},i.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();i.reduce(e,n,function(e,n,i){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},"undefined"!=typeof define&&define.amd?define([],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:t.async=i})(),function(e,t){function n(e){var t=e.length,n=st.type(e);return st.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=dt[e]={};return st.each(e.match(ot)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=st.expando+Math.random()}function s(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(vt,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:gt.test(i)?JSON.parse(i):i}catch(s){}mt.set(e,n,i)}else i=t;return i}function a(){return!0}function o(){return!1}function l(){try{return V.activeElement}catch(e){}}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e,t,n){if(st.isFunction(t))return st.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return st.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Pt.test(t))return st.filter(t,e,n);t=st.filter(t,e)}return st.grep(e,function(e){return tt.call(t,e)>=0!==n})}function f(e,t){return st.nodeName(e,"table")&&st.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=zt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function d(e,t){for(var n=e.length,i=0;n>i;i++)bt.set(e[i],"globalEval",!t||bt.get(t[i],"globalEval"))}function m(e,t){var n,i,r,s,a,o,l,u;if(1===t.nodeType){if(bt.hasData(e)&&(s=bt.access(e),a=bt.set(t,s),u=s.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)st.event.add(t,r,u[r][n])}mt.hasData(e)&&(o=mt.access(e),l=st.extend({},o),mt.set(t,l))}}function b(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&st.nodeName(e,n)?st.merge([e],i):i}function g(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Nt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function v(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Zt.length;r--;)if(t=Zt[r]+n,t in e)return t;return i}function _(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)}function E(t){return e.getComputedStyle(t,null)}function y(e,t){for(var n,i,r,s=[],a=0,o=e.length;o>a;a++)i=e[a],i.style&&(s[a]=bt.get(i,"olddisplay"),n=i.style.display,t?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&_(i)&&(s[a]=bt.access(i,"olddisplay",k(i.nodeName)))):s[a]||(r=_(i),(n&&"none"!==n||!r)&&bt.set(i,"olddisplay",r?n:st.css(i,"display"))));for(a=0;o>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[a]||"":"none"));return e}function T(e,t,n){var i=Wt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=st.css(e,n+Qt[s],!0,r)),i?("content"===n&&(a-=st.css(e,"padding"+Qt[s],!0,r)),"margin"!==n&&(a-=st.css(e,"border"+Qt[s]+"Width",!0,r))):(a+=st.css(e,"padding"+Qt[s],!0,r),"padding"!==n&&(a+=st.css(e,"border"+Qt[s]+"Width",!0,r)));return a}function w(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=E(e),a=st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=Bt(e,t,s),(0>r||null==r)&&(r=e.style[t]),Jt.test(r))return r;i=a&&(st.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,n||(a?"border":"content"),i,s)+"px"}function k(e){var t=V,n=qt[e];return n||(n=x(e,t),"none"!==n&&n||(Gt=(Gt||st("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Gt[0].contentWindow||Gt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=x(e,t),Gt.detach()),qt[e]=n),n}function x(e,t){var n=st(t.createElement(e)).appendTo(t.body),i=st.css(n[0],"display");return n.remove(),i}function R(e,t,n,i){var r;if(st.isArray(t))st.each(t,function(t,r){n||tn.test(e)?i(e,r):R(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==st.type(t))i(e,t);else for(r in t)R(e+"["+r+"]",t[r],n,i)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(ot)||[];if(st.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function O(e,n,i,r){function s(l){var u;return a[l]=!0,st.each(e[l]||[],function(e,l){var c=l(n,i,r);return"string"!=typeof c||o||a[c]?o?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var a={},o=e===_n;return s(n.dataTypes[0])||!a["*"]&&s("*")}function C(e,n){var i,r,s=st.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&st.extend(!0,e,r),e}function A(e,n,i){for(var r,s,a,o,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(s in l)if(l[s]&&l[s].test(r)){u.unshift(s);break}if(u[0]in i)a=u[0];else{for(s in i){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==u[0]&&u.unshift(a),i[a]):t}function M(e,t,n,i){var r,s,a,o,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(a=u[l+" "+s]||u["* "+s],!a)for(r in u)if(o=r.split(" "),o[1]===s&&(a=u[l+" "+o[0]]||u["* "+o[0]])){a===!0?a=u[r]:u[r]!==!0&&(s=o[0],c.unshift(o[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function $(){return setTimeout(function(){Pn=t}),Pn=st.now()}function H(e,t,n){for(var i,r=(Hn[t]||[]).concat(Hn["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,t,e))return i}function D(e,t,n){var i,r,s=0,a=$n.length,o=st.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Pn||$(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,s=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(s);return o.notifyWith(e,[u,s,n]),1>s&&l?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Pn||$(),duration:n.duration,tweens:[],createTween:function(t,n){var i=st.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(N(c,u.opts.specialEasing);a>s;s++)if(i=$n[s].call(u,e,c,u.opts))return i;return st.map(c,H,u),st.isFunction(u.opts.start)&&u.opts.start.call(e,u),st.fx.timer(st.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function N(e,t){var n,i,r,s,a;for(n in e)if(i=st.camelCase(n),r=t[i],s=e[n],st.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),a=st.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function I(e,n,i){var r,s,a,o,l,u,c=this,f={},h=e.style,p=e.nodeType&&_(e),d=bt.get(e,"fxshow");i.queue||(l=st._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,u=l.empty.fire,l.empty.fire=function(){l.unqueued||u()}),l.unqueued++,c.always(function(){c.always(function(){l.unqueued--,st.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===st.css(e,"display")&&"none"===st.css(e,"float")&&(h.display="inline-block")),i.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(r in n)if(s=n[r],Cn.exec(s)){if(delete n[r],a=a||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!d||d[r]===t)continue;p=!0}f[r]=d&&d[r]||st.style(e,r)}if(!st.isEmptyObject(f)){d?"hidden"in d&&(p=d.hidden):d=bt.access(e,"fxshow",{}),a&&(d.hidden=!p),p?st(e).show():c.done(function(){st(e).hide()}),c.done(function(){var t;bt.remove(e,"fxshow");for(t in f)st.style(e,t,f[t])});for(r in f)o=H(p?d[r]:0,r,c),r in d||(d[r]=o.start,p&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function L(e,t,n,i,r){return new L.prototype.init(e,t,n,i,r)}function z(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Qt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function U(e){return st.isWindow(e)?e:9===e.nodeType&&e.defaultView}var F,B,G=typeof t,j=e.location,V=e.document,W=V.documentElement,J=e.jQuery,Y=e.$,q={},X=[],K="2.0.3",Q=X.concat,Z=X.push,et=X.slice,tt=X.indexOf,nt=q.toString,it=q.hasOwnProperty,rt=K.trim,st=function(e,t){return new st.fn.init(e,t,F)},at=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=/\S+/g,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ct=/^-ms-/,ft=/-([\da-z])/gi,ht=function(e,t){return t.toUpperCase()},pt=function(){V.removeEventListener("DOMContentLoaded",pt,!1),e.removeEventListener("load",pt,!1),st.ready()};st.fn=st.prototype={jquery:K,constructor:st,init:function(e,n,i){var r,s;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:lt.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof st?n[0]:n,st.merge(this,st.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),ut.test(r[1])&&st.isPlainObject(n))for(r in n)st.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return s=V.getElementById(r[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))},selector:"",length:0,toArray:function(){return et.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return st.each(this,e,t)},ready:function(e){return st.ready.promise().done(e),this},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(st.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},st.fn.init.prototype=st.fn,st.extend=st.fn.extend=function(){var e,n,i,r,s,a,o=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l=2),"object"==typeof o||st.isFunction(o)||(o={}),u===l&&(o=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(n in e)i=o[n],r=e[n],o!==r&&(c&&r&&(st.isPlainObject(r)||(s=st.isArray(r)))?(s?(s=!1,a=i&&st.isArray(i)?i:[]):a=i&&st.isPlainObject(i)?i:{},o[n]=st.extend(c,a,r)):r!==t&&(o[n]=r));return o},st.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===st&&(e.$=Y),t&&e.jQuery===st&&(e.jQuery=J),st},isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){(e===!0?--st.readyWait:st.isReady)||(st.isReady=!0,e!==!0&&--st.readyWait>0||(B.resolveWith(V,[st]),st.fn.trigger&&st(V).trigger("ready").off("ready")))},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[nt.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==st.type(e)||e.nodeType||st.isWindow(e))return!1;try{if(e.constructor&&!it.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||V;var i=ut.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=st.buildFragment([e],t,r),r&&st(r).remove(),st.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&st.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=st.trim(e),e&&(1===e.indexOf("use strict")?(t=V.createElement("script"),t.text=e,V.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ct,"ms-").replace(ft,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,s=0,a=e.length,o=n(e);if(i){if(o)for(;a>s&&(r=t.apply(e[s],i),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],i),r===!1)break}else if(o)for(;a>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":rt.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?st.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:tt.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,s=0;if("number"==typeof i)for(;i>s;s++)e[r++]=n[s];else for(;n[s]!==t;)e[r++]=n[s++];return e.length=r,e},grep:function(e,t,n){var i,r=[],s=0,a=e.length;for(n=!!n;a>s;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,t,i){var r,s=0,a=e.length,o=n(e),l=[];if(o)for(;a>s;s++)r=t(e[s],s,i),null!=r&&(l[l.length]=r);else for(s in e)r=t(e[s],s,i),null!=r&&(l[l.length]=r);return Q.apply([],l)},guid:1,proxy:function(e,n){var i,r,s;return"string"==typeof n&&(i=e[n],n=e,e=i),st.isFunction(e)?(r=et.call(arguments,2),s=function(){return e.apply(n||this,r.concat(et.call(arguments)))},s.guid=e.guid=e.guid||st.guid++,s):t},access:function(e,n,i,r,s,a,o){var l=0,u=e.length,c=null==i;if("object"===st.type(i)){s=!0;for(l in i)st.access(e,n,l,i[l],!0,a,o)}else if(r!==t&&(s=!0,st.isFunction(r)||(o=!0),c&&(o?(n.call(e,r),n=null):(c=n,n=function(e,t,n){return c.call(st(e),n)})),n))for(;u>l;l++)n(e[l],i,o?r:r.call(e[l],l,n(e[l],i)));return s?e:c?n.call(e):u?n(e[0],i):a},now:Date.now,swap:function(e,t,n,i){var r,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=a[s];return r}}),st.ready.promise=function(t){return B||(B=st.Deferred(),"complete"===V.readyState?setTimeout(st.ready):(V.addEventListener("DOMContentLoaded",pt,!1),e.addEventListener("load",pt,!1))),B.promise(t)},st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()}),F=st(V),function(e,t){function n(e,t,n,i){var r,s,a,o,l,u,c,f,d,m;if((t?t.ownerDocument||t:U)!==M&&A(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(H&&!i){if(r=_t.exec(e))if(a=r[1]){if(9===o){if(s=t.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&L(t,s)&&s.id===a)return n.push(s),n}else{if(r[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&S.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(S.qsa&&(!D||!D.test(e))){if(f=c=z,d=t,m=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=h(e),(c=t.getAttribute("id"))?f=c.replace(Tt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+p(u[l]);d=pt.test(e)&&t.parentNode||t,m=u.join(",")}if(m)try{return et.apply(n,d.querySelectorAll(m)),n}catch(b){}finally{c||t.removeAttribute("id")}}}return y(e.replace(ct,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>k.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function r(e){return e[z]=!0,e}function s(e){var t=M.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)k.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function f(){}function h(e,t){var i,r,s,a,o,l,u,c=j[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=k.preFilter;o;){(!i||(r=ft.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),i=!1,(r=ht.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ct," ")}),o=o.slice(i.length));for(a in k.filter)!(r=gt[a].exec(o))||u[a]&&!(r=u[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return t?o.length:o?n.error(e):j(e,l).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=B++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,a){var o,l,u,c=F+" "+s;if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(u=t[z]||(t[z]={}),(l=u[i])&&l[0]===c){if((o=l[1])===!0||o===w)return o===!0}else if(l=u[i]=[c],l[1]=e(t,n,a)||w,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function b(e,t,n,i,r){for(var s,a=[],o=0,l=e.length,u=null!=t;l>o;o++)(s=e[o])&&(!n||n(s,i,r))&&(a.push(s),u&&t.push(o));return a}function g(e,t,n,i,s,a){return i&&!i[z]&&(i=g(i)),s&&!s[z]&&(s=g(s,a)),r(function(r,a,o,l){var u,c,f,h=[],p=[],d=a.length,m=r||E(t||"*",o.nodeType?[o]:o,[]),g=!e||!r&&t?m:b(m,h,e,o,l),v=n?s||(r?e:d||i)?[]:a:g;if(n&&n(g,v,o,l),i)for(u=b(v,p),i(u,[],o,l),c=u.length;c--;)(f=u[c])&&(v[p[c]]=!(g[p[c]]=f));if(r){if(s||e){if(s){for(u=[],c=v.length;c--;)(f=v[c])&&u.push(g[c]=f);s(null,v=[],u,l)}for(c=v.length;c--;)(f=v[c])&&(u=s?nt.call(r,f):h[c])>-1&&(r[u]=!(a[u]=f))}}else v=b(v===a?v.splice(d,v.length):v),s?s(null,a,v,l):et.apply(a,v)})}function v(e){for(var t,n,i,r=e.length,s=k.relative[e[0].type],a=s||k.relative[" "],o=s?1:0,l=d(function(e){return e===t},a,!0),u=d(function(e){return nt.call(t,e)>-1},a,!0),c=[function(e,n,i){return!s&&(i||n!==O)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];r>o;o++)if(n=k.relative[e[o].type])c=[d(m(c),n)];else{if(n=k.filter[e[o].type].apply(null,e[o].matches),n[z]){for(i=++o;r>i&&!k.relative[e[i].type];i++);return g(o>1&&m(c),o>1&&p(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ct,"$1"),n,i>o&&v(e.slice(o,i)),r>i&&v(e=e.slice(i)),r>i&&p(e))}c.push(n)}return m(c)}function _(e,t){var i=0,s=t.length>0,a=e.length>0,o=function(r,o,l,u,c){var f,h,p,d=[],m=0,g="0",v=r&&[],_=null!=c,E=O,y=r||a&&k.find.TAG("*",c&&o.parentNode||o),T=F+=null==E?1:Math.random()||.1;for(_&&(O=o!==M&&o,w=i);null!=(f=y[g]);g++){if(a&&f){for(h=0;p=e[h++];)if(p(f,o,l)){u.push(f);break}_&&(F=T,w=++i)}s&&((f=!p&&f)&&m--,r&&v.push(f))}if(m+=g,s&&g!==m){for(h=0;p=t[h++];)p(v,d,o,l);if(r){if(m>0)for(;g--;)v[g]||d[g]||(d[g]=Q.call(u));d=b(d)}et.apply(u,d),_&&!r&&d.length>0&&m+t.length>1&&n.uniqueSort(u)}return _&&(F=T,O=E),v};return s?r(o):o}function E(e,t,i){for(var r=0,s=t.length;s>r;r++)n(e,t[r],i);return i}function y(e,t,n,i){var r,s,a,o,l,u=h(e);if(!i&&1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&S.getById&&9===t.nodeType&&H&&k.relative[s[1].type]){if(t=(k.find.ID(a.matches[0].replace(St,wt),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(r=gt.needsContext.test(e)?0:s.length;r--&&(a=s[r],!k.relative[o=a.type]);)if((l=k.find[o])&&(i=l(a.matches[0].replace(St,wt),pt.test(s[0].type)&&t.parentNode||t))){if(s.splice(r,1),e=i.length&&p(s),!e)return et.apply(n,i),n;break}}return P(e,u)(i,t,!H,n,pt.test(e)),n}var T,S,w,k,x,R,P,O,C,A,M,$,H,D,N,I,L,z="sizzle"+-new Date,U=e.document,F=0,B=0,G=i(),j=i(),V=i(),W=!1,J=function(e,t){return e===t?(W=!0,0):0},Y=typeof t,q=1<<31,X={}.hasOwnProperty,K=[],Q=K.pop,Z=K.push,et=K.push,tt=K.slice,nt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=at.replace("w","w#"),lt="\\["+rt+"*("+at+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ot+")|)|)"+rt+"*\\]",ut=":("+at+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+lt.replace(3,8)+")*)|.*)\\)|)",ct=RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ft=RegExp("^"+rt+"*,"+rt+"*"),ht=RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),pt=RegExp(rt+"*[+~]"),dt=RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),mt=RegExp(ut),bt=RegExp("^"+ot+"$"),gt={ID:RegExp("^#("+at+")"),CLASS:RegExp("^\\.("+at+")"),TAG:RegExp("^("+at.replace("w","w*")+")"),ATTR:RegExp("^"+lt),PSEUDO:RegExp("^"+ut),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:RegExp("^(?:"+it+")$","i"),needsContext:RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Et=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,Tt=/'|\\/g,St=RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),wt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{et.apply(K=tt.call(U.childNodes),U.childNodes),K[U.childNodes.length].nodeType}catch(kt){et={apply:K.length?function(e,t){Z.apply(e,tt.call(t))
}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}R=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=n.support={},A=n.setDocument=function(e){var n=e?e.ownerDocument||e:U,i=n.defaultView;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,$=n.documentElement,H=!R(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){A()}),S.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=s(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=s(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),S.getById=s(function(e){return $.appendChild(e).id=z,!n.getElementsByName||!n.getElementsByName(z).length}),S.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==Y&&H){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},k.filter.ID=function(e){var t=e.replace(St,wt);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(St,wt);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=S.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(e):t}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},k.find.CLASS=S.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==Y&&H?n.getElementsByClassName(e):t},N=[],D=[],(S.qsa=vt.test(n.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||D.push("\\["+rt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||D.push(":checked")}),s(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&D.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(S.matchesSelector=vt.test(I=$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&s(function(e){S.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),N.push("!=",ut)}),D=D.length&&RegExp(D.join("|")),N=N.length&&RegExp(N.join("|")),L=vt.test($.contains)||$.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=$.compareDocumentPosition?function(e,t){if(e===t)return W=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!S.sortDetached&&t.compareDocumentPosition(e)===i?e===n||L(U,e)?-1:t===n||L(U,t)?1:C?nt.call(C,e)-nt.call(C,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,r=0,s=e.parentNode,a=t.parentNode,l=[e],u=[t];if(e===t)return W=!0,0;if(!s||!a)return e===n?-1:t===n?1:s?-1:a?1:C?nt.call(C,e)-nt.call(C,t):0;if(s===a)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?o(l[r],u[r]):l[r]===U?-1:u[r]===U?1:0},n):M},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&A(e),t=t.replace(dt,"='$1']"),!(!S.matchesSelector||!H||N&&N.test(t)||D&&D.test(t)))try{var i=I.call(e,t);if(i||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return n(t,M,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==M&&A(e),L(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==M&&A(e);var i=k.attrHandle[n.toLowerCase()],r=i&&X.call(k.attrHandle,n.toLowerCase())?i(e,n,!H):t;return r===t?S.attributes||!H?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,r=0;if(W=!S.detectDuplicates,C=!S.sortStable&&e.slice(0),e.sort(J),W){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},x=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=x(t);return n},k=n.selectors={cacheLength:50,createPseudo:r,match:gt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,wt),e[3]=(e[4]||e[5]||"").replace(St,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return gt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&mt.test(i)&&(n=h(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(St,wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var s=n.attr(r,e);return null==s?"!="===t:t?(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s+" ").indexOf(i)>-1:"|="===t?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,h,p,d,m=s!==a?"nextSibling":"previousSibling",b=t.parentNode,g=o&&t.nodeName.toLowerCase(),v=!l&&!o;if(b){if(s){for(;m;){for(f=t;f=f[m];)if(o?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?b.firstChild:b.lastChild],a&&v){for(c=b[z]||(b[z]={}),u=c[e]||[],p=u[0]===F&&u[1],h=u[0]===F&&u[2],f=p&&b.childNodes[p];f=++p&&f&&f[m]||(h=p=0)||d.pop();)if(1===f.nodeType&&++h&&f===t){c[e]=[F,p,h];break}}else if(v&&(u=(t[z]||(t[z]={}))[e])&&u[0]===F)h=u[1];else for(;(f=++p&&f&&f[m]||(h=p=0)||d.pop())&&((o?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++h||(v&&((f[z]||(f[z]={}))[e]=[F,h]),f!==t)););return h-=r,h===i||0===h%i&&h/i>=0}}},PSEUDO:function(e,t){var i,s=k.pseudos[e]||k.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return s[z]?s(t):s.length>1?(i=[e,e,"",t],k.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var i,r=s(e,t),a=r.length;a--;)i=nt.call(e,r[a]),e[i]=!(n[i]=r[a])}):function(e){return s(e,0,i)}):s}},pseudos:{not:r(function(e){var t=[],n=[],i=P(e.replace(ct,"$1"));return i[z]?r(function(e,t,n,r){for(var s,a=i(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:r(function(e){return function(t){return n(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return bt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(St,wt).toLowerCase(),function(t){var n;do if(n=H?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===$},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return Et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[T]=l(T);for(T in{submit:!0,reset:!0})k.pseudos[T]=u(T);f.prototype=k.filters=k.pseudos,k.setFilters=new f,P=n.compile=function(e,t){var n,i=[],r=[],s=V[e+" "];if(!s){for(t||(t=h(e)),n=t.length;n--;)s=v(t[n]),s[z]?i.push(s):r.push(s);s=V(e,_(r,i))}return s},S.sortStable=z.split("").sort(J).join("")===z,S.detectDuplicates=W,A(),S.sortDetached=s(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,n,i){return i?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),S.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,n,i){return i||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&r.specified?r.value:e[n]===!0?n.toLowerCase():null}),st.find=n,st.expr=n.selectors,st.expr[":"]=st.expr.pseudos,st.unique=n.uniqueSort,st.text=n.getText,st.isXMLDoc=n.isXML,st.contains=n.contains}(e);var dt={};st.Callbacks=function(e){e="string"==typeof e?dt[e]||i(e):st.extend({},e);var n,r,s,a,o,l,u=[],c=!e.once&&[],f=function(t){for(n=e.memory&&t,r=!0,l=a||0,a=0,o=u.length,s=!0;u&&o>l;l++)if(u[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}s=!1,u&&(c?c.length&&f(c.shift()):n?u=[]:h.disable())},h={add:function(){if(u){var t=u.length;(function i(t){st.each(t,function(t,n){var r=st.type(n);"function"===r?e.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),s?o=u.length:n&&(a=t,f(n))}return this},remove:function(){return u&&st.each(arguments,function(e,t){for(var n;(n=st.inArray(t,u,n))>-1;)u.splice(n,1),s&&(o>=n&&o--,l>=n&&l--)}),this},has:function(e){return e?st.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],o=0,this},disable:function(){return u=c=n=t,this},disabled:function(){return!u},lock:function(){return c=t,n||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||r&&!c||(t=t||[],t=[e,t.slice?t.slice():t],s?c.push(t):f(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(n){st.each(t,function(t,s){var a=s[0],o=st.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,i):i}},r={};return i.pipe=i.then,st.each(t,function(e,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,s=et.call(arguments),a=s.length,o=1!==a||e&&st.isFunction(e.promise)?a:0,l=1===o?e:st.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?et.call(arguments):r,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(a>1)for(t=Array(a),n=Array(a),i=Array(a);a>r;r++)s[r]&&st.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,t)):--o;return o||l.resolveWith(i,s),l.promise()}}),st.support=function(t){var n=V.createElement("input"),i=V.createDocumentFragment(),r=V.createElement("div"),s=V.createElement("select"),a=s.appendChild(V.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!a.disabled,n=V.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,st(function(){var n,i,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=V.getElementsByTagName("body")[0];a&&(n=V.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",st.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(V.createElement("div")),i.style.cssText=r.style.cssText=s,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var mt,bt,gt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,vt=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,st.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=n;else if(st.isEmptyObject(s))st.extend(this.cache[r],t);else for(i in t)s[i]=t[i];return s},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){var r;return n===t||n&&"string"==typeof n&&i===t?(r=this.get(e,n),r!==t?r:this.get(e,st.camelCase(n))):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,s,a=this.key(e),o=this.cache[a];if(n===t)this.cache[a]={};else{st.isArray(n)?r=n.concat(n.map(st.camelCase)):(s=st.camelCase(n),n in o?r=[n,s]:(r=s,r=r in o?[r]:r.match(ot)||[])),i=r.length;for(;i--;)delete o[r[i]]}},hasData:function(e){return!st.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},mt=new r,bt=new r,st.extend({acceptData:r.accepts,hasData:function(e){return mt.hasData(e)||bt.hasData(e)},data:function(e,t,n){return mt.access(e,t,n)},removeData:function(e,t){mt.remove(e,t)},_data:function(e,t,n){return bt.access(e,t,n)},_removeData:function(e,t){bt.remove(e,t)}}),st.fn.extend({data:function(e,n){var i,r,a=this[0],o=0,l=null;if(e===t){if(this.length&&(l=mt.get(a),1===a.nodeType&&!bt.get(a,"hasDataAttrs"))){for(i=a.attributes;i.length>o;o++)r=i[o].name,0===r.indexOf("data-")&&(r=st.camelCase(r.slice(5)),s(a,r,l[r]));bt.set(a,"hasDataAttrs",!0)}return l}return"object"==typeof e?this.each(function(){mt.set(this,e)}):st.access(this,function(n){var i,r=st.camelCase(e);if(a&&n===t){if(i=mt.get(a,e),i!==t)return i;if(i=mt.get(a,r),i!==t)return i;if(i=s(a,r,t),i!==t)return i}else this.each(function(){var i=mt.get(this,r);mt.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&mt.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){mt.remove(this,e)})}}),st.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=bt.get(e,n),i&&(!r||st.isArray(i)?r=bt.access(e,n,st.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=st.queue(e,t),i=n.length,r=n.shift(),s=st._queueHooks(e,t),a=function(){st.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return bt.get(e,n)||bt.access(e,n,{empty:st.Callbacks("once memory").add(function(){bt.remove(e,[t+"queue",n])})})}}),st.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?st.queue(this[0],e):n===t?this:this.each(function(){var t=st.queue(this,e,n);st._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},delay:function(e,t){return e=st.fx?st.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,s=st.Deferred(),a=this,o=this.length,l=function(){--r||s.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";o--;)i=bt.get(a[o],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),s.promise(n)}});var _t,Et,yt=/[\t\r\n\f]/g,Tt=/\r/g,St=/^(?:input|select|textarea|button)$/i;st.fn.extend({attr:function(e,t){return st.access(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})},prop:function(e,t){return st.access(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[st.propFix[e]||e]})},addClass:function(e){var t,n,i,r,s,a=0,o=this.length,l="string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ot)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(yt," "):" ")){for(s=0;r=t[s++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=st.trim(i)}return this},removeClass:function(e){var t,n,i,r,s,a=0,o=this.length,l=0===arguments.length||"string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ot)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(yt," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?st.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):st.isFunction(e)?this.each(function(n){st(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=st(this),s=e.match(ot)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===G||"boolean"===n)&&(this.className&&bt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":bt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(yt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,s=this[0];{if(arguments.length)return r=st.isFunction(e),this.each(function(i){var s;1===this.nodeType&&(s=r?e.call(this,i,st(this).val()):e,null==s?s="":"number"==typeof s?s+="":st.isArray(s)&&(s=st.map(s,function(e){return null==e?"":e+""})),n=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=st.valHooks[s.type]||st.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(Tt,""):null==i?"":i)}}}),st.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:i.length,l=0>r?o:s?r:0;o>l;l++)if(n=i[l],!(!n.selected&&l!==r||(st.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&st.nodeName(n.parentNode,"optgroup"))){if(t=st(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=st.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=st.inArray(st(i).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,n,i){var r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===G?st.prop(e,n,i):(1===a&&st.isXMLDoc(e)||(n=n.toLowerCase(),r=st.attrHooks[n]||(st.expr.match.bool.test(n)?Et:_t)),i===t?r&&"get"in r&&null!==(s=r.get(e,n))?s:(s=st.find.attr(e,n),null==s?t:s):null!==i?r&&"set"in r&&(s=r.set(e,i,n))!==t?s:(e.setAttribute(n,i+""),i):(st.removeAttr(e,n),t))},removeAttr:function(e,t){var n,i,r=0,s=t&&t.match(ot);if(s&&1===e.nodeType)for(;n=s[r++];)i=st.propFix[n]||n,st.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!st.support.radioValue&&"radio"===t&&st.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,s,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!st.isXMLDoc(e),a&&(n=st.propFix[n]||n,s=st.propHooks[n]),i!==t?s&&"set"in s&&(r=s.set(e,i,n))!==t?r:e[n]=i:s&&"get"in s&&null!==(r=s.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||St.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Et={set:function(e,t,n){return t===!1?st.removeAttr(e,n):e.setAttribute(n,n),n}},st.each(st.expr.match.bool.source.match(/\w+/g),function(e,n){var i=st.expr.attrHandle[n]||st.find.attr;st.expr.attrHandle[n]=function(e,n,r){var s=st.expr.attrHandle[n],a=r?t:(st.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return st.expr.attrHandle[n]=s,a}}),st.support.optSelected||(st.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(e,n){return st.isArray(n)?e.checked=st.inArray(st(e).val(),n)>=0:t}},st.support.checkOn||(st.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt=/^key/,kt=/^(?:mouse|contextmenu)|click/,xt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(e,n,i,r,s){var a,o,l,u,c,f,h,p,d,m,b,g=bt.get(e);if(g){for(i.handler&&(a=i,i=a.handler,s=a.selector),i.guid||(i.guid=st.guid++),(u=g.events)||(u=g.events={}),(o=g.handle)||(o=g.handle=function(e){return typeof st===G||e&&st.event.triggered===e.type?t:st.event.dispatch.apply(o.elem,arguments)},o.elem=e),n=(n||"").match(ot)||[""],c=n.length;c--;)l=Rt.exec(n[c])||[],d=b=l[1],m=(l[2]||"").split(".").sort(),d&&(h=st.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=st.event.special[d]||{},f=st.extend({type:d,origType:b,data:r,handler:i,guid:i.guid,selector:s,needsContext:s&&st.expr.match.needsContext.test(s),namespace:m.join(".")},a),(p=u[d])||(p=u[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,r,m,o)!==!1||e.addEventListener&&e.addEventListener(d,o,!1)),h.add&&(h.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),s?p.splice(p.delegateCount++,0,f):p.push(f),st.event.global[d]=!0);e=null}},remove:function(e,t,n,i,r){var s,a,o,l,u,c,f,h,p,d,m,b=bt.hasData(e)&&bt.get(e);if(b&&(l=b.events)){for(t=(t||"").match(ot)||[""],u=t.length;u--;)if(o=Rt.exec(t[u])||[],p=m=o[1],d=(o[2]||"").split(".").sort(),p){for(f=st.event.special[p]||{},p=(i?f.delegateType:f.bindType)||p,h=l[p]||[],o=o[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;s--;)c=h[s],!r&&m!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(e,c));a&&!h.length&&(f.teardown&&f.teardown.call(e,d,b.handle)!==!1||st.removeEvent(e,p,b.handle),delete l[p])}else for(p in l)st.event.remove(e,p+t[u],n,i,!0);st.isEmptyObject(l)&&(delete b.handle,bt.remove(e,"events"))}},trigger:function(n,i,r,s){var a,o,l,u,c,f,h,p=[r||V],d=it.call(n,"type")?n.type:n,m=it.call(n,"namespace")?n.namespace.split("."):[];if(o=l=r=r||V,3!==r.nodeType&&8!==r.nodeType&&!xt.test(d+st.event.triggered)&&(d.indexOf(".")>=0&&(m=d.split("."),d=m.shift(),m.sort()),c=0>d.indexOf(":")&&"on"+d,n=n[st.expando]?n:new st.Event(d,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:st.makeArray(i,[n]),h=st.event.special[d]||{},s||!h.trigger||h.trigger.apply(r,i)!==!1)){if(!s&&!h.noBubble&&!st.isWindow(r)){for(u=h.delegateType||d,xt.test(u+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),l=o;l===(r.ownerDocument||V)&&p.push(l.defaultView||l.parentWindow||e)}for(a=0;(o=p[a++])&&!n.isPropagationStopped();)n.type=a>1?u:h.bindType||d,f=(bt.get(o,"events")||{})[n.type]&&bt.get(o,"handle"),f&&f.apply(o,i),f=c&&o[c],f&&st.acceptData(o)&&f.apply&&f.apply(o,i)===!1&&n.preventDefault();return n.type=d,s||n.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),i)!==!1||!st.acceptData(r)||c&&st.isFunction(r[d])&&!st.isWindow(r)&&(l=r[c],l&&(r[c]=null),st.event.triggered=d,r[d](),st.event.triggered=t,l&&(r[c]=l)),n.result}},dispatch:function(e){e=st.event.fix(e);var n,i,r,s,a,o=[],l=et.call(arguments),u=(bt.get(this,"events")||{})[e.type]||[],c=st.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=st.event.handlers.call(this,e,u),n=0;(s=o[n++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,i=0;(a=s.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,r=((st.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,s,a,o=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],i=0;l>i;i++)a=n[i],s=a.selector+" ",r[s]===t&&(r[s]=a.needsContext?st(s,this).index(u)>=0:st.find(s,this,null,[u]).length),r[s]&&r.push(a);r.length&&o.push({elem:u,handlers:r})}return n.length>l&&o.push({elem:this,handlers:n.slice(l)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,s,a=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||V,r=i.documentElement,s=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[st.expando])return e;var t,n,i,r=e.type,s=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=kt.test(r)?this.mouseHooks:wt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new st.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=V),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&st.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return st.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=st.extend(new st.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?st.event.trigger(r,null,t):st.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},st.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},st.Event=function(e,n){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?a:o):this.type=e,n&&st.extend(this,n),this.timeStamp=e&&e.timeStamp||st.now(),this[st.expando]=!0,t):new st.Event(e,n)},st.Event.prototype={isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==i&&!st.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),st.support.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){st.event.simulate(t,e.target,st.event.fix(e),!0)};st.event.special[t]={setup:function(){0===n++&&V.addEventListener(e,i,!0)},teardown:function(){0===--n&&V.removeEventListener(e,i,!0)}}}),st.fn.extend({on:function(e,n,i,r,s){var a,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],s);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=o;else if(!r)return this;return 1===s&&(a=r,r=function(e){return st().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=st.guid++)),this.each(function(){st.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,s;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,st(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);
return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=o),this.each(function(){st.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?st.event.trigger(e,n,i,!0):t}});var Pt=/^.[^:#\[\.,]*$/,Ot=/^(?:parents|prev(?:Until|All))/,Ct=st.expr.match.needsContext,At={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(st(e).filter(function(){for(t=0;r>t;t++)if(st.contains(i[t],this))return!0}));for(t=0;r>t;t++)st.find(e,i[t],n);return n=this.pushStack(r>1?st.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=st(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(st.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e||[],!0))},filter:function(e){return this.pushStack(c(this,e||[],!1))},is:function(e){return!!c(this,"string"==typeof e&&Ct.test(e)?st(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,s=[],a=Ct.test(e)||"string"!=typeof e?st(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&st.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?st.unique(s):s)},index:function(e){return e?"string"==typeof e?tt.call(st(e),this[0]):tt.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?st(e,t):st.makeArray(e&&e.nodeType?[e]:e),i=st.merge(this.get(),n);return this.pushStack(st.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return st.dir(e,"parentNode")},parentsUntil:function(e,t,n){return st.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return st.dir(e,"nextSibling")},prevAll:function(e){return st.dir(e,"previousSibling")},nextUntil:function(e,t,n){return st.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return st.dir(e,"previousSibling",n)},siblings:function(e){return st.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return st.sibling(e.firstChild)},contents:function(e){return e.contentDocument||st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(n,i){var r=st.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=st.filter(i,r)),this.length>1&&(At[e]||st.unique(r),Ot.test(e)&&r.reverse()),this.pushStack(r)}}),st.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?st.find.matchesSelector(i,e)?[i]:[]:st.find.matches(e,st.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],s=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&st(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t=/<([\w:]+)/,Ht=/<|&#?\w+;/,Dt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^$|\/(?:java|ecma)script/i,zt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td,st.fn.extend({text:function(e){return st.access(this,function(e){return e===t?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?st.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||st.cleanData(b(n)),n.parentNode&&(t&&st.contains(n.ownerDocument,n)&&d(b(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(st.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return st.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!Dt.test(e)&&!Ft[($t.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Mt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(st.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=st.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),st(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=Q.apply([],e);var i,r,s,a,o,l,u=0,c=this.length,f=this,d=c-1,m=e[0],g=st.isFunction(m);if(g||!(1>=c||"string"!=typeof m||st.support.checkClone)&&It.test(m))return this.each(function(i){var r=f.eq(i);g&&(e[0]=m.call(this,i,r.html())),r.domManip(e,t,n)});if(c&&(i=st.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(s=st.map(b(i,"script"),h),a=s.length;c>u;u++)o=i,u!==d&&(o=st.clone(o,!0,!0),a&&st.merge(s,b(o,"script"))),t.call(this[u],o,u);if(a)for(l=s[s.length-1].ownerDocument,st.map(s,p),u=0;a>u;u++)o=s[u],Lt.test(o.type||"")&&!bt.access(o,"globalEval")&&st.contains(l,o)&&(o.src?st._evalUrl(o.src):st.globalEval(o.textContent.replace(Ut,"")))}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var n,i=[],r=st(e),s=r.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),st(r[a])[t](n),Z.apply(i,n.get());return this.pushStack(i)}}),st.extend({clone:function(e,t,n){var i,r,s,a,o=e.cloneNode(!0),l=st.contains(e.ownerDocument,e);if(!(st.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e)))for(a=b(o),s=b(e),i=0,r=s.length;r>i;i++)g(s[i],a[i]);if(t)if(n)for(s=s||b(e),a=a||b(o),i=0,r=s.length;r>i;i++)m(s[i],a[i]);else m(e,o);return a=b(o,"script"),a.length>0&&d(a,!l&&b(e,"script")),o},buildFragment:function(e,t,n,i){for(var r,s,a,o,l,u,c=0,f=e.length,h=t.createDocumentFragment(),p=[];f>c;c++)if(r=e[c],r||0===r)if("object"===st.type(r))st.merge(p,r.nodeType?[r]:r);else if(Ht.test(r)){for(s=s||h.appendChild(t.createElement("div")),a=($t.exec(r)||["",""])[1].toLowerCase(),o=Ft[a]||Ft._default,s.innerHTML=o[1]+r.replace(Mt,"<$1></$2>")+o[2],u=o[0];u--;)s=s.lastChild;st.merge(p,s.childNodes),s=h.firstChild,s.textContent=""}else p.push(t.createTextNode(r));for(h.textContent="",c=0;r=p[c++];)if((!i||-1===st.inArray(r,i))&&(l=st.contains(r.ownerDocument,r),s=b(h.appendChild(r),"script"),l&&d(s),n))for(u=0;r=s[u++];)Lt.test(r.type||"")&&n.push(r);return h},cleanData:function(e){for(var n,i,s,a,o,l,u=st.event.special,c=0;(i=e[c])!==t;c++){if(r.accepts(i)&&(o=i[bt.expando],o&&(n=bt.cache[o]))){if(s=Object.keys(n.events||{}),s.length)for(l=0;(a=s[l])!==t;l++)u[a]?st.event.remove(i,a):st.removeEvent(i,a,n.handle);bt.cache[o]&&delete bt.cache[o]}delete mt.cache[i[mt.expando]]}},_evalUrl:function(e){return st.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),st.fn.extend({wrapAll:function(e){var t;return st.isFunction(e)?this.each(function(t){st(this).wrapAll(e.call(this,t))}):(this[0]&&(t=st(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return st.isFunction(e)?this.each(function(t){st(this).wrapInner(e.call(this,t))}):this.each(function(){var t=st(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(n){st(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}});var Bt,Gt,jt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,Wt=RegExp("^("+at+")(.*)$","i"),Jt=RegExp("^("+at+")(?!px)[a-z%]+$","i"),Yt=RegExp("^([+-])=("+at+")","i"),qt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Qt=["Top","Right","Bottom","Left"],Zt=["Webkit","O","Moz","ms"];st.fn.extend({css:function(e,n){return st.access(this,function(e,n,i){var r,s,a={},o=0;if(st.isArray(n)){for(r=E(e),s=n.length;s>o;o++)a[n[o]]=st.css(e,n[o],!1,r);return a}return i!==t?st.style(e,n,i):st.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){_(this)?st(this).show():st(this).hide()})}}),st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Bt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,a,o,l=st.camelCase(n),u=e.style;return n=st.cssProps[l]||(st.cssProps[l]=v(u,l)),o=st.cssHooks[n]||st.cssHooks[l],i===t?o&&"get"in o&&(s=o.get(e,!1,r))!==t?s:u[n]:(a=typeof i,"string"===a&&(s=Yt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(st.css(e,n)),a="number"),null==i||"number"===a&&isNaN(i)||("number"!==a||st.cssNumber[l]||(i+="px"),st.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),o&&"set"in o&&(i=o.set(e,i,r))===t||(u[n]=i)),t)}},css:function(e,n,i,r){var s,a,o,l=st.camelCase(n);return n=st.cssProps[l]||(st.cssProps[l]=v(e.style,l)),o=st.cssHooks[n]||st.cssHooks[l],o&&"get"in o&&(s=o.get(e,!0,i)),s===t&&(s=Bt(e,n,r)),"normal"===s&&n in Kt&&(s=Kt[n]),""===i||i?(a=parseFloat(s),i===!0||st.isNumeric(a)?a||0:s):s}}),Bt=function(e,n,i){var r,s,a,o=i||E(e),l=o?o.getPropertyValue(n)||o[n]:t,u=e.style;return o&&(""!==l||st.contains(e.ownerDocument,e)||(l=st.style(e,n)),Jt.test(l)&&Vt.test(n)&&(r=u.width,s=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=o.width,u.width=r,u.minWidth=s,u.maxWidth=a)),l},st.each(["height","width"],function(e,n){st.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&jt.test(st.css(e,"display"))?st.swap(e,Xt,function(){return w(e,n,r)}):w(e,n,r):t},set:function(e,t,i){var r=i&&E(e);return T(e,t,i?S(e,n,i,st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,r),r):0)}}}),st(function(){st.support.reliableMarginRight||(st.cssHooks.marginRight={get:function(e,n){return n?st.swap(e,{display:"inline-block"},Bt,[e,"marginRight"]):t}}),!st.support.pixelPosition&&st.fn.position&&st.each(["top","left"],function(e,n){st.cssHooks[n]={get:function(e,i){return i?(i=Bt(e,n),Jt.test(i)?st(e).position()[n]+"px":i):t}}})}),st.expr&&st.expr.filters&&(st.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},st.expr.filters.visible=function(e){return!st.expr.filters.hidden(e)}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Qt[i]+t]=s[i]||s[i-2]||s[0];return r}},Vt.test(e)||(st.cssHooks[e+t].set=T)});var en=/%20/g,tn=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,sn=/^(?:input|select|textarea|keygen)/i;st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&sn.test(this.nodeName)&&!rn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(e){return{name:t.name,value:e.replace(nn,"\r\n")}}):{name:t.name,value:n.replace(nn,"\r\n")}}).get()}}),st.param=function(e,n){var i,r=[],s=function(e,t){t=st.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e))st.each(e,function(){s(this.name,this.value)});else for(i in e)R(i,e[i],n,s);return r.join("&").replace(en,"+")},st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),st.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var an,on,ln=st.now(),un=/\?/,cn=/#.*$/,fn=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,dn=/^(?:GET|HEAD)$/,mn=/^\/\//,bn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,gn=st.fn.load,vn={},_n={},En="*/".concat("*");try{on=j.href}catch(yn){on=V.createElement("a"),on.href="",on=on.href}an=bn.exec(on.toLowerCase())||[],st.fn.load=function(e,n,i){if("string"!=typeof e&&gn)return gn.apply(this,arguments);var r,s,a,o=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l),e=e.slice(0,l)),st.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(s="POST"),o.length>0&&st.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){a=arguments,o.html(r?st("<div>").append(st.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:on,type:"GET",isLocal:pn.test(an[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?C(C(e,st.ajaxSettings),t):C(st.ajaxSettings,e)},ajaxPrefilter:P(vn),ajaxTransport:P(_n),ajax:function(e,n){function i(e,n,i,o){var u,f,v,_,y,S=n;2!==E&&(E=2,l&&clearTimeout(l),r=t,a=o||"",T.readyState=e>0?4:0,u=e>=200&&300>e||304===e,i&&(_=A(h,T,i)),_=M(h,_,T,u),u?(h.ifModified&&(y=T.getResponseHeader("Last-Modified"),y&&(st.lastModified[s]=y),y=T.getResponseHeader("etag"),y&&(st.etag[s]=y)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=_.state,f=_.data,v=_.error,u=!v)):(v=S,(e||!S)&&(S="error",0>e&&(e=0))),T.status=e,T.statusText=(n||S)+"",u?m.resolveWith(p,[f,S,T]):m.rejectWith(p,[T,S,v]),T.statusCode(g),g=t,c&&d.trigger(u?"ajaxSuccess":"ajaxError",[T,h,u?f:v]),b.fireWith(p,[T,S]),c&&(d.trigger("ajaxComplete",[T,h]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,s,a,o,l,u,c,f,h=st.ajaxSetup({},n),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?st(p):st.event,m=st.Deferred(),b=st.Callbacks("once memory"),g=h.statusCode||{},v={},_={},E=0,y="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!o)for(o={};t=hn.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=_[n]=_[n]||e,v[e]=t),this},overrideMimeType:function(e){return E||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>E)for(t in e)g[t]=[g[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||y;return r&&r.abort(t),i(0,t),this}};if(m.promise(T).complete=b.add,T.success=T.done,T.error=T.fail,h.url=((e||h.url||on)+"").replace(cn,"").replace(mn,an[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=st.trim(h.dataType||"*").toLowerCase().match(ot)||[""],null==h.crossDomain&&(u=bn.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===an[1]&&u[2]===an[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(an[3]||("http:"===an[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=st.param(h.data,h.traditional)),O(vn,h,n,T),2===E)return T;c=h.global,c&&0===st.active++&&st.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!dn.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(un.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=fn.test(s)?s.replace(fn,"$1_="+ln++):s+(un.test(s)?"&":"?")+"_="+ln++)),h.ifModified&&(st.lastModified[s]&&T.setRequestHeader("If-Modified-Since",st.lastModified[s]),st.etag[s]&&T.setRequestHeader("If-None-Match",st.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",h.contentType),T.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+En+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)T.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(h.beforeSend.call(p,T,h)===!1||2===E))return T.abort();y="abort";for(f in{success:1,error:1,complete:1})T[f](h[f]);if(r=O(_n,h,n,T)){T.readyState=1,c&&d.trigger("ajaxSend",[T,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){T.abort("timeout")},h.timeout));try{E=1,r.send(v,i)}catch(S){if(!(2>E))throw S;i(-1,S)}}else i(-1,"No Transport");return T},getJSON:function(e,t,n){return st.get(e,t,n,"json")},getScript:function(e,n){return st.get(e,t,n,"script")}}),st.each(["get","post"],function(e,n){st[n]=function(e,i,r,s){return st.isFunction(i)&&(s=s||r,r=i,i=t),st.ajax({url:e,type:n,dataType:s,data:i,success:r})}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),st.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=st("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),V.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Tn=[],Sn=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Tn.pop()||st.expando+"_"+ln++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(n,i,r){var s,a,o,l=n.jsonp!==!1&&(Sn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=st.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Sn,"$1"+s):n.jsonp!==!1&&(n.url+=(un.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return o||st.error(s+" was not called"),o[0]},n.dataTypes[0]="json",a=e[s],e[s]=function(){o=arguments},r.always(function(){e[s]=a,n[s]&&(n.jsonpCallback=i.jsonpCallback,Tn.push(s)),o&&st.isFunction(a)&&a(o[0]),o=a=t}),"script"):t}),st.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var wn=st.ajaxSettings.xhr(),kn={0:200,1223:204},xn=0,Rn={};e.ActiveXObject&&st(e).on("unload",function(){for(var e in Rn)Rn[e]();Rn=t}),st.support.cors=!!wn&&"withCredentials"in wn,st.support.ajax=wn=!!wn,st.ajaxTransport(function(e){var n;return st.support.cors||wn&&!e.crossDomain?{send:function(i,r){var s,a,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)o.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(delete Rn[a],n=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status||404,o.statusText):r(kn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:t,o.getAllResponseHeaders()))}},o.onload=n(),o.onerror=n("error"),n=Rn[a=xn++]=n("abort"),o.send(e.hasContent&&e.data||null)},abort:function(){n&&n()}}:t});var Pn,On,Cn=/^(?:toggle|show|hide)$/,An=RegExp("^(?:([+-])=|)("+at+")([a-z%]*)$","i"),Mn=/queueHooks$/,$n=[I],Hn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=An.exec(t),s=r&&r[3]||(st.cssNumber[e]?"":"px"),a=(st.cssNumber[e]||"px"!==s&&+i)&&An.exec(st.css(n.elem,e)),o=1,l=20;if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+i||1;do o=o||".5",a/=o,st.style(n.elem,e,a+s);while(o!==(o=n.cur()/i)&&1!==o&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=s,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};st.Animation=st.extend(D,{tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],Hn[n]=Hn[n]||[],Hn[n].unshift(t)},prefilter:function(e,t){t?$n.unshift(e):$n.push(e)}}),st.Tween=L,L.prototype={constructor:L,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(st.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=st.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[st.cssProps[e.prop]]||st.cssHooks[e.prop])?st.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.each(["toggle","show","hide"],function(e,t){var n=st.fn[t];st.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(z(t,!0),e,i,r)}}),st.fn.extend({fadeTo:function(e,t,n,i){return this.filter(_).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=st.isEmptyObject(e),s=st.speed(t,n,i),a=function(){var t=D(this,st.extend({},e),s);(r||bt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=st.timers,a=bt.get(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&Mn.test(n)&&r(a[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(i),t=!1,s.splice(n,1));(t||!i)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=bt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=st.timers,a=i?i.length:0;for(n.finish=!0,st.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),st.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),st.speed=function(e,t,n){var i=e&&"object"==typeof e?st.extend({},e):{complete:n||!n&&t||st.isFunction(e)&&e,duration:e,easing:n&&t||t&&!st.isFunction(t)&&t};return i.duration=st.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in st.fx.speeds?st.fx.speeds[i.duration]:st.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){st.isFunction(i.old)&&i.old.call(this),i.queue&&st.dequeue(this,i.queue)},i},st.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},st.timers=[],st.fx=L.prototype.init,st.fx.tick=function(){var e,n=st.timers,i=0;for(Pn=st.now();n.length>i;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||st.fx.stop(),Pn=t},st.fx.timer=function(e){e()&&st.timers.push(e)&&st.fx.start()},st.fx.interval=13,st.fx.start=function(){On||(On=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(On),On=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fx.step={},st.expr&&st.expr.filters&&(st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length}),st.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){st.offset.setOffset(this,e,t)});var n,i,r=this[0],s={top:0,left:0},a=r&&r.ownerDocument;if(a)return n=a.documentElement,st.contains(n,r)?(typeof r.getBoundingClientRect!==G&&(s=r.getBoundingClientRect()),i=U(a),{top:s.top+i.pageYOffset-n.clientTop,left:s.left+i.pageXOffset-n.clientLeft}):s},st.offset={setOffset:function(e,t,n){var i,r,s,a,o,l,u,c=st.css(e,"position"),f=st(e),h={};"static"===c&&(e.style.position="relative"),o=f.offset(),s=st.css(e,"top"),l=st.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,u?(i=f.position(),a=i.top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),st.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(h.top=t.top-o.top+a),null!=t.left&&(h.left=t.left-o.left+r),"using"in t?t.using.call(e,h):f.css(h)}},st.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===st.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(i=e.offset()),i.top+=st.css(e[0],"borderTopWidth",!0),i.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-st.css(n,"marginTop",!0),left:t.left-i.left-st.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||W;e&&!st.nodeName(e,"html")&&"static"===st.css(e,"position");)e=e.offsetParent;return e||W})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;st.fn[n]=function(s){return st.access(this,function(n,s,a){var o=U(n);return a===t?o?o[i]:n[s]:(o?o.scrollTo(r?e.pageXOffset:a,r?a:e.pageYOffset):n[s]=a,t)},n,s,arguments.length,null)}}),st.each({Height:"height",Width:"width"},function(e,n){st.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){st.fn[r]=function(r,s){var a=arguments.length&&(i||"boolean"!=typeof r),o=i||(r===!0||s===!0?"margin":"border");return st.access(this,function(n,i,r){var s;return st.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):r===t?st.css(n,i,o):st.style(n,i,r,o)},n,a?r:t,a,null)}})}),st.fn.size=function(){return this.length},st.fn.andSelf=st.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=st:"function"==typeof define&&define.amd&&define("jquery",[],function(){return st}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=st)}(window),function(e,t){function n(t,n){var r,s,a,o=t.nodeName.toLowerCase();return"area"===o?(r=t.parentNode,s=r.name,t.href&&s&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+s+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,s=e(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()
})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,s=e.ui[t].prototype;for(r in i)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;r.length>i;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(s){}r(t)},e.widget=function(n,i,r){var s,a,o,l,u={},c=n.split(".")[0];n=n.split(".")[1],s=c+"-"+n,r||(r=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},a=e[c][n],o=e[c][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new o(e,n)},e.extend(o,a,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),l=new i,l.options=e.widget.extend({},l.options),e.each(r,function(n,r){return e.isFunction(r)?(u[n]=function(){var e=function(){return i.prototype[n].apply(this,arguments)},t=function(e){return i.prototype[n].apply(this,e)};return function(){var n,i=this._super,s=this._superApply;return this._super=e,this._superApply=t,n=r.apply(this,arguments),this._super=i,this._superApply=s,n}}(),t):(u[n]=r,t)}),o.prototype=e.widget.extend(l,{widgetEventPrefix:a?l.widgetEventPrefix:n},u,{constructor:o,namespace:c,widgetName:n,widgetFullName:s}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(n,o)},e.widget.extend=function(n){for(var r,s,a=i.call(arguments,1),o=0,l=a.length;l>o;o++)for(r in a[o])s=a[o][r],a[o].hasOwnProperty(r)&&s!==t&&(n[r]=e.isPlainObject(s)?e.isPlainObject(n[r])?e.widget.extend({},n[r],s):e.widget.extend({},s):s);return n},e.widget.bridge=function(n,r){var s=r.prototype.widgetFullName||n;e.fn[n]=function(a){var o="string"==typeof a,l=i.call(arguments,1),u=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,o?this.each(function(){var i,r=e.data(this,s);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l),i!==r&&i!==t?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):t):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(a||{})._init():e.data(this,s,new r(a,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,s,a,o=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(o={},r=n.split("."),n=r.shift(),r.length){for(s=o[n]=e.widget.extend({},this.options[n]),a=0;r.length-1>a;a++)s[r[a]]=s[r[a]]||{},s=s[r[a]];if(n=r.pop(),i===t)return s[n]===t?null:s[n];s[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,r){var s,a=this;"boolean"!=typeof n&&(r=i,i=n,n=!1),r?(i=s=e(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,s=this.widget()),e.each(r,function(r,o){function l(){return n||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):t}"string"!=typeof o&&(l.guid=o.guid=o.guid||l.guid||e.guid++);var u=r.match(/^(\w+)\s*(.*)$/),c=u[1]+a.eventNamespace,f=u[2];f?s.delegate(f,c,l):i.bind(c,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,s,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,s){"string"==typeof r&&(r={effect:r});var a,o=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[o]?i[t](r):o!==t&&i[o]?i[o](r.duration,r.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===r.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):r.containment.constructor===Array?(this.containment=r.containment,undefined):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],i&&(t="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var n,i,r,s,a=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,u=t.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,s=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-a.grid[0]:s+a.grid[0]:s)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),r=i.options,s=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var i=e(this).data("ui-draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,function(){var s=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){var i,r,s,a,o,l,u,c,f,h,p=e(this).data("ui-draggable"),d=p.options,m=d.snapTolerance,b=n.offset.left,g=b+p.helperProportions.width,v=n.offset.top,_=v+p.helperProportions.height;for(f=p.snapElements.length-1;f>=0;f--)o=p.snapElements[f].left,l=o+p.snapElements[f].width,u=p.snapElements[f].top,c=u+p.snapElements[f].height,o-m>g||b>l+m||u-m>_||v>c+m||!e.contains(p.snapElements[f].item.ownerDocument,p.snapElements[f].item)?(p.snapElements[f].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[f].item})),p.snapElements[f].snapping=!1):("inner"!==d.snapMode&&(i=m>=Math.abs(u-_),r=m>=Math.abs(c-v),s=m>=Math.abs(o-g),a=m>=Math.abs(l-b),i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||r||s||a,"outer"!==d.snapMode&&(i=m>=Math.abs(u-v),r=m>=Math.abs(c-_),s=m>=Math.abs(o-b),a=m>=Math.abs(l-g),i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[f].snapping&&(i||r||s||a||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[f].item})),p.snapElements[f].snapping=i||r||s||a||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];n.length>t;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):undefined}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,n,i){if(!n.offset)return!1;var r,s,a=(e.positionAbs||e.position.absolute).left,o=a+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,u=l+e.helperProportions.height,c=n.offset.left,f=c+n.proportions.width,h=n.offset.top,p=h+n.proportions.height;switch(i){case"fit":return a>=c&&f>=o&&l>=h&&p>=u;case"intersect":return a+e.helperProportions.width/2>c&&f>o-e.helperProportions.width/2&&l+e.helperProportions.height/2>h&&p>u-e.helperProportions.height/2;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,h,n.proportions.height)&&t(r,c,n.proportions.width);case"touch":return(l>=h&&p>=l||u>=h&&p>=u||h>l&&u>p)&&(a>=c&&f>=a||o>=c&&f>=o||c>a&&o>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,r,s=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;s.length>i;i++)if(!(s[i].options.disabled||t&&!s[i].accept.call(s[i].element[0],t.currentItem||t.element))){for(r=0;o.length>r;r++)if(o[r]===s[i].element[0]){s[i].proportions.height=0;
continue e}s[i].visible="none"!==s[i].element.css("display"),s[i].visible&&("mousedown"===a&&s[i]._activate.call(s[i],n),s[i].offset=s[i].element.offset(),s[i].proportions={width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,s,a=e.ui.intersect(t,this,this.options.tolerance),o=!a&&this.isover?"isout":a&&!this.isover?"isover":null;o&&(this.options.greedy&&(r=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),s.length&&(i=e.data(s[0],"ui-droppable"),i.greedyChild="isover"===o)),i&&"isover"===o&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,n),i&&"isout"===o&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,s,a=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)i=e.trim(t[n]),s="ui-resizable-"+i,r=e("<div class='ui-resizable-handle "+s+"'></div>"),r.css({zIndex:o.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,s),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){o.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,s,a=this.options,o=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy(),i=t(this.helper.css("left")),r=t(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,r+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,i=this.helper,r={},s=this.originalMousePosition,a=this.axis,o=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,f=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[a];return p?(n=p.apply(this,[t,f,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==o&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,r,s,a,o,l,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&e.ui.hasScroll(n[0],"left")?0:c.sizeDiff.height,s=i?0:c.sizeDiff.width,a={width:c.helper.width()-s,height:c.helper.height()-r},o=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(a,{top:l,left:o})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,s,a,o=this.options;a={minWidth:n(o.minWidth)?o.minWidth:0,maxWidth:n(o.maxWidth)?o.maxWidth:1/0,minHeight:n(o.minHeight)?o.minHeight:0,maxHeight:n(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,s=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>s&&(a.maxHeight=s)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=n(e.width)&&t.minWidth&&t.minWidth>e.width,o=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(i),f=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),a&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),o&&f&&(e.top=u-t.minHeight),s&&f&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,s=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;n.length>t;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),a=s&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,o=s?0:n.sizeDiff.width,l={width:n.size.width-o,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,s,a,o,l,u=e(this).data("ui-resizable"),c=u.options,f=u.element,h=c.containment,p=h instanceof e?h.get(0):/parent/.test(h)?f.parent().get(0):h;p&&(u.containerElement=e(p),/document/.test(h)||h===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(p),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){i[e]=t(n.css("padding"+r))}),u.containerOffset=n.offset(),u.containerPosition=n.position(),u.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=u.containerOffset,s=u.containerSize.height,a=u.containerSize.width,o=e.ui.hasScroll(p,"left")?p.scrollWidth:a,l=e.ui.hasScroll(p)?p.scrollHeight:s,u.parentData={element:p,left:r.left,top:r.top,width:o,height:l}))},resize:function(t){var n,i,r,s,a=e(this).data("ui-resizable"),o=a.options,l=a.containerOffset,u=a.position,c=a._aspectRatio||t.shiftKey,f={top:0,left:0},h=a.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(f=l),u.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-f.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=o.helper?l.left:0),u.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?l.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,n=Math.abs((a._helper?a.offset.left-f.left:a.offset.left-f.left)+a.sizeDiff.width),i=Math.abs((a._helper?a.offset.top-f.top:a.offset.top-l.top)+a.sizeDiff.height),r=a.containerElement.get(0)===a.element.parent().get(0),s=/relative|absolute/.test(a.containerElement.css("position")),r&&s&&(n-=a.parentData.left),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,s=t.containerElement,a=e(t.helper),o=a.offset(),l=a.outerWidth()-t.sizeDiff.width,u=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:o.left-r.left-i.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:o.left-r.left-i.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,s=i.originalSize,a=i.originalPosition,o={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),s={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(r[t]||0)+(o[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,s=t.originalPosition,a=t.axis,o="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=o[0]||1,u=o[1]||1,c=Math.round((i.width-r.width)/l)*l,f=Math.round((i.height-r.height)/u)*u,h=r.width+c,p=r.height+f,d=n.maxWidth&&h>n.maxWidth,m=n.maxHeight&&p>n.maxHeight,b=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=o,b&&(h+=l),g&&(p+=u),d&&(h-=l),m&&(p-=u),/^(se|s|e)$/.test(a)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(a)?(t.size.width=h,t.size.height=p,t.position.top=s.top-f):/^(sw)$/.test(a)?(t.size.width=h,t.size.height=p,t.position.left=s.left-c):(t.size.width=h,t.size.height=p,t.position.top=s.top-f,t.position.left=s.left-c)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");return r?(i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,s=this.opos[0],a=this.opos[1],o=t.pageX,l=t.pageY;return s>o&&(n=o,o=s,s=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:s,top:a,width:o-s,height:l-a}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),u=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?u=!(n.left>o||s>n.right||n.top>l||a>n.bottom):"fit"===r.tolerance&&(u=n.left>s&&o>n.right&&n.top>a&&l>n.bottom),u?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(i=e(this),!1):undefined}),e.data(t.target,s.widgetName+"-item")===s&&(i=e(t.target)),i?!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,i){var r,s,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(s)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,s,a=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),o!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],s=this._intersectsWithPointer(i),s&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),s=this.options.axis,a={};s&&"x"!==s||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=e.left,a=s+e.width,o=e.top,l=o+e.height,u=this.offset.click.top,c=this.offset.click.left,f="x"===this.options.axis||i+u>o&&l>i+u,h="y"===this.options.axis||t+c>s&&a>t+c,p=f&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>s&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>o&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"===a||"down"===s?2:1:s&&("down"===s?2:1):!1
},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,s,a=[],o=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(r=e(l[n]),i=r.length-1;i>=0;i--)s=e.data(r[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&o.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(o.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=o.length-1;n>=0;n--)o[n][0].each(function(){a.push(this)});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,s,a,o,l,u,c=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(r=e(h[n]),i=r.length-1;i>=0;i--)s=e.data(r[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(f.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=f.length-1;n>=0;n--)for(a=f[n][1],o=f[n][0],i=0,u=o.length;u>i;i++)l=e(o[i]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,s;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),s=r.offset(),i.left=s.left,i.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,s,a,o,l,u,c,f,h,p,d=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(d&&e.contains(this.containers[r].element[0],d.element[0]))continue;d=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(a=1e4,o=null,p=d.floating||n(this.currentItem),l=p?"left":"top",u=p?"width":"height",c=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(f=this.items[s].item.offset()[l],h=!1,Math.abs(f-c)>Math.abs(f+this.items[s][u]-c)&&(h=!0,f+=this.items[s][u]),a>Math.abs(f-c)&&(a=Math.abs(f-c),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;o?this._rearrange(i,o,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,s=t.pageX,a=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((s-this.originalPageX)/r.grid[0])*r.grid[0],s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:o.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:o.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;i.length>n;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;i.length>n;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var i=f[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:e>i.max?i.max:e)}function i(n){var i=u(),r=i._rgba=[];return n=n.toLowerCase(),d(l,function(e,s){var a,o=s.re.exec(n),l=o&&s.parse(o),u=s.space||"rgba";return l?(a=i[u](l),i[c[u].cache]=a[c[u].cache],r=i._rgba=a._rgba,!1):t}),r.length?("0,0,0,0"===r.join()&&e.extend(r,s.transparent),i):s[n]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},f={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=u.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(r,a,o,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var f=this,h=e.type(r),p=this._rgba=[];return a!==t&&(r=[r,a,o,l],h="array"),"string"===h?this.parse(i(r)||s._default):"array"===h?(d(c.rgba.props,function(e,t){p[t.idx]=n(r[t.idx],t)}),this):"object"===h?(r instanceof u?d(c,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):d(c,function(t,i){var s=i.cache;d(i.props,function(e,t){if(!f[s]&&i.to){if("alpha"===e||null==r[e])return;f[s]=i.to(f._rgba)}f[s][t.idx]=n(r[e],t,!0)}),f[s]&&0>e.inArray(null,f[s].slice(0,3))&&(f[s][3]=1,i.from&&(f._rgba=i.from(f[s])))}),this):t},is:function(e){var n=u(e),i=!0,r=this;return d(c,function(e,s){var a,o=n[s.cache];return o&&(a=r[s.cache]||s.to&&s.to(r._rgba)||[],d(s.props,function(e,n){return null!=o[n.idx]?i=o[n.idx]===a[n.idx]:t})),i}),i},_space:function(){var e=[],t=this;return d(c,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=u(e),r=i._space(),s=c[r],a=0===this.alpha()?u("transparent"):this,o=a[s.cache]||s.to(a._rgba),l=o.slice();return i=i[s.cache],d(s.props,function(e,r){var s=r.idx,a=o[s],u=i[s],c=f[r.type]||{};null!==u&&(null===a?l[s]=u:(c.mod&&(u-a>c.mod/2?a+=c.mod:a-u>c.mod/2&&(a-=c.mod)),l[s]=n((u-a)*t+a,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=u(t)._rgba;return u(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,s=e[2]/255,a=e[3],o=Math.max(i,r,s),l=Math.min(i,r,s),u=o-l,c=o+l,f=.5*c;return t=l===o?0:i===o?60*(r-s)/u+360:r===o?60*(s-i)/u+120:60*(i-r)/u+240,n=0===u?0:.5>=f?u/c:u/(2-c),[Math.round(t)%360,n,f,null==a?1:a]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],s=e[3],a=.5>=i?i*(1+n):i+n-i*n,o=2*i-a;return[Math.round(255*r(o,a,t+1/3)),Math.round(255*r(o,a,t)),Math.round(255*r(o,a,t-1/3)),s]},d(c,function(i,r){var s=r.props,a=r.cache,l=r.to,c=r.from;u.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var r,o=e.type(i),f="array"===o||"object"===o?i:arguments,h=this[a].slice();return d(s,function(e,t){var i=f["object"===o?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),c?(r=u(c(h)),r[a]=h,r):u(h)},d(s,function(t,n){u.fn[t]||(u.fn[t]=function(r){var s,a=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[n.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(s=o.exec(r),s&&(r=c+parseFloat(s[2])*("+"===s[1]?1:-1))),u[n.idx]=r,this[l](u)))})})}),u.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,r){var s,a,o="";if("transparent"!==r&&("string"!==e.type(r)||(s=i(r)))){if(r=u(s||r),!h.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===o||"transparent"===o)&&a&&a.style;)try{o=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}r=r.blend(o&&"transparent"!==o?o:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=u(t.elem,n),t.end=u(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},u.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(s[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(s[n]=r[n]);return s}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(s[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,a,o){var l=e.speed(s,a,o);return this.queue(function(){var s,a=e(this),o=a.attr("class")||"",u=l.children?a.find("*").addBack():a;u=u.map(function(){var t=e(this);return{el:t,start:n(this)}}),s=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},s(),u=u.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",o),u=u.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,u.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,s){return i?e.effects.animateClass.call(this,{add:n},i,r,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,s,a,o){return"boolean"==typeof r||r===t?s?e.effects.animateClass.call(this,r?{add:i}:{remove:i},s,a,o):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,s,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,s){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,s)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,s;for(s=0;i.length>s;s++)null!==i[s]&&(r=e.data(n+i[s]),r===t&&(r=""),e.css(i[s],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(a){s=document.body}return t.wrap(i),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(r[n]=s[0]*i+s[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(s)&&s.call(r[0]),e.isFunction(t)&&t()}var r=e(this),s=n.complete,o=n.mode;(r.is(":hidden")?"hide"===o:"show"===o)?(r[o](),i()):a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,s=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:s=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[i-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,i=this.options,r=i.heightStyle,s=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),i=n.attr("id"),r=n.next(),s=r.attr("id");
i||(i=a+"-header-"+t,n.attr("id",i)),s||(s=a+"-panel-"+t,r.attr("id",s)),n.attr("aria-controls",s),r.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===r?(n=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),s=r[0]===i[0],a=s&&n.collapsible,o=a?e():r.next(),l=i.next(),u={oldHeader:i,oldPanel:l,newHeader:a?e():r,newPanel:o};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=a?!1:this.headers.index(r),this.active=s?e():r,this._toggle(u),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,r){var s,a,o,l=this,u=0,c=e.length&&(!t.length||e.index()<t.index()),f=this.options.animate||{},h=c&&f.down||f,p=function(){l._toggleComplete(r)};return"number"==typeof h&&(o=h),"string"==typeof h&&(a=h),a=a||h.easing||f.easing,o=o||h.duration||f.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(n,{duration:o,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:o,easing:a,complete:p,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?u+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(s-t.outerHeight()-u),u=0)}}),undefined):t.animate(n,o,a,p):e.animate(i,o,a,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),s="textarea"===r,a="input"===r;this.isMultiLine=s?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,n=!0,undefined;t=!1,i=!1,n=!1;var s=e.ui.keyCode;switch(r.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",r);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case s.UP:t=!0,this._keyEvent("previous",r);break;case s.DOWN:t=!0,this._keyEvent("next",r);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case s.TAB:this.menu.active&&this.menu.select(r);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault(),undefined;if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,i,r,s="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},u=function(t){var n=t.name,i=t.form,r=e([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,o=this.options,c="checkbox"===this.type||"radio"===this.type,f=c?"":"ui-state-active",h="ui-state-focus";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(f)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(h)}),c&&(this.element.bind("change"+this.eventNamespace,function(){r||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){o.disabled||(r=!1,n=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){o.disabled||(n!==e.pageX||i!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return o.disabled||r?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled||r)return!1;e(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var t=a.element[0];u(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return o.disabled?!1:(e(this).addClass("ui-state-active"),t=this,a.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return o.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return o.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+a+" "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(o),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,s=[];i.primary||i.secondary?(this.options.text&&s.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(s.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var s,a="datepicker";e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,s;i=t.nodeName.toLowerCase(),r="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),r),s.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,s):r&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,a,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,s,a=this._get(n,"appendText"),o=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[o?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(r=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:r,title:r}):r)),t[o?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,s=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;e.length>r;r++)e[r].length>n&&(n=e[r].length,i=r);return i},s.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,a,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,s,o){var l,u,c,f,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],a,p)),r(p.settings,s||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+f,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,a);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,a),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,i,r=e(t),s=e.data(t,a);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,r=e(t),s=e.data(t,a);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,a)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,s){var a,o,l,u,c=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):c?"all"===i?e.extend({},c.settings):this._get(c,i):null:(a=i||{},"string"==typeof i&&(a={},a[i]=s),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),r(c.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&a.dateFormat!==t&&a.maxDate===t&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in a&&(a.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),t)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,s=e.datepicker._getInst(t.target),a=!0,o=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),r[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,r[0]),n=e.datepicker._get(s,"onSelect"),n?(i=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[i,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(n){var i,r,s=e.datepicker._getInst(n.target);return e.datepicker._get(s,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),r=String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),n.ctrlKey||n.metaKey||" ">r||!i||i.indexOf(r)>-1):t},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),n&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,i,s,a,o,l,u;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(n,"beforeShow"),s=i?i.apply(t,[t,n]):{},s!==!1&&(r(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,a),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(l=e.datepicker._get(n,"showAnim"),u=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?n.dpDiv.show(l,e.datepicker._get(n,"showOptions"),u):n.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))
}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),r=i[1],a=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",a*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-a:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+o?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+s>u&&u>s?Math.abs(s+o):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,r,s,o=this._curInst;!o||t&&o!==e.data(t,a)||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),r=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),i,r):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),s=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(s,n+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),s=this._getInst(r[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(r)},_selectDay:function(t,n,i,r){var s,a=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(s=this._getInst(a[0]),s.selectedDay=s.currentDay=e("a",r).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=i,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),s=this._getInst(r[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),i=this._get(s,"onSelect"),i?i.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(s).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,i,r){if(null==n||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var s,a,o,l,u=0,c=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,p=(r?r.dayNames:null)||this._defaults.dayNames,d=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,m=(r?r.monthNames:null)||this._defaults.monthNames,b=-1,g=-1,v=-1,_=-1,E=!1,y=function(e){var t=n.length>s+1&&n.charAt(s+1)===e;return t&&s++,t},T=function(e){var t=y(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=RegExp("^\\d{1,"+n+"}"),s=i.substring(u).match(r);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(n,r,s){var a=-1,o=e.map(y(n)?s:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,n){var r=n[1];return i.substr(u,r.length).toLowerCase()===r.toLowerCase()?(a=n[0],u+=r.length,!1):t}),-1!==a)return a+1;throw"Unknown name at position "+u},w=function(){if(i.charAt(u)!==n.charAt(s))throw"Unexpected literal at position "+u;u++};for(s=0;n.length>s;s++)if(E)"'"!==n.charAt(s)||y("'")?w():E=!1;else switch(n.charAt(s)){case"d":v=T("d");break;case"D":S("D",h,p);break;case"o":_=T("o");break;case"m":g=T("m");break;case"M":g=S("M",d,m);break;case"y":b=T("y");break;case"@":l=new Date(T("@")),b=l.getFullYear(),g=l.getMonth()+1,v=l.getDate();break;case"!":l=new Date((T("!")-this._ticksTo1970)/1e4),b=l.getFullYear(),g=l.getMonth()+1,v=l.getDate();break;case"'":y("'")?w():E=!0;break;default:w()}if(i.length>u&&(o=i.substr(u),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===b?b=(new Date).getFullYear():100>b&&(b+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f>=b?0:-100)),_>-1)for(g=1,v=_;;){if(a=this._getDaysInMonth(b,g-1),a>=v)break;g++,v-=a}if(l=this._daylightSavingAdjust(new Date(b,g-1,v)),l.getFullYear()!==b||l.getMonth()+1!==g||l.getDate()!==v)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=e.length>i+1&&e.charAt(i+1)===t;return n&&i++,n},u=function(e,t,n){var i=""+t;if(l(e))for(;n>i.length;)i="0"+i;return i},c=function(e,t,n,i){return l(e)?i[t]:n[t]},f="",h=!1;if(t)for(i=0;e.length>i;i++)if(h)"'"!==e.charAt(i)||l("'")?f+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":f+=u("d",t.getDate(),2);break;case"D":f+=c("D",t.getDay(),r,s);break;case"o":f+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=u("m",t.getMonth()+1,2);break;case"M":f+=c("M",t.getMonth(),a,o);break;case"y":f+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":f+=t.getTime();break;case"!":f+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?f+="'":h=!0;break;default:f+=e.charAt(i)}return f},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=e.length>t+1&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;e.length>t;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),s=r,a=this._getFormatConfig(e);try{s=this.parseDate(n,i,a)||r}catch(o){i=t?"":i}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=i?s.getDate():0,e.currentMonth=i?s.getMonth():0,e.currentYear=i?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=r.getFullYear(),a=r.getMonth(),o=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":o+=parseInt(u[1],10);break;case"w":case"W":o+=7*parseInt(u[1],10);break;case"m":case"M":a+=parseInt(u[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(s,a));break;case"y":case"Y":s+=parseInt(u[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(s,a))}u=l.exec(n)}return new Date(s,a,o)},a=null==n||""===n?i:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return a=a&&"Invalid Date"==""+a?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,s=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),r===e.selectedMonth&&s===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w,k,x,R,P,O,C,A,M,$,H,D,N,I,L,z,U=new Date,F=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),B=this._get(e,"isRTL"),G=this._get(e,"showButtonPanel"),j=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),J=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),q=1!==W[0]||1!==W[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),K=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-J,et=e.drawYear;if(0>Z&&(Z+=12,et--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-W[0]*W[1]+1,Q.getDate())),t=K&&K>t?K:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-Y,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=V?this.formatDate(r,this._daylightSavingAdjust(new Date(et,Z+Y,1)),this._getFormatConfig(e)):r,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+r+"</span></a>",a=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?X:F,a=V?this.formatDate(a,o,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=G?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,f=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),b=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),E="",T=0;W[0]>T;T++){for(S="",this.maxRows=4,w=0;W[1]>w;w++){if(k=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),x=" ui-corner-all",R="",q){if(R+="<div class='ui-datepicker-group",W[1]>1)switch(w){case 0:R+=" ui-datepicker-group-first",x=" ui-corner-"+(B?"right":"left");break;case W[1]-1:R+=" ui-datepicker-group-last",x=" ui-corner-"+(B?"left":"right");break;default:R+=" ui-datepicker-group-middle",x=""}R+="'>"}for(R+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===T?B?s:i:"")+(/all|right/.test(x)&&0===T?B?i:s:"")+this._generateMonthYearHeader(e,Z,et,K,Q,T>0||w>0,d,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",P=f?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",y=0;7>y;y++)O=(y+c)%7,P+="<th"+((y+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[O]+"'>"+p[O]+"</span></th>";for(R+=P+"</tr></thead><tbody>",C=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,C)),A=(this._getFirstDayOfMonth(et,Z)-c+7)%7,M=Math.ceil((A+C)/7),$=q?this.maxRows>M?this.maxRows:M:M,this.maxRows=$,H=this._daylightSavingAdjust(new Date(et,Z,1-A)),D=0;$>D;D++){for(R+="<tr>",N=f?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",y=0;7>y;y++)I=b?b.apply(e.input?e.input[0]:null,[H]):[!0,""],L=H.getMonth()!==Z,z=L&&!v||!I[0]||K&&K>H||Q&&H>Q,N+="<td class='"+((y+c+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()===k.getTime()&&Z===e.selectedMonth&&e._keyEvent||_.getTime()===H.getTime()&&_.getTime()===k.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!g?"":" "+I[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(L&&!g||!I[2]?"":" title='"+I[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(L&&!g?"&#xa0;":z?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===F.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);R+=N+"</tr>"}Z++,Z>11&&(Z=0,et++),R+="</tbody></table>"+(q?"</div>"+(W[0]>0&&w===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),S+=R}E+=S}return E+=u,e._keyEvent=!1,E},_generateMonthYearHeader:function(e,t,n,i,r,s,a,o){var l,u,c,f,h,p,d,m,b=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",E="";if(s||!b)E+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,E+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=i.getMonth())&&(!u||r.getMonth()>=c)&&(E+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+o[c]+"</option>");E+="</select>"}if(v||(_+=E+(!s&&b&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)_+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(f=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(f[0]),m=Math.max(d,p(f[1]||"")),d=i?Math.max(d,i.getFullYear()):d,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),v&&(_+=(!s&&b&&g?"":"&#xa0;")+E),_+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),r=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,s)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),a=null,o=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),a=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!r||t.getTime()>=r.getTime())&&(!s||t.getTime()<=s.getTime())&&(!a||t.getFullYear()>=a)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(r.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(n,function(n,i){var r,s;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(t.element[0],arguments)},s={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,s){i.position=[s.position.left-n.document.scrollLeft(),s.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,r=i.resizable,s=this.uiDialog.css("position"),a="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,r){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(r))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(r,s){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(i){var r=this,s=!1,a={};e.each(i,function(e,i){r._setOption(e,i),e in t&&(s=!0),e in n&&(a[e]=i)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var n,i,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=r.is(":data(ui-draggable)"),n&&!t&&r.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=r.is(":data(ui-resizable)"),i&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){t._allowInteraction(i)||(i.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++
}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,n=this.options.position,i=[],r=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)}),n={my:i[0]+(0>r[0]?r[0]:"+"+r[0])+" "+i[1]+(0>r[1]?r[1]:"+"+r[1]),at:i.join(" ")}),n=e.extend({},e.ui.dialog.prototype.options.position,n)):n=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(n),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(i,r){var s,a,o,l=e(this),u=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,i.mode||"hide"),f=i.direction||"up",h=t.test(f),p=h?"height":"width",d=h?"top":"left",m=n.test(f),b={},g="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),u):e.effects.save(l,u),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),a=s[p](),o=parseFloat(s.css(d))||0,b[p]=g?a:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),b[d]=g?o:a+o),g&&(s.css(p,0),m||s.css(d,o+a)),s.animate(b,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,u),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,n){var i,r,s,a=e(this),o=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),u="hide"===l,c="show"===l,f=t.direction||"up",h=t.distance,p=t.times||5,d=2*p+(c||u?1:0),m=t.duration/d,b=t.easing,g="up"===f||"down"===f?"top":"left",v="up"===f||"left"===f,_=a.queue(),E=_.length;for((c||u)&&o.push("opacity"),e.effects.save(a,o),a.show(),e.effects.createWrapper(a),h||(h=a["top"===g?"outerHeight":"outerWidth"]()/3),c&&(s={opacity:1},s[g]=0,a.css("opacity",0).css(g,v?2*-h:2*h).animate(s,m,b)),u&&(h/=Math.pow(2,p-1)),s={},s[g]=0,i=0;p>i;i++)r={},r[g]=(v?"-=":"+=")+h,a.animate(r,m,b).animate(s,m,b),h=u?2*h:h/2;u&&(r={opacity:0},r[g]=(v?"-=":"+=")+h,a.animate(r,m,b)),a.queue(function(){u&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),n()}),E>1&&_.splice.apply(_,[1,0].concat(_.splice(E,d+1))),a.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,n){var i,r,s,a=e(this),o=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),u="show"===l,c=t.direction||"vertical",f="vertical"===c,h=f?"height":"width",p=f?"top":"left",d={};e.effects.save(a,o),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),r="IMG"===a[0].tagName?i:a,s=r[h](),u&&(r.css(h,0),r.css(p,s/2)),d[h]=u?s:0,d[p]=u?0:s/2,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){u||a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),n()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,n){var i,r=e(this),s=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),o="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",f={opacity:o?1:0};e.effects.save(r,s),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(u,"pos"===c?-i:i),f[u]=(o?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,r.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,n){function i(){_.push(this),_.length===f*h&&r()}function r(){p.css({visibility:"visible"}),e(_).remove(),m||p.hide(),n()}var s,a,o,l,u,c,f=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=f,p=e(this),d=e.effects.setMode(p,t.mode||"hide"),m="show"===d,b=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/h),v=Math.ceil(p.outerHeight()/f),_=[];for(s=0;f>s;s++)for(l=b.top+s*v,c=s-(f-1)/2,a=0;h>a;a++)o=b.left+a*g,u=a-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*g,top:-s*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:v,left:o+(m?u*g:0),top:l+(m?c*v:0),opacity:m?0:1}).animate({left:o+(m?0:u*g),top:l+(m?0:c*v),opacity:m?1:0},t.duration||500,t.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e){e.effects.effect.fold=function(t,n){var i,r,s=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(s,t.mode||"hide"),l="show"===o,u="hide"===o,c=t.size||15,f=/([0-9]+)%/.exec(c),h=!!t.horizFirst,p=l!==h,d=p?["width","height"]:["height","width"],m=t.duration/2,b={},g={};e.effects.save(s,a),s.show(),i=e.effects.createWrapper(s).css({overflow:"hidden"}),r=p?[i.width(),i.height()]:[i.height(),i.width()],f&&(c=parseInt(f[1],10)/100*r[u?0:1]),l&&i.css(h?{height:0,width:c}:{height:c,width:0}),b[d[0]]=l?r[0]:c,g[d[1]]=l?r[1]:0,i.animate(b,m,t.easing).animate(g,m,t.easing,function(){u&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),n()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===s&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&i.hide(),e.effects.restore(i,r),n()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,n){var i,r=e(this),s=e.effects.setMode(r,t.mode||"show"),a="show"===s,o="hide"===s,l=a||"hide"===s,u=2*(t.times||5)+(l?1:0),c=t.duration/u,f=0,h=r.queue(),p=h.length;for((a||!r.is(":visible"))&&(r.css("opacity",0).show(),f=1),i=1;u>i;i++)r.animate({opacity:f},c,t.easing),f=1-f;r.animate({opacity:f},c,t.easing),r.queue(function(){o&&r.hide(),n()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,u+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),s="hide"===r,a=parseInt(t.percent,10)||150,o=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:s?a:100,from:s?l:{height:l.height*o,width:l.width*o,outerHeight:l.outerHeight*o,outerWidth:l.outerWidth*o}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),s=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),o=t.direction||"both",l=t.origin,u={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==o?a/100:1,x:"vertical"!==o?a/100:1};r.effect="size",r.queue=!1,r.complete=n,"effect"!==s&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:u),r.to={height:u.height*c.y,width:u.width*c.x,outerHeight:u.outerHeight*c.y,outerWidth:u.outerWidth*c.x},r.fade&&("show"===s&&(r.from.opacity=0,r.to.opacity=1),"hide"===s&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.size=function(t,n){var i,r,s,a=e(this),o=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],u=["width","height","overflow"],c=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(a,t.mode||"effect"),d=t.restore||"effect"!==p,m=t.scale||"both",b=t.origin||["middle","center"],g=a.css("position"),v=d?o:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===p?(a.from=t.to||_,a.to=t.from||i):(a.from=t.from||("show"===p?_:i),a.to=t.to||("hide"===p?_:i)),s={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(v=v.concat(f),a.from=e.effects.setTransition(a,f,s.from.y,a.from),a.to=e.effects.setTransition(a,f,s.to.y,a.to)),s.from.x!==s.to.x&&(v=v.concat(h),a.from=e.effects.setTransition(a,h,s.from.x,a.from),a.to=e.effects.setTransition(a,h,s.to.x,a.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(v=v.concat(c).concat(u),a.from=e.effects.setTransition(a,c,s.from.y,a.from),a.to=e.effects.setTransition(a,c,s.to.y,a.to)),e.effects.save(a,v),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),b&&(r=e.effects.getBaseline(b,i),a.from.top=(i.outerHeight-a.outerHeight())*r.y,a.from.left=(i.outerWidth-a.outerWidth())*r.x,a.to.top=(i.outerHeight-a.to.outerHeight)*r.y,a.to.left=(i.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),("content"===m||"both"===m)&&(f=f.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),u=o.concat(f).concat(h),a.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,u),n.from={height:i.height*s.from.y,width:i.width*s.from.x,outerHeight:i.outerHeight*s.from.y,outerWidth:i.outerWidth*s.from.x},n.to={height:i.height*s.to.y,width:i.width*s.to.x,outerHeight:i.height*s.to.y,outerWidth:i.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,f,s.from.y,n.from),n.to=e.effects.setTransition(n,f,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,u)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),e.effects.restore(a,v),d||("static"===g?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,n){var i=parseInt(n,10),r=e?a.to.left:a.to.top;return"auto"===n?r+"px":i+r+"px"})})),e.effects.removeWrapper(a),n()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,n){var i,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",l=t.distance||20,u=t.times||3,c=2*u+1,f=Math.round(t.duration/c),h="up"===o||"down"===o?"top":"left",p="up"===o||"left"===o,d={},m={},b={},g=r.queue(),v=g.length;for(e.effects.save(r,s),r.show(),e.effects.createWrapper(r),d[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,b[h]=(p?"-=":"+=")+2*l,r.animate(d,f,t.easing),i=1;u>i;i++)r.animate(m,f,t.easing).animate(b,f,t.easing);r.animate(m,f,t.easing).animate(d,f/2,t.easing).queue(function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),n()}),v>1&&g.splice.apply(g,[1,0].concat(g.splice(v,c+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var i,r=e(this),s=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),o="show"===a,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,f={};e.effects.save(r,s),r.show(),i=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(u,c?isNaN(i)?"-"+i:-i:i),f[u]=(o?c?"+=":"-=":c?"-=":"+=")+i,r.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,n){var i=e(this),r=e(t.to),s="fixed"===r.css("position"),a=e("body"),o=s?a.scrollTop():0,l=s?a.scrollLeft():0,u=r.offset(),c={top:u.top-o,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},f=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:f.top-o,left:f.left-l,height:i.innerHeight(),width:i.innerWidth(),position:s?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,s,a,o,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",s=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),s===r?a=!0:s=r+s,o=RegExp("^"+n(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(t.keyCode),o=RegExp("^"+n(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,s,a,o;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,s=this.activeMenu.scrollTop(),a=this.activeMenu.height(),o=t.height(),0>r?this.activeMenu.scrollTop(s+r):r+o>a&&this.activeMenu.scrollTop(s+r-a+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-i-r}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(t),undefined)},previousPage:function(t){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(t),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,a=Math.max,o=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,f=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var n,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];return e("body").append(r),n=a.offsetWidth,r.css("overflow","scroll"),i=a.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),s=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var s,p,m,b,g,v,_=e(t.of),E=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(E),T=(t.collision||"flip").split(" "),S={};return v=r(_),_[0].preventDefault&&(t.at="left top"),p=v.width,m=v.height,b=v.offset,g=e.extend({},b),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=f.exec(i[0]),n=f.exec(i[1]),S[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=m:"center"===t.at[1]&&(g.top+=m/2),s=n(S.at,p,m),g.left+=s[0],g.top+=s[1],this.each(function(){var r,u,c=e(this),f=c.outerWidth(),h=c.outerHeight(),d=i(this,"marginLeft"),v=i(this,"marginTop"),w=f+d+i(this,"marginRight")+y.width,k=h+v+i(this,"marginBottom")+y.height,x=e.extend({},g),R=n(S.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?x.left-=f:"center"===t.my[0]&&(x.left-=f/2),"bottom"===t.my[1]?x.top-=h:"center"===t.my[1]&&(x.top-=h/2),x.left+=R[0],x.top+=R[1],e.support.offsetFractions||(x.left=l(x.left),x.top=l(x.top)),r={marginLeft:d,marginTop:v},e.each(["left","top"],function(n,i){e.ui.position[T[n]]&&e.ui.position[T[n]][i](x,{targetWidth:p,targetHeight:m,elemWidth:f,elemHeight:h,collisionPosition:r,collisionWidth:w,collisionHeight:k,offset:[s[0]+R[0],s[1]+R[1]],my:t.my,at:t.at,within:E,elem:c})}),t.using&&(u=function(e){var n=b.left-x.left,i=n+p-f,r=b.top-x.top,s=r+m-h,l={target:{element:_,left:b.left,top:b.top,width:p,height:m},element:{element:c,left:x.left,top:x.top,width:f,height:h},horizontal:0>i?"left":n>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};f>p&&p>o(n+i)&&(l.horizontal="center"),h>m&&m>o(r+s)&&(l.vertical="middle"),l.important=a(o(n),o(i))>a(o(r),o(s))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(x,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,o=e.left-t.collisionPosition.marginLeft,l=r-o,u=o+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&0>=u?(n=e.left+l+t.collisionWidth-s-r,e.left+=l-n):e.left=u>0&&0>=l?r:l>u?r+s-t.collisionWidth:r:l>0?e.left+=l:u>0?e.left-=u:e.left=a(e.left-o,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,l=r-o,u=o+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&0>=u?(n=e.top+l+t.collisionHeight-s-r,e.top+=l-n):e.top=u>0&&0>=l?r:l>u?r+s-t.collisionHeight:r:l>0?e.top+=l:u>0?e.top-=u:e.top=a(e.top-o,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,f=u+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>c?(n=e.left+h+p+d+t.collisionWidth-a-s,(0>n||o(c)>n)&&(e.left+=h+p+d)):f>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+d-l,(i>0||f>o(i))&&(e.left+=h+p+d))},top:function(e,t){var n,i,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,f=u+t.collisionHeight-a-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>c?(i=e.top+p+d+m+t.collisionHeight-a-s,e.top+p+d+m>c&&(0>i||o(c)>i)&&(e.top+=p+d+m)):f>0&&(n=e.top-t.collisionPosition.marginTop+p+d+m-l,e.top+p+d+m>f&&(n>0||f>o(n))&&(e.top+=p+d+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,s,a=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in i)t.style[s]=i[s];t.appendChild(o),n=a||document.documentElement,n.insertBefore(t,n.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",r=e(o).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;n>t;t++)a.push(s);this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)
},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,s,a,o,l,u,c=this,f=this.options;return f.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-c.values(t));(r>n||r===n&&(t===c._lastChangedValue||c.values(t)===f.min))&&(r=n,s=e(this),a=t)}),o=this._start(t,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,s.addClass("ui-state-active").focus(),l=s.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),s=this._valueMin()+i*r,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,s;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,n){var i,r,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,s,a=this.options.range,o=this.options,l=this,u=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},o.animate),1===i&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:o.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},o.animate),1===i&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:o.animate}))),t=n}):(i=this.value(),r=this._valueMin(),s=this._valueMax(),n=s!==r?100*((i-r)/(s-r)):0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(n){var i,r,s,a,o=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),i=this._start(n,o),i===!1))return}switch(a=this.options.step,r=s=this.options.values&&this.options.values.length?this.values(o):this.value(),n.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;s=this._trimAlignValue(r+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;s=this._trimAlignValue(r-a)}this._slide(n,o,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var r=n.attr(i);void 0!==r&&r.length&&(t[i]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&i.min>e?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++r}function i(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var r=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var n=this.options.active,i=this.options.collapsible,r=location.hash.substring(1);return null===n&&(r&&this.tabs.each(function(i,s){return e(s).attr("aria-controls")===r?(n=i,!1):t}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=this.tabs.length?0:!1)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=i?!1:0)),!i&&n===!1&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(n){var i=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(i),s=!0;if(!this._handlePageNav(n)){switch(n.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return n.preventDefault(),clearTimeout(this.activating),this._activate(r),t;case e.ui.keyCode.ENTER:return n.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r),t;default:return}n.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,s),n.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(n){return n.altKey&&n.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):n.altKey&&n.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,n){function i(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,n){return"active"===e?(this._activate(n),t):"disabled"===e?(this._setupDisabled(n),t):(this._super(e,n),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",n),n||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(n),"heightStyle"===e&&this._setupHeightStyle(n),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var s,a,o,l=e(r).uniqueId().attr("id"),u=e(r).closest("li"),c=u.attr("aria-controls");i(r)?(s=r.hash,a=t.element.find(t._sanitizeSelector(s))):(o=t._tabId(u),s="#"+o,a=t.element.find(s),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[n-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),c&&u.data("ui-tabs-aria-controls",c),u.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),s=r.closest("li"),a=s[0]===i[0],o=a&&n.collapsible,l=o?e():this._getPanelForTab(s),u=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:u,newTab:o?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=o?!1:this.tabs.index(s),this.active=a?e():s,this.xhr&&this.xhr.abort(),u.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,c))},_toggle:function(t,n){function i(){s.running=!1,s._trigger("activate",t,n)}function r(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&s.options.show?s._show(a,s.options.show,i):(a.show(),i())}var s=this,a=n.newPanel,o=n.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),r()),o.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),a.length&&o.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;i!==!1&&(n===t?i=!1:(n=this._getIndex(n),i=e.isArray(i)?e.map(i,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(i!==!0){if(n===t)i=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,i))return;i=e.isArray(i)?e.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(t,n){t=this._getIndex(t);var r=this,s=this.tabs.eq(t),a=s.find(".ui-tabs-anchor"),o=this._getPanelForTab(s),l={tab:s,panel:o};i(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),r._trigger("load",n,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,s){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}(jQuery),function(e){function t(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var i=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,s=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,i,r){function s(e){u.of=e,a.is(":hidden")||a.position(u)}var a,o,l,u=e.extend({},this.options.position);if(r){if(a=this._find(i),a.length)return a.find(".ui-tooltip-content").html(r),void 0;i.is("[title]")&&(n&&"mouseover"===n.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),t(i,a.attr("id")),a.find(".ui-tooltip-content").html(r),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:s}),s(n)):a.position(e.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){a.is(":visible")&&(s(u.of),clearInterval(l))},e.fx.interval)),this._trigger("open",n,{tooltip:a}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(a)}},n&&"mouseover"!==n.type||(o.mouseleave="close"),n&&"focusin"!==n.type||(o.focusout="close"),this._on(!0,i,o)}},close:function(t){var i=this,r=e(t?t.currentTarget:this.element),s=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),n(r),s.stop(!0),this._hide(s,this.options.hide,function(){i._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+i++,r=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[n]=t,r},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(e){return"string"===$.type(e)},runPluginCallbacks=function(Instance,a_fn){function g(e){return e}if($.isArray(a_fn))for(var i=0,c=a_fn.length;c>i;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(ex){}}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){var t=$(e),n=t.data("layout")||t.data("parentLayout");
if(n){var i=n.container;if(i.data("layoutPane"))return i;var r=i.closest("."+$.layout.defaults.panes.paneClass);if(r.data("layoutPane"))return r}return null},getParentPaneInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("layoutPane"):null},getParentLayoutInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=$.layout.getEventObject(e),n=e;return t&&(t.stopPropagation(),n=$(this).data("layoutEdge")),n&&!/^(west|east|north|south|center)$/.test(n)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+n+'"'),n="error"),n},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,i={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),i}return{}},getElementDimensions:function(e,t){var n,i,r,s={css:{},inset:{}},a=s.css,o={bottom:0},l=$.layout.cssNum,u=e.offset();return s.offsetLeft=u.left,s.offsetTop=u.top,t||(t={}),$.each("Left,Right,Top,Bottom".split(","),function(l,u){n=a["border"+u]=$.layout.borderWidth(e,u),i=a["padding"+u]=$.layout.cssNum(e,"padding"+u),r=u.toLowerCase(),s.inset[r]=t[r]>=0?t[r]:i,o[r]=s.inset[r]+n}),a.width=e.width(),a.height=e.height(),a.top=l(e,"top",!0),a.bottom=l(e,"bottom",!0),a.left=l(e,"left",!0),a.right=l(e,"right",!0),s.outerWidth=e.outerWidth(),s.outerHeight=e.outerHeight(),s.innerWidth=max(0,s.outerWidth-o.left-o.right),s.innerHeight=max(0,s.outerHeight-o.top-o.bottom),s.layoutWidth=e.innerWidth(),s.layoutHeight=e.innerHeight(),s},getElementStyles:function(e,t){var n,i,r,s,a,o,l={},u=e[0].style,c=t.split(","),f="Top,Bottom,Left,Right".split(","),h="Color,Style,Width".split(",");for(s=0;c.length>s;s++)if(n=c[s],n.match(/(border|padding|margin)$/))for(a=0;4>a;a++)if(i=f[a],"border"===n)for(o=0;3>o;o++)r=h[o],l[n+i+r]=u[n+i+r];else l[n+i]=u[n+i];else l[n]=u[n];return l},cssWidth:function(e,t){if(0>=t)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=$.layout.borderWidth,r=$.layout.cssNum,s=t;return"border-box"!==n&&(s-=i(e,"Left")+i(e,"Right")),"content-box"===n&&(s-=r(e,"paddingLeft")+r(e,"paddingRight")),max(0,s)},cssHeight:function(e,t){if(0>=t)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=$.layout.borderWidth,r=$.layout.cssNum,s=t;return"border-box"!==n&&(s-=i(e,"Top")+i(e,"Bottom")),"content-box"===n&&(s-=r(e,"paddingTop")+r(e,"paddingBottom")),max(0,s)},cssNum:function(e,t,n){e.jquery||(e=$(e));var i=$.layout.showInvisibly(e),r=$.css(e[0],t,!0),s=n&&"auto"==r?r:Math.round(parseFloat(r)||0);return e.css(i),s},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===$.css(e,n+"Style",!0)?0:Math.round(parseFloat($.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n=$(t||this),i=n.offset(),r=i.top,s=i.left,a=s+n.outerWidth(),o=r+n.outerHeight(),l=e.pageX,u=e.pageY;return $.layout.browser.msie&&0>l&&0>u||l>=s&&a>=l&&u>=r&&o>=u},msg:function(e,t,n,i){function r(){var e=$.support.fixedPosition?"fixed":"absolute",t=$('<div id="layoutLogger" style="position: '+e+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">'+'<div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;">'+'<span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div>'+'<ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul>'+"</div>").appendTo("body");return t.css("left",$(window).width()-t.outerWidth()-5),$.ui.draggable&&t.draggable({handle:":first-child"}),t}if($.isPlainObject(e)&&window.debugData){"string"==typeof t?(i=n,n=t):"object"==typeof n&&(i=n,n=null);var s=n||"log( <object> )",a=$.extend({sort:!1,returnHTML:!1,display:!1},i);t===!0||a.display?debugData(e,s,a):window.console&&console.log(debugData(e,s,a))}else if(t)alert(e);else if(window.console)console.log(e);else{var o="#layoutLogger",l=$(o);l.length||(l=r()),l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||0>u.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||$.support.boxModel!==!1},b&&($.layout.browser[b]=!0),ie&&$(function(){$.layout.browser.boxModel=$.support.boxModel}),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(e,t){var n,i,r,s,a,o,l,u=t?{panes:{},center:{}}:{};if("object"!=typeof e)return u;for(i in e)for(n=u,a=e[i],r=i.split("__"),l=r.length-1,o=0;l>=o;o++)s=r[o],o===l?n[s]=$.isPlainObject(a)?$.layout.transformData(a):a:(n[s]||(n[s]={}),n=n[s]);return u},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var i,r=t.split("."),s=r.length-1,a={branch:e,key:r[s]},o=0;s>o;o++)i=r[o],a.branch=void 0==a.branch[i]?n?a.branch[i]={}:{}:a.branch[i];return a}var n,i,r,s=$.layout.backwardCompatibility.map;for(var a in s)n=t(a),r=n.branch[n.key],void 0!==r&&(i=t(s[a],!0),i.branch[i.key]=r,delete n.branch[n.key])},renameAllOptions:function(e){var t=$.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),$.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),$.each($.layout.config.allPanes,function(n,i){e[i]&&t(e[i])}),e}},$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var t=e.keyCode;if(33>t)return!0;var n,i,r,s,a={38:"north",40:"south",37:"west",39:"east"},o=(e.altKey,e.shiftKey),l=e.ctrlKey,u=l&&t>=37&&40>=t;return u&&options[a[t]].enableCursorHotkey?s=a[t]:(l||o)&&$.each(_c.borderPanes,function(e,a){return n=options[a],i=n.customHotkey,r=n.customHotkeyModifier,(o&&"SHIFT"==r||l&&"CTRL"==r||l&&o)&&i&&t===(isNaN(i)||9>=i?i.toUpperCase().charCodeAt(0):i)?(s=a,!1):void 0}),s&&$Ps[s]&&options[s].closable&&!state[s].isHidden?(toggle(s),e.stopPropagation(),e.returnValue=!1,!1):!0}function allowOverflow(e){if(isInitialized()){this&&this.tagName&&(e=this);var t;if(isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){return $(this).data("layoutRole")?(t=$(this),!1):void 0}),t&&t.length){var n=t.data("layoutEdge"),i=state[n];if(i.cssSaved&&resetOverflow(n),i.isSliding||i.isResizing||i.isClosed)return i.cssSaved=!1,void 0;var r={zIndex:options.zIndexes.resizer_normal+1},s={},a=t.css("overflow"),o=t.css("overflowX"),l=t.css("overflowY");"visible"!=a&&(s.overflow=a,r.overflow="visible"),o&&!o.match(/(visible|auto)/)&&(s.overflowX=o,r.overflowX="visible"),l&&!l.match(/(visible|auto)/)&&(s.overflowY=o,r.overflowY="visible"),i.cssSaved=s,t.css(r),$.each(_c.allPanes,function(e,t){t!=n&&resetOverflow(t)})}}}function resetOverflow(e){if(isInitialized()){this&&this.tagName&&(e=this);var t;if(isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){return $(this).data("layoutRole")?(t=$(this),!1):void 0}),t&&t.length){var n=t.data("layoutEdge"),i=state[n],r=i.cssSaved||{};i.isSliding||i.isResizing||t.css("zIndex",options.zIndexes.pane_normal),t.css(r),i.cssSaved=!1}}}var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(e,t,n){timer.clear(e),timer.data[e]=setTimeout(t,n)},clear:function(e){var t=timer.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},_log=function(e,t,n){var i=options;return(i.showErrorMessages&&!n||n&&i.showDebugMessages)&&$.layout.msg(i.name+" / "+e,t!==!1),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){function g(e){return e}var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn)try{isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),!1),"string"===$.type(ex)&&string.length&&_log("Exception:  "+ex,!1)}return skipBoundEvents||retVal===!1||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal},_fixIframe=function(e){if(!browser.mozilla){var t=$Ps[e];"IFRAME"===state[e].tagName?t.css(_c.hidden).css(_c.visible):t.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(e,t){var n="horz"==_c[e].dir?cssH:cssW;return n($Ps[e],t)},cssMinDims=function(e){var t=$Ps[e],n=_c[e].dir,i={minWidth:1001-cssW(t,1e3),minHeight:1001-cssH(t,1e3)};return"horz"===n&&(i.minSize=i.minHeight),"vert"===n&&(i.minSize=i.minWidth),i},setOuterWidth=function(e,t,n){var i,r=e;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssW(r,t),r.css({width:i}),i>0?n&&r.data("autoHidden")&&r.innerHeight()>0&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},setOuterHeight=function(e,t,n){var i,r=e;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssH(r,t),r.css({height:i,visibility:"visible"}),i>0&&r.innerWidth()>0?n&&r.data("autoHidden")&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},_parseSize=function(e,t,n){if(n||(n=_c[e].dir),isStr(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(t>=1)return parseInt(t,10);var i=options,r=0;if("horz"==n?r=sC.innerHeight-($Ps.north?i.north.spacing_open:0)-($Ps.south?i.south.spacing_open:0):"vert"==n&&(r=sC.innerWidth-($Ps.west?i.west.spacing_open:0)-($Ps.east?i.east.spacing_open:0)),-1===t)return r;if(t>0)return round(r*t);if("center"==e)return 0;var s="horz"===n?"height":"width",a=$Ps[e],o="height"===s?$Cs[e]:!1,l=$.layout.showInvisibly(a),u=a.css(s),c=o?o.css(s):0;return a.css(s,"auto"),o&&o.css(s,"auto"),t="height"===s?a.outerHeight():a.outerWidth(),a.css(s,u).css(l),o&&o.css(s,c),t},getPaneSize=function(e,t){var n=$Ps[e],i=options[e],r=state[e],s=t?i.spacing_open:0,a=t?i.spacing_closed:0;return!n||r.isHidden?0:r.isClosed||r.isSliding&&t?a:"horz"===_c[e].dir?n.outerHeight()+s:n.outerWidth()+s},setSizeLimits=function(e,t){if(isInitialized()){var n=options[e],i=state[e],r=_c[e],s=r.dir,a=(r.sizeType.toLowerCase(),void 0!=t?t:i.isSliding),o=($Ps[e],n.spacing_open),l=_c.oppositeEdge[e],u=state[l],c=$Ps[l],f=!c||u.isVisible===!1||u.isSliding?0:"horz"==s?c.outerHeight():c.outerWidth(),h=(!c||u.isHidden?0:options[l][u.isClosed!==!1?"spacing_closed":"spacing_open"])||0,p="horz"==s?sC.innerHeight:sC.innerWidth,d=cssMinDims("center"),m="horz"==s?max(options.center.minHeight,d.minHeight):max(options.center.minWidth,d.minWidth),b=p-o-(a?0:_parseSize("center",m,s)+f+h),g=i.minSize=max(_parseSize(e,n.minSize),cssMinDims(e).minSize),v=i.maxSize=min(n.maxSize?_parseSize(e,n.maxSize):1e5,b),_=i.resizerPosition={},E=sC.inset.top,y=sC.inset.left,T=sC.innerWidth,S=sC.innerHeight,w=n.spacing_open;switch(e){case"north":_.min=E+g,_.max=E+v;break;case"west":_.min=y+g,_.max=y+v;break;case"south":_.min=E+S-v-w,_.max=E+S-g-w;break;case"east":_.min=y+T-v-w,_.max=y+T-g-w}}},calcNewCenterPaneDims=function(){var e={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return e.width=sC.innerWidth-e.left-e.right,e.height=sC.innerHeight-e.bottom-e.top,e.top+=sC.inset.top,e.bottom+=sC.inset.bottom,e.left+=sC.inset.left,e.right+=sC.inset.right,e},getHoverClasses=function(e,t){var n=$(e),i=n.data("layoutRole"),r=n.data("layoutEdge"),s=options[r],a=s[i+"Class"],o="-"+r,l="-open",u="-closed",c="-sliding",f="-hover ",h=n.hasClass(a+u)?u:l,p=h===u?l:u,d=a+f+(a+o+f)+(a+h+f)+(a+o+h+f);return t&&(d+=a+p+f+(a+o+p+f)),"resizer"==i&&n.hasClass(a+c)&&(d+=a+c+f+(a+o+c+f)),$.trim(d)},addHover=function(e,t){var n=$(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(e,t){var n=$(t||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(){var e=$(this).data("layoutEdge"),t=state[e];t.isClosed||t.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(e,{resizing:!0}))},onResizerLeave=function(e,t){var n=t||this,i=$(n).data("layoutEdge"),r=i+"ResizerLeave";timer.clear(i+"_openSlider"),timer.clear(r),t?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(r,function(){onResizerLeave(e,n)},200)},_create=function(){initOptions();var e=options,t=state;return t.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),e.initPanes&&_initLayoutElements(),delete t.creatingLayout,state.initialized)},isInitialized=function(){return state.initialized||state.creatingLayout?!0:_initLayoutElements()},_initLayoutElements=function(e){var t=options;if(!$N.is(":visible"))return!e&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return _log(t.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,t.inset)),initPanes(),t.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(e,t){var n=evtPane.call(this,e),i=$Ps[n];if(i){var r=$Cs[n],s=state[n],a=options[n],o=options.stateManagement||{},l=t?a.children=t:a.children;if($.isPlainObject(l))l=[l];else if(!l||!$.isArray(l))return;$.each(l,function(e,t){if($.isPlainObject(t)){var a=t.containerSelector?i.find(t.containerSelector):r||i;a.each(function(){var e=$(this),i=e.data("layout");if(!i){if(setInstanceKey({container:e,options:t},s),o.includeChildren&&state.stateData[n]){var r=state.stateData[n].children||{},a=r[t.instanceKey],l=t.stateManagement||(t.stateManagement={autoLoad:!0});l.autoLoad===!0&&a&&(l.autoSave=!1,l.includeChildren=!0,l.autoLoad=$.extend(!0,{},a))}i=e.layout(t),i&&refreshChildren(n,i)}})}})}},setInstanceKey=function(e,t){var n=e.container,i=e.options,r=i.stateManagement,s=i.instanceKey||n.data("layoutInstanceKey");return s||(s=(r&&r.cookie?r.cookie.name:"")||i.name),s=s?s.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,i.instanceKey=s,n.data("layoutInstanceKey",s),s},refreshChildren=function(e,t){var n,i=$Ps[e],r=children[e],s=state[e];$.isPlainObject(r)&&($.each(r,function(e,t){t.destroyed&&delete r[e]}),$.isEmptyObject(r)&&(r=children[e]=null)),t||r||(t=i.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,setInstanceKey(t,s),r||(r=children[e]={}),r[n.instanceKey]=t.container.data("layout")),Instance[e].children=children[e],t||createChildren(e)},windowResize=function(){var e=options,t=Number(e.resizeWithWindowDelay);10>t&&(t=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var t=elDims($N,e.inset);(t.innerWidth!==sC.innerWidth||t.innerHeight!==sC.innerHeight)&&resizeAll()},t),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var e=Number(options.resizeWithWindowMaxDelay);e>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},e)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var e,t,n=$N[0],i=$("html"),r=sC.tagName=n.tagName,s=sC.id=n.id,a=sC.className=n.className,o=options,l=o.name,u="position,margin,padding,border",c="layoutCSS",f={},h="hidden",p=$N.data("parentLayout"),d=$N.data("layoutEdge"),m=p&&d,b=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(o.name?o.name+" layout / ":"")+r+(s?"#"+s:a?".["+a+"]":""),sC.isBody="BODY"===r,m||sC.isBody||(e=$N.closest("."+$.layout.defaults.panes.paneClass),p=e.data("parentLayout"),d=e.data("layoutEdge"),m=p&&d),$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);var g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(l in g)$N.bind("layout"+l.toLowerCase()+"."+sID,Instance[g[l]||l]);m&&(Instance.hasParentLayout=!0,p.refreshChildren(d,Instance)),$N.data(c)||(sC.isBody?($N.data(c,$.extend(styles($N,u),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),i.data(c,$.extend(styles(i,"padding"),{height:"auto",overflow:i.css("overflow"),overflowX:i.css("overflowX"),overflowY:i.css("overflowY")}))):$N.data(c,styles($N,u+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(f={overflow:h,overflowX:h,overflowY:h},$N.css(f),o.inset&&!$.isPlainObject(o.inset)&&(t=parseInt(o.inset,10)||0,o.inset={top:t,bottom:t,left:t,right:t}),sC.isBody)o.outset?$.isPlainObject(o.outset)||(t=parseInt(o.outset,10)||0,o.outset={top:t,bottom:t,left:t,right:t}):o.outset={top:b(i,"paddingTop"),bottom:b(i,"paddingBottom"),left:b(i,"paddingLeft"),right:b(i,"paddingRight")},i.css(f).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),o.inset||(o.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(o.outset)),$.extend(sC,elDims($N,o.inset));else{var v=$N.css("position");v&&v.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,o.inset)),1>sC.innerHeight&&_log(o.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}b($N,"minWidth")&&$N.parent().css("overflowX","auto"),b($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(_){}},initHotkeys=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=options[t];return n.enableCursorHotkey||n.customHotkey?($(document).bind("keydown."+sID,keyDown),!1):void 0})},initOptions=function(){function e(e){var t=options[e],n=options.panes;t.fxSettings||(t.fxSettings={}),n.fxSettings||(n.fxSettings={}),$.each(["_open","_close","_size"],function(i,r){var s="fxName"+r,a="fxSpeed"+r,o="fxSettings"+r,l=t[s]=t[s]||n[s]||t.fxName||n.fxName||"none",u=$.effects&&($.effects[l]||$.effects.effect&&$.effects.effect[l]);"none"!==l&&options.effects[l]&&u||(l=t[s]="none");var c=options.effects[l]||{},f=c.all||null,h=c[e]||null;t[a]=t[a]||n[a]||t.fxSpeed||n.fxSpeed||null,t[o]=$.extend(!0,{},f,h,n.fxSettings,t.fxSettings,n[o],t[o])}),delete t.fxName,delete t.fxSpeed,delete t.fxSettings}var t,n,i,r,s,a,o;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(t=$.layout.optionsMap.noDefault,s=0,a=t.length;a>s;s++)i=t[s],delete opts.panes[i];for(t=$.layout.optionsMap.layout,s=0,a=t.length;a>s;s++)i=t[s],delete opts.panes[i]}t=$.layout.optionsMap.layout;var l=$.layout.config.optionRootKeys;for(i in opts)r=opts[i],0>$.inArray(i,l)&&0>$.inArray(i,t)&&(opts.panes[i]||(opts.panes[i]=$.isPlainObject(r)?$.extend(!0,{},r):r),delete opts[i]);$.extend(!0,options,opts),$.each(_c.allPanes,function(r,s){if(_c[s]=$.extend(!0,{},_c.panes,_c[s]),n=options.panes,o=options[s],"center"===s)for(t=$.layout.optionsMap.center,r=0,a=t.length;a>r;r++)i=t[r],opts.center[i]||!opts.panes[i]&&o[i]||(o[i]=n[i]);else o=options[s]=$.extend(!0,{},n,o),e(s),o.resizerClass||(o.resizerClass="ui-layout-resizer"),o.togglerClass||(o.togglerClass="ui-layout-toggler");o.paneClass||(o.paneClass="ui-layout-pane")});var u=opts.zIndex,c=options.zIndexes;u>0&&(c.pane_normal=u,c.content_mask=max(u+1,c.content_mask),c.resizer_normal=max(u+2,c.resizer_normal)),delete options.panes},getPane=function(e){var t=options[e].paneSelector;if("#"===t.substr(0,1))return $N.find(t).eq(0);var n=$N.children(t).eq(0);return n.length?n:$N.children("form:first").children(t).eq(0)},initPanes=function(e){evtPane(e),$.each(_c.allPanes,function(e,t){addPane(t,!0)}),initHandles(),$.each(_c.borderPanes,function(e,t){$Ps[t]&&state[t].isVisible&&(setSizeLimits(t),makePaneFit(t))}),sizeMidPanes("center"),$.each(_c.allPanes,function(e,t){afterInitPane(t)})},addPane=function(e,t){if(t||isInitialized()){var n,i,r,s=options[e],a=state[e],o=_c[e],l=o.dir,u=(a.fx,s.spacing_open||0,"center"===e),c={},f=$Ps[e];if(f?removePane(e,!1,!0,!1):$Cs[e]=!1,f=$Ps[e]=getPane(e),!f.length)return $Ps[e]=!1,void 0;if(!f.data("layoutCSS")){var h="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";f.data("layoutCSS",styles(f,h))}Instance[e]={name:e,pane:$Ps[e],content:$Cs[e],options:options[e],state:state[e],children:children[e]},f.data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"pane"}).css(o.cssReq).css("zIndex",options.zIndexes.pane_normal).css(s.applyDemoStyles?o.cssDemo:{}).addClass(s.paneClass+" "+s.paneClass+"-"+e).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var p,d={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(p in d)f.bind("layoutpane"+p.toLowerCase()+"."+sID,Instance[d[p]||p]);initContent(e,!1),u||(n=a.size=_parseSize(e,s.size),i=_parseSize(e,s.minSize)||1,r=_parseSize(e,s.maxSize)||1e5,n>0&&(n=max(min(n,r),i)),a.autoResize=s.autoResize,a.isClosed=!1,a.isSliding=!1,a.isResizing=!1,a.isHidden=!1,a.pins||(a.pins=[])),a.tagName=f[0].tagName,a.edge=e,a.noRoom=!1,a.isVisible=!0,setPanePosition(e),"horz"===l?c.height=cssH(f,n):"vert"===l&&(c.width=cssW(f,n)),f.css(c),"horz"!=l&&sizeMidPanes(e,!0),state.initialized&&(initHandles(e),initHotkeys(e)),s.initClosed&&s.closable&&!s.initHidden?close(e,!0,!0):s.initHidden||s.initClosed?hide(e):a.noRoom||f.css("display","block"),f.css("visibility","visible"),s.showOverflowOnHover&&f.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(e)}},afterInitPane=function(e){var t=$Ps[e],n=state[e],i=options[e];t&&(t.data("layout")&&refreshChildren(e,t.data("layout")),n.isVisible&&(state.initialized?resizeAll():sizeContent(e),i.triggerEventsOnLoad?_runCallbacks("onresize_end",e):resizeChildren(e,!0)),i.initChildren&&i.children&&createChildren(e))},setPanePosition=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=$Ps[t],i=$Rs[t],r=(options[t],state[t]),s=_c[t].side,a={};if(n){switch(t){case"north":a.top=sC.inset.top,a.left=sC.inset.left,a.right=sC.inset.right;break;case"south":a.bottom=sC.inset.bottom,a.left=sC.inset.left,a.right=sC.inset.right;break;case"west":a.left=sC.inset.left;break;case"east":a.right=sC.inset.right;break;case"center":}n.css(a),i&&r.isClosed?i.css(s,sC.inset[s]):i&&!r.isHidden&&i.css(s,sC.inset[s]+getPaneSize(t))}})},initHandles=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=$Ps[t];if($Rs[t]=!1,$Ts[t]=!1,n){var i=options[t],r=state[t],s=(_c[t],"#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):""),a=i.resizerClass,o=i.togglerClass,l=(r.isVisible?i.spacing_open:i.spacing_closed,"-"+t),u=(r.isVisible?"-open":"-closed",Instance[t]),c=u.resizer=$Rs[t]=$("<div></div>"),f=u.toggler=i.closable?$Ts[t]=$("<div></div>"):!1;!r.isVisible&&i.slidable&&c.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),c.attr("id",s?s+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(i.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(a+" "+a+l).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),i.resizerDblClickToggle&&c.bind("dblclick."+sID,toggle),f&&(f.attr("id",s?s+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(i.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(o+" "+o+l).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(c),i.togglerContent_open&&$("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(f),i.togglerContent_closed&&$("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(f),enableClosable(t)),initResizable(t),r.isVisible?setAsOpen(t):(setAsClosed(t),bindStartSlidingEvents(t,!0))
}}),sizeHandles()},initContent=function(e,t){if(isInitialized()){var n,i=options[e],r=i.contentSelector,s=Instance[e],a=$Ps[e];r&&(n=s.content=$Cs[e]=i.findNestedContent?a.find(r).eq(0):a.children(r).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",styles(n,"height")),n.css(_c.content.cssReq),i.applyDemoStyles&&(n.css(_c.content.cssDemo),a.css(_c.content.cssDemoPane)),a.css("overflowX").match(/(scroll|auto)/)&&a.css("overflow","hidden"),state[e].content={},t!==!1&&sizeContent(e)):s.content=$Cs[e]=!1}},initResizable=function(e){var t=$.layout.plugins.draggable;e=e?e.split(","):_c.borderPanes,$.each(e,function(e,i){var r=options[i];if(!t||!$Ps[i]||!r.resizable)return r.resizable=!1,!0;var s,a,o=state[i],l=options.zIndexes,u=_c[i],c="horz"==u.dir?"top":"left",f=($Ps[i],$Rs[i]),h=r.resizerClass,p=0,d=h+"-drag",m=h+"-"+i+"-drag",b=h+"-dragging",g=h+"-"+i+"-dragging",v=h+"-dragging-limit",_=h+"-"+i+"-dragging-limit",E=!1;o.isClosed||f.attr("title",r.tips.Resize).css("cursor",r.resizerCursor),f.draggable({containment:$N[0],axis:"horz"==u.dir?"y":"x",delay:0,distance:1,grid:r.resizingGrid,helper:"clone",opacity:r.resizerDragOpacity,addClasses:!1,zIndex:l.resizer_drag,start:function(e,t){return r=options[i],o=state[i],a=r.livePaneResizing,!1===_runCallbacks("ondrag_start",i)?!1:(o.isResizing=!0,state.paneResizing=i,timer.clear(i+"_closeSlider"),setSizeLimits(i),s=o.resizerPosition,p=t.position[c],f.addClass(d+" "+m),E=!1,$("body").disableSelection(),showMasks(i,{resizing:!0}),void 0)},drag:function(e,t){E||(t.helper.addClass(b+" "+g).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),E=!0,o.isSliding&&$Ps[i].css("zIndex",l.pane_sliding));var u=0;t.position[c]<s.min?(t.position[c]=s.min,u=-1):t.position[c]>s.max&&(t.position[c]=s.max,u=1),u?(t.helper.addClass(v+" "+_),window.defaultStatus=u>0&&i.match(/(north|west)/)||0>u&&i.match(/(south|east)/)?r.tips.maxSizeWarning:r.tips.minSizeWarning):(t.helper.removeClass(v+" "+_),window.defaultStatus=""),a&&Math.abs(t.position[c]-p)>=r.liveResizingTolerance&&(p=t.position[c],n(e,t,i))},stop:function(e,t){$("body").enableSelection(),window.defaultStatus="",f.removeClass(d+" "+m),o.isResizing=!1,state.paneResizing=!1,n(e,t,i,!0)}})});var n=function(e,t,n,i){var r,s=t.position,a=_c[n],o=options[n],l=state[n];switch(n){case"north":r=s.top;break;case"west":r=s.left;break;case"south":r=sC.layoutHeight-s.top-o.spacing_open;break;case"east":r=sC.layoutWidth-s.left-o.spacing_open}var u=r-sC.inset[a.side];if(i)!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,u,!1,!0),hideMasks(!0),l.isSliding&&showMasks(n,{resizing:!0});else{if(Math.abs(u-l.size)<o.liveResizingTolerance)return;manualSizePane(n,u,!1,!0),sizeMasks()}}},sizeMask=function(){var e=$(this),t=e.data("layoutMask"),n=state[t];"IFRAME"==n.tagName&&n.isVisible&&e.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(e,t){var n,i,r=_c[e],s=["center"],a=options.zIndexes,o=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[e].isSliding},t);o.resizing&&s.push(e),o.sliding&&s.push(_c.oppositeEdge[e]),"horz"===r.dir&&(s.push("west"),s.push("east")),$.each(s,function(e,t){i=state[t],n=options[t],i.isVisible&&(n.maskObjects||!o.objectsOnly&&n.maskContents)&&getMasks(t).each(function(){sizeMask.call(this),this.style.zIndex=i.isSliding?a.pane_sliding+1:a.pane_normal+1,this.style.display="block"})})},hideMasks=function(e){if(e||!state.paneResizing)$Ms.hide();else if(!e&&!$.isEmptyObject(state.panesSliding))for(var t,n,i=$Ms.length-1;i>=0;i--)n=$Ms.eq(i),t=n.data("layoutMask"),options[t].maskObjects||n.hide()},getMasks=function(e){for(var t,n=$([]),i=0,r=$Ms.length;r>i;i++)t=$Ms.eq(i),t.data("layoutMask")===e&&(n=n.add(t));return n.length?n:createMasks(e)},createMasks=function(e){var t,n,i,r,s,a=$Ps[e],o=state[e],l=options[e],u=options.zIndexes,c=$([]);if(!l.maskContents&&!l.maskObjects)return c;for(s=0;(l.maskObjects?2:1)>s;s++)t=l.maskObjects&&0==s,n=document.createElement(t?"iframe":"div"),i=$(n).data("layoutMask",e),n.className="ui-layout-mask ui-layout-mask-"+e,r=n.style,r.display="block",r.position="absolute",r.background="#FFF",t&&(n.frameborder=0,n.src="about:blank",r.opacity=0,r.filter="Alpha(Opacity='0')",r.border=0),"IFRAME"==o.tagName?(r.zIndex=u.pane_normal+1,$N.append(n)):(i.addClass("ui-layout-mask-inside-pane"),r.zIndex=l.maskZindex||u.content_mask,r.top=0,r.left=0,r.width="100%",r.height="100%",a.append(n)),c=c.add(n),$Ms=$Ms.add(n);return c},destroy=function(e,t){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof e?evtPane(e):t=e,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(e,n){removePane(n,!1,!0,t)});var n="layoutCSS";$N.data(n)&&!$N.data("layoutRole")&&$N.css($N.data(n)).removeData(n),"BODY"===sC.tagName&&($N=$("html")).data(n)&&$N.css($N.data(n)).removeData(n),runPluginCallbacks(Instance,$.layout.onDestroy),unload();for(var i in Instance)i.match(/^(container|options)$/)||delete Instance[i];return Instance.destroyed=!0,Instance},removePane=function(e,t,n,i){if(isInitialized()){var r=evtPane.call(this,e),s=$Ps[r],a=$Cs[r],o=$Rs[r],l=$Ts[r];s&&$.isEmptyObject(s.data())&&(s=!1),a&&$.isEmptyObject(a.data())&&(a=!1),o&&$.isEmptyObject(o.data())&&(o=!1),l&&$.isEmptyObject(l.data())&&(l=!1),s&&s.stop(!0,!0);var u=options[r],c=state[r],f="layout",h="layoutCSS",p=children[r],d=$.isPlainObject(p)&&!$.isEmptyObject(p),m=void 0!==i?i:u.destroyChildren;if(d&&m&&($.each(p,function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete p[e]}),$.isEmptyObject(p)&&(p=children[r]=null,d=!1)),s&&t&&!d)s.remove();else if(s&&s[0]){var b=u.paneClass,g=b+"-"+r,v="-open",_="-sliding",E="-closed",y=[b,b+v,b+E,b+_,g,g+v,g+E,g+_];$.merge(y,getHoverClasses(s,!0)),s.removeClass(y.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),d&&a?(a.width(a.width()),$.each(p,function(e,t){t.resizeAll()})):a&&a.css(a.data(h)).removeData(h).removeData("layoutRole"),s.data(f)||s.css(s.data(h)).removeData(h)}l&&l.remove(),o&&o.remove(),Instance[r]=$Ps[r]=$Cs[r]=$Rs[r]=$Ts[r]=!1,c={removed:!0},n||resizeAll()}},_hidePane=function(e){var t=$Ps[e],n=options[e],i=t[0].style;n.useOffscreenClose?(t.data(_c.offscreenReset)||t.data(_c.offscreenReset,{left:i.left,right:i.right}),t.css(_c.offscreenCSS)):t.hide().removeData(_c.offscreenReset)},_showPane=function(e){var t=$Ps[e],n=options[e],i=_c.offscreenCSS,r=t.data(_c.offscreenReset),s=t[0].style;t.show().removeData(_c.offscreenReset),n.useOffscreenClose&&r&&(s.left==i.left&&(s.left=r.left),s.right==i.right&&(s.right=r.right))},hide=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),i=options[n],r=state[n],s=$Ps[n],a=$Rs[n];s&&!r.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",n)||(r.isSliding=!1,delete state.panesSliding[n],a&&a.hide(),!state.initialized||r.isClosed?(r.isClosed=!0,r.isHidden=!0,r.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes("horz"===_c[n].dir?"":"center"),(state.initialized||i.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(r.isHiding=!0,close(n,!1,t))))}},show=function(e,t,n,i){if(isInitialized()){var r=evtPane.call(this,e),s=(options[r],state[r]),a=$Ps[r];$Rs[r],a&&s.isHidden&&!1!==_runCallbacks("onshow_start",r)&&(s.isShowing=!0,s.isSliding=!1,delete state.panesSliding[r],t===!1?close(r,!0):open(r,!1,n,i))}},toggle=function(e,t){if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=state[i];n&&n.stopImmediatePropagation(),r.isHidden?show(i):r.isClosed?open(i,!!t):close(i)}},_closePane=function(e,t){var n=($Ps[e],state[e]);_hidePane(e),n.isClosed=!0,n.isVisible=!1,t&&setAsClosed(e)},close=function(e,t,n,i){function r(){h.isMoving=!1,bindStartSlidingEvents(s,!0);var e=_c.oppositeEdge[s];state[e].noRoom&&(setSizeLimits(e),makePaneFit(e)),i||!state.initialized&&!f.triggerEventsOnLoad||(o||_runCallbacks("onclose_end",s),o&&_runCallbacks("onshow_end",s),l&&_runCallbacks("onhide_end",s))}var s=evtPane.call(this,e);if(!state.initialized&&$Ps[s])return _closePane(s,!0),void 0;if(isInitialized()){var a,o,l,u,c=$Ps[s],f=($Rs[s],$Ts[s],options[s]),h=state[s];_c[s],$N.queue(function(e){if(!c||!f.closable&&!h.isShowing&&!h.isHiding||!t&&h.isClosed&&!h.isShowing)return e();var i=!h.isShowing&&!1===_runCallbacks("onclose_start",s);return o=h.isShowing,l=h.isHiding,u=h.isSliding,delete h.isShowing,delete h.isHiding,i?e():(a=!n&&!h.isClosed&&"none"!=f.fxName_close,h.isMoving=!0,h.isClosed=!0,h.isVisible=!1,l?h.isHidden=!0:o&&(h.isHidden=!1),h.isSliding?bindStopSlidingEvents(s,!1):sizeMidPanes("horz"===_c[s].dir?"":"center",!1),setAsClosed(s),a?(lockPaneForFX(s,!0),c.hide(f.fxName_close,f.fxSettings_close,f.fxSpeed_close,function(){lockPaneForFX(s,!1),h.isClosed&&r(),e()})):(_hidePane(s),r(),e()),void 0)})}},setAsClosed=function(e){if($Rs[e]){var t=($Ps[e],$Rs[e]),n=$Ts[e],i=options[e],r=(state[e],_c[e].side),s=i.resizerClass,a=i.togglerClass,o="-"+e,l="-open",u="-sliding",c="-closed";t.css(r,sC.inset[r]).removeClass(s+l+" "+s+o+l).removeClass(s+u+" "+s+o+u).addClass(s+c+" "+s+o+c),i.resizable&&$.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(a+l+" "+a+o+l).addClass(a+c+" "+a+o+c).attr("title",i.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),syncPinBtns(e,!1),state.initialized&&sizeHandles()}},open=function(e,t,n,i){function r(){c.isMoving=!1,_fixIframe(o),c.isSliding||sizeMidPanes("vert"==_c[o].dir?"center":"",!1),setAsOpen(o)}if(isInitialized()){var s,a,o=evtPane.call(this,e),l=$Ps[o],u=($Rs[o],$Ts[o],options[o]),c=state[o];_c[o],$N.queue(function(e){if(!l||!u.resizable&&!u.closable&&!c.isShowing||c.isVisible&&!c.isSliding)return e();if(c.isHidden&&!c.isShowing)return e(),show(o,!0),void 0;c.autoResize&&c.size!=u.size?sizePane(o,u.size,!0,!0,!0):setSizeLimits(o,t);var f=_runCallbacks("onopen_start",o);return"abort"===f?e():("NC"!==f&&setSizeLimits(o,t),c.minSize>c.maxSize?(syncPinBtns(o,!1),!i&&u.tips.noRoomToOpen&&alert(u.tips.noRoomToOpen),e()):(t?bindStopSlidingEvents(o,!0):c.isSliding?bindStopSlidingEvents(o,!1):u.slidable&&bindStartSlidingEvents(o,!1),c.noRoom=!1,makePaneFit(o),a=c.isShowing,delete c.isShowing,s=!n&&c.isClosed&&"none"!=u.fxName_open,c.isMoving=!0,c.isVisible=!0,c.isClosed=!1,a&&(c.isHidden=!1),s?(lockPaneForFX(o,!0),l.show(u.fxName_open,u.fxSettings_open,u.fxSpeed_open,function(){lockPaneForFX(o,!1),c.isVisible&&r(),e()})):(_showPane(o),r(),e()),void 0))})}},setAsOpen=function(e,t){var n=$Ps[e],i=$Rs[e],r=$Ts[e],s=options[e],a=state[e],o=_c[e].side,l=s.resizerClass,u=s.togglerClass,c="-"+e,f="-open",h="-closed",p="-sliding";i.css(o,sC.inset[o]+getPaneSize(e)).removeClass(l+h+" "+l+c+h).addClass(l+f+" "+l+c+f),a.isSliding?i.addClass(l+p+" "+l+c+p):i.removeClass(l+p+" "+l+c+p),removeHover(0,i),s.resizable&&$.layout.plugins.draggable?i.draggable("enable").css("cursor",s.resizerCursor).attr("title",s.tips.Resize):a.isSliding||i.css("cursor","default"),r&&(r.removeClass(u+h+" "+u+c+h).addClass(u+f+" "+u+c+f).attr("title",s.tips.Close),removeHover(0,r),r.children(".content-closed").hide(),r.children(".content-open").css("display","block")),syncPinBtns(e,!a.isSliding),$.extend(a,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(e,!0)),!t&&(state.initialized||s.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",e),a.isShowing&&_runCallbacks("onshow_end",e),state.initialized&&_runCallbacks("onresize_end",e))},slideOpen=function(e){function t(){r.isClosed?r.isMoving||open(i,!0):bindStopSlidingEvents(i,!0)}if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=state[i],s=options[i].slideDelay_open;n&&n.stopImmediatePropagation(),r.isClosed&&n&&"mouseenter"===n.type&&s>0?timer.set(i+"_openSlider",t,s):t()}},slideClose=function(e){function t(){s.isClosed?bindStopSlidingEvents(i,!1):s.isMoving||close(i)}if(isInitialized()){var n=evtObj(e),i=evtPane.call(this,e),r=options[i],s=state[i],a=s.isMoving?1e3:300;if(!s.isClosed&&!s.isResizing)if("click"===r.slideTrigger_close)t();else{if(r.preventQuickSlideClose&&s.isMoving)return;if(r.preventPrematureSlideClose&&n&&$.layout.isMouseOverElem(n,$Ps[i]))return;n?timer.set(i+"_closeSlider",t,max(r.slideDelay_close,a)):t()}}},slideToggle=function(e){var t=evtPane.call(this,e);toggle(t,!0)},lockPaneForFX=function(e,t){var n=$Ps[e],i=state[e],r=options[e],s=options.zIndexes;t?(showMasks(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:s.pane_animate}),"south"==e?n.css({top:sC.inset.top+sC.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:sC.inset.left+sC.innerWidth-n.outerWidth()})):(hideMasks(),n.css({zIndex:i.isSliding?s.pane_sliding:s.pane_normal}),"south"==e?n.css({top:"auto"}):"east"!=e||n.css("left").match(/\-99999/)||n.css({left:"auto"}),browser.msie&&r.fxOpacityFix&&"slide"!=r.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(e,t){var n=options[e],i=($Ps[e],$Rs[e]),r=n.slideTrigger_open.toLowerCase();!i||t&&!n.slidable||(r.match(/mouseover/)?r=n.slideTrigger_open="mouseenter":r.match(/(click|dblclick|mouseenter)/)||(r=n.slideTrigger_open="click"),n.resizerDblClickToggle&&r.match(/click/)&&i[t?"unbind":"bind"]("dblclick."+sID,toggle),i[t?"bind":"unbind"](r+"."+sID,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},bindStopSlidingEvents=function(e,t){function n(t){timer.clear(e+"_closeSlider"),t.stopPropagation()}var i=options[e],r=state[e],s=(_c[e],options.zIndexes),a=i.slideTrigger_close.toLowerCase(),o=t?"bind":"unbind",l=$Ps[e],u=$Rs[e];timer.clear(e+"_closeSlider"),t?(r.isSliding=!0,state.panesSliding[e]=!0,bindStartSlidingEvents(e,!1)):(r.isSliding=!1,delete state.panesSliding[e]),l.css("zIndex",t?s.pane_sliding:s.pane_normal),u.css("zIndex",t?s.pane_sliding+2:s.resizer_normal),a.match(/(click|mouseleave)/)||(a=i.slideTrigger_close="mouseleave"),u[o](a,slideClose),"mouseleave"===a&&(l[o]("mouseleave."+sID,slideClose),u[o]("mouseenter."+sID,n),l[o]("mouseenter."+sID,n)),t?"click"!==a||i.resizable||(u.css("cursor",t?i.sliderCursor:"default"),u.attr("title",t?i.tips.Close:"")):timer.clear(e+"_closeSlider")},makePaneFit=function(e,t,n,i){var r=options[e],s=state[e],a=_c[e],o=$Ps[e],l=$Rs[e],u="vert"===a.dir,c=!1;if(("center"===e||u&&s.noVerticalRoom)&&(c=s.maxHeight>=0,c&&s.noRoom?(_showPane(e),l&&l.show(),s.isVisible=!0,s.noRoom=!1,u&&(s.noVerticalRoom=!1),_fixIframe(e)):c||s.noRoom||(_hidePane(e),l&&l.hide(),s.isVisible=!1,s.noRoom=!0)),"center"===e);else if(s.minSize<=s.maxSize){if(c=!0,s.size>s.maxSize)sizePane(e,s.maxSize,n,!0,i);else if(s.size<s.minSize)sizePane(e,s.minSize,n,!0,i);else if(l&&s.isVisible&&o.is(":visible")){var f=s.size+sC.inset[a.side];$.layout.cssNum(l,a.side)!=f&&l.css(a.side,f)}s.noRoom&&(s.wasOpen&&r.closable?r.autoReopen?open(e,!1,!0,!0):s.noRoom=!1:show(e,s.wasOpen,!0,!0))}else s.noRoom||(s.noRoom=!0,s.wasOpen=!s.isClosed&&!s.isSliding,s.isClosed||(r.closable?close(e,!0,!0):hide(e,!0)))},manualSizePane=function(e,t,n,i,r){if(isInitialized()){var s=evtPane.call(this,e),a=options[s],o=state[s],l=r||a.livePaneResizing&&!o.isResizing;o.autoResize=!1,sizePane(s,t,n,i,l)}},sizePane=function(e,t,n,i,r){function s(){for(var e="width"===d?f.outerWidth():f.outerHeight(),i=[{pane:l,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:o}],s=i[0],u={},b="Inaccurate size after resizing the "+l+"-pane.";!(s.correct||(u={pane:l,count:s.count+1,target:t},u.attempt=s.actual>t?max(0,s.attempt-(s.actual-t)):max(0,s.attempt+(t-s.actual)),u.cssSize=cssSize(l,u.attempt),f.css(d,u.cssSize),u.actual="width"==d?f.outerWidth():f.outerHeight(),u.correct=t===u.actual,1===i.length&&(_log(b,!1,!0),_log(s,!1,!0)),_log(u,!1,!0),i.length>3));)i.push(u),s=i[i.length-1];c.size=t,$.extend(c,elDims(f)),c.isVisible&&f.is(":visible")&&(h&&h.css(p,t+sC.inset[p]),sizeContent(l)),!n&&!m&&state.initialized&&c.isVisible&&_runCallbacks("onresize_end",l),n||(c.isSliding||sizeMidPanes("horz"==_c[l].dir?"":"center",m,r),sizeHandles());var g=_c.oppositeEdge[l];a>t&&state[g].noRoom&&(setSizeLimits(g),makePaneFit(g,!1,n)),i.length>1&&_log(b+"\nSee the Error Console for details.",!0,!0)}if(isInitialized()){var a,o,l=evtPane.call(this,e),u=options[l],c=state[l],f=$Ps[l],h=$Rs[l],p=_c[l].side,d=_c[l].sizeType.toLowerCase(),m=c.isResizing&&!u.triggerEventsDuringLiveResize,b=i!==!0&&u.animatePaneSizing;$N.queue(function(e){if(setSizeLimits(l),a=c.size,t=_parseSize(l,t),t=max(t,_parseSize(l,u.minSize)),t=min(t,c.maxSize),c.minSize>t)return e(),makePaneFit(l,!1,n),void 0;if(!r&&t===a)return e();if(c.newSize=t,!n&&state.initialized&&c.isVisible&&_runCallbacks("onresize_start",l),o=cssSize(l,t),b&&f.is(":visible")){var i=$.layout.effects.size[l]||$.layout.effects.size.all,h=u.fxSettings_size.easing||i.easing,p=options.zIndexes,m={};m[d]=o+"px",c.isMoving=!0,f.css({zIndex:p.pane_animate}).show().animate(m,u.fxSpeed_size,h,function(){f.css({zIndex:c.isSliding?p.pane_sliding:p.pane_normal}),c.isMoving=!1,delete c.newSize,s(),e()})}else f.css(d,o),delete c.newSize,f.is(":visible")?s():(c.size=t,$.extend(c,elDims(f))),e()})}},sizeMidPanes=function(e,t,n){e=(e?e:"east,west,center").split(","),$.each(e,function(e,i){if($Ps[i]){var r=options[i],s=state[i],a=$Ps[i],o=($Rs[i],!0),l={},u=$.layout.showInvisibly(a),c=calcNewCenterPaneDims();if($.extend(s,elDims(a)),"center"===i){if(!n&&s.isVisible&&c.width===s.outerWidth&&c.height===s.outerHeight)return a.css(u),!0;if($.extend(s,cssMinDims(i),{maxWidth:c.width,maxHeight:c.height}),l=c,s.newWidth=l.width,s.newHeight=l.height,l.width=cssW(a,l.width),l.height=cssH(a,l.height),o=l.width>=0&&l.height>=0,!state.initialized&&r.minWidth>c.width){var f=r.minWidth-s.outerWidth,h=options.east.minSize||0,p=options.west.minSize||0,d=state.east.size,m=state.west.size,b=d,g=m;if(f>0&&state.east.isVisible&&d>h&&(b=max(d-h,d-f),f-=d-b),f>0&&state.west.isVisible&&m>p&&(g=max(m-p,m-f),f-=m-g),0===f)return d&&d!=h&&sizePane("east",b,!0,!0,n),m&&m!=p&&sizePane("west",g,!0,!0,n),sizeMidPanes("center",t,n),a.css(u),void 0}}else{if(s.isVisible&&!s.noVerticalRoom&&$.extend(s,elDims(a),cssMinDims(i)),!n&&!s.noVerticalRoom&&c.height===s.outerHeight)return a.css(u),!0;l.top=c.top,l.bottom=c.bottom,s.newSize=c.height,l.height=cssH(a,c.height),s.maxHeight=l.height,o=s.maxHeight>=0,o||(s.noVerticalRoom=!0)}if(o?(!t&&state.initialized&&_runCallbacks("onresize_start",i),a.css(l),"center"!==i&&sizeHandles(i),!s.noRoom||s.isClosed||s.isHidden||makePaneFit(i),s.isVisible&&($.extend(s,elDims(a)),state.initialized&&sizeContent(i))):!s.noRoom&&s.isVisible&&makePaneFit(i),a.css(u),delete s.newSize,delete s.newWidth,delete s.newHeight,!s.isVisible)return!0;if("center"===i){var v=browser.isIE6||!browser.boxModel;$Ps.north&&(v||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(v||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!t&&state.initialized&&_runCallbacks("onresize_end",i)}})},resizeAll=function(e){var t=sC.innerWidth,n=sC.innerHeight;if(evtPane(e),$N.is(":visible")){if(!state.initialized)return _initLayoutElements(),void 0;if(e===!0&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(e===!0&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;var i,r,s;n>sC.innerHeight,t>sC.innerWidth,$.each(["south","north","east","west"],function(e,t){$Ps[t]&&(r=options[t],s=state[t],s.autoResize&&s.size!=r.size?sizePane(t,r.size,!0,!0,!0):(setSizeLimits(t),makePaneFit(t,!1,!0,!0)))}),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,function(e,t){i=$Ps[t],i&&state[t].isVisible&&_runCallbacks("onresize_end",t)}),_runCallbacks("onresizeall_end")}}},resizeChildren=function(e,t){var n=evtPane.call(this,e);if(options[n].resizeChildren){t||refreshChildren(n);var i=children[n];$.isPlainObject(i)&&$.each(i,function(e,t){t.destroyed||t.resizeAll()})}},sizeContent=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);n=n?n.split(","):_c.allPanes,$.each(n,function(e,n){function i(e){return max(l.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function r(){var e=options[n].contentIgnoreSelector,t=a.nextAll().not(".ui-layout-mask").not(e||":lt(0)"),r=t.filter(":visible"),s=r.filter(":last");u={top:a[0].offsetTop,height:a.outerHeight(),numFooters:t.length,hiddenFooters:t.length-r.length,spaceBelow:0},u.spaceAbove=u.top,u.bottom=u.top+u.height,u.spaceBelow=s.length?s[0].offsetTop+s.outerHeight()-u.bottom+i(s):i(a)}var s=$Ps[n],a=$Cs[n],o=options[n],l=state[n],u=l.content;if(!s||!a||!s.is(":visible"))return!0;if((a.length||(initContent(n,!1),a))&&!1!==_runCallbacks("onsizecontent_start",n)){(!l.isMoving&&!l.isResizing||o.liveContentResizing||t||void 0==u.top)&&(r(),u.hiddenFooters>0&&"hidden"===s.css("overflow")&&(s.css("overflow","visible"),r(),s.css("overflow","hidden")));var c=l.innerHeight-(u.spaceAbove-l.css.paddingTop)-(u.spaceBelow-l.css.paddingBottom);a.is(":visible")&&u.height==c||(setOuterHeight(a,c,!0),u.height=c),state.initialized&&_runCallbacks("onsizecontent_end",n)}})}},sizeHandles=function(e){var t=evtPane.call(this,e);t=t?t.split(","):_c.borderPanes,$.each(t,function(e,t){var n,i=options[t],r=state[t],s=$Ps[t],a=$Rs[t],o=$Ts[t];if(s&&a){var l,u,c,f=_c[t].dir,h=r.isClosed?"_closed":"_open",p=i["spacing"+h],d=i["togglerAlign"+h],m=i["togglerLength"+h];if(0===p)return a.hide(),void 0;if(r.noRoom||r.isHidden||a.show(),"horz"===f?(l=sC.innerWidth,r.resizerLength=l,u=$.layout.cssNum(s,"left"),a.css({width:cssW(a,l),height:cssH(a,p),left:u>-9999?u:sC.inset.left})):(l=s.outerHeight(),r.resizerLength=l,a.css({height:cssH(a,l),width:cssW(a,p),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(i,a),o){if(0===m||r.isSliding&&i.hideTogglerOnSlide)return o.hide(),void 0;if(o.show(),!(m>0)||"100%"===m||m>l)m=l,c=0;else if(isStr(d))switch(d){case"top":case"left":c=0;break;case"bottom":case"right":c=l-m;break;case"middle":case"center":default:c=round((l-m)/2)}else{var b=parseInt(d,10);c=d>=0?b:l-m+b}if("horz"===f){var g=cssW(o,m);o.css({width:g,height:cssH(o,p),left:c,top:0}),o.children(".content").each(function(){n=$(this),n.css("marginLeft",round((g-n.outerWidth())/2))})}else{var v=cssH(o,m);o.css({height:v,width:cssW(o,p),top:c,left:0}),o.children(".content").each(function(){n=$(this),n.css("marginTop",round((v-n.outerHeight())/2))})}removeHover(0,o)}state.initialized||!i.initHidden&&!r.isHidden||(a.hide(),o&&o.hide())}})},enableClosable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Ts[t],i=options[t];n&&(i.closable=!0,n.bind("click."+sID,function(e){e.stopPropagation(),toggle(t)}).css("visibility","visible").css("cursor","pointer").attr("title",state[t].isClosed?i.tips.Open:i.tips.Close).show())}},disableClosable=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),i=$Ts[n];i&&(options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),i.unbind("."+sID).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].slidable=!0,state[t].isClosed&&bindStartSlidingEvents(t,!0))}},disableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&(options[t].slidable=!1,state[t].isSliding?close(t,!1,!0):(bindStartSlidingEvents(t,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0])))}},enableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t],i=options[t];n&&n.data("draggable")&&(i.resizable=!0,n.draggable("enable"),state[t].isClosed||n.css("cursor",i.resizerCursor).attr("title",i.tips.Resize))}},disableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0]))}},swapPanes=function(e,t){function n(e){var t=$Ps[e],n=$Cs[e];return t?{pane:e,P:t?t[0]:!1,C:n?n[0]:!1,state:$.extend(!0,{},state[e]),options:$.extend(!0,{},options[e])}:!1}function i(e,t){if(e){var n,i,r=e.P,s=e.C,a=e.pane,l=_c[t],u=$.extend(!0,{},state[t]),c=options[t],f={resizerCursor:c.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),function(e,t){f[t+"_open"]=c[t+"_open"],f[t+"_close"]=c[t+"_close"],f[t+"_size"]=c[t+"_size"]}),$Ps[t]=$(r).data({layoutPane:Instance[t],layoutEdge:t}).css(_c.hidden).css(l.cssReq),$Cs[t]=s?$(s):!1,options[t]=$.extend(!0,{},e.options,f),state[t]=$.extend(!0,{},e.state),n=RegExp(c.paneClass+"-"+a,"g"),r.className=r.className.replace(n,c.paneClass+"-"+t),initHandles(t),l.dir!=_c[a].dir?(i=o[t]||0,setSizeLimits(t),i=max(i,state[t].minSize),manualSizePane(t,i,!0,!0)):$Rs[t].css(l.side,sC.inset[l.side]+(state[t].isVisible?getPaneSize(t):0)),e.state.isVisible&&!u.isVisible?setAsOpen(t,!0):(setAsClosed(t),bindStartSlidingEvents(t,!0)),e=null}}if(isInitialized()){var r=evtPane.call(this,e);if(state[r].edge=t,state[t].edge=r,!1===_runCallbacks("onswap_start",r)||!1===_runCallbacks("onswap_start",t))return state[r].edge=r,state[t].edge=t,void 0;var s=n(r),a=n(t),o={};o[r]=s?s.state.size:0,o[t]=a?a.state.size:0,$Ps[r]=!1,$Ps[t]=!1,state[r]={},state[t]={},$Ts[r]&&$Ts[r].remove(),$Ts[t]&&$Ts[t].remove(),$Rs[r]&&$Rs[r].remove(),$Rs[t]&&$Rs[t].remove(),$Rs[r]=$Rs[t]=$Ts[r]=$Ts[t]=!1,i(s,t),i(a,r),s=a=o=null,$Ps[r]&&$Ps[r].css(_c.visible),$Ps[t]&&$Ps[t].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",r),_runCallbacks("onswap_end",t)}},syncPinBtns=function(e,t){$.layout.plugins.buttons&&$.each(state[e].pins,function(n,i){$.layout.buttons.setPinState(Instance,$(i),e,t)})},$N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,i=document.cookie,r=i?i.split(";"):[],s=0,a=r.length;a>s;s++)if(n=e.trim(r[s]).split("="),n[0]==t)return decodeURIComponent(n[1]);return null},write:function(t,n,i){var r="",s="",a=!1,o=i||{},l=o.expires||null,u=e.type(l);"date"===u?s=l:"string"===u&&l>0&&(l=parseInt(l,10),u="number"),"number"===u&&(s=new Date,l>0?s.setDate(s.getDate()+l):(s.setFullYear(1970),a=!0)),s&&(r+=";expires="+s.toUTCString()),o.path&&(r+=";path="+o.path),o.domain&&(r+=";domain="+o.domain),o.secure&&(r+=";secure"),document.cookie=t+"="+(a?"":encodeURIComponent(n))+r},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,i){var r=e.ui.cookie;if(null===n)r.clear(t);else{if(void 0===n)return r.read(t);r.write(t,n,i)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,i){var r=t.options,s=r.stateManagement,a=e.extend(!0,{},s.cookie,i||null),o=t.state.stateData=t.readState(n||s.stateKeys);return e.ui.cookie.write(a.name||r.name||"Layout",e.layout.state.encodeJSON(o),a),e.extend(!0,{},o)},deleteCookie:function(t){var n=t.options;e.ui.cookie.clear(n.stateManagement.cookie.name||n.name||"Layout")},readCookie:function(t){var n=t.options,i=e.ui.cookie.read(n.stateManagement.cookie.name||n.name||"Layout");return i?e.layout.state.decodeJSON(i):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,i){if(e.isPlainObject(n)&&!e.isEmptyObject(n)){n=t.state.stateData=e.layout.transformData(n);var r=t.options.stateManagement;if(i=e.extend({animateLoad:!1,includeChildren:r.includeChildren},i),t.state.initialized){var a,o,l,u,c,f=!i.animateLoad;if(e.each(e.layout.config.borderPanes,function(i,r){a=n[r],e.isPlainObject(a)&&(s=a.size,o=a.initClosed,l=a.initHidden,ar=a.autoResize,u=t.state[r],c=u.isVisible,ar&&(u.autoResize=ar),c||t._sizePane(r,s,!1,!1,!1),l===!0?t.hide(r,f):o===!0?t.close(r,!1,f):o===!1?t.open(r,!1,f):l===!1&&t.show(r,!1,f),c&&t._sizePane(r,s,!1,!1,f))}),i.includeChildren){var h,p;e.each(t.children,function(t,i){h=n[t]?n[t].children:0,h&&i&&e.each(i,function(e,t){p=h[e],t&&p&&t.loadState(p)})})}}else{var a=e.extend(!0,{},n);e.each(e.layout.config.allPanes,function(e,t){a[t]&&delete a[t].children}),e.extend(!0,t.options,a)}}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var i,r,s,a,o,l,u,c=t.options.stateManagement,f=n.includeChildren,h=void 0!==f?f:c.includeChildren,p=n.stateKeys||c.stateKeys,d={isClosed:"initClosed",isHidden:"initHidden"},m=t.state,b=e.layout.config.allPanes,g={};e.isArray(p)&&(p=p.join(",")),p=p.replace(/__/g,".").split(",");for(var v=0,_=p.length;_>v;v++)i=p[v].split("."),r=i[0],s=i[1],0>e.inArray(r,b)||(a=m[r][s],void 0!=a&&("isClosed"==s&&m[r].isSliding&&(a=!0),(g[r]||(g[r]={}))[d[s]?d[s]:s]=a));return h&&e.each(b,function(n,i){l=t.children[i],o=m.stateData[i],e.isPlainObject(l)&&!e.isEmptyObject(l)&&(u=g[i]||(g[i]={}),u.children||(u.children={}),e.each(l,function(t,n){n.state.initialized?u.children[t]=e.layout.state.readState(n):o&&o.children&&o.children[t]&&(u.children[t]=e.extend(!0,{},o.children[t]))}))}),g},encodeJSON:function(t){function n(t){var i,r,s,a=[],o=0,l=e.isArray(t);for(i in t)r=t[i],s=typeof r,"string"==s?r='"'+r+'"':"object"==s&&(r=n(r)),a[o++]=(l?"":'"'+i+'":')+r;return(l?"[":"{")+a.join(",")+(l?"]":"}")}return n(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(n){return{}}},_create:function(t){var n=e.layout.state,i=t.options,r=i.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,i){return n.saveCookie(t,e,i)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,i){n.loadState(t,e,i)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},r.autoLoad)if(e.isPlainObject(r.autoLoad))e.isEmptyObject(r.autoLoad)||t.loadState(r.autoLoad);else if(r.enabled)if(e.isFunction(r.autoLoad)){var s={};try{s=r.autoLoad(t,t.state,t.options,t.options.name||"")}catch(a){}s&&e.isPlainObject(s)&&!e.isEmptyObject(s)&&t.loadState(s)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")
}catch(i){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,i="ui-layout-button-",r=t.options.name||"";e.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(s,a){e.each(e.layout.config.borderPanes,function(s,o){e("."+i+a+"-"+o).each(function(){n=e(this).data("layoutName")||e(this).attr("layoutName"),(void 0==n||n===r)&&t.bindButton(this,a,o)})})})},get:function(t,n,i,r){var s=e(n),a=t.options,o=a.errors.addButtonError;if(s.length)if(0>e.inArray(i,e.layout.config.borderPanes))e.layout.msg(o+" "+a.errors.pane+": "+i,!0),s=e("");else{var l=a[i].buttonClass+"-"+r;s.addClass(l+" "+l+"-"+i).data("layoutName",a.name)}else e.layout.msg(o+" "+a.errors.selector+": "+n,!0);return s},bind:function(t,n,i,r){var s=e.layout.buttons;switch(i.toLowerCase()){case"toggle":s.addToggle(t,n,r);break;case"open":s.addOpen(t,n,r);break;case"close":s.addClose(t,n,r);break;case"pin":s.addPin(t,n,r);break;case"toggle-slide":s.addToggle(t,n,r,!0);break;case"open-slide":s.addOpen(t,n,r,!0)}return t},addToggle:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"toggle").click(function(e){t.toggle(i,!!r),e.stopPropagation()}),t},addOpen:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"open").attr("title",t.options[i].tips.Open).click(function(e){t.open(i,!!r),e.stopPropagation()}),t},addClose:function(t,n,i){return e.layout.buttons.get(t,n,i,"close").attr("title",t.options[i].tips.Close).click(function(e){t.close(i),e.stopPropagation()}),t},addPin:function(t,n,i){var r=e.layout.buttons,s=r.get(t,n,i,"pin");if(s.length){var a=t.state[i];s.click(function(n){r.setPinState(t,e(this),i,a.isSliding||a.isClosed),a.isSliding||a.isClosed?t.open(i):t.close(i),n.stopPropagation()}),r.setPinState(t,s,i,!a.isClosed&&!a.isSliding),a.pins.push(n)}return t},setPinState:function(e,t,n,i){var r=t.attr("pin");if(!r||i!==("down"==r)){var s=e.options[n],a=s.buttonClass+"-pin",o=a+"-"+n,l=a+"-up "+o+"-up",u=a+"-down "+o+"-down";t.attr("pin",i?"down":"up").attr("title",i?s.tips.Unpin:s.tips.Pin).removeClass(i?l:u).addClass(i?u:l)}},syncPinBtns:function(t,n,i){e.each(t.state[n].pins,function(r,s){e.layout.buttons.setPinState(t,e(s),n,i)})},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,i,r){return n.bind(t,e,i,r)},addToggleBtn:function(e,i,r){return n.addToggle(t,e,i,r)},addOpenBtn:function(e,i,r){return n.addOpen(t,e,i,r)},addCloseBtn:function(e,i){return n.addClose(t,e,i)},addPinBtn:function(e,i){return n.addPin(t,e,i)}});for(var i=0;4>i;i++){var r=e.layout.config.borderPanes[i];t.state[r].pins=[]}t.options.autoBindCustomButtons&&n.init(t)},_unload:function(){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){e.layout.browserZoom.ratio()!==!1&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,i=t.state,r=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout(function(){if(!t.destroyed&&n.resizeWithWindow){var r=e.layout.browserZoom.ratio();r!==i.browserZoom&&(i.browserZoom=r,t.resizeAll()),e.layout.browserZoom._setTimer(t)}},r)}},ratio:function(){function t(e,t){return(100*(parseInt(e,10)/parseInt(t,10))).toFixed()}var n,i,r,s=window,a=screen,o=document,l=o.documentElement||o.body,u=e.layout.browser,c=u.version;return u.msie&&c>8||!u.msie?!1:a.deviceXDPI&&a.systemXDPI?t(a.deviceXDPI,a.systemXDPI):u.webkit&&(n=o.body.getBoundingClientRect)?t(n.left-n.right,o.body.offsetWidth):u.webkit&&(i=s.outerWidth)?t(i,s.innerWidth):(i=a.width)&&(r=l.clientWidth)?t(i,r):!1}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery),bladeSTR=function(){"use strict";function e(e,t){var n,i,r,s,a,o;for(r=[],n=function(e,t){var n;if(0!==e){if(e>=0?r.length>0&&r.push("+"):r.push("-"),n=Math.abs(e),1===n)return r.push(t);if(r.push(""+n),"1"!==t)return r.push("*"),r.push(t)}},i=a=0,o=e.length-1;o>=0?o>=a:a>=o;i=o>=0?++a:--a)n(e[i],t[i]);return s=r.length>0?r.join(""):"0"}return{stringFromCoordinates:e}}(),function(e,t,n){"use strict";var i,r,s,a,o;r="Euclidean2",s="Euclidean3",i=i||{},a=function(){function e(e,t,n,i){this._coordinates=[e,t,n,i]}return e.fromCartesian=function(t,n,i,r){return new e(t,n,i,r)},e.fromPolar=function(t,n,i,r){return new e(t,n*Math.cos(i),n*Math.sin(i),r)},e.prototype.coordinates=function(){return[this._coordinates[0],this._coordinates[1],this._coordinates[2],this._coordinates[3]]},e.prototype.coordinate=function(e){switch(e){case 0:return this._coordinates[0];case 1:return this._coordinates[1];case 2:return this._coordinates[2];case 3:return this._coordinates[3];default:throw Error("index must be in the range [0..3]")}},e.add=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=e2gaASM.add00(n,i,r,s,a,o,l,u),f=e2gaASM.add01(n,i,r,s,a,o,l,u),h=e2gaASM.add10(n,i,r,s,a,o,l,u),p=e2gaASM.add11(n,i,r,s,a,o,l,u),[c,f,h,p]},e.prototype.add=function(t){var n;return n=e.add(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.sub=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=bladeASM.subE2(n,i,r,s,a,o,l,u,0),f=bladeASM.subE2(n,i,r,s,a,o,l,u,1),h=bladeASM.subE2(n,i,r,s,a,o,l,u,2),p=bladeASM.subE2(n,i,r,s,a,o,l,u,3),[c,f,h,p]},e.prototype.sub=function(t){var n;return n=e.sub(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.mul=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=bladeASM.mulE2(n,i,r,s,a,o,l,u,0),f=bladeASM.mulE2(n,i,r,s,a,o,l,u,1),h=bladeASM.mulE2(n,i,r,s,a,o,l,u,2),p=bladeASM.mulE2(n,i,r,s,a,o,l,u,3),[c,f,h,p]},e.prototype.mul=function(t){var n;return n=e.mul(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.wedge=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=bladeASM.extE2(n,i,r,s,a,o,l,u,0),f=bladeASM.extE2(n,i,r,s,a,o,l,u,1),h=bladeASM.extE2(n,i,r,s,a,o,l,u,2),p=bladeASM.extE2(n,i,r,s,a,o,l,u,3),[c,f,h,p]},e.prototype.wedge=function(t){var n;return n=e.wedge(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.lshift=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=bladeASM.lcoE2(n,i,r,s,a,o,l,u,0),f=bladeASM.lcoE2(n,i,r,s,a,o,l,u,1),h=bladeASM.lcoE2(n,i,r,s,a,o,l,u,2),p=bladeASM.lcoE2(n,i,r,s,a,o,l,u,3),[c,f,h,p]},e.prototype.lshift=function(t){var n;return n=e.lshift(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.rshift=function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p;return n=e[0],i=e[1],r=e[2],s=e[3],a=t[0],o=t[1],l=t[2],u=t[3],c=bladeASM.rcoE2(n,i,r,s,a,o,l,u,0),f=bladeASM.rcoE2(n,i,r,s,a,o,l,u,1),h=bladeASM.rcoE2(n,i,r,s,a,o,l,u,2),p=bladeASM.rcoE2(n,i,r,s,a,o,l,u,3),[c,f,h,p]},e.prototype.rshift=function(t){var n;return n=e.rshift(this._coordinates,t._coordinates),e.fromCartesian(n[0],n[1],n[2],n[3])},e.prototype.grade=function(t){switch(t){case 0:return e.fromCartesian(this._coordinates[0],0,0,0);case 1:return e.fromCartesian(0,this._coordinates[1],this._coordinates[2],0);case 2:return e.fromCartesian(0,0,0,this._coordinates[3]);default:return e.fromCartesian(0,0,0,0)}},e.prototype.toString=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","e1","e2","e12"])},e.prototype.toStringIJK=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","i","j","I"])},e.prototype.toStringLATEX=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","e_{1}","e_{2}","e_{12}"])},e}(),i[r]=a,o=function(){function e(e,t,n,i,r,s,a,o){this._coordinates=[e,t,n,i,r,s,a,o]}return e.fromCartesian=function(t,n,i,r,s,a,o,l){return new e(t,n,i,r,s,a,o,l)},e.prototype.coordinates=function(){return[this._coordinates[0],this._coordinates[1],this._coordinates[2],this._coordinates[3],this._coordinates[4],this._coordinates[5],this._coordinates[6],this._coordinates[7]]},e.prototype.coordinate=function(e){switch(e){case 0:return this._coordinates[0];case 1:return this._coordinates[1];case 2:return this._coordinates[2];case 3:return this._coordinates[3];case 4:return this._coordinates[4];case 5:return this._coordinates[5];case 6:return this._coordinates[6];case 7:return this._coordinates[7];default:throw Error("index must be in the range [0..7]")}},e.compute=function(e,t,n,i,r){var s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w,k,x,R,P;return s=i(t,0),a=i(t,1),o=i(t,2),l=i(t,3),u=i(t,4),c=i(t,5),f=i(t,6),h=i(t,7),p=i(n,0),d=i(n,1),m=i(n,2),b=i(n,3),g=i(n,4),v=i(n,5),_=i(n,6),E=i(n,7),y=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,0),T=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,1),S=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,2),w=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,3),k=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,4),x=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,5),R=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,6),P=e(s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,7),r(y,T,S,w,k,x,R,P)},e.prototype.add=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.addE3,this._coordinates,t._coordinates,n,i)},e.prototype.sub=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.subE3,this._coordinates,t._coordinates,n,i)},e.prototype.mul=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.mulE3,this._coordinates,t._coordinates,n,i)},e.prototype.wedge=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.extE3,this._coordinates,t._coordinates,n,i)},e.prototype.lshift=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.lcoE3,this._coordinates,t._coordinates,n,i)},e.prototype.rshift=function(t){var n,i;return n=function(e,t){return e[t]},i=function(t,n,i,r,s,a,o,l){return e.fromCartesian(t,n,i,r,s,a,o,l)},e.compute(bladeASM.rcoE3,this._coordinates,t._coordinates,n,i)},e.prototype.grade=function(t){switch(t){case 0:return e.fromCartesian(this._coordinates[0],0,0,0,0,0,0,0);case 1:return e.fromCartesian(0,this._coordinates[1],this._coordinates[2],this._coordinates[3],0,0,0,0);case 2:return e.fromCartesian(0,0,0,0,this._coordinates[4],this._coordinates[5],this._coordinates[6],0);case 3:return e.fromCartesian(0,0,0,0,0,0,0,this._coordinates[7]);default:return e.fromCartesian(0,0,0,0,0,0,0,0,0)}},e.prototype.toString=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","e1","e2","e3","e12","e23","e31","e123"])},e.prototype.toStringIJK=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","i","j","k","ij","jk","ki","I"])},e.prototype.toStringLATEX=function(){return bladeSTR.stringFromCoordinates(this._coordinates,["1","e_{1}","e_{2}","e_{3}","e_{12}","e_{23}","e_{31}","e_{123}"])},e}(),i[s]=o,"object"==typeof e&&e&&"object"==typeof e.exports?module.exports=i:"function"==typeof define&&define.amd&&define(n,[],function(){return i}),"object"==typeof e&&e.document&&"object"==typeof e.document&&(e[t]=i)}("object"==typeof window?window:"object"==typeof module?module:void 0,"BLADE","blade"),function(){function e(){return"("+Array.prototype.slice.call(arguments).join("|")+")"}function t(){return e.apply(null,arguments)+"?"}function n(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function i(e,t){for(var n=e.length;n>0&&-1!==t.indexOf(e.charAt(n-1));--n);return e.substring(0,n)}function r(e,t){return this.filename=e,this.grammar=t,this}function s(e,t){for(var n=e.length;n--;)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function a(e,t){void 0===t&&(t="file_input");var n=new r(e,ti.ParseTables);"file_input"===t?n.setup(ti.ParseTables.sym.file_input):ei.asserts.fail("todo;");var i=ti.Tokenizer.Tokens.T_COMMENT,s=ti.Tokenizer.Tokens.T_NL,a=ti.Tokenizer.Tokens.T_OP,o=new ti.Tokenizer(e,"single_input"===t,function(e,t,r,o,l){return e!==i&&e!==s&&(e===a&&(e=ti.OpMap[t]),n.addtoken(e,t,[r,o,l]))?!0:void 0});return function(e){if(e=o.generateTokens(e)){if("done"!==e)throw new ti.builtin.ParseError("incomplete input",this.filename);return n.rootnode}return!1}}function o(){}function l(){}function u(){}function c(){}function f(){}function h(){}function p(){}function d(){}function m(){}function b(){}function g(){}function v(){}function _(){}function E(){}function y(){}function T(){}function S(){}function w(){}function k(){}function x(){}function R(){}function P(){}function O(){}function C(){}function A(){}function M(){}function $(){}function H(){}function D(){}function N(){}function I(){}function L(){}function z(){}function U(){}function F(e){return this.body=e,this}function B(e){return this.body=e,this}function G(e){return ei.asserts.assert(null!==e&&void 0!==e),this.body=e,this}function j(e){return this.body=e,this}function V(e,t,n,i,r,s){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.name=e,this.args=t,this.body=n,this.decorator_list=i,this.lineno=r,this.col_offset=s,this}function W(e,t,n,i,r,s){return ei.asserts.assert(null!==e&&void 0!==e),this.name=e,this.bases=t,this.body=n,this.decorator_list=i,this.lineno=r,this.col_offset=s,this}function J(e,t,n){return this.value=e,this.lineno=t,this.col_offset=n,this}function Y(e,t,n){return this.targets=e,this.lineno=t,this.col_offset=n,this}function q(e,t,n,i){return ei.asserts.assert(null!==t&&void 0!==t),this.targets=e,this.value=t,this.lineno=n,this.col_offset=i,this}function X(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),ei.asserts.assert(null!==n&&void 0!==n),this.target=e,this.op=t,this.value=n,this.lineno=i,this.col_offset=r,this}function K(e,t,n,i,r){return this.dest=e,this.values=t,this.nl=n,this.lineno=i,this.col_offset=r,this}function Q(e,t,n,i,r,s){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.target=e,this.iter=t,this.body=n,this.orelse=i,this.lineno=r,this.col_offset=s,this}function Z(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=r,this}function et(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=r,this}function tt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.context_expr=e,this.optional_vars=t,this.body=n,this.lineno=i,this.col_offset=r,this}function nt(e,t,n,i,r){return this.type=e,this.inst=t,this.tback=n,this.lineno=i,this.col_offset=r,this}function it(e,t,n,i,r){return this.body=e,this.handlers=t,this.orelse=n,this.lineno=i,this.col_offset=r,this}function rt(e,t,n,i){return this.body=e,this.finalbody=t,this.lineno=n,this.col_offset=i,this}function st(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),this.test=e,this.msg=t,this.lineno=n,this.col_offset=i,this}function at(e,t,n){return this.names=e,this.lineno=t,this.col_offset=n,this}function ot(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.module=e,this.names=t,this.level=n,this.lineno=i,this.col_offset=r,this}function lt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.body=e,this.globals=t,this.locals=n,this.lineno=i,this.col_offset=r,this}function ut(e,t,n){return this.names=e,this.lineno=t,this.col_offset=n,this}function ct(e,t,n){return ei.asserts.assert(null!==e&&void 0!==e),this.value=e,this.lineno=t,this.col_offset=n,this}function ft(e,t){return this.lineno=e,this.col_offset=t,this}function ht(e,t){return this.lineno=e,this.col_offset=t,this}function pt(e,t){return this.lineno=e,this.col_offset=t,this}function dt(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),this.op=e,this.values=t,this.lineno=n,this.col_offset=i,this}function mt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),ei.asserts.assert(null!==n&&void 0!==n),this.left=e,this.op=t,this.right=n,this.lineno=i,this.col_offset=r,this}function bt(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.op=e,this.operand=t,this.lineno=n,this.col_offset=i,this}function gt(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.args=e,this.body=t,this.lineno=n,this.col_offset=i,this}function vt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),ei.asserts.assert(null!==n&&void 0!==n),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=r,this}function _t(e,t,n,i){return this.keys=e,this.values=t,this.lineno=n,this.col_offset=i,this}function Et(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),this.elt=e,this.generators=t,this.lineno=n,this.col_offset=i,this}function yt(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),this.elt=e,this.generators=t,this.lineno=n,this.col_offset=i,this}function Tt(e,t,n){return this.value=e,this.lineno=t,this.col_offset=n,this}function St(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),this.left=e,this.ops=t,this.comparators=n,this.lineno=i,this.col_offset=r,this}function wt(e,t,n,i,r,s,a){return ei.asserts.assert(null!==e&&void 0!==e),this.func=e,this.args=t,this.keywords=n,this.starargs=i,this.kwargs=r,this.lineno=s,this.col_offset=a,this}function kt(e,t,n){return ei.asserts.assert(null!==e&&void 0!==e),this.n=e,this.lineno=t,this.col_offset=n,this}function xt(e,t,n){return ei.asserts.assert(null!==e&&void 0!==e),this.s=e,this.lineno=t,this.col_offset=n,this}function Rt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),ei.asserts.assert(null!==n&&void 0!==n),this.value=e,this.attr=t,this.ctx=n,this.lineno=i,this.col_offset=r,this}function Pt(e,t,n,i,r){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),ei.asserts.assert(null!==n&&void 0!==n),this.value=e,this.slice=t,this.ctx=n,this.lineno=i,this.col_offset=r,this}function Ot(e,t,n,i){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.id=e,this.ctx=t,this.lineno=n,this.col_offset=i,this}function Ct(e,t,n,i){return ei.asserts.assert(null!==t&&void 0!==t),this.elts=e,this.ctx=t,this.lineno=n,this.col_offset=i,this}function At(e,t,n,i){return ei.asserts.assert(null!==t&&void 0!==t),this.elts=e,this.ctx=t,this.lineno=n,this.col_offset=i,this}function Mt(){return this}function $t(e,t,n){return this.lower=e,this.upper=t,this.step=n,this}function Ht(e){return this.dims=e,this}function Dt(e){return ei.asserts.assert(null!==e&&void 0!==e),this.value=e,this}function Nt(e,t,n){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.target=e,this.iter=t,this.ifs=n,this}function It(e,t,n,i,r){return this.type=e,this.name=t,this.body=n,this.lineno=i,this.col_offset=r,this}function Lt(e,t,n,i){return this.args=e,this.vararg=t,this.kwarg=n,this.defaults=i,this}function zt(e,t){return ei.asserts.assert(null!==e&&void 0!==e),ei.asserts.assert(null!==t&&void 0!==t),this.arg=e,this.value=t,this}function Ut(e,t){return ei.asserts.assert(null!==e&&void 0!==e),this.name=e,this.asname=t,this}function Ft(e,t){this.c_encoding=e,this.c_filename=t}function Bt(e){return ei.asserts.assert(void 0!==e),null===e.children?0:e.children.length}function Gt(e,t){return ei.asserts.assert(void 0!==e),ei.asserts.assert(void 0!==t),e.children[t]}function jt(e,t){ei.asserts.assert(e.type===t,"node wasn't expected type")}function Vt(e){return ei.asserts.assert("string"==typeof e,"expecting string, got "+typeof e),new ti.builtin.str(e)}function Wt(e){switch(e.type){case Hi.single_input:if(Gt(e,0).type===Di.T_NEWLINE)break;return Wt(Gt(e,0));case Hi.file_input:for(var t=0,n=0;Bt(e)>n;++n){var i=Gt(e,n);i.type===Hi.stmt&&(t+=Wt(i))}return t;case Hi.stmt:return Wt(Gt(e,0));case Hi.compound_stmt:return 1;case Hi.simple_stmt:return Math.floor(Bt(e)/2);case Hi.suite:if(1===Bt(e))return Wt(Gt(e,0));for(t=0,n=2;Bt(e)-1>n;++n)t+=Wt(Gt(e,n));return t;default:ei.asserts.fail("Non-statement found")}return 0}function Jt(e,t,n,i){if("None"===n)throw new ti.builtin.SyntaxError("assignment to None",e.c_filename,i);if("True"===n||"False"===n)throw new ti.builtin.SyntaxError("assignment to True or False is forbidden",e.c_filename,i)}function Yt(e,t,n,i){ei.asserts.assert(n!==f&&n!==c);var r=null,s=null;switch(t.constructor){case Rt:case Ot:n===l&&Jt(e,i,t.attr,i.lineno),t.ctx=n;break;case Pt:t.ctx=n;break;case Ct:t.ctx=n,r=t.elts;break;case At:if(0===t.elts.length)throw new ti.builtin.SyntaxError("can't assign to ()",e.c_filename,i.lineno);t.ctx=n,r=t.elts;break;case gt:s="lambda";break;case wt:s="function call";break;case dt:case mt:case bt:s="operator";break;case yt:s="generator expression";break;case Tt:s="yield expression";break;case Et:s="list comprehension";break;case _t:case kt:case xt:s="literal";break;case St:s="comparison";break;case vt:s="conditional expression";break;default:ei.asserts.fail("unhandled expression in assignment")}if(s)throw new ti.builtin.SyntaxError("can't "+(n===l?"assign to":"delete")+" "+s,e.c_filename,i.lineno);if(r)for(t=0;r.length>t;++t)Yt(e,r[t],n,i)}function qt(e){return ei.asserts.assert(void 0!==Ni[e.type]),Ni[e.type]}function Xt(e,t){if(jt(t,Hi.comp_op),1===Bt(t))switch(t=Gt(t,0),t.type){case Di.T_LESS:return $;case Di.T_GREATER:return D;case Di.T_EQEQUAL:return A;case Di.T_LESSEQUAL:return H;case Di.T_GREATEREQUAL:return N;case Di.T_NOTEQUAL:return M;case Di.T_NAME:if("in"===t.value)return z;if("is"===t.value)return I}else if(2===Bt(t)&&Gt(t,0).type===Di.T_NAME){if("in"===Gt(t,1).value)return U;if("is"===Gt(t,0).value)return L}ei.asserts.fail("invalid comp_op")}function Kt(e,t){ei.asserts.assert(t.type===Hi.testlist||t.type===Hi.listmaker||t.type===Hi.testlist_gexp||t.type===Hi.testlist_safe||t.type===Hi.testlist1);for(var n=[],i=0;Bt(t)>i;i+=2)ei.asserts.assert(Gt(t,i).type===Hi.test||Gt(t,i).type===Hi.old_test),n[i/2]=Fn(e,Gt(t,i));return n}function Qt(e,t){jt(t,Hi.suite);var n,i=[],r=0;if(Gt(t,0).type===Hi.simple_stmt){t=Gt(t,0),n=Bt(t)-1,Gt(t,n-1).type===Di.T_SEMI&&(n-=1);for(var s=0;n>s;s+=2)i[r++]=Gn(e,Gt(t,s))}else for(s=2;Bt(t)-1>s;++s)if(n=Gt(t,s),jt(n,Hi.stmt),1===Wt(n))i[r++]=Gn(e,n);else{n=Gt(n,0),jt(n,Hi.simple_stmt);for(var a=0;Bt(n)>a;a+=2){if(0===Bt(Gt(n,a))){ei.asserts.assert(a+1===Bt(n));break}i[r++]=Gn(e,Gt(n,a))}}return ei.asserts.assert(r===Wt(t)),i}function Zt(e,t,n){if(jt(t,Hi.except_clause),jt(n,Hi.suite),1===Bt(t))return new It(null,null,Qt(e,n),t.lineno,t.col_offset);if(2===Bt(t))return new It(Fn(e,Gt(t,1)),null,Qt(e,n),t.lineno,t.col_offset);if(4===Bt(t)){var i=Fn(e,Gt(t,3));return Yt(e,i,l,Gt(t,3)),new It(Fn(e,Gt(t,1)),i,Qt(e,n),t.lineno,t.col_offset)}ei.asserts.fail("wrong number of children for except clause")}function en(e,t){var n,i=Bt(t),r=(i-3)/3,s=[],a=null;if(jt(t,Hi.try_stmt),n=Qt(e,Gt(t,2)),Gt(t,i-3).type===Di.T_NAME)"finally"===Gt(t,i-3).value?(i>=9&&Gt(t,i-6).type===Di.T_NAME&&(s=Qt(e,Gt(t,i-4)),r--),a=Qt(e,Gt(t,i-1))):s=Qt(e,Gt(t,i-1)),r--;else if(Gt(t,i-3).type!==Hi.except_clause)throw new ti.builtin.SyntaxError("malformed 'try' statement",e.c_filename,t.lineno);if(r>0){for(var i=[],o=0;r>o;++o)i[o]=Zt(e,Gt(t,3+3*o),Gt(t,5+3*o));if(r=new it(n,i,s,t.lineno,t.col_offset),!a)return r;n=[r]}return ei.asserts.assert(null!==a),new rt(n,a,t.lineno,t.col_offset)}function tn(e,t){jt(t,Hi.dotted_name);for(var n=t.lineno,i=t.col_offset,r=Vt(Gt(t,0).value),s=new Ot(r,o,n,i),a=2;Bt(t)>a;a+=2)r=Vt(Gt(t,a).value),s=new Rt(s,r,o,n,i);return s}function nn(e,t){jt(t,Hi.decorator),jt(Gt(t,0),Di.T_AT),jt(Gt(t,Bt(t)-1),Di.T_NEWLINE);var n=tn(e,Gt(t,1));return 3===Bt(t)?n:5===Bt(t)?new wt(n,[],[],null,null,t.lineno,t.col_offset):En(e,Gt(t,3),n)}function rn(e,t){jt(t,Hi.decorators);for(var n=[],i=0;Bt(t)>i;++i)n[i]=nn(e,Gt(t,i));return n}function sn(e,t){jt(t,Hi.decorated);var n=rn(e,Gt(t,0));ei.asserts.assert(Gt(t,1).type===Hi.funcdef||Gt(t,1).type===Hi.classdef);var i=null;return Gt(t,1).type===Hi.funcdef?i=wn(e,Gt(t,1),n):Gt(t,1)===Hi.classdef&&(i=xn(e,Gt(t,1),n)),i&&(i.lineno=t.lineno,i.col_offset=t.col_offset),i}function an(e,t){return jt(t,Hi.with_var),Fn(e,Gt(t,1))}function on(e,t){var n=3;ei.asserts.assert(t.type===Hi.with_stmt);var i=Fn(e,Gt(t,1));if(Gt(t,2).type===Hi.with_var){var r=an(e,Gt(t,2));Yt(e,r,l,t),n=4}return new tt(i,r,Qt(e,Gt(t,n)),t.lineno,t.col_offset)}function ln(e,t){var n,i=null,r=null,s=Bt(t);return ei.asserts.assert(2===s||4===s||6===s),jt(t,Hi.exec_stmt),n=Fn(e,Gt(t,1)),s>=4&&(i=Fn(e,Gt(t,3))),6===s&&(r=Fn(e,Gt(t,5))),new lt(n,i,r,t.lineno,t.col_offset)}function un(e,t){if(jt(t,Hi.if_stmt),4===Bt(t))return new et(Fn(e,Gt(t,1)),Qt(e,Gt(t,3)),[],t.lineno,t.col_offset);var n=Gt(t,4).value.charAt(2);if("s"===n)return new et(Fn(e,Gt(t,1)),Qt(e,Gt(t,3)),Qt(e,Gt(t,6)),t.lineno,t.col_offset);if("i"===n){var n=Bt(t)-4,i=!1,r=[];for(Gt(t,n+1).type===Di.T_NAME&&"s"===Gt(t,n+1).value.charAt(2)&&(i=!0,n-=3),n/=4,i&&(r=[new et(Fn(e,Gt(t,Bt(t)-6)),Qt(e,Gt(t,Bt(t)-4)),Qt(e,Gt(t,Bt(t)-1)),Gt(t,Bt(t)-6).lineno,Gt(t,Bt(t)-6).col_offset)],n--),i=0;n>i;++i)var s=5+4*(n-i-1),r=[new et(Fn(e,Gt(t,s)),Qt(e,Gt(t,s+2)),r,Gt(t,s).lineno,Gt(t,s).col_offset)];return new et(Fn(e,Gt(t,1)),Qt(e,Gt(t,3)),r,t.lineno,t.col_offset)}ei.asserts.fail("unexpected token in 'if' statement")}function cn(e,t,n){jt(t,Hi.exprlist);for(var i=[],r=0;Bt(t)>r;r+=2){var s=Fn(e,Gt(t,r));i[r/2]=s,n&&Yt(e,s,n,Gt(t,r))}return i}function fn(e,t){return jt(t,Hi.del_stmt),new Y(cn(e,Gt(t,1),u),t.lineno,t.col_offset)}function hn(e,t){jt(t,Hi.global_stmt);for(var n=[],i=1;Bt(t)>i;i+=2)n[(i-1)/2]=Vt(Gt(t,i).value);return new ut(n,t.lineno,t.col_offset)}function pn(e,t){return jt(t,Hi.assert_stmt),2===Bt(t)?new st(Fn(e,Gt(t,1)),null,t.lineno,t.col_offset):4===Bt(t)?new st(Fn(e,Gt(t,1)),Fn(e,Gt(t,3)),t.lineno,t.col_offset):(ei.asserts.fail("improper number of parts to assert stmt"),void 0)}function dn(e,t){e:for(;;)switch(t.type){case Hi.import_as_name:var n=null,i=Vt(Gt(t,0).value);return 3===Bt(t)&&(n=Gt(t,2).value),new Ut(i,null==n?null:Vt(n));case Hi.dotted_as_name:if(1===Bt(t)){t=Gt(t,0);continue e}return n=dn(e,Gt(t,0)),ei.asserts.assert(!n.asname),n.asname=Vt(Gt(t,2).value),n;case Hi.dotted_name:if(1===Bt(t))return new Ut(Vt(Gt(t,0).value),null);for(n="",i=0;Bt(t)>i;i+=2)n+=Gt(t,i).value+".";return new Ut(Vt(n.substr(0,n.length-1)),null);case Di.T_STAR:return new Ut(Vt("*"),null);default:throw new ti.builtin.SyntaxError("unexpected import name",e.c_filename,t.lineno)}}function mn(e,t){jt(t,Hi.import_stmt);var n=t.lineno,i=t.col_offset;if(t=Gt(t,0),t.type===Hi.import_name){t=Gt(t,1),jt(t,Hi.dotted_as_names);for(var r=[],s=0;Bt(t)>s;s+=2)r[s/2]=dn(e,Gt(t,s));return new at(r,n,i)}if(t.type===Hi.import_from){for(var a=null,o=0,r=1;Bt(t)>r;++r){if(Gt(t,r).type===Hi.dotted_name){a=dn(e,Gt(t,r)),r++;break}if(Gt(t,r).type!==Di.T_DOT)break;o++}switch(++r,Gt(t,r).type){case Di.T_STAR:t=Gt(t,r);break;case Di.T_LPAR:t=Gt(t,r+1),Bt(t);break;case Hi.import_as_names:if(t=Gt(t,r),r=Bt(t),0===r%2)throw new ti.builtin.SyntaxError("trailing comma not allowed without surrounding parentheses",e.c_filename,t.lineno);break;default:throw new ti.builtin.SyntaxError("Unexpected node-type in from-import",e.c_filename,t.lineno)}if(r=[],t.type===Di.T_STAR)r[0]=dn(e,t);else for(s=0;Bt(t)>s;s+=2)r[s/2]=dn(e,Gt(t,s));return new ot(Vt(a?a.name.v:""),r,o,n,i)}throw new ti.builtin.SyntaxError("unknown import statement",e.c_filename,t.lineno)}function bn(e,t){return ei.asserts.assert(t.type===Hi.testlist_gexp||t.type===Hi.argument),Bt(t)>1&&Gt(t,1).type===Hi.gen_for?Pn(e,t):Mn(e,t)}function gn(e,t){function n(e,t){for(var n=0;;){if(jt(t,Hi.list_iter),Gt(t,0).type===Hi.list_for)return n;if(t=Gt(t,0),jt(t,Hi.list_if),n++,2==Bt(t))return n;t=Gt(t,2)}}jt(t,Hi.listmaker),ei.asserts.assert(Bt(t)>1);for(var i=Fn(e,Gt(t,0)),r=function(e,t){var n=0,i=Gt(t,1);e:for(;;){if(n++,jt(i,Hi.list_for),5!==Bt(i))return n;i=Gt(i,4);t:for(;;){if(jt(i,Hi.list_iter),i=Gt(i,0),i.type===Hi.list_for)continue e;if(i.type===Hi.list_if){if(3===Bt(i)){i=Gt(i,2);continue t}return n}break}break}}(e,t),s=[],a=Gt(t,1),o=0;r>o;++o){jt(a,Hi.list_for);var u=Gt(a,1),c=cn(e,u,l),f=Mn(e,Gt(a,3)),u=1===Bt(u)?new Nt(c[0],f,[]):new Nt(new At(c,l,a.lineno,a.col_offset),f,[]);if(5===Bt(a)){for(var a=Gt(a,4),c=n(e,a),f=[],h=0;c>h;++h)jt(a,Hi.list_iter),a=Gt(a,0),jt(a,Hi.list_if),f[h]=Fn(e,Gt(a,1)),3===Bt(a)&&(a=Gt(a,2));a.type===Hi.list_iter&&(a=Gt(a,0)),u.ifs=f}s[o]=u}return new Et(i,s,t.lineno,t.col_offset)}function vn(e,t){if(Gt(t,0).type===Di.T_MINUS&&2===Bt(t)){var n=Gt(t,1);if(n.type===Hi.factor&&1===Bt(n)&&(n=Gt(n,0),n.type===Hi.power&&1===Bt(n)&&(n=Gt(n,0),n.type===Hi.atom))){var i=Gt(n,0);if(i.type===Di.T_NUMBER)return i.value="-"+i.value,zn(e,n)}}switch(n=Fn(e,Gt(t,1)),Gt(t,0).type){case Di.T_PLUS:return new bt(O,n,t.lineno,t.col_offset);case Di.T_MINUS:return new bt(C,n,t.lineno,t.col_offset);case Di.T_TILDE:return new bt(R,n,t.lineno,t.col_offset)}ei.asserts.fail("unhandled factor")}function _n(e,t){var n=[];jt(t,Hi.for_stmt),9===Bt(t)&&(n=Qt(e,Gt(t,8)));var i=Gt(t,1),r=cn(e,i,l),i=1===Bt(i)?r[0]:new At(r,l,t.lineno,t.col_offset);return new Q(i,Mn(e,Gt(t,3)),Qt(e,Gt(t,5)),n,t.lineno,t.col_offset)}function En(e,t,n){jt(t,Hi.arglist);for(var i=0,r=0,s=0,a=0;Bt(t)>a;++a){var o=Gt(t,a);o.type===Hi.argument&&(1===Bt(o)?i++:Gt(o,1).type===Hi.gen_for?s++:r++)}if(s>1||s&&(i||r))throw new ti.builtin.SyntaxError("Generator expression must be parenthesized if not sole argument",e.c_filename,t.lineno);if(i+r+s>255)throw new ti.builtin.SyntaxError("more than 255 arguments",e.c_filename,t.lineno);for(var s=[],l=[],r=i=0,u=null,c=null,a=0;Bt(t)>a;++a)if(o=Gt(t,a),o.type===Hi.argument)if(1===Bt(o)){if(r)throw new ti.builtin.SyntaxError("non-keyword arg after keyword arg",e.c_filename,t.lineno);if(u)throw new ti.builtin.SyntaxError("only named arguments may follow *expression",e.c_filename,t.lineno);s[i++]=Fn(e,Gt(o,0))}else if(Gt(o,1).type===Hi.gen_for)s[i++]=Pn(e,o);else{var f=Fn(e,Gt(o,0));if(f.constructor===gt)throw new ti.builtin.SyntaxError("lambda cannot contain assignment",e.c_filename,t.lineno);if(f.constructor!==Ot)throw new ti.builtin.SyntaxError("keyword can't be an expression",e.c_filename,t.lineno);f=f.id,Jt(e,Gt(o,0),f,t.lineno);for(var h=0;r>h;++h)if(l[h].arg===f)throw new ti.builtin.SyntaxError("keyword argument repeated",e.c_filename,t.lineno);l[r++]=new zt(f,Fn(e,Gt(o,2)))}else o.type===Di.T_STAR?u=Fn(e,Gt(t,++a)):o.type===Di.T_DOUBLESTAR&&(c=Fn(e,Gt(t,++a)));return new wt(n,s,l,u,c,n.lineno,n.col_offset)}function yn(e,t,n){if(jt(t,Hi.trailer),Gt(t,0).type===Di.T_LPAR)return 2===Bt(t)?new wt(n,[],[],null,null,t.lineno,t.col_offset):En(e,Gt(t,1),n);if(Gt(t,0).type===Di.T_DOT)return new Rt(n,Vt(Gt(t,1).value),o,t.lineno,t.col_offset);if(jt(Gt(t,0),Di.T_LSQB),jt(Gt(t,2),Di.T_RSQB),t=Gt(t,1),1===Bt(t))return new Pt(n,Ln(e,Gt(t,0)),o,t.lineno,t.col_offset);for(var i=!0,r=[],s=0;Bt(t)>s;s+=2){var a=Ln(e,Gt(t,s));a.constructor!==Dt&&(i=!1),r[s/2]=a}if(!i)return new Pt(n,new Ht(r),o,t.lineno,t.col_offset);for(e=[],s=0;r.length>s;++s)a=r[s],ei.asserts.assert(a.constructor===Dt&&null!==a.value&&void 0!==a.value),e[s]=a.value;return r=new At(e,o,t.lineno,t.col_offset),new Pt(n,new Dt(r),o,t.lineno,t.col_offset)}function Tn(e,t){var n;switch(jt(t,Hi.flow_stmt),n=Gt(t,0),n.type){case Hi.break_stmt:return new ht(t.lineno,t.col_offset);case Hi.continue_stmt:return new pt(t.lineno,t.col_offset);case Hi.yield_stmt:return new ct(Fn(e,Gt(n,0)),t.lineno,t.col_offset);
case Hi.return_stmt:return 1===Bt(n)?new J(null,t.lineno,t.col_offset):new J(Mn(e,Gt(n,1)),t.lineno,t.col_offset);case Hi.raise_stmt:if(1===Bt(n))return new nt(null,null,null,t.lineno,t.col_offset);if(2===Bt(n))return new nt(Fn(e,Gt(n,1)),null,null,t.lineno,t.col_offset);if(4===Bt(n))return new nt(Fn(e,Gt(n,1)),Fn(e,Gt(n,3)),null,t.lineno,t.col_offset);if(6===Bt(n))return new nt(Fn(e,Gt(n,1)),Fn(e,Gt(n,3)),Fn(e,Gt(n,5)),t.lineno,t.col_offset);default:ei.asserts.fail("unexpected flow_stmt")}ei.asserts.fail("unhandled flow statement")}function Sn(e,t){var n,i=null,r=null;if(t.type===Hi.parameters){if(2===Bt(t))return new Lt([],null,null,[]);t=Gt(t,1)}jt(t,Hi.varargslist);for(var s=[],a=[],o=!1,l=0,u=0,c=0;Bt(t)>l;)switch(n=Gt(t,l),n.type){case Hi.fpdef:for(var f=0;;){if(Bt(t)>l+1&&Gt(t,l+1).type===Di.T_EQUAL)a[u++]=Fn(e,Gt(t,l+2)),l+=2,o=!0;else if(o){if(f)throw new ti.builtin.SyntaxError("parenthesized arg with default",e.c_filename,t.lineno);throw new ti.builtin.SyntaxError("non-default argument follows default argument",e.c_filename,t.lineno)}{if(3!==Bt(n)){if(Gt(n,0).type===Di.T_NAME){Jt(e,t,Gt(n,0).value,t.lineno);var p=Vt(Gt(n,0).value);s[c++]=new Ot(p,h,n.lineno,n.col_offset)}if(l+=2,f)throw new ti.builtin.SyntaxError("parenthesized argument names are invalid",e.c_filename,t.lineno);break}if(n=Gt(n,1),1!==Bt(n))throw new ti.builtin.SyntaxError("tuple parameter unpacking has been removed",e.c_filename,t.lineno);f=!0,n=Gt(n,0),ei.asserts.assert(n.type===Hi.fpdef)}}break;case Di.T_STAR:Jt(e,Gt(t,l+1),Gt(t,l+1).value,t.lineno),i=Vt(Gt(t,l+1).value),l+=3;break;case Di.T_DOUBLESTAR:Jt(e,Gt(t,l+1),Gt(t,l+1).value,t.lineno),r=Vt(Gt(t,l+1).value),l+=3;break;default:ei.asserts.fail("unexpected node in varargslist")}return new Lt(s,i,r,a)}function wn(e,t,n){jt(t,Hi.funcdef);var i=Vt(Gt(t,1).value);Jt(e,Gt(t,1),Gt(t,1).value,t.lineno);var r=Sn(e,Gt(t,2));return e=Qt(e,Gt(t,4)),new V(i,r,e,n,t.lineno,t.col_offset)}function kn(e,t){return ei.asserts.assert(Bt(t)>0),jt(t,Hi.testlist),1===Bt(t)?[Fn(e,Gt(t,0))]:Kt(e,t)}function xn(e,t,n){jt(t,Hi.classdef),Jt(e,t,Gt(t,1).value,t.lineno);var i=Vt(Gt(t,1).value);if(4===Bt(t))return new W(i,[],Qt(e,Gt(t,3)),n,t.lineno,t.col_offset);if(Gt(t,3).type===Di.T_RPAR)return new W(i,[],Qt(e,Gt(t,5)),n,t.lineno,t.col_offset);var r=kn(e,Gt(t,3));return e=Qt(e,Gt(t,6)),new W(i,r,e,n,t.lineno,t.col_offset)}function Rn(e,t){var n,i;return 3===Bt(t)?(n=new Lt([],null,null,[]),i=Fn(e,Gt(t,2))):(n=Sn(e,Gt(t,1)),i=Fn(e,Gt(t,3))),new gt(n,i,t.lineno,t.col_offset)}function Pn(e,t){function n(e,t){for(var n=0;;){if(jt(t,Hi.gen_iter),Gt(t,0).type===Hi.gen_for)return n;if(t=Gt(t,0),jt(t,Hi.gen_if),n++,2==Bt(t))return n;t=Gt(t,2)}}ei.asserts.assert(t.type===Hi.testlist_gexp||t.type===Hi.argument),ei.asserts.assert(Bt(t)>1);for(var i=Fn(e,Gt(t,0)),r=function(e,t){var n=0,i=Gt(t,1);e:for(;;){if(n++,jt(i,Hi.gen_for),5!==Bt(i))return n;i=Gt(i,4);t:for(;;){if(jt(i,Hi.gen_iter),i=Gt(i,0),i.type===Hi.gen_for)continue e;if(i.type===Hi.gen_if){if(3===Bt(i)){i=Gt(i,2);continue t}return n}break}break}ei.asserts.fail("logic error in countGenFors")}(e,t),s=[],a=Gt(t,1),o=0;r>o;++o){jt(a,Hi.gen_for);var u=Gt(a,1),c=cn(e,u,l),f=Fn(e,Gt(a,3)),u=1===Bt(u)?new Nt(c[0],f,[]):new Nt(new At(c,l,a.lineno,a.col_offset),f,[]);if(5===Bt(a)){for(var a=Gt(a,4),c=n(e,a),h=[],p=0;c>p;++p)jt(a,Hi.gen_iter),a=Gt(a,0),jt(a,Hi.gen_if),f=Fn(e,Gt(a,1)),h[p]=f,3===Bt(a)&&(a=Gt(a,2));a.type===Hi.gen_iter&&(a=Gt(a,0)),u.ifs=h}s[o]=u}return new yt(i,s,t.lineno,t.col_offset)}function On(e,t){return jt(t,Hi.while_stmt),4===Bt(t)?new Z(Fn(e,Gt(t,1)),Qt(e,Gt(t,3)),[],t.lineno,t.col_offset):7===Bt(t)?new Z(Fn(e,Gt(t,1)),Qt(e,Gt(t,3)),Qt(e,Gt(t,6)),t.lineno,t.col_offset):(ei.asserts.fail("wrong number of tokens for 'while' stmt"),void 0)}function Cn(e,t){switch(jt(t,Hi.augassign),t=Gt(t,0),t.value.charAt(0)){case"+":return m;case"-":return b;case"/":return"/"===t.value.charAt(1)?x:v;case"%":return _;case"<":return y;case">":return T;case"&":return k;case"^":return w;case"|":return S;case"*":return"*"===t.value.charAt(1)?E:g;default:ei.asserts.fail("invalid augassign")}}function An(e,t){for(var n=new mt(Fn(e,Gt(t,0)),qt(Gt(t,1)),Fn(e,Gt(t,2)),t.lineno,t.col_offset),i=(Bt(t)-1)/2,r=1;i>r;++r)var s=Gt(t,2*r+1),a=qt(s),o=Fn(e,Gt(t,2*r+2)),n=new mt(n,a,o,s.lineno,s.col_offset);return n}function Mn(e,t){return ei.asserts.assert(Bt(t)>0),t.type===Hi.testlist_gexp?Bt(t)>1&&ei.asserts.assert(Gt(t,1).type!==Hi.gen_for):ei.asserts.assert(t.type===Hi.testlist||t.type===Hi.testlist_safe||t.type===Hi.testlist1),1===Bt(t)?Fn(e,Gt(t,0)):new At(Kt(e,t),o,t.lineno,t.col_offset)}function $n(e,t){if(jt(t,Hi.expr_stmt),1===Bt(t))return new ct(Mn(e,Gt(t,0)),t.lineno,t.col_offset);if(Gt(t,1).type===Hi.augassign){var n=Gt(t,0),i=Mn(e,n);switch(i.constructor){case yt:throw new ti.builtin.SyntaxError("augmented assignment to generator expression not possible",e.c_filename,t.lineno);case Tt:throw new ti.builtin.SyntaxError("augmented assignment to yield expression not possible",e.c_filename,t.lineno);case Ot:Jt(e,n,i.id,t.lineno);break;case Rt:case Pt:break;default:throw new ti.builtin.SyntaxError("illegal expression for augmented assignment",e.c_filename,t.lineno)}return Yt(e,i,l,n),n=Gt(t,2),n=n.type===Hi.testlist?Mn(e,n):Fn(e,n),new X(i,Cn(e,Gt(t,1)),n,t.lineno,t.col_offset)}jt(Gt(t,1),Di.T_EQUAL);for(var i=[],r=0;Bt(t)-2>r;r+=2){if(n=Gt(t,r),n.type===Hi.yield_expr)throw new ti.builtin.SyntaxError("assignment to yield expression not possible",e.c_filename,t.lineno);n=Mn(e,n),Yt(e,n,l,Gt(t,r)),i[r/2]=n}return n=Gt(t,Bt(t)-1),n=n.type===Hi.testlist?Mn(e,n):Fn(e,n),new q(i,n,t.lineno,t.col_offset)}function Hn(e,t){return ei.asserts.assert(5===Bt(t)),new vt(Fn(e,Gt(t,2)),Fn(e,Gt(t,0)),Fn(e,Gt(t,4)),t.lineno,t.col_offset)}function Dn(e,t){var n=t.charAt(0),i=!1;if("u"===n||"U"===n?(t=t.substr(1),n=t.charAt(0)):("r"===n||"R"===n)&&(t=t.substr(1),n=t.charAt(0),i=!0),ei.asserts.assert("b"!==n&&"B"!==n,"todo; haven't done b'' strings yet"),ei.asserts.assert("'"===n||'"'===n&&t.charAt(t.length-1)===n),t=t.substr(1,t.length-2),t.length>=4&&t.charAt(0)===n&&t.charAt(1)===n&&(ei.asserts.assert(t.charAt(t.length-1)===n&&t.charAt(t.length-2)===n),t=t.substr(2,t.length-4)),i||-1===t.indexOf("\\"))n=Vt(decodeURIComponent(escape(t)));else{for(var n=Vt,i=t,r=i.length,s="",a=0;r>a;++a){var o=i.charAt(a);if("\\"===o){if(++a,o=i.charAt(a),"n"===o)s+="\n";else if("\\"===o)s+="\\";else if("t"===o)s+="	";else if("r"===o)s+="\r";else if("b"===o)s+="\b";else if("f"===o)s+="\f";else if("v"===o)s+="";else if("0"===o)s+="\0";else if('"'===o)s+='"';else if("'"===o)s+="'";else if("\n"!==o)if("x"===o)var o=i.charAt(++a),l=i.charAt(++a),s=s+String.fromCharCode(parseInt(o+l,16));else if("u"===o||"U"===o)var o=i.charAt(++a),l=i.charAt(++a),u=i.charAt(++a),c=i.charAt(++a),s=s+String.fromCharCode(parseInt(o+l,16),parseInt(u+c,16));else s+="\\"+o}else s+=o}n=n(s)}return n}function Nn(e,t){jt(Gt(t,0),Di.T_STRING);for(var n=new ti.builtin.str(""),i=0;Bt(t)>i;++i)try{n=n.sq$concat(Dn(e,Gt(t,i).value))}catch(r){throw new ti.builtin.SyntaxError("invalid string (possibly contains a unicode character)",e.c_filename,Gt(t,i).lineno)}return n}function In(e,t,n){var i=t.charAt(t.length-1);if("j"===i||"J"===i)throw new ti.builtin.SyntaxError("complex numbers are currently unsupported",e.c_filename,n);if("l"===i||"L"===i)return ti.longFromStr(t.substr(0,t.length-1),0);if(-1!==t.indexOf("."))return new ti.builtin.nmber(parseFloat(t),ti.builtin.nmber.float$);if(n=t,e=!1,"-"===t.charAt(0)&&(n=t.substr(1),e=!0),"0"!==n.charAt(0)||"x"!==n.charAt(1)&&"X"!==n.charAt(1)){if(-1!==t.indexOf("e")||-1!==t.indexOf("E"))return new ti.builtin.nmber(parseFloat(t),ti.builtin.nmber.float$);"0"!==n.charAt(0)||"b"!==n.charAt(1)&&"B"!==n.charAt(1)?"0"===n.charAt(0)?"0"===n?n=0:(n=n.substring(1),("o"===n.charAt(0)||"O"===n.charAt(0))&&(n=n.substring(1)),n=parseInt(n,8)):n=parseInt(n,10):(n=n.substring(2),n=parseInt(n,2))}else n=n.substring(2),n=parseInt(n,16);return n>ti.builtin.lng.threshold$&&Math.floor(n)===n&&-1===t.indexOf("e")&&-1===t.indexOf("E")?ti.longFromStr(t,0):e?new ti.builtin.nmber(-n,ti.builtin.int$):new ti.builtin.nmber(n,ti.builtin.int$)}function Ln(e,t){jt(t,Hi.subscript);var n=Gt(t,0),i=null,r=null,s=null;return n.type===Di.T_DOT?new Mt:1===Bt(t)&&n.type===Hi.test?new Dt(Fn(e,n)):(n.type===Hi.test&&(i=Fn(e,n)),n.type===Di.T_COLON?Bt(t)>1&&(n=Gt(t,1),n.type===Hi.test&&(r=Fn(e,n))):Bt(t)>2&&(n=Gt(t,2),n.type===Hi.test&&(r=Fn(e,n))),n=Gt(t,Bt(t)-1),n.type===Hi.sliceop&&(1===Bt(n)?(n=Gt(n,0),s=new Ot(Vt("None"),o,n.lineno,n.col_offset)):(n=Gt(n,1),n.type===Hi.test&&(s=Fn(e,n)))),new $t(i,r,s))}function zn(e,t){var n=Gt(t,0);switch(n.type){case Di.T_NAME:return new Ot(Vt(n.value),o,t.lineno,t.col_offset);case Di.T_STRING:return new xt(Nn(e,t),t.lineno,t.col_offset);case Di.T_NUMBER:return new kt(In(e,n.value,t.lineno),t.lineno,t.col_offset);case Di.T_LPAR:return n=Gt(t,1),n.type===Di.T_RPAR?new At([],o,t.lineno,t.col_offset):n.type===Hi.yield_expr?Fn(e,n):Bt(n)>1&&Gt(n,1).type===Hi.gen_for?Pn(e,n):bn(e,n);case Di.T_LSQB:return n=Gt(t,1),n.type===Di.T_RSQB?new Ct([],o,t.lineno,t.col_offset):(jt(n,Hi.listmaker),1===Bt(n)||Gt(n,1).type===Di.T_COMMA?new Ct(Kt(e,n),o,t.lineno,t.col_offset):gn(e,n));case Di.T_LBRACE:n=Gt(t,1),Bt(n);for(var i=[],r=[],s=0;Bt(n)>s;s+=4)i[s/4]=Fn(e,Gt(n,s)),r[s/4]=Fn(e,Gt(n,s+2));return new _t(i,r,t.lineno,t.col_offset);case Di.T_BACKQUOTE:throw new ti.builtin.SyntaxError("backquote not supported, use repr()",e.c_filename,t.lineno);default:ei.asserts.fail("unhandled atom",n.type)}}function Un(e,t){jt(t,Hi.power);var n=zn(e,Gt(t,0));if(1===Bt(t))return n;for(var i=1;Bt(t)>i;++i){var r=Gt(t,i);if(r.type!==Hi.trailer)break;r=yn(e,r,n),r.lineno=n.lineno,r.col_offset=n.col_offset,n=r}return Gt(t,Bt(t)-1).type===Hi.factor&&(i=Fn(e,Gt(t,Bt(t)-1)),n=new mt(n,E,i,t.lineno,t.col_offset)),n}function Fn(e,t){e:for(;;){switch(t.type){case Hi.test:case Hi.old_test:if(Gt(t,0).type===Hi.lambdef||Gt(t,0).type===Hi.old_lambdef)return Rn(e,Gt(t,0));if(Bt(t)>1)return Hn(e,t);case Hi.or_test:case Hi.and_test:if(1===Bt(t)){t=Gt(t,0);continue e}for(var n=[],i=0;Bt(t)>i;i+=2)n[i/2]=Fn(e,Gt(t,i));return"and"===Gt(t,1).value?new dt(p,n,t.lineno,t.col_offset):(ei.asserts.assert("or"===Gt(t,1).value),new dt(d,n,t.lineno,t.col_offset));case Hi.not_test:if(1===Bt(t)){t=Gt(t,0);continue e}return new bt(P,Fn(e,Gt(t,1)),t.lineno,t.col_offset);case Hi.comparison:if(1===Bt(t)){t=Gt(t,0);continue e}for(var n=[],r=[],i=1;Bt(t)>i;i+=2)n[(i-1)/2]=Xt(e,Gt(t,i)),r[(i-1)/2]=Fn(e,Gt(t,i+1));return new St(Fn(e,Gt(t,0)),n,r,t.lineno,t.col_offset);case Hi.expr:case Hi.xor_expr:case Hi.and_expr:case Hi.shift_expr:case Hi.arith_expr:case Hi.term:if(1===Bt(t)){t=Gt(t,0);continue e}return An(e,t);case Hi.yield_expr:return i=null,2===Bt(t)&&(i=Mn(e,Gt(t,1))),new Tt(i,t.lineno,t.col_offset);case Hi.factor:if(1===Bt(t)){t=Gt(t,0);continue e}return vn(e,t);case Hi.power:return Un(e,t);default:ei.asserts.fail("unhandled expr","n.type: %d",t.type)}break}}function Bn(e,t){var n=1,i=null;jt(t,Hi.print_stmt),Bt(t)>=2&&Gt(t,1).type===Di.T_RIGHTSHIFT&&(i=Fn(e,Gt(t,2)),n=4);for(var r=[],s=0;Bt(t)>n;n+=2,++s)r[s]=Fn(e,Gt(t,n));return n=Gt(t,Bt(t)-1).type===Di.T_COMMA?!1:!0,new K(i,r,n,t.lineno,t.col_offset)}function Gn(e,t){if(t.type===Hi.stmt&&(ei.asserts.assert(1===Bt(t)),t=Gt(t,0)),t.type===Hi.simple_stmt&&(ei.asserts.assert(1===Wt(t)),t=Gt(t,0)),t.type===Hi.small_stmt)switch(jt(t,Hi.small_stmt),t=Gt(t,0),t.type){case Hi.expr_stmt:return $n(e,t);case Hi.print_stmt:return Bn(e,t);case Hi.del_stmt:return fn(e,t);case Hi.pass_stmt:return new ft(t.lineno,t.col_offset);case Hi.flow_stmt:return Tn(e,t);case Hi.import_stmt:return mn(e,t);case Hi.global_stmt:return hn(e,t);case Hi.exec_stmt:return ln(e,t);case Hi.assert_stmt:return pn(e,t);default:ei.asserts.fail("unhandled small_stmt")}else{var n=Gt(t,0);switch(jt(t,Hi.compound_stmt),n.type){case Hi.if_stmt:return un(e,n);case Hi.while_stmt:return On(e,n);case Hi.for_stmt:return _n(e,n);case Hi.try_stmt:return en(e,n);case Hi.with_stmt:return on(e,n);case Hi.funcdef:return wn(e,n,[]);case Hi.classdef:return xn(e,n,[]);case Hi.decorated:return sn(e,n);default:ei.asserts.assert("unhandled compound_stmt")}}}function jn(e,t,n){this.__name=e,this.__flags=t,this.__scope=t>>ji&Vi,this.__namespaces=n||[]}function Vn(e,t,n,i,r){this.symFlags={},this.name=t,this.varnames=[],this.children=[],this.blockType=n,this.returnsValue=this.varkeywords=this.varargs=this.generator=this.childHasFree=this.hasFree=this.isNested=!1,this.lineno=r,this.table=e,e.cur&&(e.cur.nested||e.cur.blockType===Qi)&&(this.isNested=!0),i.scopeId=er++,e.stss[i.scopeId]=this,this.symbols={}}function Wn(e){this.filename=e,this.top=this.cur=null,this.stack=[],this.curClass=this.global=null,this.tmpname=0,this.stss={}}function Jn(e,t){for(var n in t)e[n]=t[n]}function Yn(e,t,n,i){this.filename=e,this.st=t,this.flags=n,this.interactive=!1,this.nestlevel=0,this.u=null,this.stack=[],this.result=[],this.allUnits=[],this.source=i?i.split("\n"):!1}function qn(){this.private_=this.name=this.ste=null,this.lineno=this.firstlineno=0,this.linenoSet=!1,this.localnames=[],this.blocknum=0,this.blocks=[],this.curblock=0,this.scopename=null,this.suffixCode=this.switchCode=this.varDeclsCode=this.prefixCode="",this.breakBlocks=[],this.continueBlocks=[],this.exceptBlocks=[],this.finallyBlocks=[]}function Xn(e){return!0!==nr[e]?e:e+"_$rw$"}function Kn(e){return ir[e]?e+"_$rn$":e}function Qn(e,t){var n=t.v,i=null;return null===e||null===n||"_"!==n.charAt(0)||"_"!==n.charAt(1)||"_"===n.charAt(n.length-1)&&"_"===n.charAt(n.length-2)?t:(i=e.v,i.replace(/_/g,""),""===i?t:(i=e.v,i.replace(/^_*/,""),i=new ti.builtin.str("_"+i+n)))}var Zn=!0,ei=ei||{};ei.global=this,ei.exportPath_=function(e,t,n){e=e.split("."),n=n||ei.global,e[0]in n||!n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||void 0===t?n=n[i]?n[i]:n[i]={}:n[i]=t},ei.define=function(e,t){var n=t;Zn||ei.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(ei.global.CLOSURE_DEFINES,e)&&(n=ei.global.CLOSURE_DEFINES[e]),ei.exportPath_(e,n)},ei.DEBUG=!1,ei.LOCALE="en",ei.TRUSTED_SITE=!0,ei.provide=function(e){if(!Zn){if(ei.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete ei.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!ei.getObjectByName(t);)ei.implicitNamespaces_[t]=!0}ei.exportPath_(e)},ei.setTestOnly=function(e){if(Zn&&!ei.DEBUG)throw e=e||"",Error(": "+e)},Zn||(ei.isProvided_=function(e){return!ei.implicitNamespaces_[e]&&!!ei.getObjectByName(e)},ei.implicitNamespaces_={}),ei.getObjectByName=function(e,t){for(var n,i=e.split("."),r=t||ei.global;n=i.shift();){if(!ei.isDefAndNotNull(r[n]))return null;r=r[n]}return r},ei.globalize=function(e,t){var n,i=t||ei.global;for(n in e)i[n]=e[n]},ei.addDependency=function(e,t,n){if(ei.DEPENDENCIES_ENABLED){var i;e=e.replace(/\\/g,"/");for(var r=ei.dependencies_,s=0;i=t[s];s++)r.nameToPath[i]=e,e in r.pathToNames||(r.pathToNames[e]={}),r.pathToNames[e][i]=!0;for(i=0;t=n[i];i++)e in r.requires||(r.requires[e]={}),r.requires[e][t]=!0}},ei.ENABLE_DEBUG_LOADER=!0,ei.require=function(e){if(!Zn&&!ei.isProvided_(e)){if(ei.ENABLE_DEBUG_LOADER){var t=ei.getPathFromDeps_(e);if(t)return ei.included_[t]=!0,ei.writeScripts_(),void 0}throw e="goog.require could not find: "+e,ei.global.console&&ei.global.console.error(e),Error(e)}},ei.basePath="",ei.nullFunction=function(){},ei.identityFunction=function(e){return e},ei.abstractMethod=function(){throw Error("unimplemented abstract method")},ei.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(ei.DEBUG&&(ei.instantiatedSingletons_[ei.instantiatedSingletons_.length]=e),e.instance_=new e)}},ei.instantiatedSingletons_=[],ei.DEPENDENCIES_ENABLED=!Zn&&ei.ENABLE_DEBUG_LOADER,ei.DEPENDENCIES_ENABLED&&(ei.included_={},ei.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},ei.inHtmlDocument_=function(){var e=ei.global.document;return e!==void 0&&"write"in e},ei.findBasePath_=function(){if(ei.global.CLOSURE_BASE_PATH)ei.basePath=ei.global.CLOSURE_BASE_PATH;else if(ei.inHtmlDocument_())for(var e=ei.global.document.getElementsByTagName("script"),t=e.length-1;t>=0;--t){var n=e[t].src,i=n.lastIndexOf("?"),i=-1==i?n.length:i;if("base.js"==n.substr(i-7,7)){ei.basePath=n.substr(0,i-7);break}}},ei.importScript_=function(e){var t=ei.global.CLOSURE_IMPORT_SCRIPT||ei.writeScriptTag_;!ei.dependencies_.written[e]&&t(e)&&(ei.dependencies_.written[e]=!0)},ei.writeScriptTag_=function(e){if(ei.inHtmlDocument_()){var t=ei.global.document;if("complete"==t.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}return t.write('<script type="text/javascript" src="'+e+'"></script>'),!0}return!1},ei.writeScripts_=function(){function e(t){if(!(t in r.written)){if(!(t in r.visited)&&(r.visited[t]=!0,t in r.requires))for(var s in r.requires[t])if(!ei.isProvided_(s)){if(!(s in r.nameToPath))throw Error("Undefined nameToPath for "+s);e(r.nameToPath[s])}t in i||(i[t]=!0,n.push(t))}}var t,n=[],i={},r=ei.dependencies_;for(t in ei.included_)r.written[t]||e(t);for(t=0;n.length>t;t++){if(!n[t])throw Error("Undefined script input");ei.importScript_(ei.basePath+n[t])}},ei.getPathFromDeps_=function(e){return e in ei.dependencies_.nameToPath?ei.dependencies_.nameToPath[e]:null},ei.findBasePath_(),ei.global.CLOSURE_NO_DEPS||ei.importScript_(ei.basePath+"deps.js")),ei.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&e.splice!==void 0&&e.propertyIsEnumerable!==void 0&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||e.call!==void 0&&e.propertyIsEnumerable!==void 0&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&e.call===void 0)return"object";return t},ei.isDef=function(e){return void 0!==e},ei.isNull=function(e){return null===e},ei.isDefAndNotNull=function(e){return null!=e},ei.isArray=function(e){return"array"==ei.typeOf(e)},ei.isArrayLike=function(e){var t=ei.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},ei.isDateLike=function(e){return ei.isObject(e)&&"function"==typeof e.getFullYear},ei.isString=function(e){return"string"==typeof e},ei.isBoolean=function(e){return"boolean"==typeof e},ei.isNumber=function(e){return"number"==typeof e},ei.isFunction=function(e){return"function"==ei.typeOf(e)},ei.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},ei.getUid=function(e){return e[ei.UID_PROPERTY_]||(e[ei.UID_PROPERTY_]=++ei.uidCounter_)},ei.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(ei.UID_PROPERTY_);try{delete e[ei.UID_PROPERTY_]}catch(t){}},ei.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),ei.uidCounter_=0,ei.getHashCode=ei.getUid,ei.removeHashCode=ei.removeUid,ei.cloneObject=function(e){var t=ei.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n,t="array"==t?[]:{};for(n in e)t[n]=ei.cloneObject(e[n]);return t}return e},ei.bindNative_=function(e){return e.call.apply(e.bind,arguments)},ei.bindJs_=function(e,t){if(!e)throw Error();if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),e.apply(t,i)}}return function(){return e.apply(t,arguments)}},ei.bind=function(){return ei.bind=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?ei.bindNative_:ei.bindJs_,ei.bind.apply(null,arguments)},ei.partial=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);return n.unshift.apply(n,t),e.apply(this,n)}},ei.mixin=function(e,t){for(var n in t)e[n]=t[n]},ei.now=ei.TRUSTED_SITE&&Date.now||function(){return+new Date},ei.globalEval=function(e){if(ei.global.execScript)ei.global.execScript(e,"JavaScript");else{if(!ei.global.eval)throw Error("goog.globalEval not available");if(null==ei.evalWorksForGlobals_&&(ei.global.eval("var _et_ = 1;"),ei.global._et_!==void 0?(delete ei.global._et_,ei.evalWorksForGlobals_=!0):ei.evalWorksForGlobals_=!1),ei.evalWorksForGlobals_)ei.global.eval(e);else{var t=ei.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.body.appendChild(n),t.body.removeChild(n)}}},ei.evalWorksForGlobals_=null,ei.getCssName=function(e,t){var n=function(e){return ei.cssNameMapping_[e]||e},i=function(e){e=e.split("-");for(var t=[],i=0;e.length>i;i++)t.push(n(e[i]));return t.join("-")},i=ei.cssNameMapping_?"BY_WHOLE"==ei.cssNameMappingStyle_?n:i:function(e){return e};return t?e+"-"+i(t):i(e)},ei.setCssNameMapping=function(e,t){ei.cssNameMapping_=e,ei.cssNameMappingStyle_=t},!Zn&&ei.global.CLOSURE_CSS_NAME_MAPPING&&(ei.cssNameMapping_=ei.global.CLOSURE_CSS_NAME_MAPPING),ei.getMsg=function(e,t){var n,i=t||{};for(n in i){var r=(""+i[n]).replace(/\$/g,"$$$$");e=e.replace(RegExp("\\{\\$"+n+"\\}","gi"),r)}return e},ei.getMsgWithFallback=function(e){return e},ei.exportSymbol=function(e,t,n){ei.exportPath_(e,t,n)},ei.exportProperty=function(e,t,n){e[t]=n},ei.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e},ei.base=function(e,t){var n=arguments.callee.caller;if(ei.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_)return n.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var i=Array.prototype.slice.call(arguments,2),r=!1,s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===n)r=!0;else if(r)return s.prototype[t].apply(e,i);if(e[t]===n)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},ei.scope=function(e){e.call(ei.global)},ei.string={},ei.string.Unicode={NBSP:""},ei.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},ei.string.endsWith=function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)==n},ei.string.caseInsensitiveStartsWith=function(e,t){return 0==ei.string.caseInsensitiveCompare(t,e.substr(0,t.length))},ei.string.caseInsensitiveEndsWith=function(e,t){return 0==ei.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},ei.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},ei.string.subs=function(e){for(var t=e.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&t.length>1;)n+=t.shift()+i.shift();return n+t.join("%s")},ei.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},ei.string.isEmpty=function(e){return/^[\s\xa0]*$/.test(e)},ei.string.isEmptySafe=function(e){return ei.string.isEmpty(ei.string.makeSafe(e))},ei.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},ei.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},ei.string.isNumeric=function(e){return!/[^0-9]/.test(e)},ei.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},ei.string.isSpace=function(e){return" "==e},ei.string.isUnicodeChar=function(e){return 1==e.length&&e>=" "&&"~">=e||e>=""&&"">=e},ei.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},ei.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},ei.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},ei.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},ei.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},ei.string.trim=function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ei.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},ei.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},ei.string.caseInsensitiveCompare=function(e,t){var n=(e+"").toLowerCase(),i=(t+"").toLowerCase();return i>n?-1:n==i?0:1},ei.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,ei.string.numerateCompare=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(ei.string.numerateCompareRegExp_),i=t.toLowerCase().match(ei.string.numerateCompareRegExp_),r=Math.min(n.length,i.length),s=0;r>s;s++){var a=n[s],o=i[s];if(a!=o)return n=parseInt(a,10),!isNaN(n)&&(i=parseInt(o,10),!isNaN(i)&&n-i)?n-i:o>a?-1:1}return n.length!=i.length?n.length-i.length:t>e?-1:1},ei.string.urlEncode=function(e){return encodeURIComponent(e+"")},ei.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},ei.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},ei.string.htmlEscape=function(e,t){return t?e.replace(ei.string.amperRe_,"&amp;").replace(ei.string.ltRe_,"&lt;").replace(ei.string.gtRe_,"&gt;").replace(ei.string.quotRe_,"&quot;"):ei.string.allRe_.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(ei.string.amperRe_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ei.string.ltRe_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ei.string.gtRe_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ei.string.quotRe_,"&quot;")),e):e},ei.string.amperRe_=/&/g,ei.string.ltRe_=/</g,ei.string.gtRe_=/>/g,ei.string.quotRe_=/\"/g,ei.string.allRe_=/[&<>\"]/,ei.string.unescapeEntities=function(e){return ei.string.contains(e,"&")?"document"in ei.global?ei.string.unescapeEntitiesUsingDom_(e):ei.string.unescapePureXmlEntities_(e):e},ei.string.unescapeEntitiesUsingDom_=function(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=document.createElement("div");return e.replace(ei.string.HTML_ENTITY_PATTERN_,function(e,i){var r=t[e];if(r)return r;if("#"==i.charAt(0)){var s=Number("0"+i.substr(1));isNaN(s)||(r=String.fromCharCode(s))}return r||(n.innerHTML=e+" ",r=n.firstChild.nodeValue.slice(0,-1)),t[e]=r})},ei.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},ei.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,ei.string.whitespaceEscape=function(e,t){return ei.string.newLineToBr(e.replace(/  /g," &#160;"),t)},ei.string.stripQuotes=function(e,t){for(var n=t.length,i=0;n>i;i++){var r=1==n?t:t.charAt(i);if(e.charAt(0)==r&&e.charAt(e.length-1)==r)return e.substring(1,e.length-1)}return e},ei.string.truncate=function(e,t,n){return n&&(e=ei.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=ei.string.htmlEscape(e)),e},ei.string.truncateMiddle=function(e,t,n,i){if(n&&(e=ei.string.unescapeEntities(e)),i&&e.length>t){i>t&&(i=t);var r=e.length-i;e=e.substring(0,t-i)+"..."+e.substring(r)}else e.length>t&&(i=Math.floor(t/2),r=e.length-i,e=e.substring(0,i+t%2)+"..."+e.substring(r));return n&&(e=ei.string.htmlEscape(e)),e},ei.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},ei.string.jsEscapeCache_={"'":"\\'"},ei.string.quote=function(e){if(e+="",e.quote)return e.quote();for(var t=['"'],n=0;e.length>n;n++){var i=e.charAt(n),r=i.charCodeAt(0);t[n+1]=ei.string.specialEscapeChars_[i]||(r>31&&127>r?i:ei.string.escapeChar(i))}return t.push('"'),t.join("")},ei.string.escapeString=function(e){for(var t=[],n=0;e.length>n;n++)t[n]=ei.string.escapeChar(e.charAt(n));return t.join("")},ei.string.escapeChar=function(e){if(e in ei.string.jsEscapeCache_)return ei.string.jsEscapeCache_[e];if(e in ei.string.specialEscapeChars_)return ei.string.jsEscapeCache_[e]=ei.string.specialEscapeChars_[e];var t=e,n=e.charCodeAt(0);return n>31&&127>n?t=e:(256>n?(t="\\x",(16>n||n>256)&&(t+="0")):(t="\\u",4096>n&&(t+="0")),t+=n.toString(16).toUpperCase()),ei.string.jsEscapeCache_[e]=t},ei.string.toMap=function(e){for(var t={},n=0;e.length>n;n++)t[e.charAt(n)]=!0;return t},ei.string.contains=function(e,t){return-1!=e.indexOf(t)},ei.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},ei.string.removeAt=function(e,t,n){var i=e;return t>=0&&e.length>t&&n>0&&(i=e.substr(0,t)+e.substr(t+n,e.length-t-n)),i},ei.string.remove=function(e,t){var n=RegExp(ei.string.regExpEscape(t),"");return e.replace(n,"")},ei.string.removeAll=function(e,t){var n=RegExp(ei.string.regExpEscape(t),"g");return e.replace(n,"")},ei.string.regExpEscape=function(e){return(e+"").replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ei.string.repeat=function(e,t){return Array(t+1).join(e)},ei.string.padNumber=function(e,t,n){return e=ei.isDef(n)?e.toFixed(n):e+"",n=e.indexOf("."),-1==n&&(n=e.length),ei.string.repeat("0",Math.max(0,t-n))+e},ei.string.makeSafe=function(e){return null==e?"":e+""},ei.string.buildString=function(){return Array.prototype.join.call(arguments,"")},ei.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ei.now()).toString(36)},ei.string.compareVersions=function(e,t){for(var n=0,i=ei.string.trim(e+"").split("."),r=ei.string.trim(t+"").split("."),s=Math.max(i.length,r.length),a=0;0==n&&s>a;a++){var o=i[a]||"",l=r[a]||"",u=RegExp("(\\d*)(\\D*)","g"),c=RegExp("(\\d*)(\\D*)","g");do{var f=u.exec(o)||["","",""],h=c.exec(l)||["","",""];if(0==f[0].length&&0==h[0].length)break;var n=0==f[1].length?0:parseInt(f[1],10),p=0==h[1].length?0:parseInt(h[1],10),n=ei.string.compareElements_(n,p)||ei.string.compareElements_(0==f[2].length,0==h[2].length)||ei.string.compareElements_(f[2],h[2])}while(0==n)}return n},ei.string.compareElements_=function(e,t){return t>e?-1:e>t?1:0},ei.string.HASHCODE_MAX_=4294967296,ei.string.hashCode=function(e){for(var t=0,n=0;e.length>n;++n)t=31*t+e.charCodeAt(n),t%=ei.string.HASHCODE_MAX_;return t},ei.string.uniqueStringCounter_=0|2147483648*Math.random(),ei.string.createUniqueString=function(){return"goog_"+ei.string.uniqueStringCounter_++},ei.string.toNumber=function(e){var t=Number(e);return 0==t&&ei.string.isEmpty(e)?0/0:t},ei.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},ei.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},ei.string.toCamelCase=function(e){return(e+"").replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},ei.string.toSelectorCase=function(e){return(e+"").replace(/([A-Z])/g,"-$1").toLowerCase()},ei.string.toTitleCase=function(e,t){var n=ei.isString(t)?ei.string.regExpEscape(t):"\\s";return e.replace(RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},ei.string.parseInt=function(e){return isFinite(e)&&(e+=""),ei.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):0/0},ei.string.splitLimit=function(e,t,n){e=e.split(t);for(var i=[];n>0&&e.length;)i.push(e.shift()),n--;return e.length&&i.push(e.join(t)),i},ei.debug={},ei.debug.Error=function(e){Error.captureStackTrace?Error.captureStackTrace(this,ei.debug.Error):this.stack=Error().stack||"",e&&(this.message=e+"")},ei.inherits(ei.debug.Error,Error),ei.debug.Error.prototype.name="CustomError",ei.asserts={},ei.asserts.ENABLE_ASSERTS=ei.DEBUG,ei.asserts.AssertionError=function(e,t){t.unshift(e),ei.debug.Error.call(this,ei.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},ei.inherits(ei.asserts.AssertionError,ei.debug.Error),ei.asserts.AssertionError.prototype.name="AssertionError",ei.asserts.doAssertFailure_=function(e,t,n,i){var r="Assertion failed";if(n)var r=r+(": "+n),s=i;else e&&(r+=": "+e,s=t);throw new ei.asserts.AssertionError(""+r,s||[])},ei.asserts.assert=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!e&&ei.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e
},ei.asserts.fail=function(e){if(ei.asserts.ENABLE_ASSERTS)throw new ei.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))},ei.asserts.assertNumber=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isNumber(e)&&ei.asserts.doAssertFailure_("Expected number but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertString=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isString(e)&&ei.asserts.doAssertFailure_("Expected string but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertFunction=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isFunction(e)&&ei.asserts.doAssertFailure_("Expected function but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertObject=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isObject(e)&&ei.asserts.doAssertFailure_("Expected object but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertArray=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isArray(e)&&ei.asserts.doAssertFailure_("Expected array but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertBoolean=function(e,t){return ei.asserts.ENABLE_ASSERTS&&!ei.isBoolean(e)&&ei.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[ei.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},ei.asserts.assertInstanceof=function(e,t,n){return!ei.asserts.ENABLE_ASSERTS||e instanceof t||ei.asserts.doAssertFailure_("instanceof check failed.",null,n,Array.prototype.slice.call(arguments,3)),e},ei.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)ei.asserts.fail(e+" should not be enumerable in Object.prototype.")};var ti=ti||{};ti.configure=function(e){ti.output=e.output||ti.output,ei.asserts.assert("function"==typeof ti.output),ti.debugout=e.debugout||ti.debugout,ei.asserts.assert("function"==typeof ti.debugout),ti.read=e.read||ti.read,ei.asserts.assert("function"==typeof ti.read),ti.timeoutMsg=e.timeoutMsg||ti.timeoutMsg,ei.asserts.assert("function"==typeof ti.timeoutMsg),ei.exportSymbol("Sk.timeoutMsg",ti.timeoutMsg),ti.sysargv=e.sysargv||ti.sysargv,ei.asserts.assert(ei.isArrayLike(ti.sysargv)),ti.python3=e.python3||ti.python3,ei.asserts.assert("boolean"==typeof ti.python3),ti.inputfun=e.inputfun||ti.inputfun,ei.asserts.assert("function"==typeof ti.inputfun),e.syspath&&(ti.syspath=e.syspath,ei.asserts.assert(ei.isArrayLike(ti.syspath)),ti.realsyspath=void 0,ti.sysmodules=new ti.builtin.dict([])),ti.misceval.softspace_=!1},ei.exportSymbol("Sk.configure",ti.configure),ti.timeoutMsg=function(){return"Program exceeded run time limit."},ei.exportSymbol("Sk.timeoutMsg",ti.timeoutMsg),ti.output=function(){},ti.read=function(){throw"Sk.read has not been implemented"},ti.sysargv=[],ti.getSysArgv=function(){return ti.sysargv},ei.exportSymbol("Sk.getSysArgv",ti.getSysArgv),ti.syspath=[],ti.inBrowser=void 0!==ei.global.document,ti.debugout=function(){},function(){void 0!==ei.global.write?ti.output=ei.global.write:void 0!==ei.global.console&&void 0!==ei.global.console.log?ti.output=function(e){ei.global.console.log(e)}:void 0!==ei.global.print&&(ti.output=ei.global.print),void 0!==ei.global.print&&(ti.debugout=ei.global.print)}(),ti.inBrowser||(ei.global.CLOSURE_IMPORT_SCRIPT=function(e){return ei.global.eval(ei.global.read("support/closure-library/closure/goog/"+e)),!0}),ti.python3=!1,ti.inputfun=function(e){return prompt(e)},ei.exportSymbol("Sk.python3",ti.python3),ei.exportSymbol("Sk.inputfun",ti.inputfun),ti.builtin={},ti.builtin.range=function(e,t,n){var i,r=[];if(ti.builtin.pyCheckArgs("range",arguments,1,3),ti.builtin.pyCheckType("start","integer",ti.builtin.checkInt(e)),void 0!==t&&ti.builtin.pyCheckType("stop","integer",ti.builtin.checkInt(t)),void 0!==n&&ti.builtin.pyCheckType("step","integer",ti.builtin.checkInt(n)),e=ti.builtin.asnum$(e),t=ti.builtin.asnum$(t),n=ti.builtin.asnum$(n),void 0===t&&void 0===n?(t=e,e=0,n=1):void 0===n&&(n=1),0===n)throw new ti.builtin.ValueError("range() step argument must not be zero");if(n>0)for(i=e;t>i;i+=n)r.push(new ti.builtin.nmber(i,ti.builtin.nmber.int$));else for(i=e;i>t;i+=n)r.push(new ti.builtin.nmber(i,ti.builtin.nmber.int$));return new ti.builtin.list(r)},ti.builtin.asnum$=function(e){return void 0===e||null===e?e:e.constructor===ti.builtin.none?null:e.constructor===ti.builtin.bool?e.v?1:0:"number"==typeof e?e:"string"==typeof e?e:e.constructor===ti.builtin.nmber?e.v:e.constructor===ti.builtin.lng?e.cantBeInt()?e.str$(10,!0):e.toInt$():e.constructor===ti.builtin.biginteger?e.trueCompare(new ti.builtin.biginteger(ti.builtin.lng.threshold$))>0||0>e.trueCompare(new ti.builtin.biginteger(-ti.builtin.lng.threshold$))?""+e:e.intValue():e},ei.exportSymbol("Sk.builtin.asnum$",ti.builtin.asnum$),ti.builtin.assk$=function(e,t){return new ti.builtin.nmber(e,t)},ei.exportSymbol("Sk.builtin.assk$",ti.builtin.assk$),ti.builtin.asnum$nofloat=function(e){if(void 0===e||null===e)return e;if(e.constructor===ti.builtin.none)return null;if(e.constructor===ti.builtin.bool)return e.v?1:0;if("number"==typeof e&&(e=""+e),e.constructor===ti.builtin.nmber&&(e=""+e.v),e.constructor===ti.builtin.lng&&(e=e.str$(10,!0)),e.constructor===ti.builtin.biginteger&&(e=""+e),0>e.indexOf(".")&&0>e.indexOf("e")&&0>e.indexOf("E"))return e;var t,n=0;if(e.indexOf("e")>=0?(t=e.substr(0,e.indexOf("e")),n=e.substr(e.indexOf("e")+1)):e.indexOf("E")>=0?(t=e.substr(0,e.indexOf("e")),n=e.substr(e.indexOf("E")+1)):t=e,n=parseInt(n,10),e=t.indexOf("."),0>e){if(n>=0){for(;n-->0;)t+="0";return t}return t.length>-n?t.substr(0,t.length+n):0}for(t=0==e?t.substr(1):t.length>e?t.substr(0,e)+t.substr(e+1):t.substr(0,e),e+=n;e>t.length;)t+="0";return t=0>=e?0:t.substr(0,e)},ei.exportSymbol("Sk.builtin.asnum$nofloat",ti.builtin.asnum$nofloat),ti.builtin.round=function(e,t){var n;if(ti.builtin.pyCheckArgs("round",arguments,1,2),!ti.builtin.checkNumber(e))throw new ti.builtin.TypeError("a float is required");if(void 0!==t&&!ti.misceval.isIndex(t))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(t)+"' object cannot be interpreted as an index");return void 0===t&&(t=0),e=ti.builtin.asnum$(e),t=ti.misceval.asIndex(t),n=Math.pow(10,t),n=Math.round(e*n)/n,new ti.builtin.nmber(n,ti.builtin.nmber.float$)},ti.builtin.len=function(e){if(ti.builtin.pyCheckArgs("len",arguments,1,1),e.sq$length)return new ti.builtin.nmber(e.sq$length(),ti.builtin.nmber.int$);if(e.mp$length)return new ti.builtin.nmber(e.mp$length(),ti.builtin.nmber.int$);if(e.tp$length)return new ti.builtin.nmber(e.tp$length(),ti.builtin.nmber.int$);throw new ti.builtin.TypeError("object of type '"+ti.abstr.typeName(e)+"' has no len()")},ti.builtin.min=function(){ti.builtin.pyCheckArgs("min",arguments,1),arguments=ti.misceval.arrayFromArguments(arguments);for(var e=arguments[0],t=1;arguments.length>t;++t)ti.misceval.richCompareBool(arguments[t],e,"Lt")&&(e=arguments[t]);return e},ti.builtin.max=function(){ti.builtin.pyCheckArgs("max",arguments,1),arguments=ti.misceval.arrayFromArguments(arguments);for(var e=arguments[0],t=1;arguments.length>t;++t)ti.misceval.richCompareBool(arguments[t],e,"Gt")&&(e=arguments[t]);return e},ti.builtin.any=function(e){var t,n;if(ti.builtin.pyCheckArgs("any",arguments,1),!ti.builtin.checkIterable(e))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not iterable");for(t=e.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())if(ti.misceval.isTrue(n))return!0;return!1},ti.builtin.all=function(e){var t,n;if(ti.builtin.pyCheckArgs("all",arguments,1),!ti.builtin.checkIterable(e))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not iterable");for(t=e.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())if(!ti.misceval.isTrue(n))return!1;return!0},ti.builtin.sum=function(e,t){var n,i,r,s;if(ti.builtin.pyCheckArgs("sum",arguments,1,2),ti.builtin.pyCheckType("iter","iterable",ti.builtin.checkIterable(e)),void 0!==t&&ti.builtin.checkString(t))throw new ti.builtin.TypeError("sum() can't sum strings [use ''.join(seq) instead]");for(n=void 0===t?new ti.builtin.nmber(0,ti.builtin.nmber.int$):t,i=e.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext()){if(r.skType===ti.builtin.nmber.float$?(s=!0,n.skType!==ti.builtin.nmber.float$&&(n=new ti.builtin.nmber(ti.builtin.asnum$(n),ti.builtin.nmber.float$))):r instanceof ti.builtin.lng&&(s||n instanceof ti.builtin.lng||(n=new ti.builtin.lng(n))),void 0===n.nb$add(r))throw new ti.builtin.TypeError("unsupported operand type(s) for +: '"+ti.abstr.typeName(n)+"' and '"+ti.abstr.typeName(r)+"'");n=n.nb$add(r)}return n},ti.builtin.zip=function(){if(0===arguments.length)return new ti.builtin.list([]);for(var e=[],t=0;arguments.length>t;t++){if(!arguments[t].tp$iter)throw"TypeError: argument "+t+" must support iteration";e.push(arguments[t].tp$iter())}for(var n=[],i=!1;!i;){for(var r=[],t=0;arguments.length>t;t++){var s=e[t].tp$iternext();if(void 0===s){i=!0;break}r.push(s)}i||n.push(new ti.builtin.tuple(r))}return new ti.builtin.list(n)},ti.builtin.abs=function(e){return ti.builtin.pyCheckArgs("abs",arguments,1,1),ti.builtin.pyCheckType("x","number",ti.builtin.checkNumber(e)),new ti.builtin.nmber(Math.abs(ti.builtin.asnum$(e)),e.skType)},ti.builtin.ord=function(e){if(ti.builtin.pyCheckArgs("ord",arguments,1,1),!ti.builtin.checkString(e))throw new ti.builtin.TypeError("ord() expected a string of length 1, but "+ti.abstr.typeName(e)+" found");if(1!==e.v.length)throw new ti.builtin.TypeError("ord() expected a character, but string of length "+e.v.length+" found");return new ti.builtin.nmber(e.v.charCodeAt(0),ti.builtin.nmber.int$)},ti.builtin.chr=function(e){if(ti.builtin.pyCheckArgs("chr",arguments,1,1),!ti.builtin.checkInt(e))throw new ti.builtin.TypeError("an integer is required");if(e=ti.builtin.asnum$(e),0>e||e>255)throw new ti.builtin.ValueError("chr() arg not in range(256)");return new ti.builtin.str(String.fromCharCode(e))},ti.builtin.int2str_=function(e,t,n){var i="";if(e instanceof ti.builtin.lng){var r="";return 2!==t&&(r="L"),i=e.str$(t,!1),e.nb$isnegative()?new ti.builtin.str("-"+n+i+r):new ti.builtin.str(n+i+r)}return e=ti.misceval.asIndex(e),i=e.toString(t),0>e?new ti.builtin.str("-"+n+i.slice(1)):new ti.builtin.str(n+i)},ti.builtin.hex=function(e){if(ti.builtin.pyCheckArgs("hex",arguments,1,1),!ti.misceval.isIndex(e))throw new ti.builtin.TypeError("hex() argument can't be converted to hex");return ti.builtin.int2str_(e,16,"0x")},ti.builtin.oct=function(e){if(ti.builtin.pyCheckArgs("oct",arguments,1,1),!ti.misceval.isIndex(e))throw new ti.builtin.TypeError("oct() argument can't be converted to hex");return ti.builtin.int2str_(e,8,"0")},ti.builtin.bin=function(e){if(ti.builtin.pyCheckArgs("bin",arguments,1,1),!ti.misceval.isIndex(e))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object can't be interpreted as an index");return ti.builtin.int2str_(e,2,"0b")},ti.builtin.dir=function(e){ti.builtin.pyCheckArgs("dir",arguments,1,1);var t,n,i,r,s,a=function(e){var t=null;return-1!==["__bases__","__mro__","__class__"].indexOf(e)?null:(-1!==e.indexOf("$")?t=ti.builtin.dir.slotNameToRichName(e):"_"!==e.charAt(e.length-1)?t=e:"_"===e.charAt(0)&&(t=e),t)},o=[];for(t in e.constructor.prototype)(n=a(t))&&o.push(new ti.builtin.str(n));if(e.$d)if(e.$d.tp$iter)for(i=e.$d.tp$iter(),t=i.tp$iternext();void 0!==t;t=i.tp$iternext())n=new ti.builtin.str(t),(n=a(n.v))&&o.push(new ti.builtin.str(n));else for(n in e.$d)o.push(new ti.builtin.str(n));if(i=e.tp$mro)for(i=e.tp$mro,t=0;i.v.length>t;++t)for(s in r=i.v[t])r.hasOwnProperty(s)&&(n=a(s))&&o.push(new ti.builtin.str(n));return o.sort(function(e,t){return(e.v>t.v)-(e.v<t.v)}),new ti.builtin.list(o.filter(function(e,t,n){return e!==n[t+1]}))},ti.builtin.dir.slotNameToRichName=function(){},ti.builtin.repr=function(e){return ti.builtin.pyCheckArgs("repr",arguments,1,1),ti.misceval.objectRepr(e)},ti.builtin.open=function(e,t,n){if(ti.builtin.pyCheckArgs("open",arguments,1,3),void 0===t&&(t=new ti.builtin.str("r")),"r"!==t.v&&"rb"!==t.v)throw"todo; haven't implemented non-read opens";return new ti.builtin.file(e,t,n)},ti.builtin.isinstance=function(e,t){if(ti.builtin.pyCheckArgs("isinstance",arguments,2,2),!(ti.builtin.checkClass(t)||t instanceof ti.builtin.tuple))throw new ti.builtin.TypeError("isinstance() arg 2 must be a class, type, or tuple of classes and types");if(t===ti.builtin.int_.prototype.ob$type)return"number"===e.tp$name&&e.skType===ti.builtin.nmber.int$;if(t===ti.builtin.float_.prototype.ob$type)return"number"===e.tp$name&&e.skType===ti.builtin.nmber.float$;if(t===ti.builtin.none.prototype.ob$type)return e instanceof ti.builtin.none;if(e.ob$type===t)return!0;if(t instanceof ti.builtin.tuple){for(var n=0;t.v.length>n;++n)if(ti.builtin.isinstance(e,t.v[n]))return!0;return!1}var i=function(e,t){if(e===t)return!0;if(void 0===e.$d)return!1;for(var n=e.$d.mp$subscript(ti.builtin.type.basesStr_),r=0;n.v.length>r;++r)if(i(n.v[r],t))return!0;return!1};return i(e.ob$type,t)},ti.builtin.hashCount=0,ti.builtin.hash=function(e){return ti.builtin.pyCheckArgs("hash",arguments,1,1),e instanceof Object&&void 0!==e.tp$hash?e.$savedHash_?e.$savedHash_:(e.$savedHash_=e.tp$hash(),e.$savedHash_):e instanceof Object&&void 0!==e.__hash__?ti.misceval.callsim(e.__hash__,e):e instanceof ti.builtin.bool?e.v?1:0:e instanceof ti.builtin.none?0:e instanceof Object?(void 0===e.__id&&(ti.builtin.hashCount+=1,e.__id=ti.builtin.hashCount),e.__id):"number"==typeof e?e:null===e?0:!0===e?1:!1===e?0:typeof e+" "+(e+"")},ti.builtin.getattr=function(e,t,n){if(ti.builtin.pyCheckArgs("getattr",arguments,2,3),!ti.builtin.checkString(t))throw new ti.builtin.TypeError("attribute name must be string");var i=e.tp$getattr(t.v);if(void 0===i){if(void 0!==n)return n;throw new ti.builtin.AttributeError("'"+ti.abstr.typeName(e)+"' object has no attribute '"+t.v+"'")}return i},ti.builtin.raw_input=function(e){return e=ti.inputfun(e.v),new ti.builtin.str(e)},ti.builtin.input=function(e){return e=ti.inputfun(e.v),new ti.builtin.str(e)},ti.builtin.jseval=function(e){ei.global.eval(e)},ti.builtin.jsmillis=function(){return(new Date).valueOf()},ti.builtin.superbi=function(){throw new ti.builtin.NotImplementedError("super is not yet implemented, please report your use case as a github issue.")},ti.builtin.eval_=function(){throw new ti.builtin.NotImplementedError("eval is not yet implemented")},ti.builtin.map=function(e,t){if(ti.builtin.pyCheckArgs("map",arguments,2),e instanceof ti.builtin.none&&(e={func_code:function(e){return e}}),arguments.length>2){var n,i=[],r=Array.prototype.slice.apply(arguments).slice(1);for(n in r){if(void 0===r[n].tp$iter){var s=parseInt(n,10)+2;throw new ti.builtin.TypeError("argument "+s+" to map() must support iteration")}r[n]=r[n].tp$iter()}for(;;){var a=[],o=0;for(n in r)s=r[n].tp$iternext(),void 0===s?(a.push(ti.builtin.none.none$),o++):a.push(s);if(o===r.length)break;i.push(a)}t=new ti.builtin.list(i)}if(void 0===t.tp$iter)throw new ti.builtin.TypeError("'"+ti.abstr.typeName(t)+"' object is not iterable");for(i=[],r=t.tp$iter(),s=r.tp$iternext();void 0!==s;)s instanceof Array||(s=[s]),i.push(e.func_code.apply(this,s)),s=r.tp$iternext();return new ti.builtin.list(i)},ti.builtin.reduce=function(e,t,n){ti.builtin.pyCheckArgs("reduce",arguments,2,3);var i=t.tp$iter();if(void 0===n&&(n=i.tp$iternext(),void 0===n))throw new ti.builtin.TypeError("reduce() of empty sequence with no initial value");for(var r=n,s=i.tp$iternext();void 0!==s;)r=e.func_code(r,s),s=i.tp$iternext();return r},ti.builtin.filter=function(e,t){if(ti.builtin.pyCheckArgs("filter",arguments,2,2),void 0===t.tp$iter)throw new ti.builtin.TypeError("'"+ti.abstr.typeName(t)+"' object is not iterable");e instanceof ti.builtin.none&&(e={func_code:function(e){return ti.builtin.bool(e)}});var n=function(){return[]},i=function(e,t){return e.push(t),e},r=function(e){return new ti.builtin.list(e)};t.__class__===ti.builtin.str?(n=function(){return new ti.builtin.str("")},i=function(e,t){return e.sq$concat(t)},r=function(e){return e}):t.__class__===ti.builtin.tuple&&(r=function(e){return new ti.builtin.tuple(e)});var s=t.tp$iter(),a=s.tp$iternext(),n=n();if(void 0===a)return r(n);for(;void 0!==a;)ti.misceval.isTrue(e.func_code(a))&&(n=i(n,a)),a=s.tp$iternext();return r(n)},ti.builtin.hasattr=function(e,t){if(ti.builtin.pyCheckArgs("hasattr",arguments,2,2),!ti.builtin.checkString(t))throw new ti.builtin.TypeError("hasattr(): attribute name must be string");if(e.tp$getattr)return e.tp$getattr(t.v)?!0:!1;throw new ti.builtin.AttributeError("Object has no tp$getattr method")},ti.builtin.pow=function(e,t,n){ti.builtin.pyCheckArgs("pow",arguments,2,3);var i=ti.builtin.asnum$(e),r=ti.builtin.asnum$(t);if(ti.builtin.asnum$(n),!ti.builtin.checkNumber(e)||!ti.builtin.checkNumber(t)){if(void 0===n)throw new ti.builtin.TypeError("unsupported operand type(s) for pow(): '"+ti.abstr.typeName(e)+"' and '"+ti.abstr.typeName(t)+"'");throw new ti.builtin.TypeError("unsupported operand type(s) for pow(): '"+ti.abstr.typeName(e)+"', '"+ti.abstr.typeName(t)+"', '"+ti.abstr.typeName(n)+"'")}if(0>i&&t.skType===ti.builtin.nmber.float$)throw new ti.builtin.ValueError("negative number cannot be raised to a fractional power");if(void 0===n)return i=Math.pow(i,r),e.skType===ti.builtin.nmber.float$||t.skType===ti.builtin.nmber.float$||0>r?new ti.builtin.nmber(i,ti.builtin.nmber.float$):e instanceof ti.builtin.lng||t instanceof ti.builtin.lng?new ti.builtin.lng(i):new ti.builtin.nmber(i,ti.builtin.nmber.int$);if(!ti.builtin.checkInt(e)||!ti.builtin.checkInt(t)||!ti.builtin.checkInt(n))throw new ti.builtin.TypeError("pow() 3rd argument not allowed unless all arguments are integers");if(0>r)throw new ti.builtin.TypeError("pow() 2nd argument cannot be negative when 3rd argument specified");return e instanceof ti.builtin.lng||t instanceof ti.builtin.lng||n instanceof ti.builtin.lng?(e=new ti.builtin.lng(e),e.nb$power(t,n)):new ti.builtin.nmber(Math.pow(i,r),ti.builtin.nmber.int$).nb$remainder(n)},ti.builtin.quit=function(e){throw e=new ti.builtin.str(e).v,new ti.builtin.SystemExit(e)},ti.builtin.sorted=function(e,t,n,i){var r;if(void 0===n||n instanceof ti.builtin.none)t instanceof ti.builtin.none||void 0===t||(r=t),e=new ti.builtin.list(e);else{r=t instanceof ti.builtin.none?{func_code:function(e,t){return ti.misceval.richCompareBool(e[0],t[0],"Lt")?new ti.builtin.nmber(-1,ti.builtin.nmber.int$):new ti.builtin.nmber(0,ti.builtin.nmber.int$)}}:{func_code:function(e,n){return t.func_code(e[0],n[0])}},e=e.tp$iter();for(var s=e.tp$iternext(),a=[];void 0!==s;)a.push([n.func_code(s),s]),s=e.tp$iternext();e=new ti.builtin.list(a)}if(void 0!==r?e.list_sort_(e,r):e.list_sort_(e),i&&e.list_reverse_(e),void 0!==n&&!(n instanceof ti.builtin.none)){for(e=e.tp$iter(),s=e.tp$iternext(),a=[];void 0!==s;)a.push(s[1]),s=e.tp$iternext();e=new ti.builtin.list(a)}return e},ti.builtin.bytearray=function(){throw new ti.builtin.NotImplementedError("bytearray is not yet implemented")},ti.builtin.callable=function(){throw new ti.builtin.NotImplementedError("callable is not yet implemented")},ti.builtin.complex=function(){throw new ti.builtin.NotImplementedError("complex is not yet implemented")},ti.builtin.delattr=function(){throw new ti.builtin.NotImplementedError("delattr is not yet implemented")},ti.builtin.divmod=function(){throw new ti.builtin.NotImplementedError("divmod is not yet implemented")},ti.builtin.execfile=function(){throw new ti.builtin.NotImplementedError("execfile is not yet implemented")},ti.builtin.format=function(){throw new ti.builtin.NotImplementedError("format is not yet implemented")},ti.builtin.frozenset=function(){throw new ti.builtin.NotImplementedError("frozenset is not yet implemented")},ti.builtin.globals=function(){throw new ti.builtin.NotImplementedError("globals is not yet implemented")},ti.builtin.help=function(){throw new ti.builtin.NotImplementedError("help is not yet implemented")},ti.builtin.issubclass=function(){throw new ti.builtin.NotImplementedError("issubclass is not yet implemented")},ti.builtin.iter=function(){throw new ti.builtin.NotImplementedError("iter is not yet implemented")},ti.builtin.locals=function(){throw new ti.builtin.NotImplementedError("locals is not yet implemented")},ti.builtin.memoryview=function(){throw new ti.builtin.NotImplementedError("memoryview is not yet implemented")},ti.builtin.next_=function(){throw new ti.builtin.NotImplementedError("next is not yet implemented")},ti.builtin.property=function(){throw new ti.builtin.NotImplementedError("property is not yet implemented")},ti.builtin.reload=function(){throw new ti.builtin.NotImplementedError("reload is not yet implemented")},ti.builtin.reversed=function(){throw new ti.builtin.NotImplementedError("reversed is not yet implemented")},ti.builtin.unichr=function(){throw new ti.builtin.NotImplementedError("unichr is not yet implemented")},ti.builtin.vars=function(){throw new ti.builtin.NotImplementedError("vars is not yet implemented")},ti.builtin.xrange=ti.builtin.range,ti.builtin.apply_=function(){throw new ti.builtin.NotImplementedError("apply is not yet implemented")},ti.builtin.buffer=function(){throw new ti.builtin.NotImplementedError("buffer is not yet implemented")},ti.builtin.coerce=function(){throw new ti.builtin.NotImplementedError("coerce is not yet implemented")},ti.builtin.intern=function(){throw new ti.builtin.NotImplementedError("intern is not yet implemented")},ti.builtin.Exception=function(e){e=Array.prototype.slice.call(arguments);for(var t=0;e.length>t;++t)"string"==typeof e[t]&&(e[t]=new ti.builtin.str(e[t]));this.args=new ti.builtin.tuple(e),this.filename=ti.currFilename?ti.currFilename:this.args.sq$length()>=3?this.args.v[1].v?this.args.v[1].v:"<unknown>":"<unknown>",this.lineno=ti.currLineNo>0?ti.currLineNo:this.args.sq$length()>=3?this.args.v[2]:"<unknown>",this.colno=ti.currColNo>0?ti.currColNo:"<unknown>"},ti.builtin.Exception.prototype.tp$name="Exception",ti.builtin.Exception.prototype.tp$str=function(){var e;if(e=""+this.tp$name,this.args&&(e+=": "+this.args.v[0].v),e+=" on line "+this.lineno,this.args.v.length>4){e+="\n"+this.args.v[4].v+"\n";for(var t=0;this.args.v[3]>t;++t)e+=" ";e+="^\n"}return new ti.builtin.str(e)},ti.builtin.Exception.prototype.toString=function(){return this.tp$str().v},ei.exportSymbol("Sk.builtin.Exception",ti.builtin.Exception),ti.builtin.AssertionError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.AssertionError,ti.builtin.Exception),ti.builtin.AssertionError.prototype.tp$name="AssertionError",ei.exportSymbol("Sk.builtin.AssertionError",ti.builtin.AssertionError),ti.builtin.AttributeError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.AttributeError,ti.builtin.Exception),ti.builtin.AttributeError.prototype.tp$name="AttributeError",ti.builtin.ImportError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.ImportError,ti.builtin.Exception),ti.builtin.ImportError.prototype.tp$name="ImportError",ti.builtin.IndentationError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.IndentationError,ti.builtin.Exception),ti.builtin.IndentationError.prototype.tp$name="IndentationError",ti.builtin.IndexError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.IndexError,ti.builtin.Exception),ti.builtin.IndexError.prototype.tp$name="IndexError",ti.builtin.KeyError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.KeyError,ti.builtin.Exception),ti.builtin.KeyError.prototype.tp$name="KeyError",ti.builtin.NameError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.NameError,ti.builtin.Exception),ti.builtin.NameError.prototype.tp$name="NameError",ti.builtin.OverflowError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.OverflowError,ti.builtin.Exception),ti.builtin.OverflowError.prototype.tp$name="OverflowError",ti.builtin.ParseError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.ParseError,ti.builtin.Exception),ti.builtin.ParseError.prototype.tp$name="ParseError",ti.builtin.SystemExit=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.SystemExit,ti.builtin.Exception),ti.builtin.SystemExit.prototype.tp$name="SystemExit",ei.exportSymbol("Sk.builtin.SystemExit",ti.builtin.SystemExit),ti.builtin.SyntaxError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.SyntaxError,ti.builtin.Exception),ti.builtin.SyntaxError.prototype.tp$name="SyntaxError",ti.builtin.TokenError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.TokenError,ti.builtin.Exception),ti.builtin.TokenError.prototype.tp$name="TokenError",ti.builtin.TypeError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.TypeError,ti.builtin.Exception),ti.builtin.TypeError.prototype.tp$name="TypeError",ei.exportSymbol("Sk.builtin.TypeError",ti.builtin.TypeError),ti.builtin.ValueError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.ValueError,ti.builtin.Exception),ti.builtin.ValueError.prototype.tp$name="ValueError",ei.exportSymbol("Sk.builtin.ValueError",ti.builtin.ValueError),ti.builtin.ZeroDivisionError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.ZeroDivisionError,ti.builtin.Exception),ti.builtin.ZeroDivisionError.prototype.tp$name="ZeroDivisionError",ti.builtin.TimeLimitError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.TimeLimitError,ti.builtin.Exception),ti.builtin.TimeLimitError.prototype.tp$name="TimeLimitError",ei.exportSymbol("Sk.builtin.TimeLimitError",ti.builtin.TimeLimitError),ti.builtin.IOError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.IOError,ti.builtin.Exception),ti.builtin.IOError.prototype.tp$name="IOError",ei.exportSymbol("Sk.builtin.IOError",ti.builtin.IOError),ti.builtin.NotImplementedError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.NotImplementedError,ti.builtin.Exception),ti.builtin.NotImplementedError.prototype.tp$name="NotImplementedError",ei.exportSymbol("Sk.builtin.NotImplementedError",ti.builtin.NotImplementedError),ti.builtin.NegativePowerError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.NegativePowerError,ti.builtin.Exception),ti.builtin.NegativePowerError.prototype.tp$name="NegativePowerError",ei.exportSymbol("Sk.builtin.NegativePowerError",ti.builtin.NegativePowerError),ti.builtin.OperationError=function(){ti.builtin.Exception.apply(this,arguments)},ei.inherits(ti.builtin.OperationError,ti.builtin.Exception),ti.builtin.OperationError.prototype.tp$name="OperationError",ei.exportSymbol("Sk.builtin.OperationError",ti.builtin.OperationError),ti.currLineNo=-1,ti.currColNo=-1,ti.currFilename="",ei.exportSymbol("Sk",ti),ei.exportProperty(ti,"currLineNo",ti.currLineNo),ei.exportProperty(ti,"currColNo",ti.currColNo),ei.exportProperty(ti,"currFilename",ti.currFilename),ti.builtin.type=function(e,t,n){if(void 0===t&&void 0===n)return!0===e||!1===e?ti.builtin.bool.prototype.ob$type:null===e||e instanceof ti.builtin.none?ti.builtin.none.prototype.ob$type:"number"==typeof e?Math.floor(e)===e?ti.builtin.int_.prototype.ob$type:ti.builtin.float_.prototype.ob$type:e.constructor===ti.builtin.nmber?"int"===e.skType?ti.builtin.int_.prototype.ob$type:ti.builtin.float_.prototype.ob$type:e.ob$type;var i,r=function(e,t,n,i){if(!(this instanceof r))return new r(e,t,n,i);i=i||[],this.$d=new ti.builtin.dict([]);var s=ti.builtin.type.typeLookup(this.ob$type,"__init__");return void 0!==s&&(i.unshift(this),ti.misceval.apply(s,e,t,n,i)),this};for(i in n)r.prototype[i]=n[i],r[i]=n[i];return r.__class__=r,r.sk$klass=!0,r.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,r.prototype.tp$setattr=ti.builtin.object.prototype.GenericSetAttr,r.prototype.tp$descr_get=function(){ei.asserts.fail("in type tp$descr_get")},r.prototype.$r=function(){var t=this.tp$getattr("__repr__");if(void 0!==t)return ti.misceval.apply(t,void 0,void 0,void 0,[]);var t=n.__module__,i="";return t&&(i=t.v+"."),new ti.builtin.str("<"+i+e+" object>")},r.prototype.tp$str=function(){var e=this.tp$getattr("__str__");return void 0!==e?ti.misceval.apply(e,void 0,void 0,void 0,[]):this.$r()},r.prototype.tp$length=function(){var e=this.tp$getattr("__len__");if(void 0!==e)return ti.misceval.apply(e,void 0,void 0,void 0,[]);throw e=ti.abstr.typeName(this),new ti.builtin.AttributeError(e+" instance has no attribute '__len__'")},r.prototype.tp$call=function(e,t){var n=this.tp$getattr("__call__");if(n)return ti.misceval.apply(n,void 0,void 0,t,e);throw new ti.builtin.TypeError("'"+ti.abstr.typeName(this)+"' object is not callable")},r.prototype.tp$iter=function(){var e=this.tp$getattr("__iter__"),t=ti.abstr.typeName(this);if(e){if(e=ti.misceval.callsim(e),void 0===e.tp$getattr("next"))throw new ti.builtin.TypeError("iter() return non-iterator of type '"+t+"'");return e}throw new ti.builtin.TypeError("'"+t+"' object is not iterable")},r.prototype.tp$iternext=function(){var e=this.tp$getattr("next");return ei.asserts.assert(void 0!==e,"iter() should have caught this"),ti.misceval.callsim(e)},r.prototype.tp$getitem=function(e){var t=this.tp$getattr("__getitem__");if(void 0!==t)return ti.misceval.apply(t,void 0,void 0,void 0,[e]);throw new ti.builtin.TypeError("'"+ti.abstr.typeName(this)+"' object does not support indexing")},r.prototype.tp$setitem=function(e,t){var n=this.tp$getattr("__setitem__");if(void 0!==n)return ti.misceval.apply(n,void 0,void 0,void 0,[e,t]);throw new ti.builtin.TypeError("'"+ti.abstr.typeName(this)+"' object does not support item assignment")},r.tp$name=e,t&&(r.$d=new ti.builtin.dict([]),r.$d.mp$ass_subscript(ti.builtin.type.basesStr_,new ti.builtin.tuple(t)),t=ti.builtin.type.buildMRO(r),r.$d.mp$ass_subscript(ti.builtin.type.mroStr_,t),r.tp$mro=t),r.prototype.ob$type=r,ti.builtin.type.makeIntoTypeObj(e,r),r.tp$setattr=ti.builtin.type.prototype.tp$setattr,r},ti.builtin.type.makeTypeObj=function(e,t){return ti.builtin.type.makeIntoTypeObj(e,t),t},ti.builtin.type.makeIntoTypeObj=function(e,t){return ei.asserts.assert(void 0!==e),ei.asserts.assert(void 0!==t),t.ob$type=ti.builtin.type,t.tp$name=e,t.$r=function(){var e=t.__module__,n="";e&&(n=e.v+".");var i="class";return e||t.sk$klass||(i="type"),new ti.builtin.str("<"+i+" '"+n+t.tp$name+"'>")},t.tp$str=void 0,t.tp$getattr=ti.builtin.type.prototype.tp$getattr,t.tp$setattr=ti.builtin.object.prototype.GenericSetAttr,t.tp$richcompare=ti.builtin.type.prototype.tp$richcompare,t.sk$type=!0,t},ti.builtin.type.ob$type=ti.builtin.type,ti.builtin.type.tp$name="type",ti.builtin.type.$r=function(){return new ti.builtin.str("<type 'type'>")},ti.builtin.type.prototype.tp$getattr=function(e){var t,n=ti.builtin.type.typeLookup(this,e);return void 0!==n&&null!==n&&void 0!==n.ob$type&&(t=n.ob$type.tp$descr_get),this.$d&&(e=this.$d.mp$lookup(new ti.builtin.str(e)),void 0!==e)?e:t?t.call(n,null,this):void 0!==n?n:void 0},ti.builtin.type.prototype.tp$setattr=function(e,t){this[e]=t},ti.builtin.type.typeLookup=function(e,t){var n,i,r=e.tp$mro,s=new ti.builtin.str(t);if(!r)return e.prototype[t];for(i=0;r.v.length>i;++i){if(n=r.v[i],n.hasOwnProperty(t))return n[t];if(n=n.$d.mp$lookup(s),void 0!==n)return n}},ti.builtin.type.mroMerge_=function(e){for(var t=[];;){for(var n=0;e.length>n;++n){var i=e[n];if(0!==i.length)break}if(n===e.length)return t;for(var r=[],n=0;e.length>n;++n)if(i=e[n],0!==i.length){var i=i[0],s=0;e:for(;e.length>s;++s)for(var a=e[s],o=1;a.length>o;++o)if(a[o]===i)break e;s===e.length&&r.push(i)}if(0===r.length)throw new ti.builtin.TypeError("Inconsistent precedences in type hierarchy");for(r=r[0],t.push(r),n=0;e.length>n;++n)i=e[n],i.length>0&&i[0]===r&&i.splice(0,1)}},ti.builtin.type.buildMRO_=function(e){var t=[[e]];
e=e.$d.mp$subscript(ti.builtin.type.basesStr_);for(var n=0;e.v.length>n;++n)t.push(ti.builtin.type.buildMRO_(e.v[n]));for(var i=[],n=0;e.v.length>n;++n)i.push(e.v[n]);return t.push(i),ti.builtin.type.mroMerge_(t)},ti.builtin.type.buildMRO=function(e){return new ti.builtin.tuple(ti.builtin.type.buildMRO_(e))},ti.builtin.type.prototype.tp$richcompare=function(e,t){if(e.ob$type==ti.builtin.type&&this.$r&&e.$r){var n=this.$r(),i=e.$r();return n.tp$richcompare(i,t)}},ti.builtin.object=function(){return this instanceof ti.builtin.object?(this.$d=new ti.builtin.dict([]),this):new ti.builtin.object},ti.builtin.object.prototype.GenericGetAttr=function(e){ei.asserts.assert("string"==typeof e);var t=this.ob$type;ei.asserts.assert(void 0!==t,"object has no ob$type!");var n,t=ti.builtin.type.typeLookup(t,e);if(void 0!==t&&null!==t&&void 0!==t.ob$type&&(n=t.ob$type.tp$descr_get),this.$d){var i;if(this.$d.mp$lookup)i=this.$d.mp$lookup(new ti.builtin.str(e));else if(this.$d.mp$subscript)try{i=this.$d.mp$subscript(new ti.builtin.str(e))}catch(r){i=void 0}else"object"==typeof this.$d&&(i=this.$d[e]);if(void 0!==i)return i}return n?n.call(t,this,this.ob$type):void 0!==t?t:void 0},ei.exportSymbol("Sk.builtin.object.prototype.GenericGetAttr",ti.builtin.object.prototype.GenericGetAttr),ti.builtin.object.prototype.GenericSetAttr=function(e,t){ei.asserts.assert("string"==typeof e),this.$d.mp$ass_subscript?this.$d.mp$ass_subscript(new ti.builtin.str(e),t):"object"==typeof this.$d&&(this.$d[e]=t)},ei.exportSymbol("Sk.builtin.object.prototype.GenericSetAttr",ti.builtin.object.prototype.GenericSetAttr),ti.builtin.object.prototype.HashNotImplemented=function(){throw new ti.builtin.TypeError("unhashable type: '"+ti.abstr.typeName(this)+"'")},ti.builtin.object.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.object.prototype.tp$setattr=ti.builtin.object.prototype.GenericSetAttr,ti.builtin.object.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("object",ti.builtin.object),ti.builtin.none=function(){},ti.builtin.none.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("NoneType",ti.builtin.none),ti.builtin.none.prototype.tp$name="None",ti.builtin.none.none$=Object.create(ti.builtin.none.prototype,{v:{value:null,enumerable:!0}}),ei.exportSymbol("Sk.builtin.none",ti.builtin.none),ti.builtin.bool=function(e){return ti.builtin.pyCheckArgs("bool",arguments,1),ti.misceval.isTrue(e)?ti.builtin.bool.true$:ti.builtin.bool.false$},ti.builtin.bool.prototype.tp$name="bool",ti.builtin.bool.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("bool",ti.builtin.bool),ti.builtin.bool.prototype.$r=function(){return this.v?new ti.builtin.str("True"):new ti.builtin.str("False")},ti.builtin.bool.true$=Object.create(ti.builtin.bool.prototype,{v:{value:!0,enumerable:!0}}),ti.builtin.bool.false$=Object.create(ti.builtin.bool.prototype,{v:{value:!1,enumerable:!0}}),ei.exportSymbol("Sk.builtin.bool",ti.builtin.bool),ti.builtin.pyCheckArgs=function(e,t,n,i,r,s){t=t.length;var a="";if(void 0===i&&(i=1/0),r&&(t-=1),s&&(t-=1),n>t||t>i)throw a=(n===i?e+"() takes exactly "+n+" arguments":n>t?e+"() takes at least "+n+" arguments":e+"() takes at most "+i+" arguments")+(" ("+t+" given)"),new ti.builtin.TypeError(a)},ei.exportSymbol("Sk.builtin.pyCheckArgs",ti.builtin.pyCheckArgs),ti.builtin.pyCheckType=function(e,t,n){if(!n)throw new ti.builtin.TypeError(e+" must be a "+t)},ei.exportSymbol("Sk.builtin.pyCheckType",ti.builtin.pyCheckType),ti.builtin.checkSequence=function(e){return null!==e&&void 0!==e.mp$subscript},ei.exportSymbol("Sk.builtin.checkSequence",ti.builtin.checkSequence),ti.builtin.checkIterable=function(e){return null!==e&&void 0!==e.tp$iter},ei.exportSymbol("Sk.builtin.checkIterable",ti.builtin.checkIterable),ti.builtin.checkNumber=function(e){return null!==e&&("number"==typeof e||e instanceof ti.builtin.nmber||e instanceof ti.builtin.lng)},ei.exportSymbol("Sk.builtin.checkNumber",ti.builtin.checkNumber),ti.builtin.checkInt=function(e){return null!==e&&("number"==typeof e&&e===(0|e)||e instanceof ti.builtin.nmber&&e.skType===ti.builtin.nmber.int$||e instanceof ti.builtin.lng)},ei.exportSymbol("Sk.builtin.checkInt",ti.builtin.checkInt),ti.builtin.checkString=function(e){return null!==e&&e.__class__==ti.builtin.str},ei.exportSymbol("Sk.builtin.checkString",ti.builtin.checkString),ti.builtin.checkClass=function(e){return null!==e&&e.sk$type},ei.exportSymbol("Sk.builtin.checkClass",ti.builtin.checkClass),ti.builtin.checkFunction=function(e){return null!==e&&void 0!==e.tp$call},ei.exportSymbol("Sk.builtin.checkFunction",ti.builtin.checkFunction),ti.builtin.func=function(e,t,n,i){if(this.func_code=e,this.func_globals=t||null,void 0!==i)for(var r in i)n[r]=i[r];return this.func_closure=n,this},ei.exportSymbol("Sk.builtin.func",ti.builtin.func),ti.builtin.func.prototype.tp$name="function",ti.builtin.func.prototype.tp$descr_get=function(e,t){return ei.asserts.assert(void 0!==e&&void 0!==t),null==e?this:new ti.builtin.method(this,e)},ti.builtin.func.prototype.tp$call=function(e,t){var n;this.func_closure&&e.push(this.func_closure),n=this.func_code.co_kwargs;var i=[];if(this.func_code.no_kw&&t)throw n=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new ti.builtin.TypeError(n+"() takes no keyword arguments");if(t)for(var r=t.length,s=this.func_code.co_varnames,a=s&&s.length,o=0;r>o;o+=2){for(var l=0;a>l&&t[o]!==s[l];++l);if(s&&l!==a)e[l]=t[o+1];else{if(!n)throw n=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new ti.builtin.TypeError(n+"() got an unexpected keyword argument '"+t[o]+"'");i.push(new ti.builtin.str(t[o])),i.push(t[o+1])}}return n&&e.unshift(i),this.func_code.apply(this.func_globals,e)},ti.builtin.func.prototype.tp$getattr=function(e){return this[e]},ti.builtin.func.prototype.tp$setattr=function(e,t){this[e]=t},ti.builtin.func.prototype.ob$type=ti.builtin.type.makeTypeObj("function",new ti.builtin.func(null,null)),ti.builtin.func.prototype.$r=function(){return new ti.builtin.str("<function "+(this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>")+">")},ti.nativejs={FN_ARGS:/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT:/,/,FN_ARG:/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS:/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,formalParameterList:function(e){var t=[];e=(""+e).replace(this.STRIP_COMMENTS,"").match(this.FN_ARGS)[1].split(this.FN_ARG_SPLIT);for(var n in e)e[n].replace(this.FN_ARG,function(e,n,i){t.push(i)});return t},func:function(e){return e.co_name=new ti.builtin.str(e.name),e.co_varnames=ti.nativejs.formalParameterList(e),new ti.builtin.func(e)},func_nokw:function(e){return e.co_name=new ti.builtin.str(e.name),e.co_varnames=ti.nativejs.formalParameterList(e),e.no_kw=!0,new ti.builtin.func(e)}},ei.exportSymbol("Sk.nativejs.func",ti.nativejs.func),ei.exportSymbol("Sk.nativejs.func_nokw",ti.nativejs.func_nokw),ti.builtin.method=function(e,t){this.im_func=e,this.im_self=t},ei.exportSymbol("Sk.builtin.method",ti.builtin.method),ti.builtin.method.prototype.tp$call=function(e,t){if(ei.asserts.assert(this.im_self,"should just be a function, not a method since there's no self?"),ei.asserts.assert(this.im_func instanceof ti.builtin.func),e.unshift(this.im_self),t)for(var n=t.length,i=0;n>i;i+=2){for(var r=this.im_func.func_code.co_varnames,s=r&&r.length,a=0;s>a&&t[i]!==r[a];++a);e[a]=t[i+1]}return this.im_func.func_code.apply(this.im_func.func_globals,e)},ti.builtin.method.prototype.$r=function(){return new ti.builtin.str("<bound method "+this.im_self.ob$type.tp$name+"."+(this.im_func.func_code&&this.im_func.func_code.co_name&&this.im_func.func_code.co_name.v||"<native JS>")+" of "+this.im_self.$r().v+">")},ti.misceval={},ti.misceval.isIndex=function(e){return null===e||e.constructor===ti.builtin.lng||e.tp$index||!0===e||!1===e?!0:ti.builtin.checkInt(e)},ei.exportSymbol("Sk.misceval.isIndex",ti.misceval.isIndex),ti.misceval.asIndex=function(e){if(ti.misceval.isIndex(e)&&null!==e){if(!0===e)return 1;if(!1===e)return 0;if("number"==typeof e)return e;if(e.constructor===ti.builtin.nmber)return e.v;if(e.constructor===ti.builtin.lng)return e.tp$index();ei.asserts.fail("todo;")}},ti.misceval.applySlice=function(e,t,n){return e.sq$slice&&ti.misceval.isIndex(t)&&ti.misceval.isIndex(n)?(t=ti.misceval.asIndex(t),void 0===t&&(t=0),n=ti.misceval.asIndex(n),void 0===n&&(n=1e100),ti.abstr.sequenceGetSlice(e,t,n)):ti.abstr.objectGetItem(e,new ti.builtin.slice(t,n,null))},ei.exportSymbol("Sk.misceval.applySlice",ti.misceval.applySlice),ti.misceval.assignSlice=function(e,t,n,i){return e.sq$ass_slice&&ti.misceval.isIndex(t)&&ti.misceval.isIndex(n)?(t=ti.misceval.asIndex(t)||0,n=ti.misceval.asIndex(n)||1e100,null===i?ti.abstr.sequenceDelSlice(e,t,n):ti.abstr.sequenceSetSlice(e,t,n,i),void 0):(n=new ti.builtin.slice(t,n),null===i?ti.abstr.objectDelItem(e,n):ti.abstr.objectSetItem(e,n,i))},ei.exportSymbol("Sk.misceval.assignSlice",ti.misceval.assignSlice),ti.misceval.arrayFromArguments=function(e){if(1!=e.length)return e;var t=e[0];if(t instanceof ti.builtin.set)t=t.tp$iter().$obj;else if(t instanceof ti.builtin.dict)t=ti.builtin.dict.prototype.keys.func_code(t);else if(t instanceof ti.builtin.str){e=[];for(var t=t.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())e.push(n);return e}return t instanceof ti.builtin.list||t instanceof ti.builtin.tuple?t.v:e},ei.exportSymbol("Sk.misceval.arrayFromArguments",ti.misceval.arrayFromArguments),ti.misceval.swappedOp_={Eq:"Eq",NotEq:"NotEq",Lt:"GtE",LtE:"Gt",Gt:"LtE",GtE:"Lt",Is:"IsNot",IsNot:"Is",In_:"NotIn",NotIn:"In_"},ti.misceval.richCompareBool=function(e,t,n){if("Is"===n)return e instanceof ti.builtin.nmber&&t instanceof ti.builtin.nmber?0===e.numberCompare(t)&&e.skType===t.skType:e instanceof ti.builtin.lng&&t instanceof ti.builtin.lng?0===e.longCompare(t):e===t;if("IsNot"===n)return e instanceof ti.builtin.nmber&&t instanceof ti.builtin.nmber?0!==e.numberCompare(t)||e.skType!==t.skType:e instanceof ti.builtin.lng&&t instanceof ti.builtin.lng?0!==e.longCompare(t):e!==t;if(e===t){if("Eq"===n)return!0;if("NotEq"===n)return!1}if(e instanceof ti.builtin.str&&t instanceof ti.builtin.str){if("Eq"===n)return e===t;if("NotEq"===n)return e!==t}if("In"===n)return ti.abstr.sequenceContains(t,e);if("NotIn"===n)return!ti.abstr.sequenceContains(t,e);var i;if(e&&t&&e.tp$richcompare&&void 0!==(i=e.tp$richcompare(t,n))||t&&e&&t.tp$richcompare&&void 0!==(i=t.tp$richcompare(e,ti.misceval.swappedOp_[n])))return i;if("Eq"===n){if(e&&e.__eq__)return ti.misceval.callsim(e.__eq__,e,t);if(t&&t.__eq__)return ti.misceval.callsim(t.__eq__,t,e)}else if("NotEq"===n){if(e&&e.__ne__)return ti.misceval.callsim(e.__ne__,e,t);if(t&&t.__ne__)return ti.misceval.callsim(t.__ne__,t,e)}else if("Gt"===n){if(e&&e.__gt__)return ti.misceval.callsim(e.__gt__,e,t);if(t&&t.__le__)return ti.misceval.callsim(t.__le__,t,e)}else if("Lt"===n){if(e&&e.__lt__)return ti.misceval.callsim(e.__lt__,e,t);if(t&&t.__ge__)return ti.misceval.callsim(t.__ge__,t,e)}else if("GtE"===n){if(e&&e.__ge__)return ti.misceval.callsim(e.__ge__,e,t);if(t&&t.__lt__)return ti.misceval.callsim(t.__lt__,t,e)}else if("LtE"===n){if(e&&e.__le__)return ti.misceval.callsim(e.__le__,e,t);if(t&&t.__gt__)return ti.misceval.callsim(t.__gt__,t,e)}if(e&&e.__cmp__){if(i=ti.misceval.callsim(e.__cmp__,e,t),i=ti.builtin.asnum$(i),"Eq"===n)return 0===i;if("NotEq"===n)return 0!==i;if("Lt"===n)return 0>i;if("Gt"===n)return i>0;if("LtE"===n)return 0>=i;if("GtE"===n)return i>=0}else if(t&&t.__cmp__){if(i=ti.misceval.callsim(t.__cmp__,t,e),i=ti.builtin.asnum$(i),"Eq"===n)return 0===i;if("NotEq"===n)return 0!==i;if("Lt"===n)return i>0;if("Gt"===n)return 0>i;if("LtE"===n)return i>=0;if("GtE"===n)return 0>=i}if(typeof e!=typeof t)return"NotEq"===n?!0:!1;if((e instanceof ti.builtin.none||e instanceof ti.builtin.bool)&&(t instanceof ti.builtin.none||t instanceof ti.builtin.bool)){if(!1===e.v&&null===t.v){if("Gt"===n)return!0;if("LtE"===n)return!1}if(null===e.v&&!1===t.v){if("GtE"===n)return!1;if("Lt"===n)return!0}if("Eq"===n)return e.v===t.v;if("NotEq"===n)return e.v!==t.v;if("Gt"===n)return e.v>t.v;if("GtE"===n)return e.v>=t.v;if("Lt"===n)return e.v<t.v;if("LtE"===n)return e.v<=t.v}if("Eq"===n)return e===t;if("NotEq"===n)return e!==t;throw e=ti.abstr.typeName(e),t=ti.abstr.typeName(t),new ti.builtin.ValueError("don't know how to compare '"+e+"' and '"+t+"'")},ei.exportSymbol("Sk.misceval.richCompareBool",ti.misceval.richCompareBool),ti.misceval.objectRepr=function(e){return ei.asserts.assert(void 0!==e,"trying to repr undefined"),null===e||e instanceof ti.builtin.none?new ti.builtin.str("None"):!0===e?new ti.builtin.str("True"):!1===e?new ti.builtin.str("False"):"number"==typeof e?new ti.builtin.str(""+e):e.$r?e.constructor===ti.builtin.nmber?new ti.builtin.str(""+e.v):e.$r():e.tp$name?new ti.builtin.str("<"+e.tp$name+" object>"):new ti.builtin.str("<unknown>")},ei.exportSymbol("Sk.misceval.objectRepr",ti.misceval.objectRepr),ti.misceval.opAllowsEquality=function(e){switch(e){case"LtE":case"Eq":case"GtE":return!0}return!1},ei.exportSymbol("Sk.misceval.opAllowsEquality",ti.misceval.opAllowsEquality),ti.misceval.isTrue=function(e){return!0===e?!0:!1===e||null===e||e.constructor===ti.builtin.none?!1:e.constructor===ti.builtin.bool?e.v:"number"==typeof e?0!==e:e instanceof ti.builtin.lng?e.nb$nonzero():e.constructor===ti.builtin.nmber?0!==e.v:e.mp$length?0!==e.mp$length():e.sq$length?0!==e.sq$length():!0},ei.exportSymbol("Sk.misceval.isTrue",ti.misceval.isTrue),ti.misceval.softspace_=!1,ti.misceval.print_=function(e){ti.misceval.softspace_&&("\n"!==e&&ti.output(" "),ti.misceval.softspace_=!1),e=new ti.builtin.str(e),ti.output(e.v),(0===e.v.length||"\n"!==e.v[e.v.length-1]&&"	"!==e.v[e.v.length-1]&&"\r"!==e.v[e.v.length-1]||" "===e.v[e.v.length-1])&&(ti.misceval.softspace_=!0)},ei.exportSymbol("Sk.misceval.print_",ti.misceval.print_),ti.misceval.loadname=function(e,t){var n=t[e];if(void 0!==n)return n;if(n=ti.builtins[e],void 0!==n)return n;throw e=e.replace("_$rw$",""),e=e.replace("_$rn$",""),new ti.builtin.NameError("name '"+e+"' is not defined")},ei.exportSymbol("Sk.misceval.loadname",ti.misceval.loadname),ti.misceval.call=function(e,t,n,i,r){return r=Array.prototype.slice.call(arguments,4),ti.misceval.apply(e,t,n,i,r)},ei.exportSymbol("Sk.misceval.call",ti.misceval.call),ti.misceval.callsim=function(e,t){return t=Array.prototype.slice.call(arguments,1),ti.misceval.apply(e,void 0,void 0,void 0,t)},ei.exportSymbol("Sk.misceval.callsim",ti.misceval.callsim),ti.misceval.apply=function(e,t,n,i,r){if(null===e||e instanceof ti.builtin.none)throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not callable");if("function"==typeof e){if(e.sk$klass)return e.apply(null,[t,n,i,r]);if(n){n=n.tp$iter();for(var s=n.tp$iternext();void 0!==s;s=n.tp$iternext())r.push(s)}return t&&ei.asserts.fail("kwdict not implemented;"),ei.asserts.assert(void 0===i||0===i.length),e.apply(null,r)}var a=e.tp$call;if(void 0!==a){if(n)for(n=n.tp$iter(),s=n.tp$iternext();void 0!==s;s=n.tp$iternext())r.push(s);return t&&ei.asserts.fail("kwdict not implemented;"),a.call(e,r,i,t)}if(a=e.__call__,void 0!==a)return r.unshift(e),ti.misceval.apply(a,i,r,t,n);throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not callable")},ei.exportSymbol("Sk.misceval.apply",ti.misceval.apply),ti.misceval.buildClass=function(e,t,n,i){var r=ti.builtin.type,s={};return t(e,s,[]),s.__module__=e.__name__,ti.misceval.callsim(r,n,i,s)},ei.exportSymbol("Sk.misceval.buildClass",ti.misceval.buildClass),ti.abstr={},ti.abstr.typeName=function(e){return e instanceof ti.builtin.none?"NoneType":e instanceof ti.builtin.bool?"bool":"number"==typeof e?"number":e instanceof ti.builtin.nmber?e.skType:void 0!==e.tp$name?e.tp$name:e.ob$type&&void 0!==e.ob$type.tp$name?e.ob$type.tp$name:"unknown"},ti.abstr.binop_type_error=function(e,t,n){throw e=ti.abstr.typeName(e),t=ti.abstr.typeName(t),new ti.builtin.TypeError("unsupported operand type(s) for "+n+": '"+e+"' and '"+t+"'")},ti.abstr.boNameToSlotFuncLhs_=function(e,t){if(null!==e)switch(t){case"Add":return e.nb$add?e.nb$add:e.__add__;case"Sub":return e.nb$subtract?e.nb$subtract:e.__sub__;case"Mult":return e.nb$multiply?e.nb$multiply:e.__mul__;case"Div":return e.nb$divide?e.nb$divide:e.__div__;case"FloorDiv":return e.nb$floor_divide?e.nb$floor_divide:e.__floordiv__;case"Mod":return e.nb$remainder?e.nb$remainder:e.__mod__;case"Pow":return e.nb$power?e.nb$power:e.__pow__;case"LShift":return e.nb$lshift?e.nb$lshift:e.__lshift__;case"RShift":return e.nb$rshift?e.nb$rshift:e.__rshift__;case"BitAnd":return e.nb$and?e.nb$and:e.__and__;case"BitXor":return e.nb$xor?e.nb$xor:e.__xor__;case"BitOr":return e.nb$or?e.nb$or:e.__or__}},ti.abstr.boNameToSlotFuncRhs_=function(e,t){if(null!==e)switch(t){case"Add":return e.nb$add?e.nb$add:e.__radd__;case"Sub":return e.nb$subtract?e.nb$subtract:e.__rsub__;case"Mult":return e.nb$multiply?e.nb$multiply:e.__rmul__;case"Div":return e.nb$divide?e.nb$divide:e.__rdiv__;case"FloorDiv":return e.nb$floor_divide?e.nb$floor_divide:e.__rfloordiv__;case"Mod":return e.nb$remainder?e.nb$remainder:e.__rmod__;case"Pow":return e.nb$power?e.nb$power:e.__rpow__;case"LShift":return e.nb$lshift?e.nb$lshift:e.__rlshift__;case"RShift":return e.nb$rshift?e.nb$rshift:e.__rrshift__;case"BitAnd":return e.nb$and?e.nb$and:e.__rand__;case"BitXor":return e.nb$xor?e.nb$xor:e.__rxor__;case"BitOr":return e.nb$or?e.nb$or:e.__ror__}},ti.abstr.iboNameToSlotFunc_=function(e,t){switch(t){case"Add":return e.nb$inplace_add?e.nb$inplace_add:e.__iadd__;case"Sub":return e.nb$inplace_subtract?e.nb$inplace_subtract:e.__isub__;case"Mult":return e.nb$inplace_multiply?e.nb$inplace_multiply:e.__imul__;case"Div":return e.nb$inplace_divide?e.nb$inplace_divide:e.__idiv__;case"FloorDiv":return e.nb$inplace_floor_divide?e.nb$inplace_floor_divide:e.__ifloordiv__;case"Mod":return e.nb$inplace_remainder;case"Pow":return e.nb$inplace_power;case"LShift":return e.nb$inplace_lshift?e.nb$inplace_lshift:e.__ilshift__;case"RShift":return e.nb$inplace_rshift?e.nb$inplace_rshift:e.__irshift__;case"BitAnd":return e.nb$inplace_and;case"BitOr":return e.nb$inplace_or;case"BitXor":return e.nb$inplace_xor?e.nb$inplace_xor:e.__ixor__}},ti.abstr.binary_op_=function(e,t,n){var i;return i=ti.abstr.boNameToSlotFuncLhs_(e,n),void 0!==i&&(i=i.call?i.call(e,t):ti.misceval.callsim(i,e,t),void 0!==i)?i:(i=ti.abstr.boNameToSlotFuncRhs_(t,n),void 0!==i&&(i=i.call?i.call(t,e):ti.misceval.callsim(i,t,e),void 0!==i)?i:(ti.abstr.binop_type_error(e,t,n),void 0))},ti.abstr.binary_iop_=function(e,t,n){var i;return i=ti.abstr.iboNameToSlotFunc_(e,n),void 0!==i&&(i=i.call?i.call(e,t):ti.misceval.callsim(i,e,t),void 0!==i)?i:(i=ti.abstr.iboNameToSlotFunc_(t,n),void 0!==i&&(i=i.call?i.call(t,e):ti.misceval.callsim(i,t,e),void 0!==i)?i:(ti.abstr.binop_type_error(e,t,n),void 0))},ti.abstr.numOpAndPromote=function(e,t,n){if(null!==e&&null!==t){if("number"==typeof e&&"number"==typeof t)return n=n(e,t),(n>ti.builtin.lng.threshold$||-ti.builtin.lng.threshold$>n)&&Math.floor(n)===n?[ti.builtin.lng.fromInt$(e),ti.builtin.lng.fromInt$(t)]:n;if(void 0===e||void 0===t)throw new ti.builtin.NameError("Undefined variable in expression");if(e.constructor===ti.builtin.lng||e.constructor===ti.builtin.nmber)return[e,t];if("number"==typeof e)return[new ti.builtin.nmber(e,void 0),t]}},ti.abstr.boNumPromote_={Add:function(e,t){return e+t},Sub:function(e,t){return e-t},Mult:function(e,t){return e*t},Mod:function(e,t){if(0===t)throw new ti.builtin.ZeroDivisionError("division or modulo by zero");var n=e%t;return 0>n*t?n+t:n},Div:function(e,t){if(0===t)throw new ti.builtin.ZeroDivisionError("division or modulo by zero");return e/t},FloorDiv:function(e,t){if(0===t)throw new ti.builtin.ZeroDivisionError("division or modulo by zero");return Math.floor(e/t)},Pow:Math.pow,BitAnd:function(e,t){var n=e&t;return 0>n&&(n+=4294967296),n},BitOr:function(e,t){var n=e|t;return 0>n&&(n+=4294967296),n},BitXor:function(e,t){var n=e^t;return 0>n&&(n+=4294967296),n},LShift:function(e,t){if(0>t)throw new ti.builtin.ValueError("negative shift count");var n=e<<t;return n>e?n:e*Math.pow(2,t)},RShift:function(e,t){if(0>t)throw new ti.builtin.ValueError("negative shift count");var n=e>>t;return e>0&&0>n&&(n&=Math.pow(2,32-t)-1),n}},ti.abstr.numberBinOp=function(e,t,n){var i=ti.abstr.boNumPromote_[n];if(void 0!==i){if(i=ti.abstr.numOpAndPromote(e,t,i),"number"==typeof i)return i;if(void 0!==i&&i.constructor===ti.builtin.nmber||void 0!==i&&i.constructor===ti.builtin.lng)return i;void 0!==i&&(e=i[0],t=i[1])}return ti.abstr.binary_op_(e,t,n)},ei.exportSymbol("Sk.abstr.numberBinOp",ti.abstr.numberBinOp),ti.abstr.numberInplaceBinOp=function(e,t,n){var i=ti.abstr.boNumPromote_[n];if(void 0!==i){if(i=ti.abstr.numOpAndPromote(e,t,i),"number"==typeof i)return i;if(void 0!==i&&i.constructor===ti.builtin.nmber||void 0!==i&&i.constructor===ti.builtin.lng)return i;void 0!==i&&(e=i[0],t=i[1])}return ti.abstr.binary_iop_(e,t,n)},ei.exportSymbol("Sk.abstr.numberInplaceBinOp",ti.abstr.numberInplaceBinOp),ti.abstr.numberUnaryOp=function(e,t){if("Not"===t)return ti.misceval.isTrue(e)?ti.builtin.bool.false$:ti.builtin.bool.true$;if(e instanceof ti.builtin.nmber||e instanceof ti.builtin.bool){var n=ti.builtin.asnum$(e);if("USub"===t)return new ti.builtin.nmber(-n,n.skType);if("UAdd"===t)return new ti.builtin.nmber(n,n.skType);if("Invert"===t)return new ti.builtin.nmber(~n,n.skType)}else{if("USub"===t&&e.nb$negative)return e.nb$negative();if("UAdd"===t&&e.nb$positive)return e.nb$positive();if("Invert"===t&&e.nb$invert)return e.nb$invert()}throw n=ti.abstr.typeName(e),new ti.builtin.TypeError("unsupported operand type for "+t+" '"+n+"'")},ei.exportSymbol("Sk.abstr.numberUnaryOp",ti.abstr.numberUnaryOp),ti.abstr.fixSeqIndex_=function(e,t){return t=ti.builtin.asnum$(t),0>t&&e.sq$length&&(t+=e.sq$length()),t},ti.abstr.sequenceContains=function(e,t){if(e.sq$contains)return e.sq$contains(t);var n=ti.abstr.typeName(e);if(!e.tp$iter)throw new ti.builtin.TypeError("argument of type '"+n+"' is not iterable");for(var n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(ti.misceval.richCompareBool(i,t,"Eq"))return!0;return!1},ti.abstr.sequenceGetItem=function(){ei.asserts.fail()},ti.abstr.sequenceSetItem=function(){ei.asserts.fail()},ti.abstr.sequenceDelItem=function(e,t){if(!e.sq$del_item){var n=ti.abstr.typeName(e);throw new ti.builtin.TypeError("'"+n+"' object does not support item deletion")}t=ti.abstr.fixSeqIndex_(e,t),e.sq$del_item(t)},ti.abstr.sequenceRepeat=function(e,t,n){if(n=ti.builtin.asnum$(n),void 0===ti.misceval.asIndex(n))throw e=ti.abstr.typeName(n),new ti.builtin.TypeError("can't multiply sequence by non-int of type '"+e+"'");return e.call(t,n)},ti.abstr.sequenceGetSlice=function(e,t,n){if(e.sq$slice)return t=ti.abstr.fixSeqIndex_(e,t),n=ti.abstr.fixSeqIndex_(e,n),e.sq$slice(t,n);if(e.mp$subscript)return e.mp$subscript(new ti.builtin.slice(t,n));throw e=ti.abstr.typeName(e),new ti.builtin.TypeError("'"+e+"' object is unsliceable")},ti.abstr.sequenceDelSlice=function(e,t,n){if(!e.sq$del_slice)throw e=ti.abstr.typeName(e),new ti.builtin.TypeError("'"+e+"' doesn't support slice deletion");t=ti.abstr.fixSeqIndex_(e,t),n=ti.abstr.fixSeqIndex_(e,n),e.sq$del_slice(t,n)},ti.abstr.sequenceSetSlice=function(e,t,n,i){if(e.sq$ass_slice)t=ti.abstr.fixSeqIndex_(e,t),n=ti.abstr.fixSeqIndex_(e,n),e.sq$ass_slice(t,n,i);else{if(!e.mp$ass_subscript)throw e=ti.abstr.typeName(e),new ti.builtin.TypeError("'"+e+"' object doesn't support slice assignment");e.mp$ass_subscript(new ti.builtin.slice(t,n),i)}},ti.abstr.objectDelItem=function(e,t){if(null!==e){if(e.mp$del_subscript)return e.mp$del_subscript(t),void 0;if(e.sq$ass_item){var n=ti.misceval.asIndex(t);if(void 0===n)throw n=ti.abstr.typeName(t),new ti.builtin.TypeError("sequence index must be integer, not '"+n+"'");return ti.abstr.sequenceDelItem(e,n),void 0}}throw n=ti.abstr.typeName(e),new ti.builtin.TypeError("'"+n+"' object does not support item deletion")},ei.exportSymbol("Sk.abstr.objectDelItem",ti.abstr.objectDelItem),ti.abstr.objectGetItem=function(e,t){if(null!==e){if(e.mp$subscript)return e.mp$subscript(t);if(ti.misceval.isIndex(t)&&e.sq$item)return ti.abstr.sequenceGetItem(e,ti.misceval.asIndex(t));if(e.tp$getitem)return e.tp$getitem(t)}var n=ti.abstr.typeName(e);throw new ti.builtin.TypeError("'"+n+"' does not support indexing")},ei.exportSymbol("Sk.abstr.objectGetItem",ti.abstr.objectGetItem),ti.abstr.objectSetItem=function(e,t,n){if(null!==e){if(e.mp$ass_subscript)return e.mp$ass_subscript(t,n);if(ti.misceval.isIndex(t)&&e.sq$ass_item)return ti.abstr.sequenceSetItem(e,ti.misceval.asIndex(t),n);if(e.tp$setitem)return e.tp$setitem(t,n)}throw e=ti.abstr.typeName(e),new ti.builtin.TypeError("'"+e+"' does not support item assignment")},ei.exportSymbol("Sk.abstr.objectSetItem",ti.abstr.objectSetItem),ti.abstr.gattr=function(e,t){var n=ti.abstr.typeName(e);if(null===e)throw new ti.builtin.AttributeError("'"+n+"' object has no attribute '"+t+"'");var i=void 0;if(e.__getattr__?i=ti.misceval.callsim(e.__getattr__,e,t):void 0!==e.tp$getattr&&(i=e.tp$getattr(t)),void 0===i)throw new ti.builtin.AttributeError("'"+n+"' object has no attribute '"+t+"'");return i},ei.exportSymbol("Sk.abstr.gattr",ti.abstr.gattr),ti.abstr.sattr=function(e,t,n){var i=ti.abstr.typeName(e);if(null===e)throw new ti.builtin.AttributeError("'"+i+"' object has no attribute '"+t+"'");if(e.__setattr__)ti.misceval.callsim(e.__setattr__,e,t,n);else{if(void 0===e.tp$setattr)throw new ti.builtin.AttributeError("'"+i+"' object has no attribute '"+t+"'");e.tp$setattr(t,n)}},ei.exportSymbol("Sk.abstr.sattr",ti.abstr.sattr),ti.abstr.iter=function(e){if(e.tp$iter)return e.tp$iter();throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not iterable")},ei.exportSymbol("Sk.abstr.iter",ti.abstr.iter),ti.abstr.iternext=function(e){return e.tp$iternext()},ei.exportSymbol("Sk.abstr.iternext",ti.abstr.iternext),ti.mergeSort=function(e,t,n,i){ti.quickSort(e,t,n,i)},ti.quickSort=function(e,t,n,i){ei.asserts.assert(!n,"todo;"),t||(t=ti.mergeSort.stdCmp);var r=function(e,n,i,s){if(i-1>n){var a,o=n+Math.floor(Math.random()*(i-n)),l=e[o];a=e[o],e[o]=e[i-1],e[i-1]=a;var u,o=n;for(u=n;i-1>u;++u)a=s?ti.misceval.callsim(t,l,e[u]):ti.misceval.callsim(t,e[u],l),0>ti.builtin.asnum$(a)&&(a=e[o],e[o]=e[u],e[u]=a,++o);a=e[i-1],e[i-1]=e[o],e[o]=a,r(e,n,o,s),r(e,o+1,i,s)}};return r(e,0,e.length,i),null},ti.mergeSort.stdCmp=new ti.builtin.func(function(e,t){return ti.misceval.richCompareBool(e,t,"Lt")?-1:0}),ti.builtin.list=function(e){if(!(this instanceof ti.builtin.list))return new ti.builtin.list(e);if(void 0===e)this.v=[];else if("[object Array]"===Object.prototype.toString.apply(e))this.v=e;else{if(!e.tp$iter)throw new ti.builtin.ValueError("expecting Array or iterable");this.v=[],e=e.tp$iter();for(var t=e.tp$iternext();void 0!==t;t=e.tp$iternext())this.v.push(t)}return this.__class__=ti.builtin.list,this.v=this.v,this},ti.builtin.list.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("list",ti.builtin.list),ti.builtin.list.prototype.list_iter_=function(){var e={tp$iter:function(){return e},$obj:this,$index:0,tp$iternext:function(){return e.$index>=e.$obj.v.length?void 0:e.$obj.v[e.$index++]}};return e},ti.builtin.list.prototype.list_concat_=function(e){if(!e.__class__||e.__class__!=ti.builtin.list)throw new ti.builtin.TypeError("can only concatenate list to list");for(var t=this.v.slice(),n=0;e.v.length>n;++n)t.push(e.v[n]);return new ti.builtin.list(t)},ti.builtin.list.prototype.list_del_item_=function(e){if(e=ti.builtin.asnum$(e),0>e||e>=this.v.length)throw new ti.builtin.IndexError("list assignment index out of range");this.list_del_slice_(e,e+1)},ti.builtin.list.prototype.list_del_slice_=function(e,t){e=ti.builtin.asnum$(e),t=ti.builtin.asnum$(t);var n=[];n.unshift(t-e),n.unshift(e),this.v.splice.apply(this.v,n)},ti.builtin.list.prototype.list_ass_item_=function(e,t){if(e=ti.builtin.asnum$(e),0>e||e>=this.v.length)throw new ti.builtin.IndexError("list assignment index out of range");this.v[e]=t},ti.builtin.list.prototype.list_ass_slice_=function(e,t,n){e=ti.builtin.asnum$(e),t=ti.builtin.asnum$(t),n=n.v.slice(0),n.unshift(t-e),n.unshift(e),this.v.splice.apply(this.v,n)},ti.builtin.list.prototype.tp$name="list",ti.builtin.list.prototype.$r=function(){for(var e=[],t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())e.push(ti.misceval.objectRepr(n).v);return new ti.builtin.str("["+e.join(", ")+"]")},ti.builtin.list.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.list.prototype.tp$hash=ti.builtin.object.prototype.HashNotImplemented,ti.builtin.list.prototype.tp$richcompare=function(e,t){if(this===e&&ti.misceval.opAllowsEquality(t))return!0;if(!e.__class__||e.__class__!=ti.builtin.list)return"Eq"===t?!1:"NotEq"===t?!0:!1;var n=this.v;e=e.v;var i,r=n.length,s=e.length;for(i=0;r>i&&s>i&&ti.misceval.richCompareBool(n[i],e[i],"Eq");++i);if(i>=r||i>=s)switch(t){case"Lt":return s>r;case"LtE":return s>=r;case"Eq":return r===s;case"NotEq":return r!==s;case"Gt":return r>s;case"GtE":return r>=s;default:ei.asserts.fail()}return"Eq"===t?!1:"NotEq"===t?!0:ti.misceval.richCompareBool(n[i],e[i],t)},ti.builtin.list.prototype.tp$iter=ti.builtin.list.prototype.list_iter_,ti.builtin.list.prototype.sq$length=function(){return this.v.length},ti.builtin.list.prototype.sq$concat=ti.builtin.list.prototype.list_concat_,ti.builtin.list.prototype.nb$add=ti.builtin.list.prototype.list_concat_,ti.builtin.list.prototype.nb$inplace_add=ti.builtin.list.prototype.list_concat_,ti.builtin.list.prototype.sq$repeat=function(e){e=ti.builtin.asnum$(e);for(var t=[],n=0;e>n;++n)for(var i=0;this.v.length>i;++i)t.push(this.v[i]);return new ti.builtin.list(t)},ti.builtin.list.prototype.nb$multiply=ti.builtin.list.prototype.sq$repeat,ti.builtin.list.prototype.nb$inplace_multiply=ti.builtin.list.prototype.sq$repeat,ti.builtin.list.prototype.sq$ass_item=ti.builtin.list.prototype.list_ass_item_,ti.builtin.list.prototype.sq$del_item=ti.builtin.list.prototype.list_del_item_,ti.builtin.list.prototype.sq$ass_slice=ti.builtin.list.prototype.list_ass_slice_,ti.builtin.list.prototype.sq$del_slice=ti.builtin.list.prototype.list_del_slice_,ti.builtin.list.prototype.list_subscript_=function(e){if(ti.misceval.isIndex(e)){var t=ti.misceval.asIndex(e);if(void 0!==t){if(0>t&&(t=this.v.length+t),0>t||t>=this.v.length)throw new ti.builtin.IndexError("list index out of range");return this.v[t]}}else if(e instanceof ti.builtin.slice){var n=[];return e.sssiter$(this,function(e,t){n.push(t.v[e])}),new ti.builtin.list(n)}throw new ti.builtin.TypeError("list indices must be integers, not "+ti.abstr.typeName(e))},ti.builtin.list.prototype.list_ass_subscript_=function(e,t){if(ti.misceval.isIndex(e)){var n=ti.misceval.asIndex(e);if(void 0!==n)return 0>n&&(n=this.v.length+n),this.list_ass_item_(n,t),void 0}else if(e instanceof ti.builtin.slice){if(1===(null!==e.step?e.step:1))this.list_ass_slice_(e.start,e.stop,t);else{var i=[];e.sssiter$(this,function(e){i.push(e)});var r=0;if(i.length!==t.v.length)throw new ti.builtin.ValueError("attempt to assign sequence of size "+t.v.length+" to extended slice of size "+i.length);for(n=0;i.length>n;++n)this.v.splice(i[n],1,t.v[r]),r+=1}return}throw new ti.builtin.TypeError("list indices must be integers, not "+ti.abstr.typeName(e))},ti.builtin.list.prototype.list_del_subscript_=function(e){if(ti.misceval.isIndex(e)){var t=ti.misceval.asIndex(e);if(void 0!==t)return 0>t&&(t=this.v.length+t),this.list_del_item_(t),void 0}else if(e instanceof ti.builtin.slice){if(1===e.step)this.list_del_slice_(e.start,e.stop);else{var n=this,i=0,r=(null===e.step?1:e.step)>0?1:0;e.sssiter$(this,function(e){n.v.splice(e-i,1),i+=r})}return}throw new ti.builtin.TypeError("list indices must be integers, not "+typeof e)},ti.builtin.list.prototype.mp$subscript=ti.builtin.list.prototype.list_subscript_,ti.builtin.list.prototype.mp$ass_subscript=ti.builtin.list.prototype.list_ass_subscript_,ti.builtin.list.prototype.mp$del_subscript=ti.builtin.list.prototype.list_del_subscript_,ti.builtin.list.prototype.__getitem__=new ti.builtin.func(function(e,t){return ti.builtin.list.prototype.list_subscript_.call(e,t)
}),ti.builtin.list.prototype.list_sort_=function(e,t,n,i){var r=void 0!==n&&null!==n,s=void 0!==t&&null!==t;void 0==i&&(i=!1);var a=new ti.builtin.timSort(e);if(e.v=[],r){a.lt=s?function(e,n){return ti.misceval.richCompareBool(t.func_code(e[0],n[0]),0,"Lt")}:function(e,t){return ti.misceval.richCompareBool(e[0],t[0],"Lt")};for(var o=0;a.listlength>o;o++){var s=a.list.v[o],l=n.func_code(s);a.list.v[o]=[l,s]}}else s&&(a.lt=function(e,n){return ti.misceval.richCompareBool(t.func_code(e,n),0,"Lt")});if(i&&a.list.list_reverse_(a.list),a.sort(),i&&a.list.list_reverse_(a.list),r)for(n=0;a.listlength>n;n++)s=a.list.v[n][1],a.list.v[n]=s;if(n=e.sq$length()>0,e.v=a.list.v,n)throw new ti.builtin.OperationError("list modified during sort")},ti.builtin.list.prototype.list_reverse_=function(e){ti.builtin.pyCheckArgs("reverse",arguments,1,1);for(var t=e.v,n=[],i=e.v.length-1;i>-1;--i)n.push(t[i]);return e.v=n,null},ti.builtin.list.prototype.append=new ti.builtin.func(function(e,t){return ti.builtin.pyCheckArgs("append",arguments,2,2),e.v.push(t),null}),ti.builtin.list.prototype.insert=new ti.builtin.func(function(e,t,n){if(ti.builtin.pyCheckArgs("insert",arguments,3,3),!ti.builtin.checkNumber(t))throw new ti.builtin.TypeError("an integer is required");t=ti.builtin.asnum$(t),0>t?t=0:t>e.v.length&&(t=e.v.length),e.v.splice(t,0,n)}),ti.builtin.list.prototype.extend=new ti.builtin.func(function(e,t){if(ti.builtin.pyCheckArgs("extend",arguments,2,2),!ti.builtin.checkIterable(t))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(t)+"' object is not iterable");if(e==t){for(var n=[],i=t.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())n.push(r);return e.v.push.apply(e.v,n),null}for(i=t.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())e.v.push(r);return null}),ti.builtin.list.prototype.pop=new ti.builtin.func(function(e,t){if(ti.builtin.pyCheckArgs("pop",arguments,1,2),void 0===t&&(t=e.v.length-1),!ti.builtin.checkNumber(t))throw new ti.builtin.TypeError("an integer is required");if(t=ti.builtin.asnum$(t),0>t||t>=e.v.length)throw new ti.builtin.IndexError("pop index out of range");var n=e.v[t];return e.v.splice(t,1),n}),ti.builtin.list.prototype.remove=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("remove",arguments,2,2);var n=ti.builtin.list.prototype.index.func_code(e,t);return e.v.splice(n,1),null}),ti.builtin.list.prototype.index=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("index",arguments,2,2);for(var n=e.v.length,i=e.v,r=0;n>r;++r)if(ti.misceval.richCompareBool(i[r],t,"Eq"))return r;throw new ti.builtin.ValueError("list.index(x): x not in list")}),ti.builtin.list.prototype.count=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("count",arguments,2,2);for(var n=e.v.length,i=e.v,r=0,s=0;n>s;++s)ti.misceval.richCompareBool(i[s],t,"Eq")&&(r+=1);return r}),ti.builtin.list.prototype.reverse=new ti.builtin.func(ti.builtin.list.prototype.list_reverse_),ti.builtin.list.prototype.sort=new ti.builtin.func(ti.builtin.list.prototype.list_sort_),ti.builtin.list.prototype.sort.func_code.co_varnames=["__self__","cmp","key","reverse"],ei.exportSymbol("Sk.builtin.list",ti.builtin.list);var ni={};ti.builtin.str=function(e){if(void 0===e&&(e=""),e instanceof ti.builtin.str&&e!==ti.builtin.str.prototype.ob$type)return e;if(!(this instanceof ti.builtin.str))return new ti.builtin.str(e);if(!0===e)e="True";else if(!1===e)e="False";else if(null===e||e instanceof ti.builtin.none)e="None";else if(e instanceof ti.builtin.bool)e=e.v?"True":"False";else if("number"==typeof e)e=""+e,"Infinity"===e?e="inf":"-Infinity"===e&&(e="-inf");else if("string"!=typeof e){if(void 0!==e.tp$str){if(e=e.tp$str(),!(e instanceof ti.builtin.str))throw new ti.builtin.ValueError("__str__ didn't return a str");return e}return ti.misceval.objectRepr(e)}return Object.prototype.hasOwnProperty.call(ni,"1"+e)?ni["1"+e]:(this.__class__=ti.builtin.str,this.v=this.v=e,ni["1"+e]=this,this)},ei.exportSymbol("Sk.builtin.str",ti.builtin.str),ti.builtin.str.$emptystr=new ti.builtin.str(""),ti.builtin.str.prototype.mp$subscript=function(e){if(e=ti.builtin.asnum$(e),"number"==typeof e&&Math.floor(e)===e){if(0>e&&(e=this.v.length+e),0>e||e>=this.v.length)throw new ti.builtin.IndexError("string index out of range");return new ti.builtin.str(this.v.charAt(e))}if(e instanceof ti.builtin.slice){var t="";return e.sssiter$(this,function(e,n){e>=0&&n.v.length>e&&(t+=n.v.charAt(e))}),new ti.builtin.str(t)}throw new ti.builtin.TypeError("string indices must be numbers, not "+typeof e)},ti.builtin.str.prototype.sq$length=function(){return this.v.length},ti.builtin.str.prototype.sq$concat=function(e){if(!e||!ti.builtin.checkString(e))throw e=ti.abstr.typeName(e),new ti.builtin.TypeError("cannot concatenate 'str' and '"+e+"' objects");return new ti.builtin.str(this.v+e.v)},ti.builtin.str.prototype.nb$add=ti.builtin.str.prototype.sq$concat,ti.builtin.str.prototype.nb$inplace_add=ti.builtin.str.prototype.sq$concat,ti.builtin.str.prototype.sq$repeat=function(e){e=ti.builtin.asnum$(e);for(var t="",n=0;e>n;++n)t+=this.v;return new ti.builtin.str(t)},ti.builtin.str.prototype.nb$multiply=ti.builtin.str.prototype.sq$repeat,ti.builtin.str.prototype.nb$inplace_multiply=ti.builtin.str.prototype.sq$repeat,ti.builtin.str.prototype.sq$item=function(){ei.asserts.fail()},ti.builtin.str.prototype.sq$slice=function(e,t){return e=ti.builtin.asnum$(e),t=ti.builtin.asnum$(t),0>e&&(e=0),new ti.builtin.str(this.v.substr(e,t-e))},ti.builtin.str.prototype.sq$contains=function(e){if(void 0===e.v||e.v.constructor!=String)throw new ti.builtin.TypeError("TypeError: 'In <string> requires string as left operand");return-1!=this.v.indexOf(e.v)?!0:!1},ti.builtin.str.prototype.tp$name="str",ti.builtin.str.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.str.prototype.tp$iter=function(){var e={tp$iter:function(){return e},$obj:this,$index:0,tp$iternext:function(){return e.$index>=e.$obj.v.length?void 0:new ti.builtin.str(e.$obj.v.substr(e.$index++,1))}};return e},ti.builtin.str.prototype.tp$richcompare=function(e,t){if(e instanceof ti.builtin.str){if(this===e)switch(t){case"Eq":case"LtE":case"GtE":return!0;case"NotEq":case"Lt":case"Gt":return!1}var n=this.v.length,i=e.v.length,r=Math.min(n,i),s=0;if(r>0){for(var a=0;r>a;++a)if(this.v[a]!=e.v[a]){s=this.v[a].charCodeAt(0)-e.v[a].charCodeAt(0);break}}else s=0;switch(0==s&&(s=i>n?-1:n>i?1:0),t){case"Lt":return 0>s;case"LtE":return 0>=s;case"Eq":return 0==s;case"NotEq":return 0!=s;case"Gt":return s>0;case"GtE":return s>=0;default:ei.asserts.fail()}}},ti.builtin.str.prototype.$r=function(){var e="'";-1!==this.v.indexOf("'")&&-1===this.v.indexOf('"')&&(e='"');for(var t=this.v.length,n=e,i=0;t>i;++i){var r=this.v.charAt(i);r===e||"\\"===r?n+="\\"+r:"	"===r?n+="\\t":"\n"===r?n+="\\n":"\r"===r?n+="\\r":" ">r||r>=127?(r=r.charCodeAt(0).toString(16),2>r.length&&(r="0"+r),n+="\\x"+r):n+=r}return new ti.builtin.str(n+e)},ti.builtin.str.re_escape_=function(e){for(var t=[],n=/^[A-Za-z0-9]+$/,i=0;e.length>i;++i){var r=e.charAt(i);n.test(r)?t.push(r):"\\000"===r?t.push("\\000"):t.push("\\"+r)}return t.join("")},ti.builtin.str.prototype.lower=new ti.builtin.func(function(e){return ti.builtin.pyCheckArgs("lower",arguments,1,1),new ti.builtin.str(e.v.toLowerCase())}),ti.builtin.str.prototype.upper=new ti.builtin.func(function(e){return ti.builtin.pyCheckArgs("upper",arguments,1,1),new ti.builtin.str(e.v.toUpperCase())}),ti.builtin.str.prototype.capitalize=new ti.builtin.func(function(e){ti.builtin.pyCheckArgs("capitalize",arguments,1,1);var t,n,i=e.v;if(0===i.length)return new ti.builtin.str("");for(t=i.charAt(0).toUpperCase(),n=1;i.length>n;n++)t+=i.charAt(n).toLowerCase();return new ti.builtin.str(t)}),ti.builtin.str.prototype.join=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("join",arguments,2,2),ti.builtin.pyCheckType("seq","iterable",ti.builtin.checkIterable(t));for(var n=[],i=t.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext()){if(r.constructor!==ti.builtin.str)throw"TypeError: sequence item "+n.length+": expected string, "+typeof r+" found";n.push(r.v)}return new ti.builtin.str(n.join(e.v))}),ti.builtin.str.prototype.split=new ti.builtin.func(function(e,t,n){if(ti.builtin.pyCheckArgs("split",arguments,1,3),(void 0===t||t instanceof ti.builtin.none)&&(t=null),null!==t&&!ti.builtin.checkString(t))throw new ti.builtin.TypeError("expected a string");if(null!==t&&""===t.v)throw new ti.builtin.ValueError("empty separator");if(void 0!==n&&!ti.builtin.checkInt(n))throw new ti.builtin.TypeError("an integer is required");n=ti.builtin.asnum$(n);var i=/[\s]+/g,r=e.v;null===t?r=r.trimLeft():(i=t.v.replace(/([.*+?=|\\\/()\[\]\{\}^$])/g,"\\$1"),i=RegExp(i,"g"));for(var s,a=[],o=0,l=0;null!=(s=i.exec(r))&&s.index!==i.lastIndex&&(a.push(new ti.builtin.str(r.substring(o,s.index))),o=i.lastIndex,l+=1,!(n&&l>=n)););return r=r.substring(o),(null!==t||r.length>0)&&a.push(new ti.builtin.str(r)),new ti.builtin.list(a)}),ti.builtin.str.prototype.strip=new ti.builtin.func(function(e,t){if(ti.builtin.pyCheckArgs("strip",arguments,1,2),void 0!==t&&!ti.builtin.checkString(t))throw new ti.builtin.TypeError("strip arg must be None or str");var n;return void 0===t?n=/^\s+|\s+$/g:(n=ti.builtin.str.re_escape_(t.v),n=RegExp("^["+n+"]+|["+n+"]+$","g")),new ti.builtin.str(e.v.replace(n,""))}),ti.builtin.str.prototype.lstrip=new ti.builtin.func(function(e,t){if(ti.builtin.pyCheckArgs("lstrip",arguments,1,2),void 0!==t&&!ti.builtin.checkString(t))throw new ti.builtin.TypeError("lstrip arg must be None or str");var n;return void 0===t?n=/^\s+/g:(n=ti.builtin.str.re_escape_(t.v),n=RegExp("^["+n+"]+","g")),new ti.builtin.str(e.v.replace(n,""))}),ti.builtin.str.prototype.rstrip=new ti.builtin.func(function(e,t){if(ti.builtin.pyCheckArgs("rstrip",arguments,1,2),void 0!==t&&!ti.builtin.checkString(t))throw new ti.builtin.TypeError("rstrip arg must be None or str");var n;return void 0===t?n=/\s+$/g:(n=ti.builtin.str.re_escape_(t.v),n=RegExp("["+n+"]+$","g")),new ti.builtin.str(e.v.replace(n,""))}),ti.builtin.str.prototype.partition=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("partition",arguments,2,2),ti.builtin.pyCheckType("sep","string",ti.builtin.checkString(t));var n=new ti.builtin.str(t),i=e.v.indexOf(n.v);return 0>i?new ti.builtin.tuple([e,ti.builtin.str.$emptystr,ti.builtin.str.$emptystr]):new ti.builtin.tuple([new ti.builtin.str(e.v.substring(0,i)),n,new ti.builtin.str(e.v.substring(i+n.v.length))])}),ti.builtin.str.prototype.rpartition=new ti.builtin.func(function(e,t){ti.builtin.pyCheckArgs("rpartition",arguments,2,2),ti.builtin.pyCheckType("sep","string",ti.builtin.checkString(t));var n=new ti.builtin.str(t),i=e.v.lastIndexOf(n.v);return 0>i?new ti.builtin.tuple([ti.builtin.str.$emptystr,ti.builtin.str.$emptystr,e]):new ti.builtin.tuple([new ti.builtin.str(e.v.substring(0,i)),n,new ti.builtin.str(e.v.substring(i+n.v.length))])}),ti.builtin.str.prototype.count=new ti.builtin.func(function(e,t,n,i){if(ti.builtin.pyCheckArgs("count",arguments,2,4),!ti.builtin.checkString(t))throw new ti.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!ti.builtin.checkInt(n))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!ti.builtin.checkInt(i))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=ti.builtin.asnum$(n),n=n>=0?n:e.v.length+n),void 0===i?i=e.v.length:(i=ti.builtin.asnum$(i),i=i>=0?i:e.v.length+i);var r=RegExp(t.v,"g");return(r=e.v.slice(n,i).match(r))?r.length:0}),ti.builtin.str.prototype.ljust=new ti.builtin.func(function(e,t,n){if(ti.builtin.pyCheckArgs("ljust",arguments,2,3),!ti.builtin.checkInt(t))throw new ti.builtin.TypeError("integer argument exepcted, got "+ti.abstr.typeName(t));if(void 0!==n&&(!ti.builtin.checkString(n)||1!==n.v.length))throw new ti.builtin.TypeError("must be char, not "+ti.abstr.typeName(n));if(n=void 0===n?" ":n.v,t=ti.builtin.asnum$(t),e.v.length>=t)return e;var i=Array.prototype.join.call({length:Math.floor(t-e.v.length)+1},n);return new ti.builtin.str(e.v+i)}),ti.builtin.str.prototype.rjust=new ti.builtin.func(function(e,t,n){if(ti.builtin.pyCheckArgs("rjust",arguments,2,3),!ti.builtin.checkInt(t))throw new ti.builtin.TypeError("integer argument exepcted, got "+ti.abstr.typeName(t));if(void 0!==n&&(!ti.builtin.checkString(n)||1!==n.v.length))throw new ti.builtin.TypeError("must be char, not "+ti.abstr.typeName(n));if(n=void 0===n?" ":n.v,t=ti.builtin.asnum$(t),e.v.length>=t)return e;var i=Array.prototype.join.call({length:Math.floor(t-e.v.length)+1},n);return new ti.builtin.str(i+e.v)}),ti.builtin.str.prototype.center=new ti.builtin.func(function(e,t,n){if(ti.builtin.pyCheckArgs("center",arguments,2,3),!ti.builtin.checkInt(t))throw new ti.builtin.TypeError("integer argument exepcted, got "+ti.abstr.typeName(t));if(void 0!==n&&(!ti.builtin.checkString(n)||1!==n.v.length))throw new ti.builtin.TypeError("must be char, not "+ti.abstr.typeName(n));if(n=void 0===n?" ":n.v,t=ti.builtin.asnum$(t),e.v.length>=t)return e;var i=Array.prototype.join.call({length:Math.floor((t-e.v.length)/2)+1},n),i=i+e.v+i;return t>i.length&&(i+=n),new ti.builtin.str(i)}),ti.builtin.str.prototype.find=new ti.builtin.func(function(e,t,n,i){if(ti.builtin.pyCheckArgs("find",arguments,2,4),!ti.builtin.checkString(t))throw new ti.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!ti.builtin.checkInt(n))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!ti.builtin.checkInt(i))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=ti.builtin.asnum$(n),n=n>=0?n:e.v.length+n),void 0===i?i=e.v.length:(i=ti.builtin.asnum$(i),i=i>=0?i:e.v.length+i);var r=e.v.indexOf(t.v,n);return new ti.builtin.nmber(r>=n&&i>r?r:-1,ti.builtin.nmber.int$)}),ti.builtin.str.prototype.index=new ti.builtin.func(function(e,t,n,i){ti.builtin.pyCheckArgs("index",arguments,2,4);var r=ti.misceval.callsim(e.find,e,t,n,i);if(-1===ti.builtin.asnum$(r))throw new ti.builtin.ValueError("substring not found");return r}),ti.builtin.str.prototype.rfind=new ti.builtin.func(function(e,t,n,i){if(ti.builtin.pyCheckArgs("rfind",arguments,2,4),!ti.builtin.checkString(t))throw new ti.builtin.TypeError("expected a character buffer object");if(void 0!==n&&!ti.builtin.checkInt(n))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==i&&!ti.builtin.checkInt(i))throw new ti.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===n?n=0:(n=ti.builtin.asnum$(n),n=n>=0?n:e.v.length+n),void 0===i?i=e.v.length:(i=ti.builtin.asnum$(i),i=i>=0?i:e.v.length+i);var r=e.v.lastIndexOf(t.v,i),r=r!==i?r:e.v.lastIndexOf(t.v,i-1);return new ti.builtin.nmber(r>=n&&i>r?r:-1,ti.builtin.nmber.int$)}),ti.builtin.str.prototype.rindex=new ti.builtin.func(function(e,t,n,i){ti.builtin.pyCheckArgs("rindex",arguments,2,4);var r=ti.misceval.callsim(e.rfind,e,t,n,i);if(-1===ti.builtin.asnum$(r))throw new ti.builtin.ValueError("substring not found");return r}),ti.builtin.str.prototype.startswith=new ti.builtin.func(function(e,t){return ti.builtin.pyCheckArgs("startswith",arguments,2,2),ti.builtin.pyCheckType("tgt","string",ti.builtin.checkString(t)),ti.builtin.bool(0==e.v.indexOf(t.v))}),ti.builtin.str.prototype.endswith=new ti.builtin.func(function(e,t){return ti.builtin.pyCheckArgs("endswith",arguments,2,2),ti.builtin.pyCheckType("tgt","string",ti.builtin.checkString(t)),ti.builtin.bool(-1!==e.v.indexOf(t.v,e.v.length-t.v.length))}),ti.builtin.str.prototype.replace=new ti.builtin.func(function(e,t,n,i){if(ti.builtin.pyCheckArgs("replace",arguments,3,4),ti.builtin.pyCheckType("oldS","string",ti.builtin.checkString(t)),ti.builtin.pyCheckType("newS","string",ti.builtin.checkString(n)),void 0!==i&&!ti.builtin.checkInt(i))throw new ti.builtin.TypeError("integer argument expected, got "+ti.abstr.typeName(i));i=ti.builtin.asnum$(i);var r=RegExp(ti.builtin.str.re_escape_(t.v),"g");if(void 0===i||0>i)return new ti.builtin.str(e.v.replace(r,n.v));var s=0;return new ti.builtin.str(e.v.replace(r,function(e){return s++,i>=s?n.v:e}))}),ti.builtin.str.prototype.isdigit=new ti.builtin.func(function(e){if(ti.builtin.pyCheckArgs("isdigit",arguments,1,1),0===e.v.length)return ti.builtin.bool(!1);var t;for(t=0;e.v.length>t;t++){var n=e.v.charAt(t);if("0">n||n>"9")return ti.builtin.bool(!1)}return ti.builtin.bool(!0)}),ti.builtin.str.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("str",ti.builtin.str),ti.builtin.str.prototype.nb$remainder=function(e){e.constructor===ti.builtin.tuple||void 0!==e.mp$subscript&&e.constructor!==ti.builtin.str||(e=new ti.builtin.tuple([e]));var t=0,n=this.v.replace(/%(\([a-zA-Z0-9]+\))?([#0 +\-]+)?(\*|[0-9]+)?(\.(\*|[0-9]+))?[hlL]?([diouxXeEfFgGcrs%])/g,function(n,i,r,s,a,o,l){s=ti.builtin.asnum$(s),a=ti.builtin.asnum$(a);var u;(void 0===i||""===i)&&(u=t++);var c=!1,f=!1,h=!1,p=!1,d=!1;if(r&&(-1!==r.indexOf("-")?f=!0:-1!==r.indexOf("0")&&(c=!0),-1!==r.indexOf("+")?p=!0:-1!==r.indexOf(" ")&&(h=!0),d=-1!==r.indexOf("#")),a&&(a=parseInt(a.substr(1),10)),r=function(e,t){t=ti.builtin.asnum$(t);var n,i,r=!1;"number"==typeof e?(0>e&&(e=-e,r=!0),i=e.toString(t)):e instanceof ti.builtin.nmber?(i=e.str$(t,!1),i.length>2&&".0"===i.substr(-2)&&(i=i.substr(0,i.length-2)),r=e.nb$isnegative()):e instanceof ti.builtin.lng&&(i=e.str$(t,!1),r=e.nb$isnegative()),ei.asserts.assert(void 0!==i,"unhandled number format");var s=!1;if(a)for(n=i.length;a>n;++n)i="0"+i,s=!0;return n="",r?n="-":p?n="+"+n:h&&(n=" "+n),d&&(16===t?n+="0x":8!==t||s||"0"===i||(n+="0")),[n,i]},n=function(e){var t=e[0];e=e[1];var n;if(s)if(s=parseInt(s,10),n=e.length+t.length,c)for(;s>n;++n)e="0"+e;else if(f)for(;s>n;++n)e+=" ";else for(;s>n;++n)t=" "+t;return t+e},e.constructor===ti.builtin.tuple)i=e.v[u];else{if(void 0===e.mp$subscript)throw new ti.builtin.AttributeError(e.tp$name+" instance has no attribute 'mp$subscript'");i=i.substring(1,i.length-1),i=e.mp$subscript(new ti.builtin.str(i))}switch(l){case"d":case"i":return n(r(i,10));case"o":return n(r(i,8));case"x":return n(r(i,16));case"X":return n(r(i,16)).toUpperCase();case"f":case"F":case"e":case"E":case"g":case"G":return i=ti.builtin.asnum$(i),"string"==typeof i&&(i=Number(i)),1/0===i?"inf":-1/0===i?"-inf":isNaN(i)?"nan":(u=["toExponential","toFixed","toPrecision"]["efg".indexOf(l.toLowerCase())],(void 0===a||""===a)&&("e"===l||"E"===l?a=6:("f"===l||"F"===l)&&(a=7)),i=i[u](a),-1!=="EFG".indexOf(l)&&(i=i.toUpperCase()),n(["",i]));case"c":if("number"==typeof i)return String.fromCharCode(i);if(i instanceof ti.builtin.nmber)return String.fromCharCode(i.v);if(i instanceof ti.builtin.lng)return String.fromCharCode(i.str$(10,!1)[0]);if(i.constructor===ti.builtin.str)return i.v.substr(0,1);throw new ti.builtin.TypeError("an integer is required");case"r":return l=ti.builtin.repr(i),a?l.v.substr(0,a):l.v;case"s":return l=new ti.builtin.str(i),a?l.v.substr(0,a):l.v;case"%":return"%"}});return new ti.builtin.str(n)},ti.builtin.tuple=function(e){if(!(this instanceof ti.builtin.tuple))return new ti.builtin.tuple(e);if(void 0===e&&(e=[]),"[object Array]"===Object.prototype.toString.apply(e))this.v=e;else{if(!e.tp$iter)throw new ti.builtin.ValueError("expecting Array or iterable");this.v=[],e=e.tp$iter();for(var t=e.tp$iternext();void 0!==t;t=e.tp$iternext())this.v.push(t)}return this.__class__=ti.builtin.tuple,this.v=this.v,this},ti.builtin.tuple.prototype.tp$name="tuple",ti.builtin.tuple.prototype.$r=function(){if(0===this.v.length)return new ti.builtin.str("()");for(var e=[],t=0;this.v.length>t;++t)e[t]=ti.misceval.objectRepr(this.v[t]).v;return e=e.join(", "),1===this.v.length&&(e+=","),new ti.builtin.str("("+e+")")},ti.builtin.tuple.prototype.mp$subscript=function(e){if(ti.misceval.isIndex(e)){var t=ti.misceval.asIndex(e);if(void 0!==t){if(0>t&&(t=this.v.length+t),0>t||t>=this.v.length)throw new ti.builtin.IndexError("tuple index out of range");return this.v[t]}}else if(e instanceof ti.builtin.slice){var n=[];return e.sssiter$(this,function(e,t){n.push(t.v[e])}),new ti.builtin.tuple(n)}throw new ti.builtin.TypeError("tuple indices must be integers, not "+ti.abstr.typeName(e))},ti.builtin.tuple.prototype.tp$hash=function(){for(var e=1000003,t=3430008,n=this.v.length,i=0;n>i;++i){var r=ti.builtin.hash(this.v[i]);if(-1===r)return-1;t=(t^r)*e,e+=82520+n+n}return t+=97531,-1===t&&(t=-2),t},ti.builtin.tuple.prototype.sq$repeat=function(e){e=ti.builtin.asnum$(e);for(var t=[],n=0;e>n;++n)for(var i=0;this.v.length>i;++i)t.push(this.v[i]);return new ti.builtin.tuple(t)},ti.builtin.tuple.prototype.nb$multiply=ti.builtin.tuple.prototype.sq$repeat,ti.builtin.tuple.prototype.nb$inplace_multiply=ti.builtin.tuple.prototype.sq$repeat,ti.builtin.tuple.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("tuple",ti.builtin.tuple),ti.builtin.tuple.prototype.tp$iter=function(){var e={tp$iter:function(){return e},$obj:this,$index:0,tp$iternext:function(){return e.$index>=e.$obj.v.length?void 0:e.$obj.v[e.$index++]}};return e},ti.builtin.tuple.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.tuple.prototype.tp$richcompare=function(e,t){if(!e.__class__||e.__class__!=ti.builtin.tuple)return"Eq"===t?!1:"NotEq"===t?!0:!1;var n=this.v;e=e.v;var i,r=n.length,s=e.length;for(i=0;r>i&&s>i&&ti.misceval.richCompareBool(n[i],e[i],"Eq");++i);if(i>=r||i>=s)switch(t){case"Lt":return s>r;case"LtE":return s>=r;case"Eq":return r===s;case"NotEq":return r!==s;case"Gt":return r>s;case"GtE":return r>=s;default:ei.asserts.fail()}return"Eq"===t?!1:"NotEq"===t?!0:ti.misceval.richCompareBool(n[i],e[i],t)},ti.builtin.tuple.prototype.sq$concat=function(e){return new ti.builtin.tuple(this.v.concat(e.v))},ti.builtin.tuple.prototype.nb$add=ti.builtin.tuple.prototype.sq$concat,ti.builtin.tuple.prototype.nb$inplace_add=ti.builtin.tuple.prototype.sq$concat,ti.builtin.tuple.prototype.sq$length=function(){return this.v.length},ti.builtin.tuple.prototype.index=new ti.builtin.func(function(e,t){for(var n=e.v.length,i=e.v,r=0;n>r;++r)if(ti.misceval.richCompareBool(i[r],t,"Eq"))return r;throw new ti.builtin.ValueError("tuple.index(x): x not in tuple")}),ti.builtin.tuple.prototype.count=new ti.builtin.func(function(e,t){for(var n=e.v.length,i=e.v,r=0,s=0;n>s;++s)ti.misceval.richCompareBool(i[s],t,"Eq")&&(r+=1);return r}),ei.exportSymbol("Sk.builtin.tuple",ti.builtin.tuple),ti.builtin.dict=function(e){if(!(this instanceof ti.builtin.dict))return new ti.builtin.dict(e);if(void 0===e&&(e=[]),this.size=0,"[object Array]"===Object.prototype.toString.apply(e))for(var t=0;e.length>t;t+=2)this.mp$ass_subscript(e[t],e[t+1]);else if(e instanceof ti.builtin.dict)for(var n=e.tp$iter(),t=n.tp$iternext();void 0!==t;t=n.tp$iternext()){var i=e.mp$subscript(t);void 0===i&&(i=null),this.mp$ass_subscript(t,i)}else{if(!e.tp$iter)throw new ti.builtin.TypeError("object is not iterable");for(n=e.tp$iter(),t=n.tp$iternext();void 0!==t;t=n.tp$iternext()){if(!t.mp$subscript)throw new ti.builtin.TypeError("element "+this.size+" is not a sequence");this.mp$ass_subscript(t.mp$subscript(0),t.mp$subscript(1))}}return this.__class__=ti.builtin.dict,this},ti.builtin.dict.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("dict",ti.builtin.dict);var ii=ti.builtin.hash;ti.builtin.dict.prototype.key$lookup=function(e,t){var n,i,r;for(r=0;e.items.length>r;r++)if(n=e.items[r],i=ti.misceval.richCompareBool(n.lhs,t,"Eq"))return n;return null},ti.builtin.dict.prototype.key$pop=function(e,t){var n,i,r;for(r=0;e.items.length>r;r++)if(n=e.items[r],i=ti.misceval.richCompareBool(n.lhs,t,"Eq"))return e.items.splice(r,1),this.size-=1,n},ti.builtin.dict.prototype.mp$lookup=function(e){var t=this[ii(e)];return void 0!==t&&(e=this.key$lookup(t,e))?e.rhs:void 0},ti.builtin.dict.prototype.mp$subscript=function(e){var t=this.mp$lookup(e);if(void 0!==t)return t;throw e=new ti.builtin.str(e),new ti.builtin.KeyError(e.v)},ti.builtin.dict.prototype.sq$contains=function(e){return void 0!==this.mp$lookup(e)},ti.builtin.dict.prototype.mp$ass_subscript=function(e,t){var n=ii(e),i=this[n];void 0===i?(i={$hash:n,items:[{lhs:e,rhs:t}]},this[n]=i,this.size+=1):(n=this.key$lookup(i,e))?n.rhs=t:(i.items.push({lhs:e,rhs:t}),this.size+=1)},ti.builtin.dict.prototype.mp$del_subscript=function(e){var t=this[ii(e)];if(void 0===t||(t=this.key$pop(t,e),void 0===t))throw e=new ti.builtin.str(e),new ti.builtin.KeyError(e.v)},ti.builtin.dict.prototype.tp$iter=function(){var e,t=[];for(e in this)if(this.hasOwnProperty(e)){var n=this[e];if(n&&void 0!==n.$hash)for(var i=0;n.items.length>i;i++)t.push(n.items[i].lhs)}var r={tp$iter:function(){return r},$obj:this,$index:0,$keys:t,tp$iternext:function(){return r.$index>=r.$keys.length?void 0:r.$keys[r.$index++]}};return r},ti.builtin.dict.prototype.$r=function(){for(var e=[],t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext()){var i=this.mp$subscript(n);void 0===i&&(i=null),e.push(ti.misceval.objectRepr(n).v+": "+ti.misceval.objectRepr(i).v)}return new ti.builtin.str("{"+e.join(", ")+"}")},ti.builtin.dict.prototype.mp$length=function(){return this.size},ti.builtin.dict.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.dict.prototype.tp$hash=ti.builtin.object.prototype.HashNotImplemented,ti.builtin.dict.prototype.tp$richcompare=function(e,t){if(this===e&&ti.misceval.opAllowsEquality(t))return!0;switch(t){case"Lt":return;case"LtE":return;case"Eq":break;case"NotEq":break;case"Gt":return;case"GtE":return;default:ei.asserts.fail()}if(!(e instanceof ti.builtin.dict)||this.size!==e.size)return"Eq"===t?!1:!0;for(var n=this.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=this.mp$subscript(i),i=e.mp$subscript(i);if(!ti.misceval.richCompareBool(r,i,"Eq"))return"Eq"===t?!1:!0}return"Eq"===t?!0:!1},ti.builtin.dict.prototype.get=new ti.builtin.func(function(e,t,n){return void 0===n&&(n=null),e=e.mp$lookup(t),void 0===e&&(e=n),e}),ti.builtin.dict.prototype.has_key=new ti.builtin.func(function(e,t){return e.sq$contains(t)}),ti.builtin.dict.prototype.items=new ti.builtin.func(function(e){for(var t=[],n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=e.mp$subscript(i);void 0===r&&(r=null),t.push(new ti.builtin.tuple([i,r]))}return new ti.builtin.list(t)}),ti.builtin.dict.prototype.keys=new ti.builtin.func(function(e){var t=[];e=e.tp$iter();for(var n=e.tp$iternext();void 0!==n;n=e.tp$iternext())t.push(n);return new ti.builtin.list(t)}),ti.builtin.dict.prototype.values=new ti.builtin.func(function(e){for(var t=[],n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())i=e.mp$subscript(i),void 0===i&&(i=null),t.push(i);return new ti.builtin.list(t)}),ei.exportSymbol("Sk.builtin.dict",ti.builtin.dict),ti.builtin.biginteger=function(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))},ti.builtin.biginteger.canary=0xdeadbeefcafe,ti.builtin.biginteger.j_lm=15715070==(16777215&ti.builtin.biginteger.canary),ti.builtin.biginteger.nbi=function(){return new ti.builtin.biginteger(null)},ti.builtin.biginteger.prototype.am1=function(e,t,n,i,r,s){for(;--s>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r},ti.builtin.biginteger.prototype.am2=function(e,t,n,i,r,s){var a=32767&t;for(t>>=15;--s>=0;){var o=32767&this[e],l=this[e++]>>15,u=t*o+l*a,o=a*o+((32767&u)<<15)+n[i]+(1073741823&r);r=(o>>>30)+(u>>>15)+t*l+(r>>>30),n[i++]=1073741823&o}return r},ti.builtin.biginteger.prototype.am3=function(e,t,n,i,r,s){var a=16383&t;for(t>>=14;--s>=0;){var o=16383&this[e],l=this[e++]>>14,u=t*o+l*a,o=a*o+((16383&u)<<14)+n[i]+r;r=(o>>28)+(u>>14)+t*l,n[i++]=268435455&o}return r},ti.builtin.biginteger.prototype.am=ti.builtin.biginteger.prototype.am3,ti.builtin.biginteger.dbits=28,ti.builtin.biginteger.prototype.DB=ti.builtin.biginteger.dbits,ti.builtin.biginteger.prototype.DM=(1<<ti.builtin.biginteger.dbits)-1,ti.builtin.biginteger.prototype.DV=1<<ti.builtin.biginteger.dbits,ti.builtin.biginteger.BI_FP=52,ti.builtin.biginteger.prototype.FV=Math.pow(2,ti.builtin.biginteger.BI_FP),ti.builtin.biginteger.prototype.F1=ti.builtin.biginteger.BI_FP-ti.builtin.biginteger.dbits,ti.builtin.biginteger.prototype.F2=2*ti.builtin.biginteger.dbits-ti.builtin.biginteger.BI_FP,ti.builtin.biginteger.BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",ti.builtin.biginteger.BI_RC=[];var ri,si;for(ri=48,si=0;9>=si;++si)ti.builtin.biginteger.BI_RC[ri++]=si;for(ri=97,si=10;36>si;++si)ti.builtin.biginteger.BI_RC[ri++]=si;for(ri=65,si=10;36>si;++si)ti.builtin.biginteger.BI_RC[ri++]=si;ti.builtin.biginteger.int2char=function(e){return ti.builtin.biginteger.BI_RM.charAt(e)},ti.builtin.biginteger.intAt=function(e,t){var n=ti.builtin.biginteger.BI_RC[e.charCodeAt(t)];return null==n?-1:n},ti.builtin.biginteger.prototype.bnpCopyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},ti.builtin.biginteger.prototype.bnpFromInt=function(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+this.DV:this.t=0},ti.builtin.biginteger.nbv=function(e){var t=new ti.builtin.biginteger(null);return t.bnpFromInt(e),t},ti.builtin.biginteger.prototype.bnpFromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.fromRadix(e,t),void 0;n=2}this.s=this.t=0;for(var i=e.length,r=!1,s=0;--i>=0;){var a=8==n?255&e[i]:ti.builtin.biginteger.intAt(e,i);0>a?"-"==e.charAt(i)&&(r=!0):(r=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&ti.builtin.biginteger.ZERO.subTo(this,this)},ti.builtin.biginteger.prototype.bnpClamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},ti.builtin.biginteger.prototype.bnToString=function(e){if(0>this.s)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else{if(4!=e)return this.toRadix(e);e=2}var t,n=(1<<e)-1,i=!1,r="",s=this.t,a=this.DB-s*this.DB%e;if(s-->0)for(this.DB>a&&(t=this[s]>>a)>0&&(i=!0,r=ti.builtin.biginteger.int2char(t));s>=0;)e>a?(t=(this[s]&(1<<a)-1)<<e-a,t|=this[--s]>>(a+=this.DB-e)):(t=this[s]>>(a-=e)&n,0>=a&&(a+=this.DB,--s)),t>0&&(i=!0),i&&(r+=ti.builtin.biginteger.int2char(t));return i?r:"0"},ti.builtin.biginteger.prototype.bnNegate=function(){var e=ti.builtin.biginteger.nbi();return ti.builtin.biginteger.ZERO.subTo(this,e),e},ti.builtin.biginteger.prototype.bnAbs=function(){return 0>this.s?this.negate():this},ti.builtin.biginteger.prototype.bnCompareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t,t=n-e.t;if(0!=t)return 0>this.s?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},ti.builtin.biginteger.nbits=function(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=e>>1&&(n+=1),n},ti.builtin.biginteger.prototype.bnBitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+ti.builtin.biginteger.nbits(this[this.t-1]^this.s&this.DM)},ti.builtin.biginteger.prototype.bnpDLShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},ti.builtin.biginteger.prototype.bnpDRShiftTo=function(e,t){for(var n=e;this.t>n;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},ti.builtin.biginteger.prototype.bnpLShiftTo=function(e,t){var n,i=e%this.DB,r=this.DB-i,s=(1<<r)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|o,o=(this[n]&s)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},ti.builtin.biginteger.prototype.bnpRShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);
if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,s=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;this.t>a;++a)t[a-n-1]|=(this[a]&s)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&s)<<r),t.t=this.t-n,t.clamp()}},ti.builtin.biginteger.prototype.bnpSubTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;this.t>n;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e.t>n;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},ti.builtin.biginteger.prototype.bnpMultiplyTo=function(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;i.t>r;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&ti.builtin.biginteger.ZERO.subTo(t,t)},ti.builtin.biginteger.prototype.bnpSquareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;t.t-1>n;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},ti.builtin.biginteger.prototype.bnpDivRemTo=function(e,t,n){var i=e.abs();if(!(0>=i.t)){var r=this.abs();if(r.t<i.t)null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=ti.builtin.biginteger.nbi());var s=ti.builtin.biginteger.nbi(),a=this.s;e=e.s;var o=this.DB-ti.builtin.biginteger.nbits(i[i.t-1]);if(o>0?(i.lShiftTo(o,s),r.lShiftTo(o,n)):(i.copyTo(s),r.copyTo(n)),i=s.t,r=s[i-1],0!=r){var l=r*(1<<this.F1)+(i>1?s[i-2]>>this.F2:0),u=this.FV/l,l=(1<<this.F1)/l,c=1<<this.F2,f=n.t,h=f-i,p=null==t?ti.builtin.biginteger.nbi():t;for(s.dlShiftTo(h,p),n.compareTo(p)>=0&&(n[n.t++]=1,n.subTo(p,n)),ti.builtin.biginteger.ONE.dlShiftTo(i,p),p.subTo(s,s);i>s.t;)s[s.t++]=0;for(;--h>=0;){var d=n[--f]==r?this.DM:Math.floor(n[f]*u+(n[f-1]+c)*l);if(d>(n[f]+=s.am(0,d,n,h,0,i)))for(s.dlShiftTo(h,p),n.subTo(p,n);n[f]<--d;)n.subTo(p,n)}null!=t&&(n.drShiftTo(i,t),a!=e&&ti.builtin.biginteger.ZERO.subTo(t,t)),n.t=i,n.clamp(),o>0&&n.rShiftTo(o,n),0>a&&ti.builtin.biginteger.ZERO.subTo(n,n)}}}},ti.builtin.biginteger.prototype.bnMod=function(e){var t=ti.builtin.biginteger.nbi();return this.abs().divRemTo(e,null,t),0>this.s&&t.compareTo(ti.builtin.biginteger.ZERO)>0&&e.subTo(t,t),t},ti.builtin.biginteger.Classic=function(e){this.m=e},ti.builtin.biginteger.prototype.cConvert=function(e){return 0>e.s||e.compareTo(this.m)>=0?e.mod(this.m):e},ti.builtin.biginteger.prototype.cRevert=function(e){return e},ti.builtin.biginteger.prototype.cReduce=function(e){e.divRemTo(this.m,null,e)},ti.builtin.biginteger.prototype.cMulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},ti.builtin.biginteger.prototype.cSqrTo=function(e,t){e.squareTo(t),this.reduce(t)},ti.builtin.biginteger.Classic.prototype.convert=ti.builtin.biginteger.prototype.cConvert,ti.builtin.biginteger.Classic.prototype.revert=ti.builtin.biginteger.prototype.cRevert,ti.builtin.biginteger.Classic.prototype.reduce=ti.builtin.biginteger.prototype.cReduce,ti.builtin.biginteger.Classic.prototype.mulTo=ti.builtin.biginteger.prototype.cMulTo,ti.builtin.biginteger.Classic.prototype.sqrTo=ti.builtin.biginteger.prototype.cSqrTo,ti.builtin.biginteger.prototype.bnpInvDigit=function(){if(1>this.t)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e,t=15&t*(2-(15&e)*t),t=255&t*(2-(255&e)*t),t=65535&t*(2-(65535&(65535&e)*t)),t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t},ti.builtin.biginteger.Montgomery=function(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t},ti.builtin.biginteger.prototype.montConvert=function(e){var t=ti.builtin.biginteger.nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),0>e.s&&t.compareTo(ti.builtin.biginteger.ZERO)>0&&this.m.subTo(t,t),t},ti.builtin.biginteger.prototype.montRevert=function(e){var t=ti.builtin.biginteger.nbi();return e.copyTo(t),this.reduce(t),t},ti.builtin.biginteger.prototype.montReduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;this.m.t>t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM,n=t+this.m.t;for(e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},ti.builtin.biginteger.prototype.montSqrTo=function(e,t){e.squareTo(t),this.reduce(t)},ti.builtin.biginteger.prototype.montMulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},ti.builtin.biginteger.Montgomery.prototype.convert=ti.builtin.biginteger.prototype.montConvert,ti.builtin.biginteger.Montgomery.prototype.revert=ti.builtin.biginteger.prototype.montRevert,ti.builtin.biginteger.Montgomery.prototype.reduce=ti.builtin.biginteger.prototype.montReduce,ti.builtin.biginteger.Montgomery.prototype.mulTo=ti.builtin.biginteger.prototype.montMulTo,ti.builtin.biginteger.Montgomery.prototype.sqrTo=ti.builtin.biginteger.prototype.montSqrTo,ti.builtin.biginteger.prototype.bnpIsEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ti.builtin.biginteger.prototype.bnpExp=function(e,t){if(e>4294967295||1>e)return ti.builtin.biginteger.ONE;var n=ti.builtin.biginteger.nbi(),i=ti.builtin.biginteger.nbi(),r=t.convert(this),s=ti.builtin.biginteger.nbits(e)-1;for(r.copyTo(n);--s>=0;)if(t.sqrTo(n,i),(e&1<<s)>0)t.mulTo(i,r,n);else var a=n,n=i,i=a;return t.revert(n)},ti.builtin.biginteger.prototype.bnModPowInt=function(e,t){var n;return n=256>e||t.isEven()?new ti.builtin.biginteger.Classic(t):new ti.builtin.biginteger.Montgomery(t),this.exp(e,n)},ti.builtin.biginteger.prototype.copyTo=ti.builtin.biginteger.prototype.bnpCopyTo,ti.builtin.biginteger.prototype.fromInt=ti.builtin.biginteger.prototype.bnpFromInt,ti.builtin.biginteger.prototype.fromString=ti.builtin.biginteger.prototype.bnpFromString,ti.builtin.biginteger.prototype.clamp=ti.builtin.biginteger.prototype.bnpClamp,ti.builtin.biginteger.prototype.dlShiftTo=ti.builtin.biginteger.prototype.bnpDLShiftTo,ti.builtin.biginteger.prototype.drShiftTo=ti.builtin.biginteger.prototype.bnpDRShiftTo,ti.builtin.biginteger.prototype.lShiftTo=ti.builtin.biginteger.prototype.bnpLShiftTo,ti.builtin.biginteger.prototype.rShiftTo=ti.builtin.biginteger.prototype.bnpRShiftTo,ti.builtin.biginteger.prototype.subTo=ti.builtin.biginteger.prototype.bnpSubTo,ti.builtin.biginteger.prototype.multiplyTo=ti.builtin.biginteger.prototype.bnpMultiplyTo,ti.builtin.biginteger.prototype.squareTo=ti.builtin.biginteger.prototype.bnpSquareTo,ti.builtin.biginteger.prototype.divRemTo=ti.builtin.biginteger.prototype.bnpDivRemTo,ti.builtin.biginteger.prototype.invDigit=ti.builtin.biginteger.prototype.bnpInvDigit,ti.builtin.biginteger.prototype.isEven=ti.builtin.biginteger.prototype.bnpIsEven,ti.builtin.biginteger.prototype.exp=ti.builtin.biginteger.prototype.bnpExp,ti.builtin.biginteger.prototype.toString=ti.builtin.biginteger.prototype.bnToString,ti.builtin.biginteger.prototype.negate=ti.builtin.biginteger.prototype.bnNegate,ti.builtin.biginteger.prototype.abs=ti.builtin.biginteger.prototype.bnAbs,ti.builtin.biginteger.prototype.compareTo=ti.builtin.biginteger.prototype.bnCompareTo,ti.builtin.biginteger.prototype.bitLength=ti.builtin.biginteger.prototype.bnBitLength,ti.builtin.biginteger.prototype.mod=ti.builtin.biginteger.prototype.bnMod,ti.builtin.biginteger.prototype.modPowInt=ti.builtin.biginteger.prototype.bnModPowInt,ti.builtin.biginteger.ZERO=ti.builtin.biginteger.nbv(0),ti.builtin.biginteger.ONE=ti.builtin.biginteger.nbv(1),ti.builtin.biginteger.prototype.bnClone=function(){var e=ti.builtin.biginteger.nbi();return this.copyTo(e),e},ti.builtin.biginteger.prototype.bnIntValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ti.builtin.biginteger.prototype.bnByteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ti.builtin.biginteger.prototype.bnShortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ti.builtin.biginteger.prototype.bnpChunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},ti.builtin.biginteger.prototype.bnSigNum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},ti.builtin.biginteger.prototype.bnpToRadix=function(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),t=Math.pow(e,t),n=ti.builtin.biginteger.nbv(t),i=ti.builtin.biginteger.nbi(),r=ti.builtin.biginteger.nbi(),s="";for(this.divRemTo(n,i,r);i.signum()>0;)s=(t+r.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,r);return r.intValue().toString(e)+s},ti.builtin.biginteger.prototype.bnpFromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),r=!1,s=0,a=0,o=0;e.length>o;++o){var l=ti.builtin.biginteger.intAt(e,o);if(0>l){if("-"==e.charAt(o)&&0==this.signum()&&(r=!0),"."==e.charAt(o))break}else a=t*a+l,++s>=n&&(this.dMultiply(i),this.dAddOffset(a,0),a=s=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),r&&ti.builtin.biginteger.ZERO.subTo(this,this)},ti.builtin.biginteger.prototype.bnpFromNumber=function(e,t,n){if("number"==typeof t)if(2>e)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(ti.builtin.biginteger.ONE.shiftLeft(e-1),ti.builtin.biginteger.op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ti.builtin.biginteger.ONE.shiftLeft(e-1),this);this.fromString(e+"")},ti.builtin.biginteger.prototype.bnToByteArray=function(){var e=this.t,t=[];t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-->0)for(this.DB>i&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=255&this[e]>>(i-=8),0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t},ti.builtin.biginteger.prototype.bnEquals=function(e){return 0==this.compareTo(e)},ti.builtin.biginteger.prototype.bnMin=function(e){return 0>this.compareTo(e)?this:e},ti.builtin.biginteger.prototype.bnMax=function(e){return this.compareTo(e)>0?this:e},ti.builtin.biginteger.prototype.bnpBitwiseTo=function(e,t,n){var i,r,s=Math.min(e.t,this.t);for(i=0;s>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=s;this.t>i;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=s;e.t>i;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},ti.builtin.biginteger.op_and=function(e,t){return e&t},ti.builtin.biginteger.prototype.bnAnd=function(e){var t=ti.builtin.biginteger.nbi();return this.bitwiseTo(e,ti.builtin.biginteger.op_and,t),t},ti.builtin.biginteger.op_or=function(e,t){return e|t},ti.builtin.biginteger.prototype.bnOr=function(e){var t=ti.builtin.biginteger.nbi();return this.bitwiseTo(e,ti.builtin.biginteger.op_or,t),t},ti.builtin.biginteger.op_xor=function(e,t){return e^t},ti.builtin.biginteger.prototype.bnXor=function(e){var t=ti.builtin.biginteger.nbi();return this.bitwiseTo(e,ti.builtin.biginteger.op_xor,t),t},ti.builtin.biginteger.op_andnot=function(e,t){return e&~t},ti.builtin.biginteger.prototype.bnAndNot=function(e){var t=ti.builtin.biginteger.nbi();return this.bitwiseTo(e,ti.builtin.biginteger.op_andnot,t),t},ti.builtin.biginteger.prototype.bnNot=function(){for(var e=ti.builtin.biginteger.nbi(),t=0;this.t>t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},ti.builtin.biginteger.prototype.bnShiftLeft=function(e){var t=ti.builtin.biginteger.nbi();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},ti.builtin.biginteger.prototype.bnShiftRight=function(e){var t=ti.builtin.biginteger.nbi();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},ti.builtin.biginteger.lbit=function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t},ti.builtin.biginteger.prototype.bnGetLowestSetBit=function(){for(var e=0;this.t>e;++e)if(0!=this[e])return e*this.DB+ti.builtin.biginteger.lbit(this[e]);return 0>this.s?this.t*this.DB:-1},ti.builtin.biginteger.cbit=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t},ti.builtin.biginteger.prototype.bnBitCount=function(){for(var e=0,t=this.s&this.DM,n=0;this.t>n;++n)e+=ti.builtin.biginteger.cbit(this[n]^t);return e},ti.builtin.biginteger.prototype.bnTestBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},ti.builtin.biginteger.prototype.bnpChangeBit=function(e,t){var n=ti.builtin.biginteger.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},ti.builtin.biginteger.prototype.bnSetBit=function(e){return this.changeBit(e,ti.builtin.biginteger.op_or)},ti.builtin.biginteger.prototype.bnClearBit=function(e){return this.changeBit(e,ti.builtin.biginteger.op_andnot)},ti.builtin.biginteger.prototype.bnFlipBit=function(e){return this.changeBit(e,ti.builtin.biginteger.op_xor)},ti.builtin.biginteger.prototype.bnpAddTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;this.t>n;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e.t>n;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()},ti.builtin.biginteger.prototype.bnAdd=function(e){var t=ti.builtin.biginteger.nbi();return this.addTo(e,t),t},ti.builtin.biginteger.prototype.bnSubtract=function(e){var t=ti.builtin.biginteger.nbi();return this.subTo(e,t),t},ti.builtin.biginteger.prototype.bnMultiply=function(e){var t=ti.builtin.biginteger.nbi();return this.multiplyTo(e,t),t},ti.builtin.biginteger.prototype.bnDivide=function(e){var t=ti.builtin.biginteger.nbi();return this.divRemTo(e,t,null),t},ti.builtin.biginteger.prototype.bnRemainder=function(e){var t=ti.builtin.biginteger.nbi();return this.divRemTo(e,null,t),t},ti.builtin.biginteger.prototype.bnDivideAndRemainder=function(e){var t=ti.builtin.biginteger.nbi(),n=ti.builtin.biginteger.nbi();return this.divRemTo(e,t,n),[t,n]},ti.builtin.biginteger.prototype.bnpDMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},ti.builtin.biginteger.prototype.bnpDAddOffset=function(e,t){if(0!=e){for(;t>=this.t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},ti.builtin.biginteger.NullExp=function(){},ti.builtin.biginteger.prototype.nNop=function(e){return e},ti.builtin.biginteger.prototype.nMulTo=function(e,t,n){e.multiplyTo(t,n)},ti.builtin.biginteger.prototype.nSqrTo=function(e,t){e.squareTo(t)},ti.builtin.biginteger.NullExp.prototype.convert=ti.builtin.biginteger.prototype.nNop,ti.builtin.biginteger.NullExp.prototype.revert=ti.builtin.biginteger.prototype.nNop,ti.builtin.biginteger.NullExp.prototype.mulTo=ti.builtin.biginteger.prototype.nMulTo,ti.builtin.biginteger.NullExp.prototype.sqrTo=ti.builtin.biginteger.prototype.nSqrTo,ti.builtin.biginteger.prototype.bnPow=function(e){return this.exp(e,new ti.builtin.biginteger.NullExp)},ti.builtin.biginteger.prototype.bnpMultiplyLowerTo=function(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;r>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);r>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},ti.builtin.biginteger.prototype.bnpMultiplyUpperTo=function(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);e.t>i;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},ti.builtin.biginteger.Barrett=function(e){this.r2=ti.builtin.biginteger.nbi(),this.q3=ti.builtin.biginteger.nbi(),ti.builtin.biginteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e},ti.builtin.biginteger.prototype.barrettConvert=function(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=ti.builtin.biginteger.nbi();return e.copyTo(t),this.reduce(t),t},ti.builtin.biginteger.prototype.barrettRevert=function(e){return e},ti.builtin.biginteger.prototype.barrettReduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},ti.builtin.biginteger.prototype.barrettSqrTo=function(e,t){e.squareTo(t),this.reduce(t)},ti.builtin.biginteger.prototype.barrettMulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},ti.builtin.biginteger.Barrett.prototype.convert=ti.builtin.biginteger.prototype.barrettConvert,ti.builtin.biginteger.Barrett.prototype.revert=ti.builtin.biginteger.prototype.barrettRevert,ti.builtin.biginteger.Barrett.prototype.reduce=ti.builtin.biginteger.prototype.barrettReduce,ti.builtin.biginteger.Barrett.prototype.mulTo=ti.builtin.biginteger.prototype.barrettMulTo,ti.builtin.biginteger.Barrett.prototype.sqrTo=ti.builtin.biginteger.prototype.barrettSqrTo,ti.builtin.biginteger.prototype.bnModPow=function(e,t){var n,i,r=e.bitLength(),s=ti.builtin.biginteger.nbv(1);if(0>=r)return s;n=18>r?1:48>r?3:144>r?4:768>r?5:6,i=8>r?new ti.builtin.biginteger.Classic(t):t.isEven()?new ti.builtin.biginteger.Barrett(t):new ti.builtin.biginteger.Montgomery(t);var a=[],o=3,l=n-1,u=(1<<n)-1;if(a[1]=i.convert(this),n>1)for(r=ti.builtin.biginteger.nbi(),i.sqrTo(a[1],r);u>=o;)a[o]=ti.builtin.biginteger.nbi(),i.mulTo(r,a[o-2],a[o]),o+=2;for(var c,f=e.t-1,h=!0,p=ti.builtin.biginteger.nbi(),r=ti.builtin.biginteger.nbits(e[f])-1;f>=0;){for(r>=l?c=e[f]>>r-l&u:(c=(e[f]&(1<<r+1)-1)<<l-r,f>0&&(c|=e[f-1]>>this.DB+r-l)),o=n;0==(1&c);)c>>=1,--o;if(0>(r-=o)&&(r+=this.DB,--f),h)a[c].copyTo(s),h=!1;else{for(;o>1;)i.sqrTo(s,p),i.sqrTo(p,s),o-=2;o>0?i.sqrTo(s,p):(o=s,s=p,p=o),i.mulTo(p,a[c],s)}for(;f>=0&&0==(e[f]&1<<r);)i.sqrTo(s,p),o=s,s=p,p=o,0>--r&&(r=this.DB-1,--f)}return i.revert(s)},ti.builtin.biginteger.prototype.bnGCD=function(e){var t=0>this.s?this.negate():this.clone();if(e=0>e.s?e.negate():e.clone(),0>t.compareTo(e)){var n=t,t=e;e=n}var n=t.getLowestSetBit(),i=e.getLowestSetBit();if(0>i)return t;for(i>n&&(i=n),i>0&&(t.rShiftTo(i,t),e.rShiftTo(i,e));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return i>0&&e.lShiftTo(i,e),e},ti.builtin.biginteger.prototype.bnpModInt=function(e){if(0>=e)return 0;var t=this.DV%e,n=0>this.s?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n},ti.builtin.biginteger.prototype.bnModInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return ti.builtin.biginteger.ZERO;for(var n=e.clone(),i=this.clone(),r=ti.builtin.biginteger.nbv(1),s=ti.builtin.biginteger.nbv(0),a=ti.builtin.biginteger.nbv(0),o=ti.builtin.biginteger.nbv(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(e,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(i)>=0?(n.subTo(i,n),t&&r.subTo(a,r),s.subTo(o,s)):(i.subTo(n,i),t&&a.subTo(r,a),o.subTo(s,o))}return 0!=i.compareTo(ti.builtin.biginteger.ONE)?ti.builtin.biginteger.ZERO:o.compareTo(e)>=0?o.subtract(e):0>o.signum()?(o.addTo(e,o),0>o.signum()?o.add(e):o):o},ti.builtin.biginteger.lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ti.builtin.biginteger.lplim=67108864/ti.builtin.biginteger.lowprimes[ti.builtin.biginteger.lowprimes.length-1],ti.builtin.biginteger.prototype.bnIsProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=ti.builtin.biginteger.lowprimes[ti.builtin.biginteger.lowprimes.length-1]){for(t=0;ti.builtin.biginteger.lowprimes.length>t;++t)if(n[0]==ti.builtin.biginteger.lowprimes[t])return!0;return!1}if(n.isEven())return!1;for(t=1;ti.builtin.biginteger.lowprimes.length>t;){for(var i=ti.builtin.biginteger.lowprimes[t],r=t+1;ti.builtin.biginteger.lowprimes.length>r&&ti.builtin.biginteger.lplim>i;)i*=ti.builtin.biginteger.lowprimes[r++];for(i=n.modInt(i);r>t;)if(0==i%ti.builtin.biginteger.lowprimes[t++])return!1}return n.millerRabin(e)},ti.builtin.biginteger.prototype.bnpMillerRabin=function(e){var t=this.subtract(ti.builtin.biginteger.ONE),n=t.getLowestSetBit();if(0>=n)return!1;var i=t.shiftRight(n);e=e+1>>1,e>ti.builtin.biginteger.lowprimes.length&&(e=ti.builtin.biginteger.lowprimes.length);for(var r=ti.builtin.biginteger.nbi(),s=0;e>s;++s){r.fromInt(ti.builtin.biginteger.lowprimes[s]);var a=r.modPow(i,this);if(0!=a.compareTo(ti.builtin.biginteger.ONE)&&0!=a.compareTo(t)){for(var o=1;n>o++&&0!=a.compareTo(t);)if(a=a.modPowInt(2,this),0==a.compareTo(ti.builtin.biginteger.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},ti.builtin.biginteger.prototype.isnegative=function(){return 0>this.s},ti.builtin.biginteger.prototype.ispositive=function(){return this.s>=0},ti.builtin.biginteger.prototype.trueCompare=function(e){return this.s>=0&&0>e.s?1:0>this.s&&e.s>=0?-1:this.compare(e)},ti.builtin.biginteger.prototype.chunkSize=ti.builtin.biginteger.prototype.bnpChunkSize,ti.builtin.biginteger.prototype.toRadix=ti.builtin.biginteger.prototype.bnpToRadix,ti.builtin.biginteger.prototype.fromRadix=ti.builtin.biginteger.prototype.bnpFromRadix,ti.builtin.biginteger.prototype.fromNumber=ti.builtin.biginteger.prototype.bnpFromNumber,ti.builtin.biginteger.prototype.bitwiseTo=ti.builtin.biginteger.prototype.bnpBitwiseTo,ti.builtin.biginteger.prototype.changeBit=ti.builtin.biginteger.prototype.bnpChangeBit,ti.builtin.biginteger.prototype.addTo=ti.builtin.biginteger.prototype.bnpAddTo,ti.builtin.biginteger.prototype.dMultiply=ti.builtin.biginteger.prototype.bnpDMultiply,ti.builtin.biginteger.prototype.dAddOffset=ti.builtin.biginteger.prototype.bnpDAddOffset,ti.builtin.biginteger.prototype.multiplyLowerTo=ti.builtin.biginteger.prototype.bnpMultiplyLowerTo,ti.builtin.biginteger.prototype.multiplyUpperTo=ti.builtin.biginteger.prototype.bnpMultiplyUpperTo,ti.builtin.biginteger.prototype.modInt=ti.builtin.biginteger.prototype.bnpModInt,ti.builtin.biginteger.prototype.millerRabin=ti.builtin.biginteger.prototype.bnpMillerRabin,ti.builtin.biginteger.prototype.clone=ti.builtin.biginteger.prototype.bnClone,ti.builtin.biginteger.prototype.intValue=ti.builtin.biginteger.prototype.bnIntValue,ti.builtin.biginteger.prototype.byteValue=ti.builtin.biginteger.prototype.bnByteValue,ti.builtin.biginteger.prototype.shortValue=ti.builtin.biginteger.prototype.bnShortValue,ti.builtin.biginteger.prototype.signum=ti.builtin.biginteger.prototype.bnSigNum,ti.builtin.biginteger.prototype.toByteArray=ti.builtin.biginteger.prototype.bnToByteArray,ti.builtin.biginteger.prototype.equals=ti.builtin.biginteger.prototype.bnEquals,ti.builtin.biginteger.prototype.compare=ti.builtin.biginteger.prototype.compareTo,ti.builtin.biginteger.prototype.min=ti.builtin.biginteger.prototype.bnMin,ti.builtin.biginteger.prototype.max=ti.builtin.biginteger.prototype.bnMax,ti.builtin.biginteger.prototype.and=ti.builtin.biginteger.prototype.bnAnd,ti.builtin.biginteger.prototype.or=ti.builtin.biginteger.prototype.bnOr,ti.builtin.biginteger.prototype.xor=ti.builtin.biginteger.prototype.bnXor,ti.builtin.biginteger.prototype.andNot=ti.builtin.biginteger.prototype.bnAndNot,ti.builtin.biginteger.prototype.not=ti.builtin.biginteger.prototype.bnNot,ti.builtin.biginteger.prototype.shiftLeft=ti.builtin.biginteger.prototype.bnShiftLeft,ti.builtin.biginteger.prototype.shiftRight=ti.builtin.biginteger.prototype.bnShiftRight,ti.builtin.biginteger.prototype.getLowestSetBit=ti.builtin.biginteger.prototype.bnGetLowestSetBit,ti.builtin.biginteger.prototype.bitCount=ti.builtin.biginteger.prototype.bnBitCount,ti.builtin.biginteger.prototype.testBit=ti.builtin.biginteger.prototype.bnTestBit,ti.builtin.biginteger.prototype.setBit=ti.builtin.biginteger.prototype.bnSetBit,ti.builtin.biginteger.prototype.clearBit=ti.builtin.biginteger.prototype.bnClearBit,ti.builtin.biginteger.prototype.flipBit=ti.builtin.biginteger.prototype.bnFlipBit,ti.builtin.biginteger.prototype.add=ti.builtin.biginteger.prototype.bnAdd,ti.builtin.biginteger.prototype.subtract=ti.builtin.biginteger.prototype.bnSubtract,ti.builtin.biginteger.prototype.multiply=ti.builtin.biginteger.prototype.bnMultiply,ti.builtin.biginteger.prototype.divide=ti.builtin.biginteger.prototype.bnDivide,ti.builtin.biginteger.prototype.remainder=ti.builtin.biginteger.prototype.bnRemainder,ti.builtin.biginteger.prototype.divideAndRemainder=ti.builtin.biginteger.prototype.bnDivideAndRemainder,ti.builtin.biginteger.prototype.modPow=ti.builtin.biginteger.prototype.bnModPow,ti.builtin.biginteger.prototype.modInverse=ti.builtin.biginteger.prototype.bnModInverse,ti.builtin.biginteger.prototype.pow=ti.builtin.biginteger.prototype.bnPow,ti.builtin.biginteger.prototype.gcd=ti.builtin.biginteger.prototype.bnGCD,ti.builtin.biginteger.prototype.isProbablePrime=ti.builtin.biginteger.prototype.bnIsProbablePrime,ti.builtin.nmber=function(e,t){if(!(this instanceof ti.builtin.nmber))return new ti.builtin.nmber(e,t);if(e instanceof ti.builtin.str&&(e=e.v),e instanceof ti.builtin.nmber)this.v=e.v,this.skType=e.skType;else if("number"==typeof e){if(this.v=e,void 0===t)this.skType=e>ti.builtin.nmber.threshold$||-ti.builtin.nmber.threshold$>e||0!=e%1?ti.builtin.nmber.float$:ti.builtin.nmber.int$;else if(this.skType=t,t===ti.builtin.nmber.int$&&(e>ti.builtin.nmber.threshold$||-ti.builtin.nmber.threshold$>e))return new ti.builtin.lng(e)}else{if("string"==typeof e){var n=ti.numberFromStr(e);return void 0!==t&&(n.skType=t),t===ti.builtin.nmber.int$&&(n.v>ti.builtin.nmber.threshold$||n.v<-ti.builtin.nmber.threshold$)?new ti.builtin.lng(e):n}if(e instanceof ti.builtin.lng)return ti.numberFromStr(e.str$(10,!0));if(e instanceof ti.builtin.biginteger){if(n=ti.numberFromStr(""+e),void 0!==t&&(n.skType=t),t===ti.builtin.nmber.int$&&(n.v>ti.builtin.nmber.threshold$||n.v<-ti.builtin.nmber.threshold$))return new ti.builtin.lng(e)}else this.v=0,this.skType=void 0===t?ti.builtin.nmber.int$:t}return this},ti.builtin.nmber.prototype.tp$index=function(){return this.v},ti.builtin.nmber.prototype.tp$hash=function(){return this.v},ti.builtin.nmber.prototype.tp$name="number",ti.builtin.nmber.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("number",ti.builtin.nmber),ti.builtin.nmber.threshold$=Math.pow(2,53),ti.builtin.nmber.float$="float",ti.builtin.nmber.int$="int",ti.builtin.nmber.fromInt$=function(e){return new ti.builtin.nmber(e,void 0)},ti.numberFromStr=function(e){if("inf"==e)return new ti.builtin.nmber(1/0,void 0);if("-inf"==e)return new ti.builtin.nmber(-1/0,void 0);var t=new ti.builtin.nmber(0,void 0);if(-1!==e.indexOf(".")||-1!==e.indexOf("e")||-1!==e.indexOf("E"))return t.v=parseFloat(e),t.skType=ti.builtin.nmber.float$,t;var n=e;return"-"===e.charAt(0)&&(n=e.substr(1)),e="0"!==n.charAt(0)||"x"!==n.charAt(1)&&"X"!==n.charAt(1)?"0"!==n.charAt(0)||"b"!==n.charAt(1)&&"B"!==n.charAt(1)?"0"===n.charAt(0)?parseInt(e,8):parseInt(e,10):parseInt(e,2):parseInt(e,16),t.v=e,t.skType=ti.builtin.nmber.int$,t},ei.exportSymbol("Sk.numberFromStr",ti.numberFromStr),ti.builtin.nmber.prototype.clone=function(){return new ti.builtin.nmber(this,void 0)},ti.builtin.nmber.prototype.toFixed=function(e){return e=ti.builtin.asnum$(e),this.v.toFixed(e)},ti.builtin.nmber.prototype.nb$add=function(e){var t;return"number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber?(t=new ti.builtin.nmber(this.v+e.v,void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$?t.skType=ti.builtin.nmber.float$:(t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$add(e.v))),t):e instanceof ti.builtin.lng?t=this.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(this.v+parseFloat(e.str$(10,!0)),ti.builtin.nmber.float$):new ti.builtin.lng(this.v).nb$add(e):void 0},ti.builtin.nmber.prototype.nb$subtract=function(e){var t;return"number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber?(t=new ti.builtin.nmber(this.v-e.v,void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$?t.skType=ti.builtin.nmber.float$:(t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$subtract(e.v))),t):e instanceof ti.builtin.lng?t=this.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(this.v-parseFloat(e.str$(10,!0)),ti.builtin.nmber.float$):new ti.builtin.lng(this.v).nb$subtract(e):void 0},ti.builtin.nmber.prototype.nb$multiply=function(e){var t;return"number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber?(t=new ti.builtin.nmber(this.v*e.v,void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$?t.skType=ti.builtin.nmber.float$:(t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$multiply(e.v))),t):e instanceof ti.builtin.lng?t=this.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(this.v*parseFloat(e.str$(10,!0)),ti.builtin.nmber.float$):new ti.builtin.lng(this.v).nb$multiply(e):void 0},ti.builtin.nmber.prototype.nb$divide=function(e){var t;if("number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber){if(0==e.v)throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===this.v?1/0===e.v||-1/0===e.v?new ti.builtin.nmber(0/0,ti.builtin.nmber.float$):e.nb$isnegative()?new ti.builtin.nmber(-1/0,ti.builtin.nmber.float$):new ti.builtin.nmber(1/0,ti.builtin.nmber.float$):-1/0===this.v?1/0===e.v||-1/0===e.v?new ti.builtin.nmber(0/0,ti.builtin.nmber.float$):e.nb$isnegative()?new ti.builtin.nmber(1/0,ti.builtin.nmber.float$):new ti.builtin.nmber(-1/0,ti.builtin.nmber.float$):(t=new ti.builtin.nmber(this.v/e.v,void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$||ti.python3?t.skType=ti.builtin.nmber.float$:(t.v=Math.floor(t.v),t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$divide(e.v))),t)}if(e instanceof ti.builtin.lng){if(0==e.longCompare(ti.builtin.biginteger.ZERO))throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===this.v?e.nb$isnegative()?new ti.builtin.nmber(-1/0,ti.builtin.nmber.float$):new ti.builtin.nmber(1/0,ti.builtin.nmber.float$):-1/0===this.v?e.nb$isnegative()?new ti.builtin.nmber(1/0,ti.builtin.nmber.float$):new ti.builtin.nmber(-1/0,ti.builtin.nmber.float$):t=this.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(this.v/parseFloat(e.str$(10,!0)),ti.builtin.nmber.float$):new ti.builtin.lng(this.v).nb$divide(e)}},ti.builtin.nmber.prototype.nb$floor_divide=function(e){var t;if("number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),1/0===this.v||-1/0===this.v)return new ti.builtin.nmber(0/0,ti.builtin.nmber.float$);if(e instanceof ti.builtin.nmber){if(0==e.v)throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===e.v?this.nb$isnegative()?new ti.builtin.nmber(-1,ti.builtin.nmber.float$):new ti.builtin.nmber(0,ti.builtin.nmber.float$):-1/0===e.v?this.nb$isnegative()||!this.nb$nonzero()?new ti.builtin.nmber(0,ti.builtin.nmber.float$):new ti.builtin.nmber(-1,ti.builtin.nmber.float$):(t=new ti.builtin.nmber(Math.floor(this.v/e.v),void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$?t.skType=ti.builtin.nmber.float$:(t.v=Math.floor(t.v),t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$floor_divide(e.v))),t)
}if(e instanceof ti.builtin.lng){if(0==e.longCompare(ti.builtin.biginteger.ZERO))throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return this.skType===ti.builtin.nmber.float$?(t=Math.floor(this.v/parseFloat(e.str$(10,!0))),t=new ti.builtin.nmber(t,ti.builtin.nmber.float$)):t=new ti.builtin.lng(this.v).nb$floor_divide(e),t}},ti.builtin.nmber.prototype.nb$remainder=function(e){var t;if("number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber){if(0==e.v)throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType==ti.builtin.nmber.float$||e.skType==ti.builtin.nmber.float$?new ti.builtin.nmber(0,ti.builtin.nmber.float$):new ti.builtin.nmber(0,ti.builtin.nmber.int$):1/0===e.v?1/0===this.v||-1/0===this.v?new ti.builtin.nmber(0/0,ti.builtin.nmber.float$):this.nb$ispositive()?new ti.builtin.nmber(this.v,ti.builtin.nmber.float$):new ti.builtin.nmber(1/0,ti.builtin.nmber.float$):(t=this.v%e.v,0>this.v?e.v>0&&0>t&&(t+=e.v):0>e.v&&0!=t&&(t+=e.v),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$?t=new ti.builtin.nmber(t,ti.builtin.nmber.float$):(t=new ti.builtin.nmber(t,ti.builtin.nmber.int$),(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$remainder(e.v))),t)}if(e instanceof ti.builtin.lng){if(0==e.longCompare(ti.builtin.biginteger.ZERO))throw new ti.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType===ti.builtin.nmber.int$?new ti.builtin.lng(0):new ti.builtin.nmber(0,this.skType):(this.skType===ti.builtin.nmber.float$?(e=parseFloat(e.str$(10,!0)),t=this.v%e,0>t?e>0&&0!=t&&(t+=e):0>e&&0!=t&&(t+=e),t=new ti.builtin.nmber(t,ti.builtin.nmber.float$)):t=new ti.builtin.lng(this.v).nb$remainder(e),t)}},ti.builtin.nmber.prototype.nb$power=function(e){var t;if("number"==typeof e&&(e=new ti.builtin.nmber(e,void 0)),e instanceof ti.builtin.nmber){if(0>this.v&&0!=e.v%1)throw new ti.builtin.NegativePowerError("cannot raise a negative number to a fractional power");if(0==this.v&&0>e.v)throw new ti.builtin.NegativePowerError("cannot raise zero to a negative power");if(t=new ti.builtin.nmber(Math.pow(this.v,e.v),void 0),this.skType===ti.builtin.nmber.float$||e.skType===ti.builtin.nmber.float$||0>e.v?t.skType=ti.builtin.nmber.float$:(t.v=Math.floor(t.v),t.skType=ti.builtin.nmber.int$,(t.v>ti.builtin.nmber.threshold$||t.v<-ti.builtin.nmber.threshold$)&&(t=new ti.builtin.lng(this.v).nb$power(e.v))),1/0===Math.abs(t.v)&&1/0!==Math.abs(this.v)&&1/0!==Math.abs(e.v))throw new ti.builtin.OverflowError("Numerical result out of range");return t}if(e instanceof ti.builtin.lng){if(0==this.v&&0>e.longCompare(ti.builtin.biginteger.ZERO))throw new ti.builtin.NegativePowerError("cannot raise zero to a negative power");return t=this.skType===ti.builtin.nmber.float$||e.nb$isnegative()?new ti.builtin.nmber(Math.pow(this.v,parseFloat(e.str$(10,!0))),ti.builtin.nmber.float$):new ti.builtin.lng(this.v).nb$power(e)}},ti.builtin.nmber.prototype.nb$and=function(e){return e=ti.builtin.asnum$(e),e&=this.v,void 0!==e&&0>e&&(e+=4294967296),void 0!==e?new ti.builtin.nmber(e,void 0):void 0},ti.builtin.nmber.prototype.nb$or=function(e){return e=ti.builtin.asnum$(e),e|=this.v,void 0!==e&&0>e&&(e+=4294967296),void 0!==e?new ti.builtin.nmber(e,void 0):void 0},ti.builtin.nmber.prototype.nb$xor=function(e){return e=ti.builtin.asnum$(e),e^=this.v,void 0!==e&&0>e&&(e+=4294967296),void 0!==e?new ti.builtin.nmber(e,void 0):void 0},ti.builtin.nmber.prototype.nb$lshift=function(e){var t;if(e=ti.builtin.asnum$(e),void 0!==e){if(0>e)throw new ti.builtin.ValueError("negative shift count");if(t=this.v<<e,this.v>=t)return ti.builtin.lng.fromInt$(this.v).nb$lshift(e)}return void 0!==t?new ti.builtin.nmber(t,this.skType):void 0},ti.builtin.nmber.prototype.nb$rshift=function(e){var t;if(e=ti.builtin.asnum$(e),void 0!==e){if(0>e)throw new ti.builtin.ValueError("negative shift count");t=this.v>>e,this.v>0&&0>t&&(t&=Math.pow(2,32-e)-1)}return void 0!==t?new ti.builtin.nmber(t,this.skType):void 0},ti.builtin.nmber.prototype.nb$inplace_add=ti.builtin.nmber.prototype.nb$add,ti.builtin.nmber.prototype.nb$inplace_subtract=ti.builtin.nmber.prototype.nb$subtract,ti.builtin.nmber.prototype.nb$inplace_multiply=ti.builtin.nmber.prototype.nb$multiply,ti.builtin.nmber.prototype.nb$inplace_divide=ti.builtin.nmber.prototype.nb$divide,ti.builtin.nmber.prototype.nb$inplace_remainder=ti.builtin.nmber.prototype.nb$remainder,ti.builtin.nmber.prototype.nb$inplace_floor_divide=ti.builtin.nmber.prototype.nb$floor_divide,ti.builtin.nmber.prototype.nb$inplace_power=ti.builtin.nmber.prototype.nb$power,ti.builtin.nmber.prototype.nb$inplace_and=ti.builtin.nmber.prototype.nb$and,ti.builtin.nmber.prototype.nb$inplace_or=ti.builtin.nmber.prototype.nb$or,ti.builtin.nmber.prototype.nb$inplace_xor=ti.builtin.nmber.prototype.nb$xor,ti.builtin.nmber.prototype.nb$inplace_lshift=ti.builtin.nmber.prototype.nb$lshift,ti.builtin.nmber.prototype.nb$inplace_rshift=ti.builtin.nmber.prototype.nb$rshift,ti.builtin.nmber.prototype.nb$negative=function(){return new ti.builtin.nmber(-this.v,void 0)},ti.builtin.nmber.prototype.nb$positive=function(){return this.clone()},ti.builtin.nmber.prototype.nb$nonzero=function(){return 0!==this.v},ti.builtin.nmber.prototype.nb$isnegative=function(){return 0>this.v},ti.builtin.nmber.prototype.nb$ispositive=function(){return this.v>=0},ti.builtin.nmber.prototype.numberCompare=function(e){if(e instanceof ti.builtin.bool&&(e=ti.builtin.asnum$(e)),e instanceof ti.builtin.none&&(e=0),"number"==typeof e)return this.v-e;if(e instanceof ti.builtin.nmber)return 1/0==this.v&&1/0==e.v||-1/0==this.v&&-1/0==e.v?0:this.v-e.v;if(e instanceof ti.builtin.lng){if(this.skType===ti.builtin.nmber.int$||0==this.v%1)return new ti.builtin.lng(this.v).longCompare(e);if(e=this.nb$subtract(e),e instanceof ti.builtin.nmber)return e.v;if(e instanceof ti.builtin.lng)return e.longCompare(ti.builtin.biginteger.ZERO)}},ti.builtin.nmber.prototype.__eq__=function(e,t){return 0==e.numberCompare(t)},ti.builtin.nmber.prototype.__ne__=function(e,t){return 0!=e.numberCompare(t)},ti.builtin.nmber.prototype.__lt__=function(e,t){return 0>e.numberCompare(t)},ti.builtin.nmber.prototype.__le__=function(e,t){return 0>=e.numberCompare(t)},ti.builtin.nmber.prototype.__gt__=function(e,t){return e.numberCompare(t)>0},ti.builtin.nmber.prototype.__ge__=function(e,t){return e.numberCompare(t)>=0},ti.builtin.nmber.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.nmber.prototype.$r=function(){return new ti.builtin.str(this.str$(10,!0))},ti.builtin.nmber.prototype.tp$str=function(){return new ti.builtin.str(this.str$(10,!0))},ti.builtin.nmber.prototype.str$=function(e,t){if(isNaN(this.v))return"nan";if(void 0===t&&(t=!0),1/0==this.v)return"inf";if(-1/0==this.v&&t)return"-inf";if(-1/0==this.v&&!t)return"inf";var n,i=t?this.v:Math.abs(this.v);if(void 0===e||10===e)if(this.skType==ti.builtin.nmber.float$){n=i.toPrecision(12);var r=n.indexOf("."),s=(""+i).slice(0,r),r=(""+i).slice(r);for(s.match(/^-?0$/)&&r.slice(1).match(/^0{4,}/)&&(n=12>n.length?i.toExponential():i.toExponential(11));"0"==n.charAt(n.length-1)&&0>n.indexOf("e");)n=n.substring(0,n.length-1);"."==n.charAt(n.length-1)&&(n+="0"),n=n.replace(/\.0+e/,"e","i"),n=n.replace(/(e[-+])([1-9])$/,"$10$2"),n=n.replace(/0+(e.*)/,"$1")}else n=""+i;else n=i.toString(e);return this.skType!==ti.builtin.nmber.float$?n:(0>n.indexOf(".")&&0>n.indexOf("E")&&0>n.indexOf("e")&&(n+=".0"),n)},ei.exportSymbol("Sk.builtin.nmber",ti.builtin.nmber),ti.builtin.lng=function(e,t){if(t=ti.builtin.asnum$(t),!(this instanceof ti.builtin.lng))return new ti.builtin.lng(e,t);if(void 0===e)this.biginteger=new ti.builtin.biginteger(0);else if(e instanceof ti.builtin.lng)this.biginteger=e.biginteger.clone();else if(e instanceof ti.builtin.biginteger)this.biginteger=e;else{if(e instanceof String)return ti.longFromStr(e,t);if(e instanceof ti.builtin.str)return ti.longFromStr(e.v,t);if(void 0!==e&&!ti.builtin.checkString(e)&&!ti.builtin.checkNumber(e))if(!0===e)e=1;else{if(!1!==e)throw new ti.builtin.TypeError("long() argument must be a string or a number, not '"+ti.abstr.typeName(e)+"'");e=0}e=ti.builtin.asnum$nofloat(e),this.biginteger=new ti.builtin.biginteger(e)}return this},ti.builtin.lng.prototype.tp$index=function(){return parseInt(this.str$(10,!0),10)},ti.builtin.lng.prototype.tp$hash=function(){return this.tp$index()},ti.builtin.lng.prototype.tp$name="long",ti.builtin.lng.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("long",ti.builtin.lng),ti.builtin.lng.threshold$=Math.pow(2,53),ti.builtin.lng.MAX_INT$=new ti.builtin.lng(ti.builtin.lng.threshold$),ti.builtin.lng.MIN_INT$=new ti.builtin.lng(-ti.builtin.lng.threshold$),ti.builtin.lng.prototype.cantBeInt=function(){return this.longCompare(ti.builtin.lng.MAX_INT$)>0||0>this.longCompare(ti.builtin.lng.MIN_INT$)},ti.builtin.lng.fromInt$=function(e){return new ti.builtin.lng(e)},ti.longFromStr=function(e,t){var n=ti.str2number(e,t,function(e,t){return 10==t?new ti.builtin.biginteger(e):new ti.builtin.biginteger(e,t)},function(e){return e.negate()},"long");return new ti.builtin.lng(n)},ei.exportSymbol("Sk.longFromStr",ti.longFromStr),ti.builtin.lng.prototype.toInt$=function(){return this.biginteger.intValue()},ti.builtin.lng.prototype.clone=function(){return new ti.builtin.lng(this)},ti.builtin.lng.prototype.nb$add=function(e){if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$)return new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$add(e);e=new ti.builtin.lng(e.v)}return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.add(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.add(e)):new ti.builtin.lng(this.biginteger.add(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_add=ti.builtin.lng.prototype.nb$add,ti.builtin.lng.prototype.nb$subtract=function(e){if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$)return new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$subtract(e);e=new ti.builtin.lng(e.v)}return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.subtract(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.subtract(e)):new ti.builtin.lng(this.biginteger.subtract(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_subtract=ti.builtin.lng.prototype.nb$subtract,ti.builtin.lng.prototype.nb$multiply=function(e){if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$)return new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$multiply(e);e=new ti.builtin.lng(e.v)}return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.multiply(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.multiply(e)):new ti.builtin.lng(this.biginteger.multiply(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_multiply=ti.builtin.lng.prototype.nb$multiply,ti.builtin.lng.prototype.nb$divide=function(e){if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$)return new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$divide(e);e=new ti.builtin.lng(e.v)}e instanceof ti.builtin.lng||(e=new ti.builtin.lng(e));var t=this.nb$isnegative(),n=e.nb$isnegative();return t&&!n||n&&!t?(e=this.biginteger.divideAndRemainder(e.biginteger),0==e[1].trueCompare(ti.builtin.biginteger.ZERO)?new ti.builtin.lng(e[0]):(e=e[0].subtract(ti.builtin.biginteger.ONE),new ti.builtin.lng(e))):new ti.builtin.lng(this.biginteger.divide(e.biginteger))},ti.builtin.lng.prototype.nb$inplace_divide=ti.builtin.lng.prototype.nb$divide,ti.builtin.lng.prototype.nb$floor_divide=function(e){return e instanceof ti.builtin.nmber&&e.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$floor_divide(e):this.nb$divide(e)},ti.builtin.lng.prototype.nb$inplace_floor_divide=ti.builtin.lng.prototype.nb$floor_divide,ti.builtin.lng.prototype.nb$remainder=function(e){if(0===this.biginteger.trueCompare(ti.builtin.biginteger.ZERO))return e instanceof ti.builtin.nmber&&e.skType===ti.builtin.nmber.float$?new ti.builtin.nmber(0,ti.builtin.nmber.float$):new ti.builtin.lng(0);if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$)return new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$).nb$remainder(e);e=new ti.builtin.lng(e.v)}e instanceof ti.builtin.lng||(e=new ti.builtin.lng(e));var t=new ti.builtin.lng(this.biginteger.remainder(e.biginteger));return this.nb$isnegative()?e.nb$ispositive()&&t.nb$nonzero()&&(t=t.nb$add(e).nb$remainder(e)):e.nb$isnegative()&&t.nb$nonzero()&&(t=t.nb$add(e)),t},ti.builtin.lng.prototype.nb$inplace_remainder=ti.builtin.lng.prototype.nb$remainder,ti.builtin.lng.prototype.nb$power=function(e,t){if(void 0!==t)return e=new ti.builtin.biginteger(ti.builtin.asnum$(e)),t=new ti.builtin.biginteger(ti.builtin.asnum$(t)),new ti.builtin.lng(this.biginteger.modPowInt(e,t));if("number"==typeof e){if(0>e){var n=new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$);return n.nb$power(e)}return new ti.builtin.lng(this.biginteger.pow(new ti.builtin.biginteger(e)))}if(e instanceof ti.builtin.nmber){if(e.skType===ti.builtin.nmber.float$||0>e.v)return n=new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$),n.nb$power(e);e=new ti.builtin.lng(e.v)}return e instanceof ti.builtin.lng?e.nb$isnegative()?(n=new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$),n.nb$power(e)):new ti.builtin.lng(this.biginteger.pow(e.biginteger)):e instanceof ti.builtin.biginteger?e.isnegative()?(n=new ti.builtin.nmber(this.str$(10,!0),ti.builtin.nmber.float$),n.nb$power(e)):new ti.builtin.lng(this.biginteger.pow(e)):new ti.builtin.lng(this.biginteger.pow(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_power=ti.builtin.lng.prototype.nb$power,ti.builtin.lng.prototype.nb$lshift=function(e){if(e instanceof ti.builtin.lng){if(0>e.biginteger.signum())throw new ti.builtin.ValueError("negative shift count");return new ti.builtin.lng(this.biginteger.shiftLeft(e.biginteger))}if(e instanceof ti.builtin.biginteger){if(0>e.signum())throw new ti.builtin.ValueError("negative shift count");return new ti.builtin.lng(this.biginteger.shiftLeft(e))}if(0>e)throw new ti.builtin.ValueError("negative shift count");return e=ti.builtin.asnum$(e),new ti.builtin.lng(this.biginteger.shiftLeft(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_lshift=ti.builtin.lng.prototype.nb$lshift,ti.builtin.lng.prototype.nb$rshift=function(e){if(e instanceof ti.builtin.lng){if(0>e.biginteger.signum())throw new ti.builtin.ValueError("negative shift count");return new ti.builtin.lng(this.biginteger.shiftRight(e.biginteger))}if(e instanceof ti.builtin.biginteger){if(0>e.signum())throw new ti.builtin.ValueError("negative shift count");return new ti.builtin.lng(this.biginteger.shiftRight(e))}if(0>e)throw new ti.builtin.ValueError("negative shift count");return e=ti.builtin.asnum$(e),new ti.builtin.lng(this.biginteger.shiftRight(new ti.builtin.biginteger(e)))},ti.builtin.lng.prototype.nb$inplace_rshift=ti.builtin.lng.prototype.nb$rshift,ti.builtin.lng.prototype.nb$and=function(e){return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.and(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.and(e)):(e=ti.builtin.asnum$(e),new ti.builtin.lng(this.biginteger.and(new ti.builtin.biginteger(e))))},ti.builtin.lng.prototype.nb$inplace_and=ti.builtin.lng.prototype.nb$and,ti.builtin.lng.prototype.nb$or=function(e){return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.or(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.or(e)):(e=ti.builtin.asnum$(e),new ti.builtin.lng(this.biginteger.or(new ti.builtin.biginteger(e))))},ti.builtin.lng.prototype.nb$inplace_or=ti.builtin.lng.prototype.nb$or,ti.builtin.lng.prototype.nb$xor=function(e){return e instanceof ti.builtin.lng?new ti.builtin.lng(this.biginteger.xor(e.biginteger)):e instanceof ti.builtin.biginteger?new ti.builtin.lng(this.biginteger.xor(e)):(e=ti.builtin.asnum$(e),new ti.builtin.lng(this.biginteger.xor(new ti.builtin.biginteger(e))))},ti.builtin.lng.prototype.nb$inplace_xor=ti.builtin.lng.prototype.nb$xor,ti.builtin.lng.prototype.nb$negative=function(){return new ti.builtin.lng(this.biginteger.negate())},ti.builtin.lng.prototype.nb$positive=function(){return this.clone()},ti.builtin.lng.prototype.nb$nonzero=function(){return 0!==this.biginteger.trueCompare(ti.builtin.biginteger.ZERO)},ti.builtin.lng.prototype.nb$isnegative=function(){return this.biginteger.isnegative()},ti.builtin.lng.prototype.nb$ispositive=function(){return!this.biginteger.isnegative()},ti.builtin.lng.prototype.nb$invert=function(){throw new ti.builtin.AssertionError},ti.builtin.lng.prototype.longCompare=function(e){return"boolean"==typeof e&&(e=e?1:0),"number"==typeof e&&(e=new ti.builtin.lng(e)),e instanceof ti.builtin.nmber?e.skType===ti.builtin.nmber.int$||0==e.v%1?(e=new ti.builtin.lng(e.v),this.longCompare(e)):new ti.builtin.nmber(this,ti.builtin.nmber.float$).numberCompare(e):e instanceof ti.builtin.lng?this.biginteger.subtract(e.biginteger):e instanceof ti.builtin.biginteger?this.biginteger.subtract(e):this.biginteger.subtract(new ti.builtin.biginteger(e))},ti.builtin.lng.prototype.__eq__=function(e,t){return 0==e.longCompare(t)},ti.builtin.lng.prototype.__ne__=function(e,t){return 0!=e.longCompare(t)},ti.builtin.lng.prototype.__lt__=function(e,t){return 0>e.longCompare(t)},ti.builtin.lng.prototype.__le__=function(e,t){return 0>=e.longCompare(t)},ti.builtin.lng.prototype.__gt__=function(e,t){return e.longCompare(t)>0},ti.builtin.lng.prototype.__ge__=function(e,t){return e.longCompare(t)>=0},ti.builtin.lng.prototype.$r=function(){return new ti.builtin.str(this.str$(10,!0)+"L")},ti.builtin.lng.prototype.tp$str=function(){return new ti.builtin.str(this.str$(10,!0))},ti.builtin.lng.prototype.str$=function(e,t){void 0===t&&(t=!0);var n=t?this.biginteger:this.biginteger.abs();return void 0===e||10===e?""+n:n.toString(e)},ti.str2number=function(e,t,n,i,r){var s=e,a=!1;if(e=e.replace(/^\s+|\s+$/g,""),"-"==e.charAt(0)&&(a=!0,e=e.substring(1)),"+"==e.charAt(0)&&(e=e.substring(1)),void 0===t&&(t=10),(2>t||t>36)&&0!=t)throw new ti.builtin.ValueError(r+"() base must be >= 2 and <= 36");if("0x"==e.substring(0,2).toLowerCase()){if(16!=t&&0!=t)throw new ti.builtin.ValueError("invalid literal for "+r+"() with base "+t+": '"+s+"'");e=e.substring(2),t=16}else if("0b"==e.substring(0,2).toLowerCase()){if(2!=t&&0!=t)throw new ti.builtin.ValueError("invalid literal for "+r+"() with base "+t+": '"+s+"'");e=e.substring(2),t=2}else if("0o"==e.substring(0,2).toLowerCase()){if(8!=t&&0!=t)throw new ti.builtin.ValueError("invalid literal for "+r+"() with base "+t+": '"+s+"'");e=e.substring(2),t=8}else if("0"==e.charAt(0)){if("0"==e)return 0;(8==t||0==t)&&(t=8)}if(0==t&&(t=10),0===e.length)throw new ti.builtin.ValueError("invalid literal for "+r+"() with base "+t+": '"+s+"'");var o,l,u;for(o=0;e.length>o;o++)if(l=e.charCodeAt(o),u=t,l>=48&&57>=l?u=l-48:l>=65&&90>=l?u=l-65+10:l>=97&&122>=l&&(u=l-97+10),u>=t)throw new ti.builtin.ValueError("invalid literal for "+r+"() with base "+t+": '"+s+"'");return u=n(e,t),a&&(u=i(u)),u},ti.builtin.int_=function(e,t){if(void 0!==e&&!ti.builtin.checkString(e)&&!ti.builtin.checkNumber(e)){if(!(e instanceof ti.builtin.bool))throw new ti.builtin.TypeError("int() argument must be a string or a number, not '"+ti.abstr.typeName(e)+"'");e=ti.builtin.asnum$(e)}if(e instanceof ti.builtin.str){t=ti.builtin.asnum$(t);var n=ti.str2number(e.v,t,parseInt,function(e){return-e},"int");return n>ti.builtin.lng.threshold$||-ti.builtin.lng.threshold$>n?new ti.builtin.lng(e,t):new ti.builtin.nmber(n,ti.builtin.nmber.int$)}if(void 0!==t)throw new ti.builtin.TypeError("int() can't convert non-string with explicit base");return e instanceof ti.builtin.lng?e.cantBeInt()?new ti.builtin.lng(e):new ti.builtin.nmber(e.toInt$(),ti.builtin.nmber.int$):(e=ti.builtin.asnum$(e),new ti.builtin.nmber(0|e,ti.builtin.nmber.int$))},ti.builtin.int_.prototype.tp$name="int",ti.builtin.int_.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("int",ti.builtin.int_),ti.builtin.float_=function(e){if(void 0===e)return new ti.builtin.nmber(0,ti.builtin.nmber.float$);if(e instanceof ti.builtin.str){if(e.v.match(/^-inf$/i))e=-1/0;else if(e.v.match(/^[+]?inf$/i))e=1/0;else if(e.v.match(/^[-+]?nan$/i))e=0/0;else{if(isNaN(e.v))throw new ti.builtin.ValueError("float: Argument: "+e.v+" is not number");e=parseFloat(e.v)}return new ti.builtin.nmber(e,ti.builtin.nmber.float$)}if("number"==typeof e||e instanceof ti.builtin.nmber||e instanceof ti.builtin.lng)return e=ti.builtin.asnum$(e),new ti.builtin.nmber(e,ti.builtin.nmber.float$);if(e instanceof ti.builtin.bool)return e=ti.builtin.asnum$(e),new ti.builtin.nmber(e,ti.builtin.nmber.float$);throw new ti.builtin.TypeError("float() argument must be a string or a number")},ti.builtin.float_.prototype.tp$name="float",ti.builtin.float_.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("float",ti.builtin.float_),ti.builtin.slice=function(e,t,n){if(e=ti.builtin.asnum$(e),t=ti.builtin.asnum$(t),n=ti.builtin.asnum$(n),!(this instanceof ti.builtin.slice))return new ti.builtin.slice(e,t,n);if(void 0===t&&void 0===n&&(t=e,e=null),e||(e=null),void 0===t&&(t=null),void 0===n&&(n=null),this.start=e,this.stop=t,this.step=n,null!==this.start&&!ti.builtin.checkInt(this.start)||null!==this.stop&&!ti.builtin.checkInt(this.stop)||null!==this.step&&!ti.builtin.checkInt(this.step))throw new ti.builtin.TypeError("slice indices must be integers or None");return this},ti.builtin.slice.prototype.tp$str=function(){var e=ti.builtin.repr(this.start).v,t=ti.builtin.repr(this.stop).v,n=ti.builtin.repr(this.step).v;return new ti.builtin.str("slice("+e+", "+t+", "+n+")")},ti.builtin.slice.prototype.indices=function(e){e=ti.builtin.asnum$(e);var t=this.start,n=this.stop,i=this.step;return null===i&&(i=1),i>0?(null===t&&(t=0),null===n&&(n=e),n>e&&(n=e),0>t&&(t=e+t,0>t&&(t=0)),0>n&&(n=e+n)):(null===t&&(t=e-1),t>=e&&(t=e-1),null===n?n=-1:0>n&&(n=e+n,0>n&&(n=-1)),0>t&&(t=e+t)),[t,n,i]},ti.builtin.slice.prototype.sssiter$=function(e,t){var n=ti.builtin.asnum$(e),i=this.indices("number"==typeof n?n:e.v.length);if(i[2]>0){var r;for(r=i[0];i[1]>r&&!1!==t(r,n);r+=i[2]);}else for(r=i[0];r>i[1]&&!1!==t(r,n);r+=i[2]);},ti.builtin.set=function(e){if(!(this instanceof ti.builtin.set))return new ti.builtin.set(e);e===void 0&&(e=[]),this.set_reset_(),e=new ti.builtin.list(e).tp$iter();for(var t=e.tp$iternext();void 0!==t;t=e.tp$iternext())ti.builtin.set.prototype.add.func_code(this,t);return this.__class__=ti.builtin.set,this.v=this.v,this},ti.builtin.set.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("set",ti.builtin.set),ti.builtin.set.prototype.set_iter_=function(){return ti.builtin.dict.prototype.keys.func_code(this.v).tp$iter()},ti.builtin.set.prototype.set_reset_=function(){this.v=new ti.builtin.dict([])},ti.builtin.set.prototype.tp$name="set",ti.builtin.set.prototype.$r=function(){for(var e=[],t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())e.push(ti.misceval.objectRepr(n).v);return new ti.builtin.str("set(["+e.join(", ")+"])")},ti.builtin.set.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.set.prototype.tp$hash=ti.builtin.object.prototype.HashNotImplemented,ti.builtin.set.prototype.tp$richcompare=function(e,t){if(this===e&&ti.misceval.opAllowsEquality(t))return!0;if(!e.__class__||e.__class__!=ti.builtin.set)return"Eq"===t?!1:"NotEq"===t?!0:!1;var n=this.sq$length(),i=e.sq$length();if(i!==n){if("Eq"===t)return!1;if("NotEq"===t)return!0}var r=!1,s=!1;switch(t){case"Lt":case"LtE":case"Eq":case"NotEq":r=ti.builtin.set.prototype.issubset.func_code(this,e);break;case"Gt":case"GtE":s=ti.builtin.set.prototype.issuperset.func_code(this,e);break;default:ei.asserts.fail()}switch(t){case"Lt":return i>n&&r;case"LtE":case"Eq":return r;case"NotEq":return!r;case"Gt":return n>i&&s;case"GtE":return s}},ti.builtin.set.prototype.tp$iter=ti.builtin.set.prototype.set_iter_,ti.builtin.set.prototype.sq$length=function(){return this.v.mp$length()},ti.builtin.set.prototype.isdisjoint=new ti.builtin.func(function(e,t){for(var n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(ti.abstr.sequenceContains(t,i))return ti.builtin.bool(!1);return ti.builtin.bool(!0)}),ti.builtin.set.prototype.issubset=new ti.builtin.func(function(e,t){var n=e.sq$length(),i=t.sq$length();if(n>i)return ti.builtin.bool(!1);for(n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(!ti.abstr.sequenceContains(t,i))return ti.builtin.bool(!1);return ti.builtin.bool(!0)}),ti.builtin.set.prototype.issuperset=new ti.builtin.func(function(e,t){return ti.builtin.set.prototype.issubset.func_code(t,e)}),ti.builtin.set.prototype.union=new ti.builtin.func(function(e){for(var t=new ti.builtin.set(e),n=1;arguments.length>n;n++)ti.builtin.set.prototype.update.func_code(t,arguments[n]);return t}),ti.builtin.set.prototype.intersection=new ti.builtin.func(function(e){var t=ti.builtin.set.prototype.copy.func_code(e);return arguments[0]=t,ti.builtin.set.prototype.intersection_update.func_code.apply(null,arguments),t}),ti.builtin.set.prototype.difference=new ti.builtin.func(function(e){var t=ti.builtin.set.prototype.copy.func_code(e);return arguments[0]=t,ti.builtin.set.prototype.difference_update.func_code.apply(null,arguments),t}),ti.builtin.set.prototype.symmetric_difference=new ti.builtin.func(function(e,t){for(var n=ti.builtin.set.prototype.union.func_code(e,t),i=n.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())ti.abstr.sequenceContains(e,r)&&ti.abstr.sequenceContains(t,r)&&ti.builtin.set.prototype.discard.func_code(n,r);return n}),ti.builtin.set.prototype.copy=new ti.builtin.func(function(e){return new ti.builtin.set(e)}),ti.builtin.set.prototype.update=new ti.builtin.func(function(e,t){for(var n=t.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())ti.builtin.set.prototype.add.func_code(e,i);return null}),ti.builtin.set.prototype.intersection_update=new ti.builtin.func(function(e){for(var t=e.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())for(var i=1;arguments.length>i;i++)if(!ti.abstr.sequenceContains(arguments[i],n)){ti.builtin.set.prototype.discard.func_code(e,n);break}return null}),ti.builtin.set.prototype.difference_update=new ti.builtin.func(function(e){for(var t=e.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())for(var i=1;arguments.length>i;i++)if(ti.abstr.sequenceContains(arguments[i],n)){ti.builtin.set.prototype.discard.func_code(e,n);break}return null}),ti.builtin.set.prototype.symmetric_difference_update=new ti.builtin.func(function(e,t){var n=ti.builtin.set.prototype.symmetric_difference.func_code(e,t);return e.set_reset_(),ti.builtin.set.prototype.update.func_code(e,n),null}),ti.builtin.set.prototype.add=new ti.builtin.func(function(e,t){return e.v.mp$ass_subscript(t,!0),null}),ti.builtin.set.prototype.discard=new ti.builtin.func(function(e,t){if(void 0!==e.v.mp$lookup(t)){var n=ti.builtin.hash,n=n(t);void 0!==e.v[n]&&(e.v.size-=1,delete e.v[n])}return null}),ti.builtin.set.prototype.pop=new ti.builtin.func(function(e){if(0===e.sq$length())throw new ti.builtin.KeyError("pop from an empty set");var t=e.tp$iter().tp$iternext();return ti.builtin.set.prototype.discard.func_code(e,t),t}),ti.builtin.set.prototype.remove=new ti.builtin.func(function(e,t){return e.v.mp$del_subscript(t),null}),ei.exportSymbol("Sk.builtin.set",ti.builtin.set),ti.builtin.module=function(){},ei.exportSymbol("Sk.builtin.module",ti.builtin.module),ti.builtin.module.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("module",ti.builtin.module),ti.builtin.module.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.module.prototype.tp$setattr=ti.builtin.object.prototype.GenericSetAttr,ti.builtin.generator=function(e,t,n,i,r){if(e){if(this.func_code=e,this.func_globals=t||null,this.gi$running=!1,this.gi$resumeat=0,this.gi$sentvalue=void 0,this.gi$locals={},n.length>0)for(t=0;e.co_varnames.length>t;++t)this.gi$locals[e.co_varnames[t]]=n[t];if(void 0!==r)for(var s in r)i[s]=r[s];return this.func_closure=i,this}},ei.exportSymbol("Sk.builtin.generator",ti.builtin.generator),ti.builtin.generator.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.generator.prototype.tp$iter=function(){return this},ti.builtin.generator.prototype.tp$iternext=function(e){return this.gi$running=!0,void 0===e&&(e=null),this.gi$sentvalue=e,e=[this],this.func_closure&&e.push(this.func_closure),e=this.func_code.apply(this.func_globals,e),this.gi$running=!1,ei.asserts.assert(void 0!==e),null!==e?(this.gi$resumeat=e[0],e=e[1]):void 0},ti.builtin.generator.prototype.next=new ti.builtin.func(function(e){return e.tp$iternext()}),ti.builtin.generator.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("generator",ti.builtin.generator),ti.builtin.generator.prototype.$r=function(){return new ti.builtin.str("<generator object "+this.func_code.co_name.v+">")},ti.builtin.generator.prototype.send=new ti.builtin.func(function(e,t){return e.tp$iternext(t)}),ti.builtin.makeGenerator=function(e,t){var n=new ti.builtin.generator(null,null,null);n.tp$iternext=e;for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},ei.exportSymbol("Sk.builtin.makeGenerator",ti.builtin.makeGenerator),ti.builtin.file=function(e,t){if(this.mode=t,this.name=e,this.closed=!1,ti.inBrowser){if(t=document.getElementById(e.v),null==t)throw new ti.builtin.IOError("[Errno 2] No such file or directory: '"+e.v+"'");this.data$="textarea"==t.nodeName.toLowerCase()?t.value:t.textContent}else this.data$=ti.read(e.v);this.lineList=this.data$.split("\n"),this.lineList=this.lineList.slice(0,-1);for(var n in this.lineList)this.lineList[n]+="\n";return this.pos$=this.currentLine=0,this.__class__=ti.builtin.file,this},ti.builtin.file.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("file",ti.builtin.file),ti.builtin.file.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.file.prototype.$r=function(){return new ti.builtin.str("<"+(this.closed?"closed":"open")+"file '"+this.name+"', mode '"+this.mode+"'>")},ti.builtin.file.prototype.tp$iter=function(){var e={tp$iter:function(){return e},$obj:this,$index:0,$lines:this.lineList,tp$iternext:function(){return e.$index>=e.$lines.length?void 0:new ti.builtin.str(e.$lines[e.$index++])}};return e},ti.builtin.file.prototype.close=new ti.builtin.func(function(e){e.closed=!0}),ti.builtin.file.prototype.flush=new ti.builtin.func(function(){}),ti.builtin.file.prototype.fileno=new ti.builtin.func(function(){return 10}),ti.builtin.file.prototype.isatty=new ti.builtin.func(function(){return!1}),ti.builtin.file.prototype.read=new ti.builtin.func(function(e,t){if(e.closed)throw new ti.builtin.ValueError("I/O operation on closed file");var n=e.data$.length;void 0===t&&(t=n);var i=new ti.builtin.str(e.data$.substr(e.pos$,t));return e.pos$+=t,e.pos$>=n&&(e.pos$=n),i}),ti.builtin.file.prototype.readline=new ti.builtin.func(function(e){var t="";return e.currentLine<e.lineList.length&&(t=e.lineList[e.currentLine],e.currentLine++),new ti.builtin.str(t)}),ti.builtin.file.prototype.readlines=new ti.builtin.func(function(e){for(var t=[],n=e.currentLine;e.lineList.length>n;n++)t.push(new ti.builtin.str(e.lineList[n]));return new ti.builtin.list(t)}),ti.builtin.file.prototype.seek=new ti.builtin.func(function(e,t,n){void 0===n&&(n=1),e.pos$=1==n?t:e.data$+t}),ti.builtin.file.prototype.tell=new ti.builtin.func(function(e){return e.pos$}),ti.builtin.file.prototype.truncate=new ti.builtin.func(function(){ei.asserts.fail()}),ti.builtin.file.prototype.write=new ti.builtin.func(function(){ei.asserts.fail()}),ei.exportSymbol("Sk.builtin.file",ti.builtin.file),ti.ffi=ti.ffi||{},ti.ffi.remapToPy=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;e.length>n;++n)t.push(ti.ffi.remapToPy(e[n]));
return new ti.builtin.list(t)}if("object"==typeof e){t=[];for(n in e)t.push(ti.ffi.remapToPy(n)),t.push(ti.ffi.remapToPy(e[n]));return new ti.builtin.dict(t)}return"string"==typeof e?new ti.builtin.str(e):"number"==typeof e?new ti.builtin.nmber(e,void 0):"boolean"==typeof e?e:(ei.asserts.fail("unhandled remap type "+typeof e),void 0)},ei.exportSymbol("Sk.ffi.remapToPy",ti.ffi.remapToPy),ti.ffi.referenceToPy=function(e,t){return"object"==typeof e?{v:e,tp$name:t}:(ei.asserts.fail("unhandled reference"),void 0)},ei.exportSymbol("Sk.ffi.referenceToPy",ti.ffi.referenceToPy),ti.ffi.remapToJs=function(e){if(e instanceof ti.builtin.dict){for(var t={},n=e.tp$iter(),i=n.tp$iternext();void 0!==i;i=n.tp$iternext()){var r=e.mp$subscript(i);void 0===r&&(r=null),i=ti.ffi.remapToJs(i),t[i]=ti.ffi.remapToJs(r)}return t}if(e instanceof ti.builtin.list){for(t=[],n=0;e.v.length>n;++n)t.push(ti.ffi.remapToJs(e.v[n]));return t}return e instanceof ti.builtin.nmber?ti.builtin.asnum$(e):e instanceof ti.builtin.lng?ti.builtin.asnum$(e):"number"==typeof e||"boolean"==typeof e?e:e===void 0?e:e.v},ei.exportSymbol("Sk.ffi.remapToJs",ti.ffi.remapToJs),ti.ffi.callback=function(e){return void 0===e?e:function(){return ti.misceval.apply(e,void 0,void 0,void 0,Array.prototype.slice.call(arguments,0))}},ei.exportSymbol("Sk.ffi.callback",ti.ffi.callback),ti.ffi.stdwrap=function(e,t){var n=new e;return n.v=t,n},ei.exportSymbol("Sk.ffi.stdwrap",ti.ffi.stdwrap),ti.ffi.basicwrap=function(e){return e instanceof ti.builtin.nmber?ti.builtin.asnum$(e):e instanceof ti.builtin.lng?ti.builtin.asnum$(e):"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?new ti.builtin.str(e):(ei.asserts.fail("unexpected type for basicwrap"),void 0)},ei.exportSymbol("Sk.ffi.basicwrap",ti.ffi.basicwrap),ti.ffi.unwrapo=function(e){return void 0===e?void 0:e.v},ei.exportSymbol("Sk.ffi.unwrapo",ti.ffi.unwrapo),ti.ffi.unwrapn=function(e){return null===e?null:e.v},ei.exportSymbol("Sk.ffi.unwrapn",ti.ffi.unwrapn),ti.builtin.enumerate=function(e,t){if(!(this instanceof ti.builtin.enumerate))return new ti.builtin.enumerate(e,t);if(ti.builtin.pyCheckArgs("enumerate",arguments,1,2),!ti.builtin.checkIterable(e))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(e)+"' object is not iterable");if(void 0!==t){if(!ti.misceval.isIndex(t))throw new ti.builtin.TypeError("'"+ti.abstr.typeName(t)+"' object cannot be interpreted as an index");t=ti.misceval.asIndex(t)}else t=0;var n=e.tp$iter();return this.tp$iter=function(){return this},this.$index=t,this.tp$iternext=function(){var e=n.tp$iternext();return void 0===e?void 0:new ti.builtin.tuple([this.$index++,e])},this.__class__=ti.builtin.enumerate,this},ti.builtin.enumerate.prototype.tp$name="enumerate",ti.builtin.enumerate.prototype.ob$type=ti.builtin.type.makeIntoTypeObj("enumerate",ti.builtin.enumerate),ti.builtin.enumerate.prototype.tp$getattr=ti.builtin.object.prototype.GenericGetAttr,ti.builtin.enumerate.prototype.__iter__=new ti.builtin.func(function(e){return e.tp$iter()}),ti.builtin.enumerate.prototype.next=new ti.builtin.func(function(e){return e.tp$iternext()}),ti.builtin.event=function(e){return ti.misceval.buildClass(e,function(t,n){n.__init__=new ti.builtin.func(function(e,t){e.tp$name="Event",e.v=ti.ffi.remapToJs(t)}),n.__getattr__=new ti.builtin.func(function(t,n){var i=ti.ffi.remapToJs(t);switch(n){case"altKey":return i.altKey;case"bubbles":return i.bubbles;case"button":return ti.builtin.assk$(i.button,ti.builtin.nmber.int$);case"cancelable":return i.cancelable;case"clientX":return ti.builtin.assk$(i.clientX,ti.builtin.nmber.int$);case"clientY":return ti.builtin.assk$(i.clientY,ti.builtin.nmber.int$);case"ctrlKey":return i.ctrlKey;case"defaultPrevented":return i.defaultPrevented;case"keyCode":return ti.builtin.assk$(i.keyCode,ti.builtin.nmber.int$);case"screenX":return ti.builtin.assk$(i.screenX,ti.builtin.nmber.int$);case"screenY":return ti.builtin.assk$(i.screenY,ti.builtin.nmber.int$);case"shiftKey":return i.shiftKey;case"target":return ti.misceval.callsim(ti.misceval.buildClass(e,function(e,t){t.__init__=new ti.builtin.func(function(e){e.tp$name="target",e.v=i.target}),t.__getattr__=new ti.builtin.func(function(e,t){return ti.ffi.remapToPy(i.target[t])}),t.__setattr__=new ti.builtin.func(function(e,t,n){i.target[t]=ti.ffi.remapToJs(n)}),t.__str__=new ti.builtin.func(function(e){return e=ti.ffi.remapToJs(e),new ti.builtin.str(""+e)}),t.__repr__=new ti.builtin.func(function(e){return e=ti.ffi.remapToJs(e),new ti.builtin.str(""+e)})},"target",[]));case"type":return new ti.builtin.str(i.type);case"addEventListener":return ti.builtin.addEventListener(e,i);case"preventDefault":return ti.misceval.callsim(ti.misceval.buildClass(e,function(e,t){t.__init__=new ti.builtin.func(function(e){e.tp$name="preventDefault"}),t.__call__=new ti.builtin.func(function(){i.preventDefault()}),t.__str__=new ti.builtin.func(function(){return new ti.builtin.str("preventDefault")}),t.__repr__=new ti.builtin.func(function(){return new ti.builtin.str("preventDefault")})},"preventDefault",[]));case"stopImmediatePropagation":return ti.misceval.callsim(ti.misceval.buildClass(e,function(e,t){t.__init__=new ti.builtin.func(function(e){e.tp$name="stopImmediatePropagation"}),t.__call__=new ti.builtin.func(function(){i.stopImmediatePropagation()}),t.__str__=new ti.builtin.func(function(){return new ti.builtin.str("stopImmediatePropagation")}),t.__repr__=new ti.builtin.func(function(){return new ti.builtin.str("stopImmediatePropagation")})},"stopImmediatePropagation",[]));case"stopPropagation":return ti.misceval.callsim(ti.misceval.buildClass(e,function(e,t){t.__init__=new ti.builtin.func(function(e){e.tp$name="stopPropagation"}),t.__call__=new ti.builtin.func(function(){i.stopPropagation()}),t.__str__=new ti.builtin.func(function(){return new ti.builtin.str("stopPropagation")}),t.__repr__=new ti.builtin.func(function(){return new ti.builtin.str("stopPropagation")})},"stopPropagation",[]));default:return ti.ffi.remapToPy(i[n])}}),n.__str__=new ti.builtin.func(function(e){return e=ti.ffi.remapToJs(e),new ti.builtin.str(""+e)}),n.__repr__=new ti.builtin.func(function(e){return e=ti.ffi.remapToJs(e),new ti.builtin.str(""+e)})},"Event",[])},ti.builtin.addEventListener=function(e,t){return ti.misceval.callsim(ti.misceval.buildClass(e,function(n,i){i.__init__=new ti.builtin.func(function(e){e.tp$name="addEventListener",e.v=t.addEventListener}),i.__call__=new ti.builtin.func(function(n,i,r,s){n=ti.ffi.remapToJs(i),s=ti.ffi.remapToJs(s),t.addEventListener(n,function(t){t=ti.misceval.callsim(e.Event,ti.ffi.referenceToPy(t,"Event")),ti.misceval.callsim(r,t)},s)})},"addEventListener",[]))},ti.Tokenizer=function(e,t,n){this.filename=e,this.callback=n,this.parenlev=this.lnum=0,this.continued=!1,this.namechars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",this.numchars="0123456789",this.contstr="",this.needcont=!1,this.contline=void 0,this.indents=[0],this.endprog=/.*/,this.strstart=[-1,-1],this.interactive=t,this.doneFunc=function(){for(var e=1;this.indents.length>e;++e)if(this.callback(ti.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,0],[this.lnum,0],""))return"done";return this.callback(ti.Tokenizer.Tokens.T_ENDMARKER,"",[this.lnum,0],[this.lnum,0],"")?"done":"failed"}},ti.Tokenizer.Tokens={T_ENDMARKER:0,T_NAME:1,T_NUMBER:2,T_STRING:3,T_NEWLINE:4,T_INDENT:5,T_DEDENT:6,T_LPAR:7,T_RPAR:8,T_LSQB:9,T_RSQB:10,T_COLON:11,T_COMMA:12,T_SEMI:13,T_PLUS:14,T_MINUS:15,T_STAR:16,T_SLASH:17,T_VBAR:18,T_AMPER:19,T_LESS:20,T_GREATER:21,T_EQUAL:22,T_DOT:23,T_PERCENT:24,T_BACKQUOTE:25,T_LBRACE:26,T_RBRACE:27,T_EQEQUAL:28,T_NOTEQUAL:29,T_LESSEQUAL:30,T_GREATEREQUAL:31,T_TILDE:32,T_CIRCUMFLEX:33,T_LEFTSHIFT:34,T_RIGHTSHIFT:35,T_DOUBLESTAR:36,T_PLUSEQUAL:37,T_MINEQUAL:38,T_STAREQUAL:39,T_SLASHEQUAL:40,T_PERCENTEQUAL:41,T_AMPEREQUAL:42,T_VBAREQUAL:43,T_CIRCUMFLEXEQUAL:44,T_LEFTSHIFTEQUAL:45,T_RIGHTSHIFTEQUAL:46,T_DOUBLESTAREQUAL:47,T_DOUBLESLASH:48,T_DOUBLESLASHEQUAL:49,T_AT:50,T_OP:51,T_COMMENT:52,T_NL:53,T_RARROW:54,T_ERRORTOKEN:55,T_N_TOKENS:56,T_NT_OFFSET:256};var ai="#[^\\r\\n]*",oi="[a-zA-Z_]\\w*",li="0[bB][01]*",ui="0[xX][\\da-fA-F]*[lL]?",ci="0[oO]?[0-7]*[lL]?",fi="[1-9]\\d*[lL]?",hi=e(li,ui,ci,fi),pi="[eE][-+]?\\d+",di=e("\\d+\\.\\d*","\\.\\d+")+t(pi),mi="\\d+"+pi,bi=e(di,mi),gi=e("\\d+[jJ]",bi+"[jJ]"),vi=e(gi,bi,hi),_i="^[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",Ei='^[^"\\\\]*(?:\\\\.[^"\\\\]*)*"',yi="[^'\\\\]*(?:(?:\\\\.|'(?!''))[^'\\\\]*)*'''",Ti='[^"\\\\]*(?:(?:\\\\.|"(?!""))[^"\\\\]*)*"""',Si=e("[ubUB]?[rR]?'''",'[ubUB]?[rR]?"""'),wi=(e("[uU]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*'",'[uU]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*"'),e("\\*\\*=?",">>=?","<<=?","<>","!=","//=?","->","[+\\-*/%&|^=<>]=?","~")),ki="[\\][(){}]",xi=e("\\r?\\n","[:;.,`@]"),Ri=e(wi,ki,xi),Pi=e("[uUbB]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*"+e("'","\\\\\\r?\\n"),'[uUbB]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*'+e('"',"\\\\\\r?\\n")),Oi=e("\\\\\\r?\\n",ai,Si),Ci="^"+e(Oi,vi,Ri,Pi,oi),Ai={"'''":!0,'"""':!0,"r'''":!0,'r"""':!0,"R'''":!0,'R"""':!0,"u'''":!0,'u"""':!0,"U'''":!0,'U"""':!0,"b'''":!0,'b"""':!0,"B'''":!0,'B"""':!0,"ur'''":!0,'ur"""':!0,"Ur'''":!0,'Ur"""':!0,"uR'''":!0,'uR"""':!0,"UR'''":!0,'UR"""':!0,"br'''":!0,'br"""':!0,"Br'''":!0,'Br"""':!0,"bR'''":!0,'bR"""':!0,"BR'''":!0,'BR"""':!0},Mi={"'":!0,'"':!0,"r'":!0,'r"':!0,"R'":!0,'R"':!0,"u'":!0,'u"':!0,"U'":!0,'U"':!0,"b'":!0,'b"':!0,"B'":!0,'B"':!0,"ur'":!0,'ur"':!0,"Ur'":!0,'Ur"':!0,"uR'":!0,'uR"':!0,"UR'":!0,'UR"':!0,"br'":!0,'br"':!0,"Br'":!0,'Br"':!0,"bR'":!0,'bR"':!0,"BR'":!0,'BR"':!0};(function(){for(var e in Ai);for(e in Mi);})();var $i=8;ti.Tokenizer.prototype.generateTokens=function(e){var t,r,s,a,o,l=RegExp(Ci);r=RegExp(yi,"g"),o=RegExp(Ti,"g");var u={"'":RegExp(_i,"g"),'"':RegExp(Ei,"g"),"'''":r,'"""':o,"r'''":r,'r"""':o,"u'''":r,'u"""':o,"b'''":r,'b"""':o,"ur'''":r,'ur"""':o,"br'''":r,'br"""':o,"R'''":r,'R"""':o,"U'''":r,'U"""':o,"B'''":r,'B"""':o,"uR'''":r,'uR"""':o,"Ur'''":r,'Ur"""':o,"UR'''":r,'UR"""':o,"bR'''":r,'bR"""':o,"Br'''":r,'Br"""':o,"BR'''":r,'BR"""':o,r:null,R:null,u:null,U:null,b:null,B:null};if(e||(e=""),this.lnum+=1,r=0,o=e.length,this.contstr.length>0){if(!e)throw new ti.builtin.TokenError("EOF in multi-line string",this.filename,this.strstart[0],this.strstart[1],this.contline);if(this.endprog.lastIndex=0,!(t=this.endprog.test(e))){if(this.needcont&&"\\\n"!==e.substring(e.length-2)&&"\\\r\n"!==e.substring(e.length-3)){if(this.callback(ti.Tokenizer.Tokens.T_ERRORTOKEN,this.contstr+e,this.strstart,[this.lnum,e.length],this.contline))return"done";this.contstr="",this.contline=void 0}else this.contstr+=e,this.contline+=e;return!1}if(r=a=this.endprog.lastIndex,this.callback(ti.Tokenizer.Tokens.T_STRING,this.contstr+e.substring(0,a),this.strstart,[this.lnum,a],this.contline+e))return"done";this.contstr="",this.needcont=!1,this.contline=void 0}else if(0!==this.parenlev||this.continued){if(!e)throw new ti.builtin.TokenError("EOF in multi-line statement",this.filename,this.lnum,0,e);this.continued=!1}else{if(!e)return this.doneFunc();for(s=0;o>r;){if(" "===e.charAt(r))s+=1;else if("	"===e.charAt(r))s=(s/$i+1)*$i;else{if("\f"!==e.charAt(r))break;s=0}r+=1}if(r===o)return this.doneFunc();if(-1!=="#\r\n".indexOf(e.charAt(r))){if("#"===e.charAt(r))return l=i(e.substring(r),"\r\n"),o=r+l.length,this.callback(ti.Tokenizer.Tokens.T_COMMENT,l,[this.lnum,r],[this.lnum,r+l.length],e)||this.callback(ti.Tokenizer.Tokens.T_NL,e.substring(o),[this.lnum,o],[this.lnum,e.length],e)?"done":!1;if(this.callback(ti.Tokenizer.Tokens.T_NL,e.substring(r),[this.lnum,r],[this.lnum,e.length],e))return"done";if(!this.interactive)return!1}if(s>this.indents[this.indents.length-1]&&(this.indents.push(s),this.callback(ti.Tokenizer.Tokens.T_INDENT,e.substring(0,r),[this.lnum,0],[this.lnum,r],e)))return"done";for(;this.indents[this.indents.length-1]>s;){if(!n(this.indents,s))throw new ti.builtin.IndentationError("unindent does not match any outer indentation level",this.filename,this.lnum,r,e);if(this.indents.splice(this.indents.length-1,1),this.callback(ti.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,r],[this.lnum,r],e))return"done"}}for(;o>r;){for(s=e.charAt(r);" "===s||"\f"===s||"	"===s;)r+=1,s=e.charAt(r);l.lastIndex=0;var c=l.exec(e.substring(r));if(c){s=r,a=s+c[1].length,c=[this.lnum,s],t=[this.lnum,a],r=a,a=e.substring(s,a);var f=e.charAt(s);if(-1!==this.numchars.indexOf(f)||"."===f&&"."!==a){if(this.callback(ti.Tokenizer.Tokens.T_NUMBER,a,c,t,e))return"done"}else if("\r"===f||"\n"===f){if(s=ti.Tokenizer.Tokens.T_NEWLINE,this.parenlev>0&&(s=ti.Tokenizer.Tokens.T_NL),this.callback(s,a,c,t,e))return"done"}else if("#"===f){if(this.callback(ti.Tokenizer.Tokens.T_COMMENT,a,c,t,e))return"done"}else if(Ai.hasOwnProperty(a)){if(this.endprog=u[a],this.endprog.lastIndex=0,!(t=this.endprog.test(e.substring(r)))){this.strstart=[this.lnum,s],this.contstr=e.substring(s),this.contline=e;break}if(r=this.endprog.lastIndex+r,a=e.substring(s,r),this.callback(ti.Tokenizer.Tokens.T_STRING,a,c,[this.lnum,r],e))return"done"}else if(Mi.hasOwnProperty(f)||Mi.hasOwnProperty(a.substring(0,2))||Mi.hasOwnProperty(a.substring(0,3))){if("\n"===a[a.length-1]){this.strstart=[this.lnum,s],this.endprog=u[f]||u[a[1]]||u[a[2]],this.contstr=e.substring(s),this.needcont=!0,this.contline=e;break}if(this.callback(ti.Tokenizer.Tokens.T_STRING,a,c,t,e))return"done"}else if(-1!==this.namechars.indexOf(f)){if(this.callback(ti.Tokenizer.Tokens.T_NAME,a,c,t,e))return"done"}else if("\\"===f){if(this.callback(ti.Tokenizer.Tokens.T_NL,a,c,[this.lnum,r],e))return"done";this.continued=!0}else if(-1!=="([{".indexOf(f)?this.parenlev+=1:-1!==")]}".indexOf(f)&&(this.parenlev-=1),this.callback(ti.Tokenizer.Tokens.T_OP,a,c,t,e))return"done"}else{if(this.callback(ti.Tokenizer.Tokens.T_ERRORTOKEN,e.charAt(r),[this.lnum,r],[this.lnum,r+1],e))return"done";r+=1}}return!1},ti.Tokenizer.tokenNames={0:"T_ENDMARKER",1:"T_NAME",2:"T_NUMBER",3:"T_STRING",4:"T_NEWLINE",5:"T_INDENT",6:"T_DEDENT",7:"T_LPAR",8:"T_RPAR",9:"T_LSQB",10:"T_RSQB",11:"T_COLON",12:"T_COMMA",13:"T_SEMI",14:"T_PLUS",15:"T_MINUS",16:"T_STAR",17:"T_SLASH",18:"T_VBAR",19:"T_AMPER",20:"T_LESS",21:"T_GREATER",22:"T_EQUAL",23:"T_DOT",24:"T_PERCENT",25:"T_BACKQUOTE",26:"T_LBRACE",27:"T_RBRACE",28:"T_EQEQUAL",29:"T_NOTEQUAL",30:"T_LESSEQUAL",31:"T_GREATEREQUAL",32:"T_TILDE",33:"T_CIRCUMFLEX",34:"T_LEFTSHIFT",35:"T_RIGHTSHIFT",36:"T_DOUBLESTAR",37:"T_PLUSEQUAL",38:"T_MINEQUAL",39:"T_STAREQUAL",40:"T_SLASHEQUAL",41:"T_PERCENTEQUAL",42:"T_AMPEREQUAL",43:"T_VBAREQUAL",44:"T_CIRCUMFLEXEQUAL",45:"T_LEFTSHIFTEQUAL",46:"T_RIGHTSHIFTEQUAL",47:"T_DOUBLESTAREQUAL",48:"T_DOUBLESLASH",49:"T_DOUBLESLASHEQUAL",50:"T_AT",51:"T_OP",52:"T_COMMENT",53:"T_NL",54:"T_RARROW",55:"T_ERRORTOKEN",56:"T_N_TOKENS",256:"T_NT_OFFSET"},ei.exportSymbol("Sk.Tokenizer",ti.Tokenizer),ei.exportSymbol("Sk.Tokenizer.prototype.generateTokens",ti.Tokenizer.prototype.generateTokens),ei.exportSymbol("Sk.Tokenizer.tokenNames",ti.Tokenizer.tokenNames),ti.OpMap={"(":ti.Tokenizer.Tokens.T_LPAR,")":ti.Tokenizer.Tokens.T_RPAR,"[":ti.Tokenizer.Tokens.T_LSQB,"]":ti.Tokenizer.Tokens.T_RSQB,":":ti.Tokenizer.Tokens.T_COLON,",":ti.Tokenizer.Tokens.T_COMMA,";":ti.Tokenizer.Tokens.T_SEMI,"+":ti.Tokenizer.Tokens.T_PLUS,"-":ti.Tokenizer.Tokens.T_MINUS,"*":ti.Tokenizer.Tokens.T_STAR,"/":ti.Tokenizer.Tokens.T_SLASH,"|":ti.Tokenizer.Tokens.T_VBAR,"&":ti.Tokenizer.Tokens.T_AMPER,"<":ti.Tokenizer.Tokens.T_LESS,">":ti.Tokenizer.Tokens.T_GREATER,"=":ti.Tokenizer.Tokens.T_EQUAL,".":ti.Tokenizer.Tokens.T_DOT,"%":ti.Tokenizer.Tokens.T_PERCENT,"`":ti.Tokenizer.Tokens.T_BACKQUOTE,"{":ti.Tokenizer.Tokens.T_LBRACE,"}":ti.Tokenizer.Tokens.T_RBRACE,"@":ti.Tokenizer.Tokens.T_AT,"==":ti.Tokenizer.Tokens.T_EQEQUAL,"!=":ti.Tokenizer.Tokens.T_NOTEQUAL,"<>":ti.Tokenizer.Tokens.T_NOTEQUAL,"<=":ti.Tokenizer.Tokens.T_LESSEQUAL,">=":ti.Tokenizer.Tokens.T_GREATEREQUAL,"~":ti.Tokenizer.Tokens.T_TILDE,"^":ti.Tokenizer.Tokens.T_CIRCUMFLEX,"<<":ti.Tokenizer.Tokens.T_LEFTSHIFT,">>":ti.Tokenizer.Tokens.T_RIGHTSHIFT,"**":ti.Tokenizer.Tokens.T_DOUBLESTAR,"+=":ti.Tokenizer.Tokens.T_PLUSEQUAL,"-=":ti.Tokenizer.Tokens.T_MINEQUAL,"*=":ti.Tokenizer.Tokens.T_STAREQUAL,"/=":ti.Tokenizer.Tokens.T_SLASHEQUAL,"%=":ti.Tokenizer.Tokens.T_PERCENTEQUAL,"&=":ti.Tokenizer.Tokens.T_AMPEREQUAL,"|=":ti.Tokenizer.Tokens.T_VBAREQUAL,"^=":ti.Tokenizer.Tokens.T_CIRCUMFLEXEQUAL,"<<=":ti.Tokenizer.Tokens.T_LEFTSHIFTEQUAL,">>=":ti.Tokenizer.Tokens.T_RIGHTSHIFTEQUAL,"**=":ti.Tokenizer.Tokens.T_DOUBLESTAREQUAL,"//":ti.Tokenizer.Tokens.T_DOUBLESLASH,"//=":ti.Tokenizer.Tokens.T_DOUBLESLASHEQUAL,"->":ti.Tokenizer.Tokens.T_RARROW},ti.ParseTables={sym:{and_expr:257,and_test:258,arglist:259,argument:260,arith_expr:261,assert_stmt:262,atom:263,augassign:264,break_stmt:265,classdef:266,comp_op:267,comparison:268,compound_stmt:269,continue_stmt:270,decorated:271,decorator:272,decorators:273,del_stmt:274,dictmaker:275,dotted_as_name:276,dotted_as_names:277,dotted_name:278,encoding_decl:279,eval_input:280,except_clause:281,exec_stmt:282,expr:283,expr_stmt:284,exprlist:285,factor:286,file_input:287,flow_stmt:288,for_stmt:289,fpdef:290,fplist:291,funcdef:292,gen_for:293,gen_if:294,gen_iter:295,global_stmt:296,if_stmt:297,import_as_name:298,import_as_names:299,import_from:300,import_name:301,import_stmt:302,lambdef:303,list_for:304,list_if:305,list_iter:306,listmaker:307,not_test:308,old_lambdef:309,old_test:310,or_test:311,parameters:312,pass_stmt:313,power:314,print_stmt:315,raise_stmt:316,return_stmt:317,shift_expr:318,simple_stmt:319,single_input:256,sliceop:320,small_stmt:321,stmt:322,subscript:323,subscriptlist:324,suite:325,term:326,test:327,testlist:328,testlist1:329,testlist_gexp:330,testlist_safe:331,trailer:332,try_stmt:333,varargslist:334,while_stmt:335,with_stmt:336,with_var:337,xor_expr:338,yield_expr:339,yield_stmt:340},number2symbol:{256:"single_input",257:"and_expr",258:"and_test",259:"arglist",260:"argument",261:"arith_expr",262:"assert_stmt",263:"atom",264:"augassign",265:"break_stmt",266:"classdef",267:"comp_op",268:"comparison",269:"compound_stmt",270:"continue_stmt",271:"decorated",272:"decorator",273:"decorators",274:"del_stmt",275:"dictmaker",276:"dotted_as_name",277:"dotted_as_names",278:"dotted_name",279:"encoding_decl",280:"eval_input",281:"except_clause",282:"exec_stmt",283:"expr",284:"expr_stmt",285:"exprlist",286:"factor",287:"file_input",288:"flow_stmt",289:"for_stmt",290:"fpdef",291:"fplist",292:"funcdef",293:"gen_for",294:"gen_if",295:"gen_iter",296:"global_stmt",297:"if_stmt",298:"import_as_name",299:"import_as_names",300:"import_from",301:"import_name",302:"import_stmt",303:"lambdef",304:"list_for",305:"list_if",306:"list_iter",307:"listmaker",308:"not_test",309:"old_lambdef",310:"old_test",311:"or_test",312:"parameters",313:"pass_stmt",314:"power",315:"print_stmt",316:"raise_stmt",317:"return_stmt",318:"shift_expr",319:"simple_stmt",320:"sliceop",321:"small_stmt",322:"stmt",323:"subscript",324:"subscriptlist",325:"suite",326:"term",327:"test",328:"testlist",329:"testlist1",330:"testlist_gexp",331:"testlist_safe",332:"trailer",333:"try_stmt",334:"varargslist",335:"while_stmt",336:"with_stmt",337:"with_var",338:"xor_expr",339:"yield_expr",340:"yield_stmt"},dfas:{256:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],257:[[[[37,1]],[[38,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],258:[[[[39,1]],[[40,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],259:[[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,41:1,43:1}],260:[[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],261:[[[[48,1]],[[24,0],[35,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],262:[[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],{19:1}],263:[[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],264:[[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],{57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1}],265:[[[[31,1]],[[0,1]]],{31:1}],266:[[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],{10:1}],267:[[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],{7:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1}],268:[[[[80,1]],[[81,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],269:[[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],{4:1,10:1,14:1,16:1,27:1,30:1,33:1,34:1}],270:[[[[32,1]],[[0,1]]],{32:1}],271:[[[[90,1]],[[88,2],[85,2]],[[0,2]]],{33:1}],272:[[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],{33:1}],273:[[[[93,1]],[[93,1],[0,1]]],{33:1}],274:[[[[21,1]],[[94,2]],[[0,2]]],{21:1}],275:[[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],276:[[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],277:[[[[96,1]],[[45,0],[0,1]]],{20:1}],278:[[[[20,1]],[[97,0],[0,1]]],{20:1}],279:[[[[20,1]],[[0,1]]],{20:1}],280:[[[[71,1]],[[2,1],[98,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],281:[[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],{99:1}],282:[[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{15:1}],283:[[[[100,1]],[[101,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],284:[[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],285:[[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],286:[[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],287:[[[[2,0],[98,1],[105,0]],[[0,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,98:1}],288:[[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],{5:1,18:1,25:1,31:1,32:1}],289:[[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],{27:1}],290:[[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],{20:1,28:1}],291:[[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],{20:1,28:1}],292:[[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],{4:1}],293:[[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],{27:1}],294:[[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],{30:1}],295:[[[[46,1],[118,1]],[[0,1]]],{27:1,30:1}],296:[[[[26,1]],[[20,2]],[[45,1],[0,2]]],{26:1}],297:[[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{30:1}],298:[[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],299:[[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],{20:1}],300:[[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],{29:1}],301:[[[[23,1]],[[122,2]],[[0,2]]],{23:1}],302:[[[[123,1],[124,1]],[[0,1]]],{23:1,29:1}],303:[[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],{36:1}],304:[[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],{27:1}],305:[[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],{30:1}],306:[[[[128,1],[129,1]],[[0,1]]],{27:1,30:1}],307:[[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],308:[[[[7,1],[130,2]],[[39,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],309:[[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],{36:1}],310:[[[[131,1],[115,1]],[[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],311:[[[[132,1]],[[133,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],312:[[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],{28:1}],313:[[[[22,1]],[[0,1]]],{22:1}],314:[[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],315:[[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],{12:1}],316:[[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{5:1}],317:[[[[18,1]],[[71,2],[0,1]],[[0,2]]],{18:1}],318:[[[[137,1]],[[136,0],[138,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],319:[[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],320:[[[[69,1]],[[44,2],[0,1]],[[0,2]]],{69:1}],321:[[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],322:[[[[1,1],[3,1]],[[0,1]]],{4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],323:[[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],324:[[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],325:[[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],{2:1,5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],326:[[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],327:[[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],328:[[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],329:[[[[44,1]],[[45,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],330:[[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],331:[[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],332:[[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],{11:1,28:1,97:1}],333:[[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],{14:1}],334:[[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],{20:1,28:1,41:1,43:1}],335:[[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{16:1}],336:[[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],{34:1}],337:[[[[95,1]],[[80,2]],[[0,2]]],{95:1}],338:[[[[162,1]],[[163,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],339:[[[[25,1]],[[71,2],[0,1]],[[0,2]]],{25:1}],340:[[[[53,1]],[[0,1]]],{25:1}]},states:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],[[[37,1]],[[38,0],[0,1]]],[[[39,1]],[[40,0],[0,1]]],[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],[[[48,1]],[[24,0],[35,0],[0,1]]],[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],[[[31,1]],[[0,1]]],[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],[[[80,1]],[[81,0],[0,1]]],[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],[[[32,1]],[[0,1]]],[[[90,1]],[[88,2],[85,2]],[[0,2]]],[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],[[[93,1]],[[93,1],[0,1]]],[[[21,1]],[[94,2]],[[0,2]]],[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[96,1]],[[45,0],[0,1]]],[[[20,1]],[[97,0],[0,1]]],[[[20,1]],[[0,1]]],[[[71,1]],[[2,1],[98,2]],[[0,2]]],[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[100,1]],[[101,0],[0,1]]],[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],[[[2,0],[98,1],[105,0]],[[0,1]]],[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],[[[46,1],[118,1]],[[0,1]]],[[[26,1]],[[20,2]],[[45,1],[0,2]]],[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],[[[23,1]],[[122,2]],[[0,2]]],[[[123,1],[124,1]],[[0,1]]],[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],[[[128,1],[129,1]],[[0,1]]],[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[7,1],[130,2]],[[39,2]],[[0,2]]],[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],[[[131,1],[115,1]],[[0,1]]],[[[132,1]],[[133,0],[0,1]]],[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],[[[22,1]],[[0,1]]],[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[18,1]],[[71,2],[0,1]],[[0,2]]],[[[137,1]],[[136,0],[138,0],[0,1]]],[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],[[[69,1]],[[44,2],[0,1]],[[0,2]]],[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],[[[1,1],[3,1]],[[0,1]]],[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],[[[44,1]],[[45,0],[0,1]]],[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],[[[95,1]],[[80,2]],[[0,2]]],[[[162,1]],[[163,0],[0,1]]],[[[25,1]],[[71,2],[0,1]],[[0,2]]],[[[53,1]],[[0,1]]]],labels:[[0,"EMPTY"],[319,null],[4,null],[269,null],[1,"def"],[1,"raise"],[32,null],[1,"not"],[2,null],[26,null],[1,"class"],[9,null],[1,"print"],[25,null],[1,"try"],[1,"exec"],[1,"while"],[3,null],[1,"return"],[1,"assert"],[1,null],[1,"del"],[1,"pass"],[1,"import"],[15,null],[1,"yield"],[1,"global"],[1,"for"],[7,null],[1,"from"],[1,"if"],[1,"break"],[1,"continue"],[50,null],[1,"with"],[14,null],[1,"lambda"],[318,null],[19,null],[308,null],[1,"and"],[16,null],[260,null],[36,null],[327,null],[12,null],[293,null],[22,null],[326,null],[307,null],[10,null],[8,null],[330,null],[339,null],[275,null],[27,null],[329,null],[46,null],[39,null],[41,null],[47,null],[42,null],[43,null],[37,null],[44,null],[49,null],[40,null],[38,null],[45,null],[11,null],[325,null],[328,null],[29,null],[21,null],[28,null],[1,"in"],[30,null],[1,"is"],[31,null],[20,null],[283,null],[267,null],[333,null],[297,null],[289,null],[266,null],[336,null],[335,null],[292,null],[271,null],[273,null],[278,null],[259,null],[272,null],[285,null],[1,"as"],[276,null],[23,null],[0,null],[1,"except"],[338,null],[18,null],[264,null],[314,null],[286,null],[322,null],[265,null],[270,null],[316,null],[317,null],[340,null],[1,"else"],[291,null],[290,null],[312,null],[311,null],[295,null],[310,null],[294,null],[1,"elif"],[298,null],[299,null],[277,null],[301,null],[300,null],[334,null],[331,null],[306,null],[304,null],[305,null],[268,null],[309,null],[258,null],[1,"or"],[263,null],[332,null],[35,null],[261,null],[34,null],[321,null],[13,null],[288,null],[262,null],[284,null],[313,null],[315,null],[274,null],[282,null],[296,null],[302,null],[320,null],[323,null],[5,null],[6,null],[48,null],[17,null],[24,null],[303,null],[324,null],[281,null],[1,"finally"],[337,null],[257,null],[33,null]],keywords:{and:40,as:95,assert:19,"break":31,"class":10,"continue":32,def:4,del:21,elif:119,"else":111,except:99,exec:15,"finally":160,"for":27,from:29,global:26,"if":30,"import":23,"in":75,is:77,lambda:36,not:7,or:133,pass:22,print:12,raise:5,"return":18,"try":14,"while":16,"with":34,yield:25},tokens:{0:98,1:20,2:8,3:17,4:2,5:152,6:153,7:28,8:51,9:11,10:50,11:69,12:45,13:140,14:35,15:24,16:41,17:155,18:101,19:38,20:79,21:73,22:47,23:97,24:156,25:13,26:9,27:55,28:74,29:72,30:76,31:78,32:6,33:163,34:138,35:136,36:43,37:63,38:67,39:58,40:66,41:59,42:61,43:62,44:64,45:68,46:57,47:60,48:154,49:65,50:33},start:256},r.prototype.setup=function(e){e=e||this.grammar.start,this.stack=[{dfa:this.grammar.dfas[e],state:0,node:{type:e,value:null,context:null,children:[]}}],this.used_names={}
},r.prototype.addtoken=function(e,t,n){var i=this.classify(e,t,n);e:for(;;){for(var r=this.stack[this.stack.length-1],a=r.dfa[0],o=a[r.state],l=0;o.length>l;++l){var u=o[l][0],c=o[l][1],f=this.grammar.labels[u][0];if(i===u){for(ei.asserts.assert(256>f),this.shift(e,t,c,n),e=c;1===a[e].length&&0===a[e][0][0]&&a[e][0][1]===e;){if(this.pop(),0===this.stack.length)return!0;r=this.stack[this.stack.length-1],e=r.state,a=r.dfa[0]}return!1}if(f>=256&&this.grammar.dfas[f][1].hasOwnProperty(i)){this.push(f,this.grammar.dfas[f],c,n);continue e}}if(!s(o,[0,r.state]))throw new ti.builtin.ParseError("bad input",this.filename,n[0][0],n);if(this.pop(),0===this.stack.length)throw new ti.builtin.ParseError("too much input",this.filename)}},r.prototype.classify=function(e,t,n){if(e===ti.Tokenizer.Tokens.T_NAME&&(this.used_names[t]=!0,t=this.grammar.keywords.hasOwnProperty(t)&&this.grammar.keywords[t]))return t;if(t=this.grammar.tokens.hasOwnProperty(e)&&this.grammar.tokens[e],!t)throw new ti.builtin.ParseError("bad token",this.filename,n[0][0],n);return t},r.prototype.shift=function(e,t,n,i){var r=this.stack[this.stack.length-1].dfa,s=this.stack[this.stack.length-1].node;s.children.push({type:e,value:t,lineno:i[0][0],col_offset:i[0][1],children:null}),this.stack[this.stack.length-1]={dfa:r,state:n,node:s}},r.prototype.push=function(e,t,n,i){e={type:e,value:null,lineno:i[0][0],col_offset:i[0][1],children:[]},this.stack[this.stack.length-1]={dfa:this.stack[this.stack.length-1].dfa,state:n,node:this.stack[this.stack.length-1].node},this.stack.push({dfa:t,state:0,node:e})},r.prototype.pop=function(){var e=this.stack.pop().node;e&&(0!==this.stack.length?this.stack[this.stack.length-1].node.children.push(e):(this.rootnode=e,this.rootnode.used_names=this.used_names))},ti.parse=function(e,t){var n=a(e);"\n"!==t.substr(t.length-1,1)&&(t+="\n");for(var i,r=t.split("\n"),s=0;r.length>s;++s)i=n(r[s]+(s===r.length-1?"":"\n"));return i},ti.parseTreeDump=function(e,t){t=t||"";var n;if(n=""+t,e.type>=256){n+=ti.ParseTables.number2symbol[e.type]+"\n";for(var i=0;e.children.length>i;++i)n+=ti.parseTreeDump(e.children[i],t+"  ")}else n+=ti.Tokenizer.tokenNames[e.type]+": "+new ti.builtin.str(e.value).$r().v+"\n";return n},ei.exportSymbol("Sk.parse",ti.parse),ei.exportSymbol("Sk.parseTreeDump",ti.parseTreeDump),F.prototype._astname="Module",F.prototype._fields=["body",function(e){return e.body}],B.prototype._astname="Interactive",B.prototype._fields=["body",function(e){return e.body}],G.prototype._astname="Expression",G.prototype._fields=["body",function(e){return e.body}],j.prototype._astname="Suite",j.prototype._fields=["body",function(e){return e.body}],V.prototype._astname="FunctionDef",V.prototype._fields=["name",function(e){return e.name},"args",function(e){return e.args},"body",function(e){return e.body},"decorator_list",function(e){return e.decorator_list}],W.prototype._astname="ClassDef",W.prototype._fields=["name",function(e){return e.name},"bases",function(e){return e.bases},"body",function(e){return e.body},"decorator_list",function(e){return e.decorator_list}],J.prototype._astname="Return",J.prototype._fields=["value",function(e){return e.value}],Y.prototype._astname="Delete",Y.prototype._fields=["targets",function(e){return e.targets}],q.prototype._astname="Assign",q.prototype._fields=["targets",function(e){return e.targets},"value",function(e){return e.value}],X.prototype._astname="AugAssign",X.prototype._fields=["target",function(e){return e.target},"op",function(e){return e.op},"value",function(e){return e.value}],K.prototype._astname="Print",K.prototype._fields=["dest",function(e){return e.dest},"values",function(e){return e.values},"nl",function(e){return e.nl}],Q.prototype._astname="For",Q.prototype._fields=["target",function(e){return e.target},"iter",function(e){return e.iter},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Z.prototype._astname="While",Z.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],et.prototype._astname="If",et.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],tt.prototype._astname="With",tt.prototype._fields=["context_expr",function(e){return e.context_expr},"optional_vars",function(e){return e.optional_vars},"body",function(e){return e.body}],nt.prototype._astname="Raise",nt.prototype._fields=["type",function(e){return e.type},"inst",function(e){return e.inst},"tback",function(e){return e.tback}],it.prototype._astname="TryExcept",it.prototype._fields=["body",function(e){return e.body},"handlers",function(e){return e.handlers},"orelse",function(e){return e.orelse}],rt.prototype._astname="TryFinally",rt.prototype._fields=["body",function(e){return e.body},"finalbody",function(e){return e.finalbody}],st.prototype._astname="Assert",st.prototype._fields=["test",function(e){return e.test},"msg",function(e){return e.msg}],at.prototype._astname="Import",at.prototype._fields=["names",function(e){return e.names}],ot.prototype._astname="ImportFrom",ot.prototype._fields=["module",function(e){return e.module},"names",function(e){return e.names},"level",function(e){return e.level}],lt.prototype._astname="Exec",lt.prototype._fields=["body",function(e){return e.body},"globals",function(e){return e.globals},"locals",function(e){return e.locals}],ut.prototype._astname="Global",ut.prototype._fields=["names",function(e){return e.names}],ct.prototype._astname="Expr",ct.prototype._fields=["value",function(e){return e.value}],ft.prototype._astname="Pass",ft.prototype._fields=[],ht.prototype._astname="Break",ht.prototype._fields=[],pt.prototype._astname="Continue",pt.prototype._fields=[],dt.prototype._astname="BoolOp",dt.prototype._fields=["op",function(e){return e.op},"values",function(e){return e.values}],mt.prototype._astname="BinOp",mt.prototype._fields=["left",function(e){return e.left},"op",function(e){return e.op},"right",function(e){return e.right}],bt.prototype._astname="UnaryOp",bt.prototype._fields=["op",function(e){return e.op},"operand",function(e){return e.operand}],gt.prototype._astname="Lambda",gt.prototype._fields=["args",function(e){return e.args},"body",function(e){return e.body}],vt.prototype._astname="IfExp",vt.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],_t.prototype._astname="Dict",_t.prototype._fields=["keys",function(e){return e.keys},"values",function(e){return e.values}],Et.prototype._astname="ListComp",Et.prototype._fields=["elt",function(e){return e.elt},"generators",function(e){return e.generators}],yt.prototype._astname="GeneratorExp",yt.prototype._fields=["elt",function(e){return e.elt},"generators",function(e){return e.generators}],Tt.prototype._astname="Yield",Tt.prototype._fields=["value",function(e){return e.value}],St.prototype._astname="Compare",St.prototype._fields=["left",function(e){return e.left},"ops",function(e){return e.ops},"comparators",function(e){return e.comparators}],wt.prototype._astname="Call",wt.prototype._fields=["func",function(e){return e.func},"args",function(e){return e.args},"keywords",function(e){return e.keywords},"starargs",function(e){return e.starargs},"kwargs",function(e){return e.kwargs}],kt.prototype._astname="Num",kt.prototype._fields=["n",function(e){return e.n}],xt.prototype._astname="Str",xt.prototype._fields=["s",function(e){return e.s}],Rt.prototype._astname="Attribute",Rt.prototype._fields=["value",function(e){return e.value},"attr",function(e){return e.attr},"ctx",function(e){return e.ctx}],Pt.prototype._astname="Subscript",Pt.prototype._fields=["value",function(e){return e.value},"slice",function(e){return e.slice},"ctx",function(e){return e.ctx}],Ot.prototype._astname="Name",Ot.prototype._fields=["id",function(e){return e.id},"ctx",function(e){return e.ctx}],Ct.prototype._astname="List",Ct.prototype._fields=["elts",function(e){return e.elts},"ctx",function(e){return e.ctx}],At.prototype._astname="Tuple",At.prototype._fields=["elts",function(e){return e.elts},"ctx",function(e){return e.ctx}],o.prototype._astname="Load",o.prototype._isenum=!0,l.prototype._astname="Store",l.prototype._isenum=!0,u.prototype._astname="Del",u.prototype._isenum=!0,c.prototype._astname="AugLoad",c.prototype._isenum=!0,f.prototype._astname="AugStore",f.prototype._isenum=!0,h.prototype._astname="Param",h.prototype._isenum=!0,Mt.prototype._astname="Ellipsis",Mt.prototype._fields=[],$t.prototype._astname="Slice",$t.prototype._fields=["lower",function(e){return e.lower},"upper",function(e){return e.upper},"step",function(e){return e.step}],Ht.prototype._astname="ExtSlice",Ht.prototype._fields=["dims",function(e){return e.dims}],Dt.prototype._astname="Index",Dt.prototype._fields=["value",function(e){return e.value}],p.prototype._astname="And",p.prototype._isenum=!0,d.prototype._astname="Or",d.prototype._isenum=!0,m.prototype._astname="Add",m.prototype._isenum=!0,b.prototype._astname="Sub",b.prototype._isenum=!0,g.prototype._astname="Mult",g.prototype._isenum=!0,v.prototype._astname="Div",v.prototype._isenum=!0,_.prototype._astname="Mod",_.prototype._isenum=!0,E.prototype._astname="Pow",E.prototype._isenum=!0,y.prototype._astname="LShift",y.prototype._isenum=!0,T.prototype._astname="RShift",T.prototype._isenum=!0,S.prototype._astname="BitOr",S.prototype._isenum=!0,w.prototype._astname="BitXor",w.prototype._isenum=!0,k.prototype._astname="BitAnd",k.prototype._isenum=!0,x.prototype._astname="FloorDiv",x.prototype._isenum=!0,R.prototype._astname="Invert",R.prototype._isenum=!0,P.prototype._astname="Not",P.prototype._isenum=!0,O.prototype._astname="UAdd",O.prototype._isenum=!0,C.prototype._astname="USub",C.prototype._isenum=!0,A.prototype._astname="Eq",A.prototype._isenum=!0,M.prototype._astname="NotEq",M.prototype._isenum=!0,$.prototype._astname="Lt",$.prototype._isenum=!0,H.prototype._astname="LtE",H.prototype._isenum=!0,D.prototype._astname="Gt",D.prototype._isenum=!0,N.prototype._astname="GtE",N.prototype._isenum=!0,I.prototype._astname="Is",I.prototype._isenum=!0,L.prototype._astname="IsNot",L.prototype._isenum=!0,z.prototype._astname="In",z.prototype._isenum=!0,U.prototype._astname="NotIn",U.prototype._isenum=!0,Nt.prototype._astname="comprehension",Nt.prototype._fields=["target",function(e){return e.target},"iter",function(e){return e.iter},"ifs",function(e){return e.ifs}],It.prototype._astname="ExceptHandler",It.prototype._fields=["type",function(e){return e.type},"name",function(e){return e.name},"body",function(e){return e.body}],Lt.prototype._astname="arguments",Lt.prototype._fields=["args",function(e){return e.args},"vararg",function(e){return e.vararg},"kwarg",function(e){return e.kwarg},"defaults",function(e){return e.defaults}],zt.prototype._astname="keyword",zt.prototype._fields=["arg",function(e){return e.arg},"value",function(e){return e.value}],Ut.prototype._astname="alias",Ut.prototype._fields=["name",function(e){return e.name},"asname",function(e){return e.asname}];var Hi=ti.ParseTables.sym,Di=ti.Tokenizer.Tokens,Ni={};(function(){Ni[Di.T_VBAR]=S,Ni[Di.T_VBAR]=S,Ni[Di.T_CIRCUMFLEX]=w,Ni[Di.T_AMPER]=k,Ni[Di.T_LEFTSHIFT]=y,Ni[Di.T_RIGHTSHIFT]=T,Ni[Di.T_PLUS]=m,Ni[Di.T_MINUS]=b,Ni[Di.T_STAR]=g,Ni[Di.T_SLASH]=v,Ni[Di.T_DOUBLESLASH]=x,Ni[Di.T_PERCENT]=_})(),ti.astFromParse=function(e,t){var n,i=new Ft("utf-8",t),r=[],s=0;switch(e.type){case Hi.file_input:for(var a=0;Bt(e)-1>a;++a)if(n=Gt(e,a),e.type!==Di.T_NEWLINE){jt(n,Hi.stmt);var o=Wt(n);if(1===o)r[s++]=Gn(i,n);else{n=Gt(n,0),jt(n,Hi.simple_stmt);for(var l=0;o>l;++l)r[s++]=Gn(i,Gt(n,2*l))}}return new F(r);case Hi.eval_input:ei.asserts.fail("todo;");case Hi.single_input:ei.asserts.fail("todo;");default:ei.asserts.fail("todo;")}},ti.astDump=function(e){var t=function(e){for(var t="",n=0;e>n;++n)t+=" ";return t},n=function(e,i){if(null===e)return i+"None";if(e.prototype&&void 0!==e.prototype._astname&&e.prototype._isenum)return i+e.prototype._astname+"()";if(void 0!==e._astname){for(var r=t(e._astname.length+1),s=[],a=0;e._fields.length>a;a+=2){var o=e._fields[a],l=e._fields[a+1](e),u=t(o.length+1);s.push([o,n(l,i+r+u)])}for(o=[],a=0;s.length>a;++a)l=s[a],o.push(l[0]+"="+l[1].replace(/^\s+/,""));return a=o.join(",\n"+i+r),i+e._astname+"("+a+")"}if(ei.isArrayLike(e)){for(r=[],a=0;e.length>a;++a)r.push(n(e[a],i+" "));return a=r.join(",\n"),i+"["+a.replace(/^\s+/,"")+"]"}return a=!0===e?"True":!1===e?"False":e instanceof ti.builtin.lng?e.tp$str().v:e instanceof ti.builtin.str?e.$r().v:""+e,i+a};return n(e,"")},ei.exportSymbol("Sk.astFromParse",ti.astFromParse),ei.exportSymbol("Sk.astDump",ti.astDump);var Ii=1,Li=2,zi=4,Ui=8,Fi=512,Bi=1024,Gi=Li|zi|Bi,ji=11,Vi=7,Wi=1,Ji=2,Yi=3,qi=4,Xi=5,Ki="module",Qi="function",Zi="class";jn.prototype.get_name=function(){return this.__name},jn.prototype.is_referenced=function(){return!!(this.__flags&Ui)},jn.prototype.is_parameter=function(){return!!(this.__flags&zi)},jn.prototype.is_global=function(){return this.__scope===Yi||this.__scope==Ji},jn.prototype.is_declared_global=function(){return this.__scope==Ji},jn.prototype.is_local=function(){return!!(this.__flags&Gi)},jn.prototype.is_free=function(){return this.__scope==qi},jn.prototype.is_imported=function(){return!!(this.__flags&Bi)},jn.prototype.is_assigned=function(){return!!(this.__flags&Li)},jn.prototype.is_namespace=function(){return this.__namespaces&&this.__namespaces.length>0},jn.prototype.get_namespaces=function(){return this.__namespaces};var er=0;Vn.prototype.get_type=function(){return this.blockType},Vn.prototype.get_name=function(){return this.name},Vn.prototype.get_lineno=function(){return this.lineno},Vn.prototype.is_nested=function(){return this.isNested},Vn.prototype.has_children=function(){return this.children.length>0},Vn.prototype.get_identifiers=function(){return this._identsMatching(function(){return!0})},Vn.prototype.lookup=function(e){if(this.symbols.hasOwnProperty(e))e=this.symbols[e];else{var t=this.symFlags[e],n=this.__check_children(e);e=this.symbols[e]=new jn(e,t,n)}return e},Vn.prototype.__check_children=function(e){for(var t=[],n=0;this.children.length>n;++n){var i=this.children[n];i.name===e&&t.push(i)}return t},Vn.prototype._identsMatching=function(e){var t,n=[];for(t in this.symFlags)this.symFlags.hasOwnProperty(t)&&e(this.symFlags[t])&&n.push(t);return n.sort(),n},Vn.prototype.get_parameters=function(){return ei.asserts.assert("function"==this.get_type(),"get_parameters only valid for function scopes"),this._funcParams||(this._funcParams=this._identsMatching(function(e){return e&zi})),this._funcParams},Vn.prototype.get_locals=function(){return ei.asserts.assert("function"==this.get_type(),"get_locals only valid for function scopes"),this._funcLocals||(this._funcLocals=this._identsMatching(function(e){return e&Gi})),this._funcLocals},Vn.prototype.get_globals=function(){return ei.asserts.assert("function"==this.get_type(),"get_globals only valid for function scopes"),this._funcGlobals||(this._funcGlobals=this._identsMatching(function(e){return e=e>>ji&Vi,e==Yi||e==Ji})),this._funcGlobals},Vn.prototype.get_frees=function(){return ei.asserts.assert("function"==this.get_type(),"get_frees only valid for function scopes"),this._funcFrees||(this._funcFrees=this._identsMatching(function(e){return(e>>ji&Vi)==qi})),this._funcFrees},Vn.prototype.get_methods=function(){if(ei.asserts.assert("class"==this.get_type(),"get_methods only valid for class scopes"),!this._classMethods){for(var e=[],t=0;this.children.length>t;++t)e.push(this.children[t].name);e.sort(),this._classMethods=e}return this._classMethods},Vn.prototype.getScope=function(e){return e=this.symFlags[e],void 0===e?0:e>>ji&Vi},Wn.prototype.getStsForAst=function(e){return ei.asserts.assert(void 0!==e.scopeId,"ast wasn't added to st?"),e=this.stss[e.scopeId],ei.asserts.assert(void 0!==e,"unknown sym tab entry"),e},Wn.prototype.SEQStmt=function(e){ei.asserts.assert(ei.isArrayLike(e),"SEQ: nodes isn't array? got %s",e);for(var t=e.length,n=0;t>n;++n){var i=e[n];i&&this.visitStmt(i)}},Wn.prototype.SEQExpr=function(e){ei.asserts.assert(ei.isArrayLike(e),"SEQ: nodes isn't array? got %s",e);for(var t=e.length,n=0;t>n;++n){var i=e[n];i&&this.visitExpr(i)}},Wn.prototype.enterBlock=function(e,t,n,i){e=Kn(e);var r=null;this.cur&&(r=this.cur,this.stack.push(this.cur)),this.cur=new Vn(this,e,t,n,i),"top"===e&&(this.global=this.cur.symFlags),r&&r.children.push(this.cur)},Wn.prototype.exitBlock=function(){this.cur=null,this.stack.length>0&&(this.cur=this.stack.pop())},Wn.prototype.visitParams=function(e,t){for(var n=0;e.length>n;++n){var i=e[n];if(i.constructor!==Ot)throw new ti.builtin.SyntaxError("invalid expression in parameter list",this.filename);ei.asserts.assert(i.ctx===h||i.ctx===l&&!t),this.addDef(i.id,zi,i.lineno)}},Wn.prototype.visitArguments=function(e,t){e.args&&this.visitParams(e.args,!0),e.vararg&&(this.addDef(e.vararg,zi,t),this.cur.varargs=!0),e.kwarg&&(this.addDef(e.kwarg,zi,t),this.cur.varkeywords=!0)},Wn.prototype.newTmpname=function(e){this.addDef(new ti.builtin.str("_["+ ++this.tmpname+"]"),Li,e)},Wn.prototype.addDef=function(e,t,n){var i=Qn(this.curClass,new ti.builtin.str(e)).v,i=Kn(i),r=this.cur.symFlags[i];if(void 0!==r){if(t&zi&&r&zi)throw new ti.builtin.SyntaxError("duplicate argument '"+e.v+"' in function definition",this.filename,n);r|=t}else r=t;this.cur.symFlags[i]=r,t&zi?this.cur.varnames.push(i):t&Ii&&(r=t,e=this.global[i],void 0!==e&&(r|=e),this.global[i]=r)},Wn.prototype.visitSlice=function(e){switch(e.constructor){case $t:e.lower&&this.visitExpr(e.lower),e.upper&&this.visitExpr(e.upper),e.step&&this.visitExpr(e.step);break;case Ht:for(var t=0;e.dims.length>t;++t)this.visitSlice(e.dims[t]);break;case Dt:this.visitExpr(e.value)}},Wn.prototype.visitStmt=function(e){switch(ei.asserts.assert(void 0!==e,"visitStmt called with undefined"),e.constructor){case V:this.addDef(e.name,Li,e.lineno),e.args.defaults&&this.SEQExpr(e.args.defaults),e.decorator_list&&this.SEQExpr(e.decorator_list),this.enterBlock(e.name.v,Qi,e,e.lineno),this.visitArguments(e.args,e.lineno),this.SEQStmt(e.body),this.exitBlock();break;case W:this.addDef(e.name,Li,e.lineno),this.SEQExpr(e.bases),e.decorator_list&&this.SEQExpr(e.decorator_list),this.enterBlock(e.name.v,Zi,e,e.lineno);var t=this.curClass;this.curClass=e.name,this.SEQStmt(e.body),this.curCalss=t,this.exitBlock();break;case J:if(e.value&&(this.visitExpr(e.value),this.cur.returnsValue=!0,this.cur.generator))throw new ti.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case Y:this.SEQExpr(e.targets);break;case q:this.SEQExpr(e.targets),this.visitExpr(e.value);break;case X:this.visitExpr(e.target),this.visitExpr(e.value);break;case K:e.dest&&this.visitExpr(e.dest),this.SEQExpr(e.values);break;case Q:this.visitExpr(e.target),this.visitExpr(e.iter),this.SEQStmt(e.body),e.orelse&&this.SEQStmt(e.orelse);break;case Z:this.visitExpr(e.test),this.SEQStmt(e.body),e.orelse&&this.SEQStmt(e.orelse);break;case et:this.visitExpr(e.test),this.SEQStmt(e.body),e.orelse&&this.SEQStmt(e.orelse);break;case nt:e.type&&(this.visitExpr(e.type),e.inst&&(this.visitExpr(e.inst),e.tback&&this.visitExpr(e.tback)));break;case it:this.SEQStmt(e.body),this.SEQStmt(e.orelse),this.visitExcepthandlers(e.handlers);break;case rt:this.SEQStmt(e.body),this.SEQStmt(e.finalbody);break;case st:this.visitExpr(e.test),e.msg&&this.visitExpr(e.msg);break;case at:case ot:this.visitAlias(e.names,e.lineno);break;case lt:this.visitExpr(e.body),e.globals&&(this.visitExpr(e.globals),e.locals&&this.visitExpr(e.locals));break;case ut:for(var t=e.names.length,n=0;t>n;++n){var i=Qn(this.curClass,e.names[n]).v,i=Kn(i),r=this.cur.symFlags[i];if(r&(Li|Ui)){if(r&Li)throw new ti.builtin.SyntaxError("name '"+i+"' is assigned to before global declaration",this.filename,e.lineno);throw new ti.builtin.SyntaxError("name '"+i+"' is used prior to global declaration",this.filename,e.lineno)}this.addDef(new ti.builtin.str(i),Ii,e.lineno)}break;case ct:this.visitExpr(e.value);break;case ft:case ht:case pt:break;case tt:this.newTmpname(e.lineno),this.visitExpr(e.context_expr),e.optional_vars&&(this.newTmpname(e.lineno),this.visitExpr(e.optional_vars)),this.SEQStmt(e.body);break;default:ei.asserts.fail("Unhandled type "+e.constructor.name+" in visitStmt")}},Wn.prototype.visitExpr=function(e){switch(ei.asserts.assert(void 0!==e,"visitExpr called with undefined"),e.constructor){case dt:this.SEQExpr(e.values);break;case mt:this.visitExpr(e.left),this.visitExpr(e.right);break;case bt:this.visitExpr(e.operand);break;case gt:this.addDef(new ti.builtin.str("lambda"),Li,e.lineno),e.args.defaults&&this.SEQExpr(e.args.defaults),this.enterBlock("lambda",Qi,e,e.lineno),this.visitArguments(e.args,e.lineno),this.visitExpr(e.body),this.exitBlock();break;case vt:this.visitExpr(e.test),this.visitExpr(e.body),this.visitExpr(e.orelse);break;case _t:this.SEQExpr(e.keys),this.SEQExpr(e.values);break;case Et:this.newTmpname(e.lineno),this.visitExpr(e.elt),this.visitComprehension(e.generators,0);break;case yt:this.visitGenexp(e);break;case Tt:if(e.value&&this.visitExpr(e.value),this.cur.generator=!0,this.cur.returnsValue)throw new ti.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case St:this.visitExpr(e.left),this.SEQExpr(e.comparators);break;case wt:this.visitExpr(e.func),this.SEQExpr(e.args);for(var t=0;e.keywords.length>t;++t)this.visitExpr(e.keywords[t].value);e.starargs&&this.visitExpr(e.starargs),e.kwargs&&this.visitExpr(e.kwargs);break;case kt:case xt:break;case Rt:this.visitExpr(e.value);break;case Pt:this.visitExpr(e.value),this.visitSlice(e.slice);break;case Ot:this.addDef(e.id,e.ctx===o?Ui:Li,e.lineno);break;case Ct:case At:this.SEQExpr(e.elts);break;default:ei.asserts.fail("Unhandled type "+e.constructor.name+" in visitExpr")}},Wn.prototype.visitComprehension=function(e,t){for(var n=e.length,i=t;n>i;++i){var r=e[i];this.visitExpr(r.target),this.visitExpr(r.iter),this.SEQExpr(r.ifs)}},Wn.prototype.visitAlias=function(e,t){for(var n=0;e.length>n;++n){var i=e[n],r=i=null===i.asname?i.name.v:i.asname.v,s=i.indexOf(".");if(-1!==s&&(r=i.substr(0,s)),"*"!==i)this.addDef(new ti.builtin.str(r),Bi,t);else if(this.cur.blockType!==Ki)throw new ti.builtin.SyntaxError("import * only allowed at module level",this.filename)}},Wn.prototype.visitGenexp=function(e){var t=e.generators[0];this.visitExpr(t.iter),this.enterBlock("genexpr",Qi,e,e.lineno),this.cur.generator=!0,this.addDef(new ti.builtin.str(".0"),zi,e.lineno),this.visitExpr(t.target),this.SEQExpr(t.ifs),this.visitComprehension(e.generators,1),this.visitExpr(e.elt),this.exitBlock()},Wn.prototype.visitExcepthandlers=function(e){for(var t,n=0;t=e[n];++n)t.type&&this.visitExpr(t.type),t.name&&this.visitExpr(t.name),this.SEQStmt(t.body)},Wn.prototype.analyzeBlock=function(e,t,n,i){var r={},s={},a={},o={},l={};e.blockType==Zi&&(Jn(a,i),t&&Jn(o,t));for(var u in e.symFlags)this.analyzeName(e,s,u,e.symFlags[u],t,r,n,i);for(e.blockType!==Zi&&(e.blockType===Qi&&Jn(o,r),t&&Jn(o,t),Jn(a,i)),i={},r=e.children.length,u=0;r>u;++u){var c=e.children[u];this.analyzeChildBlock(c,o,l,a,i),(c.hasFree||c.childHasFree)&&(e.childHasFree=!0)}Jn(l,i),e.blockType===Qi&&this.analyzeCells(s,l),this.updateSymbols(e.symFlags,s,t,l,e.blockType===Zi),Jn(n,l)},Wn.prototype.analyzeChildBlock=function(e,t,n,i,r){var s={};Jn(s,t),t={},Jn(t,n),n={},Jn(n,i),this.analyzeBlock(e,s,t,n),Jn(r,t)},Wn.prototype.analyzeCells=function(e,t){for(var n in e)e[n]===Wi&&void 0!==t[n]&&(e[n]=Xi,delete t[n])},Wn.prototype.updateSymbols=function(e,t,n,i,r){for(var s in e){var a=e[s],a=a|t[s]<<ji;e[s]=a}t=qi<<ji;for(s in i)i=e[s],void 0!==i?r&&i&(Gi|Ii)&&(e[s]=i|Fi):void 0!==n[s]&&(e[s]=t)},Wn.prototype.analyzeName=function(e,t,n,i,r,s,a,o){if(i&Ii){if(i&zi)throw new ti.builtin.SyntaxError("name '"+n+"' is local and global",this.filename,e.lineno);t[n]=Ji,o[n]=null,r&&void 0!==r[n]&&delete r[n]}else i&Gi?(t[n]=Wi,s[n]=null,delete o[n]):r&&void 0!==r[n]?(t[n]=qi,e.hasFree=!0,a[n]=null):(o&&void 0!==o[n]||!e.isNested||(e.hasFree=!0),t[n]=Yi)},Wn.prototype.analyze=function(){this.analyzeBlock(this.top,null,{},{})},ti.symboltable=function(e,t){var n=new Wn(t);n.enterBlock("top",Ki,e,0),n.top=n.cur;for(var i=0;e.body.length>i;++i)n.visitStmt(e.body[i]);return n.exitBlock(),n.analyze(),n},ti.dumpSymtab=function(e){var t=function(e){return e?"True":"False"},n=function(e){for(var t=[],n=0;e.length>n;++n)t.push(new ti.builtin.str(e[n]).$r().v);return"["+t.join(", ")+"]"},i=function(e,r){void 0===r&&(r="");var s;s=""+(r+"Sym_type: "+e.get_type()+"\n"),s+=r+"Sym_name: "+e.get_name()+"\n",s+=r+"Sym_lineno: "+e.get_lineno()+"\n",s+=r+"Sym_nested: "+t(e.is_nested())+"\n",s+=r+"Sym_haschildren: "+t(e.has_children())+"\n","class"===e.get_type()?s+=r+"Class_methods: "+n(e.get_methods())+"\n":"function"===e.get_type()&&(s+=r+"Func_params: "+n(e.get_parameters())+"\n",s+=r+"Func_locals: "+n(e.get_locals())+"\n",s+=r+"Func_globals: "+n(e.get_globals())+"\n",s+=r+"Func_frees: "+n(e.get_frees())+"\n"),s+=r+"-- Identifiers --\n";for(var a=e.get_identifiers(),o=a.length,l=0;o>l;++l){var u=e.lookup(a[l]);s+=r+"name: "+u.get_name()+"\n",s+=r+"  is_referenced: "+t(u.is_referenced())+"\n",s+=r+"  is_imported: "+t(u.is_imported())+"\n",s+=r+"  is_parameter: "+t(u.is_parameter())+"\n",s+=r+"  is_global: "+t(u.is_global())+"\n",s+=r+"  is_declared_global: "+t(u.is_declared_global())+"\n",s+=r+"  is_local: "+t(u.is_local())+"\n",s+=r+"  is_free: "+t(u.is_free())+"\n",s+=r+"  is_assigned: "+t(u.is_assigned())+"\n",s+=r+"  is_namespace: "+t(u.is_namespace())+"\n";var u=u.get_namespaces(),c=u.length;s+=r+"  namespaces: [\n";for(var f=[],h=0;c>h;++h)f.push(i(u[h],r+"    "));s+=f.join("\n"),s+=r+"  ]\n"}return s};return i(e.top,"")},ei.exportSymbol("Sk.symboltable",ti.symboltable),ei.exportSymbol("Sk.dumpSymtab",ti.dumpSymtab);var tr;ti.gensymcount=0,qn.prototype.activateScope=function(){var e=this;tr=function(){for(var t=e.blocks[e.curblock],n=0;arguments.length>n;++n)t.push(arguments[n])}},Yn.prototype.getSourceLine=function(e){return ei.asserts.assert(this.source),this.source[e-1]},Yn.prototype.annotateSource=function(e){if(this.source){var t=e.lineno;e=e.col_offset,tr("\n//\n// line ",t,":\n// ",this.getSourceLine(t),"\n// ");for(var n=0;e>n;++n)tr(" ");tr("^\n//\n"),tr("\nSk.currLineNo = ",t,";\nSk.currColNo = ",e,"\n\n"),tr("\nSk.currFilename = '",this.filename,"';\n\n")}},Yn.prototype.gensym=function(e){return e="$"+(e||""),e+=ti.gensymcount++},Yn.prototype.niceName=function(e){return this.gensym(e.replace("<","").replace(">","").replace(" ","_"))};var nr={"abstract":!0,as:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"continue":!0,"const":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,is:!0,"long":!0,namespace:!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!1,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"throws":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,use:!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0},ir={__defineGetter__:!0,__defineSetter__:!0,apply:!0,call:!0,eval:!0,hasOwnProperty:!0,isPrototypeOf:!0,__lookupGetter__:!0,__lookupSetter__:!0,__noSuchMethod__:!0,propertyIsEnumerable:!0,toSource:!0,toLocaleString:!0,toString:!0,unwatch:!0,valueOf:!0,watch:!0};Yn.prototype._gr=function(e){var t=this.gensym(e);tr("var ",t,"=");for(var n=1;arguments.length>n;++n)tr(arguments[n]);return tr(";"),t},Yn.prototype._interruptTest=function(){tr("if (Sk.execStart === undefined) {Sk.execStart=new Date()}"),tr("if (Sk.execLimit != null && new Date() - Sk.execStart > Sk.execLimit) {throw new Sk.builtin.TimeLimitError(Sk.timeoutMsg())}")},Yn.prototype._jumpfalse=function(e,t){var n=this._gr("jfalse","(",e,"===false||!Sk.misceval.isTrue(",e,"))");this._interruptTest(),tr("if(",n,"){/*test failed */$blk=",t,";continue;}")},Yn.prototype._jumpundef=function(e,t){this._interruptTest(),tr("if(",e,"===undefined){$blk=",t,";continue;}")},Yn.prototype._jumptrue=function(e,t){var n=this._gr("jtrue","(",e,"===true||Sk.misceval.isTrue(",e,"))");this._interruptTest(),tr("if(",n,"){/*test passed */$blk=",t,";continue;}")},Yn.prototype._jump=function(e){this._interruptTest(),tr("$blk=",e,";/* jump */continue;")},Yn.prototype.ctupleorlist=function(e,t,n){if(ei.asserts.assert("tuple"===n||"list"===n),e.ctx===l)for(var i=0;e.elts.length>i;++i)this.vexpr(e.elts[i],"Sk.abstr.objectGetItem("+t+","+i+")");else if(e.ctx===o){for(t=[],i=0;e.elts.length>i;++i)t.push(this._gr("elem",this.vexpr(e.elts[i])));return this._gr("load"+n,"new Sk.builtins['",n,"']([",t,"])")}},Yn.prototype.cdict=function(e){ei.asserts.assert(e.values.length===e.keys.length);for(var t=[],n=0;e.values.length>n;++n){var i=this.vexpr(e.values[n]);t.push(this.vexpr(e.keys[n])),t.push(i)}return this._gr("loaddict","new Sk.builtins['dict']([",t,"])")},Yn.prototype.clistcompgen=function(e,t,n,i){var r=this.newBlock("list gen start"),s=this.newBlock("list gen skip"),a=this.newBlock("list gen anchor"),o=t[n],l=this.vexpr(o.iter),l=this._gr("iter","Sk.abstr.iter(",l,")");this._jump(r),this.setBlock(r),l=this._gr("next","Sk.abstr.iternext(",l,")"),this._jumpundef(l,a),this.vexpr(o.target,l);for(var l=o.ifs.length,u=0;l>u;++u){var c=this.vexpr(o.ifs[u]);this._jumpfalse(c,r)}return++n<t.length&&this.clistcompgen(e,t,n,i),n>=t.length&&(t=this.vexpr(i),tr(e,".v.push(",t,");"),this._jump(s),this.setBlock(s)),this._jump(r),this.setBlock(a),e},Yn.prototype.clistcomp=function(e){ei.asserts.assert(e instanceof Et);var t=this._gr("_compr","new Sk.builtins['list']([])");return this.clistcompgen(t,e.generators,0,e.elt)},Yn.prototype.cyield=function(e){if(this.u.ste.blockType!==Qi)throw new SyntaxError("'yield' outside function");var t="null";return e.value&&(t=this.vexpr(e.value)),e=this.newBlock("after yield"),tr("return [/*resume*/",e,",/*ret*/",t,"];"),this.setBlock(e),"$gen.gi$sentvalue"},Yn.prototype.ccompare=function(e){ei.asserts.assert(e.ops.length===e.comparators.length);for(var t=this.vexpr(e.left),n=e.ops.length,i=this.newBlock("done"),r=this._gr("compareres","null"),s=0;n>s;++s){var a=this.vexpr(e.comparators[s]),t=this._gr("compare","Sk.builtin.bool(Sk.misceval.richCompareBool(",t,",",a,",'",e.ops[s].prototype._astname,"'))");tr(r,"=",t,";"),this._jumpfalse(t,i),t=a}return this._jump(i),this.setBlock(i),r},Yn.prototype.ccall=function(e){var t=this.vexpr(e.func),n=this.vseqexpr(e.args);if(e.keywords.length>0||e.starargs||e.kwargs){for(var i=[],r=0;e.keywords.length>r;++r)i.push("'"+e.keywords[r].arg.v+"'"),i.push(this.vexpr(e.keywords[r].value));var i="["+i.join(",")+"]",s=r="undefined";return e.starargs&&(r=this.vexpr(e.starargs)),e.kwargs&&(s=this.vexpr(e.kwargs)),this._gr("call","Sk.misceval.call(",t,",",s,",",r,",",i,n.length>0?",":"",n,")")}return this._gr("call","Sk.misceval.callsim(",t,n.length>0?",":"",n,")")},Yn.prototype.cslice=function(e){ei.asserts.assert(e instanceof $t);var t=e.lower?this.vexpr(e.lower):"null",n=e.upper?this.vexpr(e.upper):"null";return e=e.step?this.vexpr(e.step):"null",this._gr("slice","new Sk.builtins['slice'](",t,",",n,",",e,")")},Yn.prototype.vslicesub=function(e){var t;switch(e.constructor){case Number:case String:t=e;break;case Dt:t=this.vexpr(e.value);break;case $t:t=this.cslice(e);break;case Mt:case Ht:ei.asserts.fail("todo;");break;default:ei.asserts.fail("invalid subscript kind")}return t},Yn.prototype.vslice=function(e,t,n,i){return e=this.vslicesub(e),this.chandlesubscr(t,n,e,i)},Yn.prototype.chandlesubscr=function(e,t,n,i){return e===o||e===c?this._gr("lsubscr","Sk.abstr.objectGetItem(",t,",",n,")"):(e===l||e===f?tr("Sk.abstr.objectSetItem(",t,",",n,",",i,");"):e===u?tr("Sk.abstr.objectDelItem(",t,",",n,");"):ei.asserts.fail("handlesubscr fail"),void 0)
},Yn.prototype.cboolop=function(e){ei.asserts.assert(e instanceof dt);var t;t=e.op===p?this._jumpfalse:this._jumptrue;var n=this.newBlock("end of boolop");e=e.values;for(var i,r=e.length,s=0;r>s;++s){var a=this.vexpr(e[s]);0===s&&(i=this._gr("boolopsucc",a)),tr(i,"=",a,";"),t.call(this,a,n)}return this._jump(n),this.setBlock(n),i},Yn.prototype.vexpr=function(e,t,n){switch(e.lineno>this.u.lineno&&(this.u.lineno=e.lineno,this.u.linenoSet=!1),e.constructor){case dt:return this.cboolop(e);case mt:return this._gr("binop","Sk.abstr.numberBinOp(",this.vexpr(e.left),",",this.vexpr(e.right),",'",e.op.prototype._astname,"')");case bt:return this._gr("unaryop","Sk.abstr.numberUnaryOp(",this.vexpr(e.operand),",'",e.op.prototype._astname,"')");case gt:return this.clambda(e);case vt:return this.cifexp(e);case _t:return this.cdict(e);case Et:return this.clistcomp(e);case yt:return this.cgenexp(e);case Tt:return this.cyield(e);case St:return this.ccompare(e);case wt:return t=this.ccall(e),this.annotateSource(e),t;case kt:if("number"==typeof e.n)return e.n;if(e.n instanceof ti.builtin.nmber)return"new Sk.builtin.nmber("+e.n.v+",'"+e.n.skType+"')";if(e.n instanceof ti.builtin.lng)return"Sk.longFromStr('"+e.n.tp$str().v+"')";ei.asserts.fail("unhandled Num type");case xt:return this._gr("str","new Sk.builtins['str'](",e.s.$r().v,")");case Rt:var i;e.ctx!==f&&(i=this.vexpr(e.value));var r=e.attr.$r().v,r=r.substring(1,r.length-1),r=Qn(this.u.private_,new ti.builtin.str(r)).v,r=Xn(r),r=Kn(r);switch(e.ctx){case c:case o:return this._gr("lattr","Sk.abstr.gattr(",i,",'",r,"')");case f:tr("if(",t,"!==undefined){"),i=this.vexpr(n||null),tr("Sk.abstr.sattr(",i,",'",r,"',",t,");"),tr("}");break;case l:tr("Sk.abstr.sattr(",i,",'",r,"',",t,");");break;case u:ei.asserts.fail("todo;");break;default:ei.asserts.fail("invalid attribute expression")}break;case Pt:switch(e.ctx){case c:case o:case l:case u:return this.vslice(e.slice,e.ctx,this.vexpr(e.value),t);case f:tr("if(",t,"!==undefined){"),i=this.vexpr(n||null),this.vslice(e.slice,e.ctx,i,t),tr("}");break;default:ei.asserts.fail("invalid subscript expression")}break;case Ot:return this.nameop(e.id,e.ctx,t);case Ct:return this.ctupleorlist(e,t,"list");case At:return this.ctupleorlist(e,t,"tuple");default:ei.asserts.fail("unhandled case in vexpr")}},Yn.prototype.vseqexpr=function(e,t){ei.asserts.assert(void 0===t||e.length===t.length);for(var n=[],i=0;e.length>i;++i)n.push(this.vexpr(e[i],void 0===t?void 0:t[i]));return n},Yn.prototype.caugassign=function(e){ei.asserts.assert(e instanceof X);var t=e.target;switch(t.constructor){case Rt:var n=new Rt(t.value,t.attr,c,t.lineno,t.col_offset),i=this.vexpr(n),r=this.vexpr(e.value);return e=this._gr("inplbinopattr","Sk.abstr.numberInplaceBinOp(",i,",",r,",'",e.op.prototype._astname,"')"),n.ctx=f,this.vexpr(n,e,t.value);case Pt:return n=this.vslicesub(t.slice),n=new Pt(t.value,n,c,t.lineno,t.col_offset),i=this.vexpr(n),r=this.vexpr(e.value),e=this._gr("inplbinopsubscr","Sk.abstr.numberInplaceBinOp(",i,",",r,",'",e.op.prototype._astname,"')"),n.ctx=f,this.vexpr(n,e,t.value);case Ot:return n=this.nameop(t.id,o),r=this.vexpr(e.value),e=this._gr("inplbinop","Sk.abstr.numberInplaceBinOp(",n,",",r,",'",e.op.prototype._astname,"')"),this.nameop(t.id,l,e);default:ei.asserts.fail("unhandled case in augassign")}},Yn.prototype.exprConstant=function(e){switch(e.constructor){case kt:return ti.misceval.isTrue(e.n);case xt:return ti.misceval.isTrue(e.s);default:return-1}},Yn.prototype.newBlock=function(e){var t=this.u.blocknum++;return this.u.blocks[t]=[],this.u.blocks[t]._name=e||"<unnamed>",t},Yn.prototype.setBlock=function(e){ei.asserts.assert(e>=0&&this.u.blocknum>e),this.u.curblock=e},Yn.prototype.pushBreakBlock=function(e){ei.asserts.assert(e>=0&&this.u.blocknum>e),this.u.breakBlocks.push(e)},Yn.prototype.popBreakBlock=function(){this.u.breakBlocks.pop()},Yn.prototype.pushContinueBlock=function(e){ei.asserts.assert(e>=0&&this.u.blocknum>e),this.u.continueBlocks.push(e)},Yn.prototype.popContinueBlock=function(){this.u.continueBlocks.pop()},Yn.prototype.pushExceptBlock=function(e){ei.asserts.assert(e>=0&&this.u.blocknum>e),this.u.exceptBlocks.push(e)},Yn.prototype.popExceptBlock=function(){this.u.exceptBlocks.pop()},Yn.prototype.pushFinallyBlock=function(e){ei.asserts.assert(e>=0&&this.u.blocknum>e),this.u.finallyBlocks.push(e)},Yn.prototype.popFinallyBlock=function(){this.u.finallyBlocks.pop()},Yn.prototype.setupExcept=function(e){tr("$exc.push(",e,");")},Yn.prototype.endExcept=function(){tr("$exc.pop();")},Yn.prototype.outputLocals=function(e){for(var t={},n=0;e.argnames&&e.argnames.length>n;++n)t[e.argnames[n]]=!0;e.localnames.sort();for(var i=[],n=0;e.localnames.length>n;++n){var r=e.localnames[n];void 0===t[r]&&(i.push(r),t[r]=!0)}return i.length>0?"var "+i.join(",")+"; /* locals */":""},Yn.prototype.outputAllUnits=function(){for(var e="",t=0;this.allUnits.length>t;++t){for(var n=this.allUnits[t],e=e+n.prefixCode,e=e+this.outputLocals(n),e=e+n.varDeclsCode,e=e+n.switchCode,i=n.blocks,r=0;i.length>r;++r)e+="case "+r+": /* --- "+i[r]._name+" --- */",e+=i[r].join(""),e+="goog.asserts.fail('unterminated block');";e+=n.suffixCode}return e},Yn.prototype.cif=function(e){ei.asserts.assert(e instanceof et);var t=this.exprConstant(e.test);if(0===t)e.orelse&&this.vseqstmt(e.orelse);else if(1===t)this.vseqstmt(e.body);else{var n=this.newBlock("end of if"),t=this.newBlock("next branch of if"),i=this.vexpr(e.test);this._jumpfalse(i,t),this.vseqstmt(e.body),this._jump(n),this.setBlock(t),e.orelse&&this.vseqstmt(e.orelse),this._jump(n)}this.setBlock(n)},Yn.prototype.cwhile=function(e){if(0===this.exprConstant(e.test))e.orelse&&this.vseqstmt(e.orelse);else{var t=this.newBlock("while test");this._jump(t),this.setBlock(t);var n=this.newBlock("after while"),i=e.orelse.length>0?this.newBlock("while orelse"):null,r=this.newBlock("while body");this._jumpfalse(this.vexpr(e.test),i?i:n),this._jump(r),this.pushBreakBlock(n),this.pushContinueBlock(t),this.setBlock(r),this.vseqstmt(e.body),this._jump(t),this.popContinueBlock(),this.popBreakBlock(),e.orelse.length>0&&(this.setBlock(i),this.vseqstmt(e.orelse),this._jump(n)),this.setBlock(n)}},Yn.prototype.cfor=function(e){var t=this.newBlock("for start"),n=this.newBlock("for cleanup"),i=this.newBlock("for end");this.pushBreakBlock(i),this.pushContinueBlock(t);var r,s=this.vexpr(e.iter);this.u.ste.generator?(r="$loc."+this.gensym("iter"),tr(r,"=Sk.abstr.iter(",s,");")):r=this._gr("iter","Sk.abstr.iter(",s,")"),this._jump(t),this.setBlock(t),s=this._gr("next","Sk.abstr.iternext(",r,")"),this._jumpundef(s,n),this.vexpr(e.target,s),this.vseqstmt(e.body),this._jump(t),this.setBlock(n),this.popContinueBlock(),this.popBreakBlock(),this.vseqstmt(e.orelse),this._jump(i),this.setBlock(i)},Yn.prototype.craise=function(e){if(e&&e.type&&e.type.id&&"StopIteration"===e.type.id.v)tr("return undefined;");else{var t="";e.inst&&(t=this.vexpr(e.inst),tr("throw new ",this.vexpr(e.type),"(",t,");")),e.type?tr("throw ",this.vexpr(e.type),";"):tr("throw $err;")}},Yn.prototype.ctryexcept=function(e){for(var t=e.handlers.length,n=[],i=0;t>i;++i)n.push(this.newBlock("except_"+i+"_"));var r=this.newBlock("unhandled"),s=this.newBlock("orelse"),a=this.newBlock("end");for(this.setupExcept(n[0]),this.vseqstmt(e.body),this.endExcept(),this._jump(s),i=0;t>i;++i){this.setBlock(n[i]);var o=e.handlers[i];if(!o.type&&t-1>i)throw new SyntaxError("default 'except:' must be last");if(o.type){var l=this.vexpr(o.type),u=i==t-1?r:n[i+1],l=this._gr("instance","$err instanceof ",l);this._jumpfalse(l,u)}o.name&&this.vexpr(o.name,"$err"),this.vseqstmt(o.body),this._jump(a)}this.setBlock(r),tr("throw $err;"),this.setBlock(s),this.vseqstmt(e.orelse),this._jump(a),this.setBlock(a)},Yn.prototype.ctryfinally=function(e){tr("/*todo; tryfinally*/"),this.ctryexcept(e.body[0])},Yn.prototype.cassert=function(e){var t=this.vexpr(e.test),n=this.newBlock("end");this._jumptrue(t,n),tr("throw new Sk.builtin.AssertionError(",e.msg?this.vexpr(e.msg):"",");"),this.setBlock(n)},Yn.prototype.cimportas=function(e,t,n){e=e.v;var i=e.indexOf(".");if(-1!==i)for(e=e.substr(i+1);-1!==i;){var i=e.indexOf("."),r=-1!==i?e.substr(0,i):e;n=this._gr("lattr","Sk.abstr.gattr(",n,",'",r,"')"),e=e.substr(i+1)}return this.nameop(t,l,n)},Yn.prototype.cimport=function(e){for(var t=e.names.length,n=0;t>n;++n){var i=e.names[n],r=this._gr("module","Sk.builtin.__import__(",i.name.$r().v,",$gbl,$loc,[])");if(i.asname)this.cimportas(i.name,i.asname,r);else{var i=i.name,s=i.v.indexOf(".");-1!==s&&(i=new ti.builtin.str(i.v.substr(0,s))),this.nameop(i,l,r)}}},Yn.prototype.cfromimport=function(e){for(var t=e.names.length,n=[],i=0;t>i;++i)n[i]=e.names[i].name.$r().v;for(n=this._gr("module","Sk.builtin.__import__(",e.module.$r().v,",$gbl,$loc,[",n,"])"),i=0;t>i;++i){var r=e.names[i];if(0===i&&"*"===r.name.v){ei.asserts.assert(1===t),tr("Sk.importStar(",n,",$loc, $gbl);");break}var s=this._gr("item","Sk.abstr.gattr(",n,",",r.name.$r().v,")"),a=r.name;r.asname&&(a=r.asname),this.nameop(a,l,s)}},Yn.prototype.buildcodeobj=function(e,t,n,i,r){var s=[],a=null,o=null;n&&this.vseqexpr(n),i&&i.defaults&&(s=this.vseqexpr(i.defaults)),i&&i.vararg&&(a=i.vararg),i&&i.kwarg&&(o=i.kwarg),e=this.enterScope(t,e,e.lineno),n=this.u.ste.generator;var l=this.u.ste.hasFree,u=this.u.ste.childHasFree,c=this.newBlock("codeobj entry");this.u.prefixCode="var "+e+"=(function "+this.niceName(t.v)+"$(";var f=[];if(n){if(o)throw new SyntaxError(t.v+"(): keyword arguments in generators not supported");if(a)throw new SyntaxError(t.v+"(): variable number of arguments in generators not supported");f.push("$gen")}else{o&&f.push("$kwa");for(var p=0;i&&i.args.length>p;++p)f.push(this.nameop(i.args[p].id,h))}l&&f.push("$free"),this.u.prefixCode+=f.join(","),this.u.prefixCode+="){",n&&(this.u.prefixCode+="\n// generator\n"),l&&(this.u.prefixCode+="\n// has free\n"),u&&(this.u.prefixCode+="\n// has cell\n"),p="{}",n&&(c="$gen.gi$resumeat",p="$gen.gi$locals");var d="";for(u&&(d=",$cell={}"),this.u.varDeclsCode+="var $blk="+c+",$exc=[],$loc="+p+d+",$gbl=this,$err=undefined;",p=0;i&&i.args.length>p;++p)u=i.args[p].id,this.isCell(u)&&(this.u.varDeclsCode+="$cell."+u.v+"="+u.v+";");if(n||(this.u.varDeclsCode+='Sk.builtin.pyCheckArgs("'+t.v+'", arguments, '+(i?i.args.length-s.length:0)+", "+(a?1/0:i?i.args.length:0)+", "+(o?!0:!1)+", "+l+");"),s.length>0)for(u=i.args.length-s.length,p=0;s.length>p;++p)c=this.nameop(i.args[p+u].id,h),this.u.varDeclsCode+="if("+c+"===undefined)"+c+"="+e+".$defaults["+p+"];";a&&(this.u.varDeclsCode+=a.v+"=new Sk.builtins['tuple'](Array.prototype.slice.call(arguments,"+f.length+")); /*vararg*/"),o&&(this.u.varDeclsCode+=o.v+"=new Sk.builtins['dict']($kwa);"),this.u.switchCode="while(true){try{ switch($blk){",this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} }});",r.call(this,e);var m;if(i&&i.args.length>0){for(r=[],p=0;i.args.length>p;++p)r.push(i.args[p].id.v);m=r.join("', '"),this.u.argnames=r}return this.exitScope(),s.length>0&&tr(e,".$defaults=[",s.join(","),"];"),m&&tr(e,".co_varnames=['",m,"'];"),o&&tr(e,".co_kwargs=1;"),o="",l&&(o=",$cell",this.u.ste.hasFree&&(o+=",$free")),n?i&&i.args.length>0?this._gr("gener",'(function(){var $origargs=Array.prototype.slice.call(arguments);Sk.builtin.pyCheckArgs("',t.v,'",arguments,',i.args.length-s.length,",",i.args.length,");return new Sk.builtins['generator'](",e,",$gbl,$origargs",o,");})"):this._gr("gener",'(function(){Sk.builtin.pyCheckArgs("',t.v,"\",arguments,0,0);return new Sk.builtins['generator'](",e,",$gbl,[]",o,");})"):this._gr("funcobj","new Sk.builtins['function'](",e,",$gbl",o,")")},Yn.prototype.cfunction=function(e){ei.asserts.assert(e instanceof V);var t=this.buildcodeobj(e,e.name,e.decorator_list,e.args,function(){this.vseqstmt(e.body),tr("return Sk.builtin.none.none$;")});this.nameop(e.name,l,t)},Yn.prototype.clambda=function(e){return ei.asserts.assert(e instanceof gt),this.buildcodeobj(e,new ti.builtin.str("<lambda>"),null,e.args,function(t){t=this.vexpr(e.body),tr("return ",t,";")})},Yn.prototype.cifexp=function(e){var t=this.newBlock("next of ifexp"),n=this.newBlock("end of ifexp"),i=this._gr("res","null"),r=this.vexpr(e.test);return this._jumpfalse(r,t),tr(i,"=",this.vexpr(e.body),";"),this._jump(n),this.setBlock(t),tr(i,"=",this.vexpr(e.orelse),";"),this._jump(n),this.setBlock(n),i},Yn.prototype.cgenexpgen=function(e,t,n){var i=this.newBlock("start for "+t),r=this.newBlock("skip for "+t);this.newBlock("if cleanup for "+t);var s,a=this.newBlock("end for "+t),o=e[t];if(0===t)s="$loc.$iter0";else{var l=this.vexpr(o.iter);s="$loc."+this.gensym("iter"),tr(s,"=","Sk.abstr.iter(",l,");")}for(this._jump(i),this.setBlock(i),s=this._gr("next","Sk.abstr.iternext(",s,")"),this._jumpundef(s,a),this.vexpr(o.target,s),s=o.ifs.length,l=0;s>l;++l){var u=this.vexpr(o.ifs[l]);this._jumpfalse(u,i)}++t<e.length&&this.cgenexpgen(e,t,n),t>=e.length&&(e=this.vexpr(n),tr("return [",r,"/*resume*/,",e,"/*ret*/];"),this.setBlock(r)),this._jump(i),this.setBlock(a),1===t&&tr("return null;")},Yn.prototype.cgenexp=function(e){var t=this.buildcodeobj(e,new ti.builtin.str("<genexpr>"),null,null,function(){this.cgenexpgen(e.generators,0,e.elt)}),t=this._gr("gener",t,"()");return tr(t,".gi$locals.$iter0=Sk.abstr.iter(",this.vexpr(e.generators[0].iter),");"),t},Yn.prototype.cclass=function(e){ei.asserts.assert(e instanceof W);var t=this.vseqexpr(e.bases),n=this.enterScope(e.name,e,e.lineno),i=this.newBlock("class entry");this.u.prefixCode="var "+n+"=(function $"+e.name.v+"$class_outer($globals,$locals,$rest){var $gbl=$globals,$loc=$locals;",this.u.switchCode+="return(function "+e.name.v+"(){",this.u.switchCode+="var $blk="+i+",$exc=[];while(true){switch($blk){",this.u.suffixCode="}break;}}).apply(null,$rest);});",this.u.private_=e.name,this.cbody(e.body),tr("break;"),this.exitScope(),t=this._gr("built","Sk.misceval.buildClass($gbl,",n,",",e.name.$r().v,",[",t,"])"),this.nameop(e.name,l,t)},Yn.prototype.ccontinue=function(){if(0===this.u.continueBlocks.length)throw new SyntaxError("'continue' outside loop");this._jump(this.u.continueBlocks[this.u.continueBlocks.length-1])},Yn.prototype.vstmt=function(e){switch(this.u.lineno=e.lineno,this.u.linenoSet=!1,this.annotateSource(e),e.constructor){case V:this.cfunction(e);break;case W:this.cclass(e);break;case J:if(this.u.ste.blockType!==Qi)throw new SyntaxError("'return' outside function");e.value?tr("return ",this.vexpr(e.value),";"):tr("return null;");break;case Y:this.vseqexpr(e.targets);break;case q:for(var t=e.targets.length,n=this.vexpr(e.value),i=0;t>i;++i)this.vexpr(e.targets[i],n);break;case X:return this.caugassign(e);case K:this.cprint(e);break;case Q:return this.cfor(e);case Z:return this.cwhile(e);case et:return this.cif(e);case nt:return this.craise(e);case it:return this.ctryexcept(e);case rt:return this.ctryfinally(e);case st:return this.cassert(e);case at:return this.cimport(e);case ot:return this.cfromimport(e);case ut:break;case ct:this.vexpr(e.value);break;case ft:break;case ht:if(0===this.u.breakBlocks.length)throw new SyntaxError("'break' outside loop");this._jump(this.u.breakBlocks[this.u.breakBlocks.length-1]);break;case pt:this.ccontinue(e);break;default:ei.asserts.fail("unhandled case in vstmt")}},Yn.prototype.vseqstmt=function(e){for(var t=0;e.length>t;++t)this.vstmt(e[t])};var rr=0,sr=1,ar=2,or=3;if(Yn.prototype.isCell=function(e){return e=Qn(this.u.private_,e).v,this.u.ste.getScope(e)===Xi?!0:!1},Yn.prototype.nameop=function(e,t,n){if((t===l||t===f||t===u)&&"__debug__"===e.v)throw new ti.builtin.SyntaxError("can not assign to __debug__");if((t===l||t===f||t===u)&&"None"===e.v)throw new ti.builtin.SyntaxError("can not assign to None");if("None"===e.v)return"Sk.builtin.none.none$";if("True"===e.v)return"Sk.builtin.bool.true$";if("False"===e.v)return"Sk.builtin.bool.false$";var i=Qn(this.u.private_,e).v,i=Kn(i),r=or,s=this.u.ste.getScope(i),a=null;switch(s){case qi:a="$free",r=ar;break;case Xi:a="$cell",r=ar;break;case Wi:this.u.ste.blockType!==Qi||this.u.ste.generator||(r=rr);break;case Yi:this.u.ste.blockType===Qi&&(r=sr);break;case Ji:r=sr}switch(i=Xn(i),ei.asserts.assert(s||"_"===e.v.charAt(1)),e=i,this.u.ste.generator||this.u.ste.blockType!==Qi?i="$loc."+i:r!==rr&&r!==or||this.u.localnames.push(i),r){case rr:switch(t){case o:case h:return tr("if (",i," === undefined) { throw new Error('local variable \\'",i,"\\' referenced before assignment'); }\n"),i;case l:tr(i,"=",n,";");break;case u:tr("delete ",i,";");break;default:ei.asserts.fail("unhandled")}break;case or:switch(t){case o:return t=this.gensym("loadname"),tr("var ",t,"=",i,"!==undefined?",i,":Sk.misceval.loadname('",e,"',$gbl);"),t;case l:tr(i,"=",n,";");break;case u:tr("delete ",i,";");break;case h:return i;default:ei.asserts.fail("unhandled")}break;case sr:switch(t){case o:return this._gr("loadgbl","Sk.misceval.loadname('",e,"',$gbl)");case l:tr("$gbl.",e,"=",n,";");break;case u:tr("delete $gbl.",e);break;default:ei.asserts.fail("unhandled case in name op_global")}break;case ar:switch(t){case o:return a+"."+e;case l:tr(a,".",e,"=",n,";");break;case h:return e;default:ei.asserts.fail("unhandled case in name op_deref")}break;default:ei.asserts.fail("unhandled case")}},Yn.prototype.enterScope=function(e,t,n){var i=new qn;return i.ste=this.st.getStsForAst(t),i.name=e,i.firstlineno=n,this.u&&this.u.private_&&(i.private_=this.u.private_),this.stack.push(this.u),this.allUnits.push(i),e=this.gensym("scope"),i.scopename=e,this.u=i,this.u.activateScope(),this.nestlevel++,e},Yn.prototype.exitScope=function(){var e=this.u;if(this.nestlevel--,(this.u=this.stack.length-1>=0?this.stack.pop():null)&&this.u.activateScope(),"<module>"!==e.name.v){var t=e.name.$r().v,t=t.substring(1,t.length-1),t=Xn(t),t=Kn(t);tr(e.scopename,".co_name=new Sk.builtins['str']('",t,"');")}},Yn.prototype.cbody=function(e){for(var t=0;e.length>t;++t)this.vstmt(e[t])},Yn.prototype.cprint=function(e){ei.asserts.assert(e instanceof K),e.dest&&this.vexpr(e.dest);for(var t=e.values.length,n=0;t>n;++n)tr("Sk.misceval.print_(","new Sk.builtins['str'](",this.vexpr(e.values[n]),").v);");e.nl&&tr("Sk.misceval.print_(",'"\\n");')},Yn.prototype.cmod=function(e){var t=this.enterScope(new ti.builtin.str("<module>"),e,0),n=this.newBlock("module entry");switch(this.u.prefixCode="var "+t+"=(function($modname){",this.u.varDeclsCode="var $blk="+n+",$exc=[],$gbl={},$loc=$gbl,$err=undefined;$gbl.__name__=$modname;Sk.globals=$gbl;",this.u.switchCode="try { while(true){try{ switch($blk){",this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} } }catch(err){ if (err instanceof Sk.builtin.SystemExit) { Sk.misceval.print_(err.toString() + '\\n'); return $loc; } else { throw err; } } });",e.constructor){case F:this.cbody(e.body),tr("return $loc;");break;default:ei.asserts.fail("todo; unhandled case in compilerMod")}return this.exitScope(),this.result.push(this.outputAllUnits()),t},ti.compile=function(e,t,n){n=ti.parse(t,e),n=ti.astFromParse(n,t);var i=ti.symboltable(n,t);return e=new Yn(t,i,0,e),t=e.cmod(n),e=e.result.join(""),{funcname:t,code:e}},ei.exportSymbol("Sk.compile",ti.compile),ti.resetCompiler=function(){ti.gensymcount=0},ei.exportSymbol("Sk.resetCompiler",ti.resetCompiler),ti.sysmodules=new ti.builtin.dict([]),ti.realsyspath=void 0,ti.importSearchPathForName=function(e,t,n){for(var i=ti.realsyspath.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())for(var s=e.replace(/\./g,"/"),r=[r.v+"/"+s+t,r.v+"/"+s+"/__init__"+t],s=0;r.length>s;++s){var a=r[s];try{return ti.read(a),a}catch(o){}}if(!n)throw new ti.builtin.ImportError("No module named "+e)},ti.doOneTimeInitialization=function(){ti.builtin.type.basesStr_=new ti.builtin.str("__bases__"),ti.builtin.type.mroStr_=new ti.builtin.str("__mro__"),ti.builtin.object.$d=new ti.builtin.dict([]),ti.builtin.object.$d.mp$ass_subscript(ti.builtin.type.basesStr_,new ti.builtin.tuple([])),ti.builtin.object.$d.mp$ass_subscript(ti.builtin.type.mroStr_,new ti.builtin.tuple([ti.builtin.object]))},ti.importSetUpPath=function(){if(!ti.realsyspath){for(var e=[new ti.builtin.str("src/builtin"),new ti.builtin.str("src/lib"),new ti.builtin.str(".")],t=0;ti.syspath.length>t;++t)e.push(new ti.builtin.str(ti.syspath[t]));ti.realsyspath=new ti.builtin.list(e),ti.doOneTimeInitialization()}},Zn)var lr=function(e){return e};ti.importModuleInternal_=function(e,t,n,i){ti.importSetUpPath(),void 0===n&&(n=e);var r,s=null,a=n.split(".");try{var o=ti.sysmodules.mp$subscript(n);return a.length>1?ti.sysmodules.mp$subscript(a[0]):o}catch(l){}if(a.length>1&&(r=a.slice(0,a.length-1).join("."),s=ti.importModuleInternal_(r,t)),o=new ti.builtin.module,ti.sysmodules.mp$ass_subscript(e,o),i?e=ti.compile(i,e+".py","exec"):(i=ti.importSearchPathForName(e,".js",!0))?e={funcname:"$builtinmodule",code:ti.read(i)}:(e=ti.importSearchPathForName(e,".py"),e=ti.compile(ti.read(e),e,"exec")),i=o.$js=e.code,null!=ti.dateSet&&ti.dateSet||(i="Sk.execStart = new Date();\n"+e.code,ti.dateSet=!0),t){for(t=lr(e.code).split("\n"),i=1;t.length>=i;++i){for(var u="",c=(""+i).length;5>c;++c)u+=" ";t[i-1]="/* "+u+i+" */ "+t[i-1]}i=t.join("\n"),ti.debugout(i)}return i+="\n"+e.funcname+"("+("new Sk.builtin.str('"+n+"')")+");",t=ei.global.eval(i),t.__name__||(t.__name__=new ti.builtin.str(n)),o.$d=t,s?(ti.sysmodules.mp$subscript(r).tp$setattr(a[a.length-1],o),s):o},ti.importModule=function(e,t){return ti.importModuleInternal_(e,t)},ti.importMain=function(e,t){return ti.dateSet=!1,ti.filesLoaded=!1,ti.sysmodules=new ti.builtin.dict([]),ti.realsyspath=void 0,ti.resetCompiler(),ti.importModuleInternal_(e,t,"__main__")},ti.importMainWithBody=function(e,t,n){return ti.dateSet=!1,ti.filesLoaded=!1,ti.sysmodules=new ti.builtin.dict([]),ti.realsyspath=void 0,ti.resetCompiler(),ti.importModuleInternal_(e,t,"__main__",n)},ti.builtin.__import__=function(e,t,n,i){return t=ti.importModuleInternal_(e),i&&0!==i.length?(t=ti.sysmodules.mp$subscript(e),ei.asserts.assert(t),t):t},ti.importStar=function(e,t){var n,i=Object.getOwnPropertyNames(e.$d);for(n in i)t[i[n]]=e.$d[i[n]]},ei.exportSymbol("Sk.importMain",ti.importMain),ei.exportSymbol("Sk.importMainWithBody",ti.importMainWithBody),ei.exportSymbol("Sk.builtin.__import__",ti.builtin.__import__),ei.exportSymbol("Sk.importStar",ti.importStar),ti.builtin.timSort=function(e,t){this.list=new ti.builtin.list(e.v),this.MIN_GALLOP=7,this.listlength=t?t:e.sq$length()},ti.builtin.timSort.prototype.lt=function(e,t){return ti.misceval.richCompareBool(e,t,"Lt")},ti.builtin.timSort.prototype.le=function(e,t){return!this.lt(t,e)},ti.builtin.timSort.prototype.setitem=function(e,t){this.list.v[e]=t},ti.builtin.timSort.prototype.binary_sort=function(e,t){for(var n=e.base+t;e.base+e.len>n;n++){for(var i=e.base,r=n,s=e.getitem(r);r>i;){var a=i+(r-i>>1);this.lt(s,e.getitem(a))?r=a:i=a+1}for(ei.asserts.assert(i===r),a=n;a>i;a--)e.setitem(a,e.getitem(a-1));e.setitem(i,s)}},ti.builtin.timSort.prototype.count_run=function(e){var t;if(1>=e.len){var n=e.len;t=!1}else if(n=2,this.lt(e.getitem(e.base+1),e.getitem(e.base))){t=!0;for(var i=e.base+2;e.base+e.len>i&&this.lt(e.getitem(i),e.getitem(i-1));i++)n++}else for(t=!1,i=e.base+2;e.base+e.len>i&&!this.lt(e.getitem(i),e.getitem(i-1));i++)n++;return{run:new ti.builtin.listSlice(e.list,e.base,n),descending:t}},ti.builtin.timSort.prototype.sort=function(){var e=new ti.builtin.listSlice(this.list,0,this.listlength);if(!(2>e.len)){this.merge_init();for(var t=this.merge_compute_minrun(e.len);e.len>0;){var n=this.count_run(e);if(n.descending&&n.run.reverse(),t>n.run.len){var i=n.run.len;n.run.len=e.len>t?t:e.len,this.binary_sort(n.run,i)}e.advance(n.run.len),this.pending.push(n.run),this.merge_collapse()}ei.asserts.assert(e.base==this.listlength),this.merge_force_collapse(),ei.asserts.assert(1==this.pending.length),ei.asserts.assert(0==this.pending[0].base),ei.asserts.assert(this.pending[0].len==this.listlength)}},ti.builtin.timSort.prototype.gallop=function(e,t,n,i){ei.asserts.assert(n>=0&&t.len>n);var r=this;i=i?function(e,t){return r.le(e,t)}:function(e,t){return r.lt(e,t)};var s,a=t.base+n,o=0,l=1;if(i(t.getitem(a),e)){for(s=t.len-n;s>l&&i(t.getitem(a+l),e);){o=l;try{l=(l<<1)+1}catch(u){l=s}}l>s&&(l=s),o+=n,l+=n}else{for(s=n+1;s>l&&!i(t.getitem(a-l),e);){o=l;try{l=(l<<1)+1}catch(c){l=s}}l>s&&(l=s),a=n-o,o=n-l,l=a}for(ei.asserts.assert(t.len>=(l>(o>=-1))),o+=1;l>o;)n=o+(l-o>>1),i(t.getitem(t.base+n),e)?o=n+1:l=n;return ei.asserts.assert(o==l),l},ti.builtin.timSort.prototype.merge_init=function(){this.min_gallop=this.MIN_GALLOP,this.pending=[]},ti.builtin.timSort.prototype.merge_lo=function(e,t){ei.asserts.assert(e.len>0&&t.len>0&&e.base+e.len==t.base);var n=this.min_gallop,i=e.base;e=e.copyitems();try{if(this.setitem(i,t.popleft()),i++,1!=e.len&&0!=t.len)for(var r,s;;){for(s=r=0;;)if(this.lt(t.getitem(t.base),e.getitem(e.base))){if(this.setitem(i,t.popleft()),i++,0==t.len)return;if(s++,r=0,s>=n)break}else{if(this.setitem(i,e.popleft()),i++,1==e.len)return;if(r++,s=0,r>=n)break}for(n+=1;;){this.min_gallop=n-=n>1,r=this.gallop(t.getitem(t.base),e,0,!0);for(var a=e.base;e.base+r>a;a++)this.setitem(i,e.getitem(a)),i++;if(e.advance(r),1>=e.len)return;if(this.setitem(i,t.popleft()),i++,0==t.len)return;for(s=this.gallop(e.getitem(e.base),t,0,!1),a=t.base;t.base+s>a;a++)this.setitem(i,t.getitem(a)),i++;if(t.advance(s),0==t.len)return;if(this.setitem(i,e.popleft()),i++,1==e.len)return;if(this.MIN_GALLOP>r&&this.MIN_GALLOP>s)break;n++,this.min_gallop=n}}}finally{for(ei.asserts.assert(e.len>=0&&t.len>=0),a=t.base;t.base+t.len>a;a++)this.setitem(i,t.getitem(a)),i++;for(a=e.base;e.base+e.len>a;a++)this.setitem(i,e.getitem(a)),i++}},ti.builtin.timSort.prototype.merge_hi=function(e,t){ei.asserts.assert(e.len>0&&t.len>0&&e.base+e.len==t.base);var n=this.min_gallop,i=t.base+t.len;t=t.copyitems();try{if(i--,this.setitem(i,e.popright()),0!=e.len&&1!=t.len)for(var r,s,a,o;;){for(s=r=0;;)if(a=e.getitem(e.base+e.len-1),o=t.getitem(t.base+t.len-1),this.lt(o,a)){if(i--,this.setitem(i,a),e.len--,0==e.len)return;if(r++,s=0,r>=n)break}else{if(i--,this.setitem(i,o),t.len--,1==t.len)return;if(s++,r=0,s>=n)break}for(n+=1;;){this.min_gallop=n-=n>1,o=t.getitem(t.base+t.len-1);var l=this.gallop(o,e,e.len-1,!0);r=e.len-l;for(var u=e.base+e.len-1;u>e.base+l-1;u--)i--,this.setitem(i,e.getitem(u));if(e.len-=r,0==e.len)return;if(i--,this.setitem(i,t.popright()),1==t.len)return;for(a=e.getitem(e.base+e.len-1),l=this.gallop(a,t,t.len-1,!1),s=t.len-l,u=t.base+t.len-1;u>t.base+l-1;u--)i--,this.setitem(i,t.getitem(u));if(t.len-=s,1>=t.len)return;if(i--,this.setitem(i,e.popright()),0==e.len)return;if(this.MIN_GALLOP>r&&this.MIN_GALLOP>s)break;n++,this.min_gallop=n}}}finally{for(ei.asserts.assert(e.len>=0&&t.len>=0),u=e.base+e.len-1;u>e.base-1;u--)i--,this.setitem(i,e.getitem(u));for(u=t.base+t.len-1;u>t.base-1;u--)i--,this.setitem(i,t.getitem(u))}},ti.builtin.timSort.prototype.merge_at=function(e){0>e&&(e=this.pending.length+e);var t=this.pending[e],n=this.pending[e+1];ei.asserts.assert(t.len>0&&n.len>0),ei.asserts.assert(t.base+t.len==n.base),this.pending[e]=new ti.builtin.listSlice(this.list,t.base,t.len+n.len),this.pending.splice(e+1,1),e=this.gallop(n.getitem(n.base),t,0,!0),t.advance(e),0!=t.len&&(n.len=this.gallop(t.getitem(t.base+t.len-1),n,n.len-1,!1),0!=n.len&&(t.len<=n.len?this.merge_lo(t,n):this.merge_hi(t,n)))},ti.builtin.timSort.prototype.merge_collapse=function(){for(var e=this.pending;e.length>1;)if(e.length>=3&&e[e.length-3].len<=e[e.length-2].len+e[e.length-1].len)e[e.length-3].len<e[e.length-1].len?this.merge_at(-3):this.merge_at(-2);else{if(!(e[e.length-2].len<=e[e.length-1].len))break;this.merge_at(-2)}},ti.builtin.timSort.prototype.merge_force_collapse=function(){for(var e=this.pending;e.length>1;)e.length>=3&&e[e.length-3].len<e[e.length-1].len?this.merge_at(-3):this.merge_at(-2)},ti.builtin.timSort.prototype.merge_compute_minrun=function(e){for(var t=0;e>=64;)t|=1&e,e>>=1;return e+t},ti.builtin.listSlice=function(e,t,n){this.list=e,this.base=t,this.len=n},ti.builtin.listSlice.prototype.copyitems=function(){var e=this.base,t=this.base+this.len;return ei.asserts.assert(t>=(e>=0)),new ti.builtin.listSlice(new ti.builtin.list(this.list.v.slice(e,t)),0,this.len)},ti.builtin.listSlice.prototype.advance=function(e){this.base+=e,this.len-=e,ei.asserts.assert(this.base<=this.list.sq$length())},ti.builtin.listSlice.prototype.getitem=function(e){return this.list.v[e]},ti.builtin.listSlice.prototype.setitem=function(e,t){this.list.v[e]=t},ti.builtin.listSlice.prototype.popleft=function(){var e=this.list.v[this.base];return this.base++,this.len--,e},ti.builtin.listSlice.prototype.popright=function(){return this.len--,this.list.v[this.base+this.len]},ti.builtin.listSlice.prototype.reverse=function(){for(var e=this.list,t=this.base,n=t+this.len-1;n>t;){var i=e.v[t];e.v[t]=e.v[n],e.v[n]=i,t++,n--}},ei.exportSymbol("Sk.builtin.listSlice",ti.builtin.listSlice),ei.exportSymbol("Sk.builtin.timSort",ti.builtin.timSort),ti.builtins={range:ti.builtin.range,round:ti.builtin.round,len:ti.builtin.len,min:ti.builtin.min,max:ti.builtin.max,sum:ti.builtin.sum,zip:ti.builtin.zip,abs:ti.builtin.abs,fabs:ti.builtin.abs,ord:ti.builtin.ord,chr:ti.builtin.chr,hex:ti.builtin.hex,oct:ti.builtin.oct,bin:ti.builtin.bin,dir:ti.builtin.dir,repr:ti.builtin.repr,open:ti.builtin.open,isinstance:ti.builtin.isinstance,hash:ti.builtin.hash,getattr:ti.builtin.getattr,float_$rw$:ti.builtin.float_,int_$rw$:ti.builtin.int_,hasattr:ti.builtin.hasattr,map:ti.builtin.map,filter:ti.builtin.filter,reduce:ti.builtin.reduce,sorted:ti.builtin.sorted,bool:ti.builtin.bool,any:ti.builtin.any,all:ti.builtin.all,enumerate:ti.builtin.enumerate,AttributeError:ti.builtin.AttributeError,ValueError:ti.builtin.ValueError,Exception:ti.builtin.Exception,ZeroDivisionError:ti.builtin.ZeroDivisionError,AssertionError:ti.builtin.AssertionError,ImportError:ti.builtin.ImportError,IndentationError:ti.builtin.IndentationError,IndexError:ti.builtin.IndexError,KeyError:ti.builtin.KeyError,TypeError:ti.builtin.TypeError,NameError:ti.builtin.NameError,IOError:ti.builtin.IOError,NotImplementedError:ti.builtin.NotImplementedError,SystemExit:ti.builtin.SystemExit,OverflowError:ti.builtin.OverflowError,OperationError:ti.builtin.OperationError,dict:ti.builtin.dict,file:ti.builtin.file,"function":ti.builtin.func,generator:ti.builtin.generator,list:ti.builtin.list,long_$rw$:ti.builtin.lng,method:ti.builtin.method,object:ti.builtin.object,slice:ti.builtin.slice,str:ti.builtin.str,set:ti.builtin.set,tuple:ti.builtin.tuple,type:ti.builtin.type,input:ti.builtin.input,raw_input:ti.builtin.raw_input,jseval:ti.builtin.jseval,jsmillis:ti.builtin.jsmillis,quit:ti.builtin.quit,exit:ti.builtin.quit,bytearray:ti.builtin.bytearray,callable:ti.builtin.callable,complex:ti.builtin.complex,delattr:ti.builtin.delattr,divmod:ti.builtin.divmod,eval_$rn$:ti.builtin.eval_,execfile:ti.builtin.execfile,format:ti.builtin.format,frozenset:ti.builtin.frozenset,globals:ti.builtin.globals,help:ti.builtin.help,issubclass:ti.builtin.issubclass,iter:ti.builtin.iter,locals:ti.builtin.locals,memoryview:ti.builtin.memoryview,next:ti.builtin.next_,pow:ti.builtin.pow,property:ti.builtin.property,reload:ti.builtin.reload,reversed:ti.builtin.reversed,"super":ti.builtin.superbi,unichr:ti.builtin.unichr,vars:ti.builtin.vars,xrange:ti.builtin.xrange,apply_$rn$:ti.builtin.apply_,buffer:ti.builtin.buffer,coerce:ti.builtin.coerce,intern:ti.builtin.intern},ei.exportSymbol("Sk.builtins",ti.builtins)}(),Sk.builtinFiles={files:{"src/lib/pythonds/trees/binheap.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\n# this heap takes key value pairs, we will assume that the keys are integers\nclass BinHeap:\n    def __init__(self):\n        self.heapList = [0]\n        self.currentSize = 0\n\n\n    def buildHeap(self,alist):\n        i = len(alist) // 2\n        self.currentSize = len(alist)\n        self.heapList = [0] + alist[:]\n        print(len(self.heapList), i)\n        while (i > 0):\n            print(self.heapList, i)\n            self.percDown(i)\n            i = i - 1\n        print(self.heapList,i)\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapList[i] > self.heapList[mc]:\n                tmp = self.heapList[i]\n                self.heapList[i] = self.heapList[mc]\n                self.heapList[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i * 2 + 1 > self.currentSize:\n            return i * 2\n        else:\n            if self.heapList[i * 2] < self.heapList[i * 2 + 1]:\n                return i * 2\n            else:\n                return i * 2 + 1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapList[i] < self.heapList[i//2]:\n               tmp = self.heapList[i // 2]\n               self.heapList[i // 2] = self.heapList[i]\n               self.heapList[i] = tmp\n            i = i // 2\n \n    def insert(self,k):\n        self.heapList.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapList[1]\n        self.heapList[1] = self.heapList[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapList.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if currentSize == 0:\n            return True\n        else:\n            return False\n","src/lib/pythonds/basic/stack.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#stack.py\r\n\r\nclass Stack:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def push(self, item):\r\n        self.items.append(item)\r\n\r\n    def pop(self):\r\n        return self.items.pop()\r\n\r\n    def peek(self):\r\n        return self.items[len(self.items)-1]\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n\r\n","src/lib/pythonds/trees/bst.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nclass BinarySearchTree:\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n                  in\n                  del <==> \n    '''\n\n    def __init__(self):\n        self.root = None\n        self.size = 0\n    \n    def put(self,key,val):\n        if self.root:\n            self._put(key,val,self.root)\n        else:\n            self.root = TreeNode(key,val)\n        self.size = self.size + 1\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n            \n    def __setitem__(self,k,v):\n        self.put(k,v)\n\n    def get(self,key):\n        if self.root:\n            res = self._get(key,self.root)\n            if res:\n                return res.payload\n            else:\n                return None\n        else:\n            return None\n        \n    def _get(self,key,currentNode):\n        if not currentNode:\n            return None\n        elif currentNode.key == key:\n            return currentNode\n        elif key < currentNode.key:\n            return self._get(key,currentNode.leftChild)\n        else:\n            return self._get(key,currentNode.rightChild)\n            \n        \n    def __getitem__(self,key):\n        res = self.get(key)\n        if res:\n            return res\n        else:\n            raise KeyError('Error, key not in tree')\n            \n\n    def __contains__(self,key):\n        if self._get(key,self.root):\n            return True\n        else:\n            return False\n        \n    def length(self):\n        return self.size\n\n    def __len__(self):\n        return self.size\n\n    def __iter__(self):\n        return self.root.__iter__()\n    \n    def delete(self,key):\n        if self.size > 1:\n            nodeToRemove = self._get(key,self.root)\n            if nodeToRemove:\n                self.remove(nodeToRemove)\n                self.size = self.size-1\n            else:\n                raise KeyError('Error, key not in tree')\n        elif self.size == 1 and self.root.key == key:\n            self.root = None\n            self.size = self.size - 1\n        else:\n            raise KeyError('Error, key not in tree')\n\n    def __delitem__(self,key):\n        self.delete(key)\n    \n    def remove(self,currentNode):\n        if currentNode.isLeaf(): #leaf\n            if currentNode == currentNode.parent.leftChild:\n                currentNode.parent.leftChild = None\n            else:\n                currentNode.parent.rightChild = None\n        elif currentNode.hasBothChildren(): #interior\n            succ = currentNode.findSuccessor()\n            succ.spliceOut()\n            currentNode.key = succ.key\n            currentNode.payload = succ.payload\n        else: # this node has one child\n            if currentNode.hasLeftChild():\n                if currentNode.isLeftChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.leftChild\n                elif currentNode.isRightChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.leftChild\n                else:\n                    currentNode.replaceNodeData(currentNode.leftChild.key,\n                                       currentNode.leftChild.payload,\n                                       currentNode.leftChild.leftChild,\n                                       currentNode.leftChild.rightChild)\n            else:\n                if currentNode.isLeftChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.rightChild\n                elif currentNode.isRightChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.rightChild\n                else:\n                    currentNode.replaceNodeData(currentNode.rightChild.key,\n                                       currentNode.rightChild.payload,\n                                       currentNode.rightChild.leftChild,\n                                       currentNode.rightChild.rightChild)\n\n    def inorder(self):\n        self._inorder(self.root)\n\n    def _inorder(self,tree):\n        if tree != None:\n            self._inorder(tree.leftChild)\n            print(tree.key)\n            self._inorder(tree.rightChild)\n\n    def postorder(self):\n        self._postorder(self.root)\n\n    def _postorder(self, tree):\n        if tree:\n            self._postorder(tree.rightChild)\n            self._postorder(tree.leftChild)\n            print(tree.key)            \n\n    def preorder(self):\n        self._preorder(self,self.root)\n\n    def _preorder(self,tree):\n        if tree:\n            print(tree.key)            \n            self._preorder(tree.leftChild)\n            self._preorder(tree.rightChild)\n\n                \nclass TreeNode:\n    def __init__(self,key,val,left=None,right=None,parent=None):\n        self.key = key\n        self.payload = val\n        self.leftChild = left\n        self.rightChild = right\n        self.parent = parent\n        self.balanceFactor = 0\n        \n    def hasLeftChild(self):\n        return self.leftChild\n\n    def hasRightChild(self):\n        return self.rightChild\n    \n    def isLeftChild(self):\n        return self.parent and self.parent.leftChild == self\n\n    def isRightChild(self):\n        return self.parent and self.parent.rightChild == self\n\n    def isRoot(self):\n        return not self.parent\n\n    def isLeaf(self):\n        return not (self.rightChild or self.leftChild)\n\n    def hasAnyChildren(self):\n        return self.rightChild or self.leftChild\n\n    def hasBothChildren(self):\n        return self.rightChild and self.leftChild\n    \n    def replaceNodeData(self,key,value,lc,rc):\n        self.key = key\n        self.payload = value\n        self.leftChild = lc\n        self.rightChild = rc\n        if self.hasLeftChild():\n            self.leftChild.parent = self\n        if self.hasRightChild():\n            self.rightChild.parent = self\n        \n    def findSuccessor(self):\n        succ = None\n        if self.hasRightChild():\n            succ = self.rightChild.findMin()\n        else:\n            if self.parent:\n                if self.isLeftChild():\n                    succ = self.parent\n                else:\n                    self.parent.rightChild = None\n                    succ = self.parent.findSuccessor()\n                    self.parent.rightChild = self\n        return succ\n\n\n    def spliceOut(self):\n        if self.isLeaf():\n            if self.isLeftChild():\n                self.parent.leftChild = None\n            else:\n                self.parent.rightChild = None\n        elif self.hasAnyChildren():\n            if self.hasLeftChild():\n                if self.isLeftChild():\n                    self.parent.leftChild = self.leftChild\n                else:\n                    self.parent.rightChild = self.leftChild\n                self.leftChild.parent = self.parent\n            else:\n                if self.isLeftChild():\n                    self.parent.leftChild = self.rightChild\n                else:\n                    self.parent.rightChild = self.rightChild\n                self.rightChild.parent = self.parent\n\n    def findMin(self):\n        current = self\n        while current.hasLeftChild():\n            current = current.leftChild\n        return current\n\n    def __iter__(self):\n        \"\"\"The standard inorder traversal of a binary tree.\"\"\"\n        if self:\n            if self.hasLeftChild():\n                for elem in self.leftChild:\n                    yield elem\n            yield self.key\n            if self.hasRightChild():\n                for elem in self.rightChild:\n                    yield elem\n\n            \n","src/lib/c3ga/__init__.js":'/**\n * Geometric Algebra (c3ga) module for DaVinci Python.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n  /**\n   * Symbolic constants representing the Python classes or functions that are exported by this module.\n   * These are captured here for both consistency and self-documentation.\n   */\n  var CONFORMAL_3    = "Conformal3";    // Multivector of 5-dimensional Conformal space to represent Euclidean 3D Motions.\n\n  // The following symbolic constant simulates a zero scalar argument for convenience functions.\n  var ARG_ZERO      = Sk.builtin.assk$(0, Sk.builtin.nmber.float$);\n\n  var mod = {};\n\n  function isNumber(x)    { return typeof x === \'number\'; }\n  function isString(x)    { return typeof x === \'string\'; }\n  function isBoolean(x)   { return typeof x === \'boolean\'; }\n  function isNull(x)      { return typeof x === \'object\' && x === null; }\n  function isUndefined(x) { return typeof x === \'undefined\'; }\n  function isDefined(x)   { return typeof x !== \'undefined\'; }\n\n  function remapC3ToPy(x0, x1, x2, x3) {\n    return Sk.misceval.callsim(mod[CONFORMAL_3],\n      Sk.builtin.assk$(x0, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x1, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x2, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x3, Sk.builtin.nmber.float$));\n  }\n\n  mod[CONFORMAL_3] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x0, x1, x2, x3) {\n      x0 = Sk.ffi.remapToJs(x0);\n      x1 = Sk.ffi.remapToJs(x1);\n      x2 = Sk.ffi.remapToJs(x2);\n      x3 = Sk.ffi.remapToJs(x3);\n      self.tp$name = CONFORMAL_3;\n      self.v = [x0, x1, x2, x3];\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " + " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " - " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " * " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " ^ " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " << " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " >> " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__or__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction or");\n    });\n    $loc.nb$negative = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapC3ToPy(-self[0], -self[1], -self[2], -self[3]);\n    };\n    $loc.nu$pos = function() {\n      return this;\n    };\n    $loc.nb$invert = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapC3ToPy(self[0], self[1], self[2], -self[3]);\n    };\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      return new Sk.builtin.str(CONFORMAL_3 + "(" + mv.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (isDefined(mv)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([mv[0], mv[1], mv[2], mv[3]], ["1", "i", "j", "I"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + CONFORMAL_3 + "\'>");\n      }\n    });\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction eq");\n    });\n\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction ne");\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(self, key) {\n      if (key === \'w\') {\n        return Sk.builtin.assk$(self.v.coordinate(0), Sk.builtin.nmber.float$);\n      }\n      else if (key === \'x\') {\n        return Sk.builtin.assk$(self.v.coordinate(1), Sk.builtin.nmber.float$);\n      }\n      else if (key === \'y\') {\n        return Sk.builtin.assk$(self.v.coordinate(2), Sk.builtin.nmber.float$);\n      }\n      else if (key === \'xy\') {\n        return Sk.builtin.assk$(self.v.coordinate(3), Sk.builtin.nmber.float$);\n      }\n      else {\n        throw new Error(key + " is not a valid " + CONFORMAL_3 + " attribute.");\n      }\n    });\n  }, CONFORMAL_3, []);\n\n  return mod;\n}\n',"src/lib/time/__init__.js":"\n/*\n	Barebones implementation of the Python time package.\n\n	For now, only the time() function is implemented.\n*/\n \nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    mod.time = new Sk.builtin.func(function() {\n	  return Sk.builtin.assk$(new Date().getTime() / 1000, undefined);\n    });\n\n    return mod;\n}\n","src/lib/image/__init__.js":'var ImageMod; // the single identifier needed in the global scope\n\nif (! ImageMod) {\n    ImageMod = { };\n    ImageMod.canvasLib = [];\n}\n\n//  todo create an empty image by reading image data from a blank canvas of the appropriate size\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    var image = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,imageId) {\n            self.image = document.getElementById(imageId.v);\n            if (self.image == null) {\n                throw "There is no image on this page named: " + imageId.v;\n            }\n            self.width = self.image.width;\n            self.height = self.image.height;\n            self.canvas = document.createElement("canvas");\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.ctx = self.canvas.getContext("2d");\n            self.ctx.drawImage(self.image,0,0)\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n        $loc.getPixel = new Sk.builtin.func(function(self,x,y) {\n			x = Sk.builtin.asnum$(x);\n			y = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            var red = self.imagedata.data[index]\n            var green = self.imagedata.data[index+1]\n            var blue = self.imagedata.data[index+2]\n            return Sk.misceval.callsim(mod.Pixel,red,green,blue);\n        });\n\n        $loc.setPixel = new Sk.builtin.func(function(self, x, y, pix) {\n			x = Sk.builtin.asnum$(x);\n			y = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            self.imagedata.data[index] = Sk.misceval.callsim(pix.getRed,pix);\n            self.imagedata.data[index+1] = Sk.misceval.callsim(pix.getGreen,pix);\n            self.imagedata.data[index+2] = Sk.misceval.callsim(pix.getBlue,pix);\n            self.imagedata.data[index+3] = 255;\n        });\n\n        $loc.getHeight = new Sk.builtin.func(function(self) {\n            return self.image.height;\n        });\n\n        $loc.getWidth = new Sk.builtin.func(function(self,titlestring) {\n            return self.image.width;\n        });\n\n        $loc.draw = new Sk.builtin.func(function(self,win,ulx,uly) {\n			win = Sk.builtin.asnum$(win);\n			ulx = Sk.builtin.asnum$(ulx);\n			uly = Sk.builtin.asnum$(uly);\n            var can = Sk.misceval.callsim(win.getWin,win);\n            var ctx = can.getContext("2d");\n            //ctx.putImageData(self.imagedata,0,0,0,0,self.imagedata.width,self.imagedata.height);\n            if (! ulx) {\n                ulx = 0;\n                uly = 0;\n            }\n            ctx.putImageData(self.imagedata,ulx,uly);\n        });\n\n        // toList\n\n    }\n\n    mod.Image = Sk.misceval.buildClass(mod, image, \'Image\', []);\n\n    var eImage = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            self.width = Sk.builtin.asnum$(width);\n            self.height = Sk.builtin.asnum$(height);\n            self.canvas = document.createElement("canvas");\n            self.ctx = self.canvas.getContext(\'2d\');\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n    }\n\n    mod.EmptyImage = Sk.misceval.buildClass(mod, eImage, \'EmptyImage\', [mod.Image]);\n\n    // create a ListImage object\n\n    \n    var pixel = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,r,g,b) {\n            self.red = Sk.builtin.asnum$(r);\n            self.green = Sk.builtin.asnum$(g);\n            self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.getRed = new Sk.builtin.func(function(self) {\n           return self.red;\n        });\n\n        $loc.getGreen = new Sk.builtin.func(function(self) {\n           return self.green;\n        });\n\n        $loc.getBlue = new Sk.builtin.func(function(self) {\n           return self.blue;\n        });\n\n        $loc.setRed = new Sk.builtin.func(function(self,r) {\n           self.red = Sk.builtin.asnum$(r);\n        });\n\n        $loc.setGreen = new Sk.builtin.func(function(self,g) {\n           self.green = Sk.builtin.asnum$(g);\n        });\n\n        $loc.setBlue = new Sk.builtin.func(function(self,b) {\n           self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.__getitem__ = new Sk.builtin.func(function(self,k) {\n		   k = Sk.builtin.asnum$(k);\n           if(k == 0) {\n               return self.red;\n           } else if (k == 1) {\n               return self.green;\n           } else if (k == 2) {\n               return self.blue;\n           }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            return "[" + self.red + "," + self.green + "," + self.blue + "]"\n        });\n        \n        //getColorTuple\n        $loc.getColorTuple = new Sk.builtin.func(function(self,x,y) {\n\n        });\n\n        //setRange -- change from 0..255 to 0.0 .. 1.0\n        $loc.setRange = new Sk.builtin.func(function(self,mx) {\n            self.max = Sk.builtin.asnum$(mx);\n        });\n\n    }\n    mod.Pixel = Sk.misceval.buildClass(mod, pixel, \'Pixel\', []);\n\n\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            var currentCanvas = ImageMod.canvasLib[Sk.canvas];\n            if (currentCanvas === undefined) {\n                self.theScreen = document.getElementById(Sk.canvas);\n                if (width !== undefined) {\n                    self.theScreen.height = height;\n                    self.theScreen.width = width;\n                }\n\n                ImageMod.canvasLib[Sk.canvas] = self.theScreen;\n            } else {\n                self.theScreen = currentCanvas;\n                self.theScreen.height = self.theScreen.height;\n            }\n            self.theScreen.style.display = "block";\n        });\n\n        $loc.getWin = new Sk.builtin.func(function(self) {\n           return self.theScreen;\n        });\n\n        // exitonclick\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            var canvas_id = self.theScreen.id;\n            self.theScreen.onclick = function() {\n                document.getElementById(canvas_id).style.display = \'none\';\n                document.getElementById(canvas_id).onclick = null;\n                delete ImageMod.canvasLib[canvas_id];\n            }\n\n        });\n        //getMouse\n    }\n\n    mod.ImageWin = Sk.misceval.buildClass(mod, screen, \'ImageWin\', []);\n\n    return mod\n}\n',"src/lib/browser/__init__.js":'/*\n * browser Python module\n *\n * Exposes the window and document variables.\n */\nvar $builtinmodule = function(name) {\n\n  var mod = {};\n\n  var CANVAS_GRADIENT_CLASS       = "CanvasGradient";\n  var CANVAS_RENDERING_CONTEXT_2D = "CanvasRenderingContext2D";\n  var DOCUMENT_CLASS              = "Document";\n  var EVENT                       = "Event";\n  var NODE                        = "Node";\n  var WINDOW_CLASS                = "Window";\n  \n  var PROP_ALT_KEY                          = "altKey";\n  var PROP_ANIMATION_TIME                   = "animationTime";\n  var PROP_BODY                             = "body";\n  var PROP_BUBBLES                          = "bubbles";\n  var PROP_BUTTON                           = "button";\n  var PROP_CANCELABLE                       = "cancelable";\n  var PROP_CLIENT_X                         = "clientX";\n  var PROP_CLIENT_Y                         = "clientY";\n  var PROP_CTRL_KEY                         = "ctrlKey";\n  var PROP_CURRENT_TRANSFORM                = "currentTransform";\n  var PROP_DEFAULT_PREVENTED                = "defaultPrevented";\n  var PROP_DEVICE_PIXEL_RATIO               = "devicePixelRatio";\n  var PROP_DIR                              = "dir";\n  var PROP_DOCUMENT                         = "document";\n  var PROP_FONT                             = "font";\n  var PROP_FILL_STYLE                       = "fillStyle";\n  var PROP_FIRST_CHILD                      = "firstChild";\n  var PROP_HEIGHT                           = "height";\n  var PROP_KEY_CODE                         = "keyCode";\n  var PROP_LAST_CHILD                       = "lastChild";\n  var PROP_LEFT                             = "left";\n  var PROP_LINE_CAP                         = "lineCap";\n  var PROP_LINE_JOIN                        = "lineJoin";\n  var PROP_LINE_WIDTH                       = "lineWidth";\n  var PROP_NEXT_SIBLING                     = "nextSibling";\n  var PROP_PARENT_NODE                      = "parentNode";\n  var PROP_POSITION                         = "position";\n  var PROP_PREVIOUS_SIBLING                 = "previousSibling";\n  var PROP_SCREEN_X                         = "screenX";\n  var PROP_SCREEN_Y                         = "screenY";\n  var PROP_SHADOW_BLUR                      = "shadowBlur";\n  var PROP_SHADOW_COLOR                     = "shadowColor";\n  var PROP_SHADOW_OFFSET_X                  = "shadowOffsetX";\n  var PROP_SHADOW_OFFSET_Y                  = "shadowOffsetY";\n  var PROP_SHIFT_KEY                        = "shiftKey";\n  var PROP_STROKE_STYLE                     = "strokeStyle";\n  var PROP_STYLE                            = "style";\n  var PROP_TEXT_ALIGN                       = "textAlign";\n  var PROP_TEXT_BASELINE                    = "textBaseline";\n  var PROP_TOP                              = "top";\n  var PROP_WEBKIT_BACKING_STORE_PIXEL_RATIO = "webkitBackingStorePixelRatio";\n  var PROP_WEBKIT_HIDDEN                    = "webkitHidden";\n  var PROP_WIDTH                            = "width";\n  var PROP_WINDOW                           = "window";\n\n  var METHOD_ADD_EVENT_LISTENER         = "addEventListener";\n  var METHOD_ADD_COLOR_STOP             = "addColorStop";\n  var METHOD_APPEND_CHILD               = "appendChild";\n  var METHOD_ARC                        = "arc";\n  var METHOD_ARC_TO                     = "arcTo";\n  var METHOD_BEGIN_PATH                 = "beginPath";\n  var METHOD_BEZIER_CURVE_TO            = "bezierCurveTo";\n  var METHOD_CANCEL_ANIMATION_FRAME     = "cancelAnimationFrame";\n  var METHOD_CLEAR_RECT                 = "clearRect";\n  var METHOD_CLIP                       = "clip";\n  var METHOD_CLOSE_PATH                 = "closePath";\n  var METHOD_CREATE_ELEMENT             = "createElement";\n  var METHOD_CREATE_LINEAR_GRADIENT     = "createLinearGradient";\n  var METHOD_FILL                       = "fill";\n  var METHOD_FILL_RECT                  = "fillRect";\n  var METHOD_FILL_TEXT                  = "fillText";\n  var METHOD_GET_CONTEXT                = "getContext";\n  var METHOD_GET_ELEMENT_BY_ID          = "getElementById";\n  var METHOD_GET_ELEMENTS_BY_TAG_NAME   = "getElementsByTagName";\n  var METHOD_INSERT_BEFORE              = "insertBefore";\n  var METHOD_INVERSE                    = "inverse";\n  var METHOD_LINE_TO                    = "lineTo";\n  var METHOD_MOVE_TO                    = "moveTo";\n  var METHOD_PREVENT_DEFAULT            = "preventDefault";\n  var METHOD_QUADRATIC_CURVE_TO         = "quadraticCurveTo";\n  var METHOD_RECT                       = "rect";\n  var METHOD_REMOVE_CHILD               = "removeChild";\n  var METHOD_REMOVE_EVENT_LISTENER      = "removeEventListener";\n  var METHOD_REQUEST_ANIMATION_FRAME    = "requestAnimationFrame";\n  var METHOD_RESTORE                    = "restore";\n  var METHOD_ROTATE                     = "rotate";\n  var METHOD_SAVE                       = "save";\n  var METHOD_SCALE                      = "scale";\n  var METHOD_SET_ATTRIBUTE              = "setAttribute";\n  var METHOD_SET_TIMEOUT                = "setTimeout";\n  var METHOD_SET_TRANSFORM              = "setTransform";\n  var METHOD_STOP_IMMEDIATE_PROPAGATION = "stopImmediatePropagation";\n  var METHOD_STOP_PROPAGATION           = "stopPropagation";\n  var METHOD_STROKE                     = "stroke";\n  var METHOD_STROKE_RECT                = "strokeRect";\n  var METHOD_STROKE_TEXT                = "strokeText";\n  var METHOD_TRANSFORM                  = "transform";\n  var METHOD_TRANSLATE                  = "translate";\n  // We must be able to track the JavaScript listener functions.\n  // TODO: This should include both the typoe and the useCapture flag.\n  var winListeners = {};\n  var docListeners = {};\n\n  var wrapNode = function(node) {\n    if (node) {\n      return Sk.misceval.callsim(mod[NODE], node);\n    }\n    else {\n      return null;\n    }\n  }\n\n  var wrapNumber = function(n) {\n    if (typeof n === \'number\') {\n      return Sk.builtin.assk$(n, Sk.builtin.nmber.float$);\n    }\n    else {\n      return null;\n    }\n  }\n\n  var wrapString = function(s) {\n    if (typeof s === \'string\') {\n      return new Sk.builtin.str(s)\n    }\n    else {\n      return null;\n    }\n  }\n\n  var nodeFromArg = function(arg) {\n    if (arg) {\n      return arg.v;\n    }\n    else {\n      return null;\n    }\n  }\n\n  var numberFromArg = function(arg) {\n    if (arg) {\n      return arg.v;\n    }\n    else {\n      return null;\n    }\n  }\n\n  var stringFromArg = function(arg) {\n    if (arg) {\n      return arg.v;\n    }\n    else {\n      return null;\n    }\n  }\n  /*\n  mod.getElementsByTagName = new Sk.builtin.func(function(tag) {\n    var elements = document.getElementsByTagName(stringFromArg(tag))\n    var reslist = [];\n    for (var i = elements.length - 1; i >= 0; i--) {\n      reslist.push(Sk.misceval.callsim(mod[NODE], elements[i]));\n    }\n    return new Sk.builtin.list(reslist)\n  });\n\n  mod.getElementsByClassName = new Sk.builtin.func(function(cname) {\n    var r = document.getElementsByClassName(stringFromArg(cname));\n    var reslist = [];\n    for (var i = 0; i < r.length; i++) {\n      reslist.push(Sk.misceval.callsim(mod[NODE], r[i]));\n    };\n    return new Sk.builtin.list(reslist);\n  });\n\n  mod.getElementsByName = new Sk.builtin.func(function(cname) {\n    var r = document.getElementsByName(stringFromArg(cname));\n    var reslist = [];\n    for (var i = 0; i < r.length; i++) {\n      reslist.push(Sk.misceval.callsim(mod[NODE], r[i]));\n    };\n    return new Sk.builtin.list(reslist);\n  });\n  */\n  mod[EVENT] = Sk.builtin.event(mod);\n\n  mod[NODE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, node) {\n      self.tp$name = NODE;\n      self.v = node;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(nodePy, name) {\n      var node = Sk.ffi.remapToJs(nodePy);\n      switch(name) {\n        case \'clientHeight\': {\n          return wrapNumber(node[name]);\n        }\n        case \'clientWidth\': {\n          return wrapNumber(node[name]);\n        }\n        case PROP_DIR: {\n          return new Sk.builtin.str(node[PROP_DIR]);\n        }\n        case PROP_FIRST_CHILD: {\n          return wrapNode(node[PROP_FIRST_CHILD]);\n        }\n        case PROP_LAST_CHILD: {\n          return wrapNode(node[PROP_LAST_CHILD]);\n        }\n        case PROP_NEXT_SIBLING: {\n          return wrapNode(node[PROP_NEXT_SIBLING]);\n        }\n        case PROP_PARENT_NODE: {\n          return wrapNode(node[PROP_PARENT_NODE]);\n        }\n        case PROP_PREVIOUS_SIBLING: {\n          return wrapNode(node[PROP_PREVIOUS_SIBLING]);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(node[PROP_HEIGHT], Sk.builtin.nmber.int$);\n        }\n        case PROP_WIDTH: {\n          return Sk.builtin.assk$(node[PROP_WIDTH], Sk.builtin.nmber.int$);\n        }\n        case PROP_STYLE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = PROP_STYLE;\n              self.v = node.style;\n            });\n            $loc.__getattr__ = new Sk.builtin.func(function(stylePy, name) {\n              var style = Sk.ffi.remapToJs(stylePy);\n              switch(name) {\n                case PROP_HEIGHT: {\n                  return new Sk.builtin.str(style[PROP_HEIGHT]);\n                }\n                case PROP_LEFT: {\n                  return new Sk.builtin.str(style[PROP_LEFT]);\n                }\n                case PROP_POSITION: {\n                  return new Sk.builtin.str(style[PROP_POSITION]);\n                }\n                case PROP_TOP: {\n                  return new Sk.builtin.str(style[PROP_TOP]);\n                }\n                case PROP_WIDTH: {\n                  return new Sk.builtin.str(style[PROP_WIDTH]);\n                }\n              }\n            })\n            $loc.__setattr__ = new Sk.builtin.func(function(stylePy, name, valuePy) {\n              var style = Sk.ffi.remapToJs(stylePy);\n              var value = Sk.ffi.remapToJs(valuePy);\n              switch(name) {\n                case PROP_HEIGHT: {\n                  style[PROP_HEIGHT] = value;\n                }\n                break;\n                case PROP_LEFT: {\n                  style[PROP_LEFT] = value;\n                }\n                break;\n                case PROP_POSITION: {\n                  style[PROP_POSITION] = value;\n                }\n                break;\n                case PROP_TOP: {\n                  style[PROP_TOP] = value;\n                }\n                break;\n                case PROP_WIDTH: {\n                  style[PROP_WIDTH] = value;\n                }\n                break;\n                default: {\n                  throw new Sk.builtin.AssertionError(name + " is not a writeable attribute of " + PROP_STYLE);\n                }\n              }\n            })\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(PROP_STYLE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(PROP_STYLE);\n            });\n          }, PROP_STYLE, []));\n        }\n        case METHOD_APPEND_CHILD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_APPEND_CHILD;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, childNode) {\n              return wrapNode(node.appendChild(nodeFromArg(childNode)));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_APPEND_CHILD);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_APPEND_CHILD);\n            });\n          }, METHOD_APPEND_CHILD, []));\n        }\n        case METHOD_GET_CONTEXT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_CONTEXT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, contextIdPy, contextAttributePy) {\n              var contextId = Sk.ffi.remapToJs(contextIdPy);\n              var contextAttribute = Sk.ffi.remapToJs(contextAttributePy);\n              var context = node.getContext(contextId, contextAttribute);\n              return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                $loc.__init__ = new Sk.builtin.func(function(self) {\n                  self.tp$name = CANVAS_RENDERING_CONTEXT_2D;\n                  self.v = context;\n                });\n                $loc.__getattr__ = new Sk.builtin.func(function(contextPy, name) {\n                  switch(name) {\n                    case PROP_FILL_STYLE: {\n                      return new Sk.builtin.str(context[PROP_FILL_STYLE]);\n                    }\n                    case PROP_FONT: {\n                      return new Sk.builtin.str(context[PROP_FONT]);\n                    }\n                    case PROP_LINE_CAP: {\n                      return new Sk.builtin.str(context[PROP_LINE_CAP]);\n                    }\n                    case PROP_LINE_JOIN: {\n                      return new Sk.builtin.str(context[PROP_LINE_JOIN]);\n                    }\n                    case PROP_LINE_WIDTH: {\n                      return Sk.builtin.assk$(context[PROP_LINE_WIDTH], Sk.builtin.nmber.int$);\n                    }\n                    case PROP_SHADOW_BLUR: {\n                      return Sk.builtin.assk$(context[PROP_SHADOW_BLUR], Sk.builtin.nmber.int$);\n                    }\n                    case PROP_SHADOW_COLOR: {\n                      return new Sk.builtin.str(context[PROP_SHADOW_COLOR]);\n                    }\n                    case PROP_SHADOW_OFFSET_X: {\n                      return Sk.builtin.assk$(context[PROP_SHADOW_OFFSET_X], Sk.builtin.nmber.int$);\n                    }\n                    case PROP_SHADOW_OFFSET_Y: {\n                      return Sk.builtin.assk$(context[PROP_SHADOW_OFFSET_Y], Sk.builtin.nmber.int$);\n                    }\n                    case PROP_STROKE_STYLE: {\n                      return new Sk.builtin.str(context[PROP_STROKE_STYLE]);\n                    }\n                    case PROP_TEXT_ALIGN: {\n                      return new Sk.builtin.str(context[PROP_TEXT_ALIGN]);\n                    }\n                    case PROP_TEXT_BASELINE: {\n                      return new Sk.builtin.str(context[PROP_TEXT_BASELINE]);\n                    }\n                    case PROP_WEBKIT_BACKING_STORE_PIXEL_RATIO: {\n                      return Sk.builtin.assk$(context[PROP_WEBKIT_BACKING_STORE_PIXEL_RATIO], Sk.builtin.nmber.int$);\n                    }\n                    case METHOD_ARC: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_ARC;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y, radius, startAngle, endAngle, anticlockwise) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          radius = Sk.ffi.remapToJs(radius);\n                          startAngle = Sk.ffi.remapToJs(startAngle);\n                          endAngle = Sk.ffi.remapToJs(endAngle);\n                          anticlockwise = Sk.ffi.remapToJs(anticlockwise);\n                          context[METHOD_ARC](x, y, radius, startAngle, endAngle, anticlockwise);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ARC);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ARC);\n                        });\n                      }, METHOD_ARC, []));\n                    }\n                    case METHOD_ARC_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_ARC_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x1, y1, x2, y2, radiusX, radiusY, rotation) {\n                          x1 = Sk.ffi.remapToJs(x1);\n                          y1 = Sk.ffi.remapToJs(y1);\n                          x2 = Sk.ffi.remapToJs(x2);\n                          y2 = Sk.ffi.remapToJs(y2);\n                          radiusX = Sk.ffi.remapToJs(radiusX);\n                          radiusY = Sk.ffi.remapToJs(radiusY);\n                          rotation = Sk.ffi.remapToJs(rotation);\n                          context[METHOD_ARC_TO](x1, y1, x2, y2, radiusX, radiusY, rotation);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ARC_TO);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ARC_TO);\n                        });\n                      }, METHOD_ARC_TO, []));\n                    }\n                    case METHOD_BEGIN_PATH: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_BEGIN_PATH;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_BEGIN_PATH]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_BEGIN_PATH);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_BEGIN_PATH);\n                        });\n                      }, METHOD_BEGIN_PATH, []));\n                    }\n                    case METHOD_BEZIER_CURVE_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_BEZIER_CURVE_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, cp1x, cp1y, cp2x, cp2y, x, y) {\n                          cp1x = Sk.ffi.remapToJs(cp1x);\n                          cp1y = Sk.ffi.remapToJs(cp1y);\n                          cp2x = Sk.ffi.remapToJs(cp2x);\n                          cp2y = Sk.ffi.remapToJs(cp2y);\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_BEZIER_CURVE_TO](cp1x, cp1y, cp2x, cp2y, x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_BEZIER_CURVE_TO);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_BEZIER_CURVE_TO);\n                        });\n                      }, METHOD_BEZIER_CURVE_TO, []));\n                    }\n                    case METHOD_CLEAR_RECT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_CLEAR_RECT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y, w, h) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          w = Sk.ffi.remapToJs(w);\n                          h = Sk.ffi.remapToJs(h);\n                          context[METHOD_CLEAR_RECT](x, y, w, h);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLEAR_RECT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLEAR_RECT);\n                        });\n                      }, METHOD_CLEAR_RECT, []));\n                    }\n                    case METHOD_CLIP: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_CLIP;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_CLIP]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLIP);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLIP);\n                        });\n                      }, METHOD_CLIP, []));\n                    }\n                    case METHOD_CLOSE_PATH: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_CLOSE_PATH;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_CLOSE_PATH]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLOSE_PATH);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CLOSE_PATH);\n                        });\n                      }, METHOD_CLOSE_PATH, []));\n                    }\n                    case METHOD_CREATE_LINEAR_GRADIENT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_CREATE_LINEAR_GRADIENT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x0, y0, x1, y1) {\n                          x0 = Sk.ffi.remapToJs(x0);\n                          y0 = Sk.ffi.remapToJs(y0);\n                          x1 = Sk.ffi.remapToJs(x1);\n                          y1 = Sk.ffi.remapToJs(y1);\n                          var gradient = context[METHOD_CREATE_LINEAR_GRADIENT](x0, y0, x1, y1);\n                          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                            $loc.__init__ = new Sk.builtin.func(function(self) {\n                              self.tp$name = CANVAS_GRADIENT_CLASS;\n                              self.v = gradient;\n                            });\n                            $loc.__getattr__ = new Sk.builtin.func(function(gradientPy, name) {\n                              switch(name) {\n                                case METHOD_ADD_COLOR_STOP: {\n                                  return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                                    $loc.__init__ = new Sk.builtin.func(function(self) {\n                                      self.tp$name = METHOD_ADD_COLOR_STOP;\n                                    });\n                                    $loc.__call__ = new Sk.builtin.func(function(self, offset, color) {\n                                      offset = Sk.ffi.remapToJs(offset);\n                                      color = Sk.ffi.remapToJs(color);\n                                      gradient[METHOD_ADD_COLOR_STOP](offset, color);\n                                    });\n                                    $loc.__str__ = new Sk.builtin.func(function(self) {\n                                      return new Sk.builtin.str(METHOD_ADD_COLOR_STOP);\n                                    });\n                                    $loc.__repr__ = new Sk.builtin.func(function(self) {\n                                      return new Sk.builtin.str(METHOD_ADD_COLOR_STOP);\n                                    });\n                                  }, METHOD_ADD_COLOR_STOP, []));\n                                }\n                              }\n                            })\n                            $loc.__setattr__ = new Sk.builtin.func(function(gradientPy, name, valuePy) {\n                              var value = Sk.ffi.remapToJs(valuePy);\n                              switch(name) {\n                                default: {\n                                  throw new Sk.builtin.AssertionError(name + " is not a writeable attribute of " + CANVAS_GRADIENT_CLASS);\n                                }\n                              }\n                            })\n                            $loc.__str__ = new Sk.builtin.func(function(self) {\n                              return new Sk.builtin.str(CANVAS_GRADIENT_CLASS);\n                            });\n                            $loc.__repr__ = new Sk.builtin.func(function(self) {\n                              return new Sk.builtin.str(CANVAS_GRADIENT_CLASS);\n                            });\n                          }, CANVAS_GRADIENT_CLASS, []));\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CREATE_LINEAR_GRADIENT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_CREATE_LINEAR_GRADIENT);\n                        });\n                      }, METHOD_CREATE_LINEAR_GRADIENT, []));\n                    }\n                    case METHOD_FILL: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_FILL;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_FILL]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL);\n                        });\n                      }, METHOD_FILL, []));\n                    }\n                    case METHOD_FILL_RECT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_FILL_RECT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y, w, h) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          w = Sk.ffi.remapToJs(w);\n                          h = Sk.ffi.remapToJs(h);\n                          context[METHOD_FILL_RECT](x, y, w, h);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL_RECT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL_RECT);\n                        });\n                      }, METHOD_FILL_RECT, []));\n                    }\n                    case METHOD_FILL_TEXT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_FILL_TEXT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, text, x, y, maxWidthPy) {\n                          text = Sk.ffi.remapToJs(text);\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          var maxWidth = Sk.ffi.remapToJs(maxWidthPy);\n                          if (typeof maxWidth === \'undefined\') {\n                            context[METHOD_FILL_TEXT](text, x, y);\n                          }\n                          else if (typeof maxWidth === \'number\') {\n                            context[METHOD_FILL_TEXT](text, x, y, maxWidth);\n                          }\n                          else {\n                            throw new Sk.builtin.TypeError("maxWidth");\n                          }\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL_TEXT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_FILL_TEXT);\n                        });\n                      }, METHOD_FILL_TEXT, []));\n                    }\n                    case METHOD_LINE_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_LINE_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_LINE_TO](x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_LINE_TO);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_LINE_TO);\n                        });\n                      }, METHOD_LINE_TO, []));\n                    }\n                    case METHOD_MOVE_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_MOVE_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_MOVE_TO](x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_MOVE_TO);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_MOVE_TO);\n                        });\n                      }, METHOD_MOVE_TO, []));\n                    }\n                    case METHOD_QUADRATIC_CURVE_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_QUADRATIC_CURVE_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, cpx, cpy, x, y) {\n                          cpx = Sk.ffi.remapToJs(cpx);\n                          cpy = Sk.ffi.remapToJs(cpy);\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_QUADRATIC_CURVE_TO](cpx, cpy, x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_QUADRATIC_CURVE_TO);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_QUADRATIC_CURVE_TO);\n                        });\n                      }, METHOD_QUADRATIC_CURVE_TO, []));\n                    }\n                    case METHOD_RECT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_RECT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y, w, h) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          w = Sk.ffi.remapToJs(w);\n                          h = Sk.ffi.remapToJs(h);\n                          context[METHOD_RECT](x, y, w, h);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_RECT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_RECT);\n                        });\n                      }, METHOD_RECT, []));\n                    }\n                    case METHOD_RESTORE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_RESTORE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_RESTORE]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_RESTORE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_RESTORE);\n                        });\n                      }, METHOD_RESTORE, []));\n                    }\n                    case METHOD_ROTATE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_ROTATE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, angle) {\n                          angle = Sk.ffi.remapToJs(angle);\n                          context[METHOD_ROTATE](angle);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ROTATE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_ROTATE);\n                        });\n                      }, METHOD_ROTATE, []));\n                    }\n                    case METHOD_SAVE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_SAVE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_SAVE]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SAVE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SAVE);\n                        });\n                      }, METHOD_SAVE, []));\n                    }\n                    case METHOD_SCALE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_SCALE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_SCALE](x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SCALE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SCALE);\n                        });\n                      }, METHOD_SCALE, []));\n                    }\n                    case METHOD_SET_TRANSFORM: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_SET_TRANSFORM;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, a, b, c, d, e, f) {\n                          a = Sk.ffi.remapToJs(a);\n                          b = Sk.ffi.remapToJs(b);\n                          c = Sk.ffi.remapToJs(c);\n                          d = Sk.ffi.remapToJs(d);\n                          e = Sk.ffi.remapToJs(e);\n                          f = Sk.ffi.remapToJs(f);\n                          context[METHOD_SET_TRANSFORM](a, b, c, d, e, f);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SET_TRANSFORM);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_SET_TRANSFORM);\n                        });\n                      }, METHOD_SET_TRANSFORM, []));\n                    }\n                    case METHOD_STROKE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_STROKE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self) {\n                          context[METHOD_STROKE]();\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE);\n                        });\n                      }, METHOD_STROKE, []));\n                    }\n                    case METHOD_STROKE_RECT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_STROKE_RECT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y, w, h) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          w = Sk.ffi.remapToJs(w);\n                          h = Sk.ffi.remapToJs(h);\n                          context[METHOD_STROKE_RECT](x, y, w, h);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE_RECT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE_RECT);\n                        });\n                      }, METHOD_STROKE_RECT, []));\n                    }\n                    case METHOD_STROKE_TEXT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_STROKE_TEXT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, text, x, y, maxWidthPy) {\n                          text = Sk.ffi.remapToJs(text);\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          var maxWidth = Sk.ffi.remapToJs(maxWidthPy);\n                          if (typeof maxWidth === \'undefined\') {\n                            context[METHOD_STROKE_TEXT](text, x, y);\n                          }\n                          else if (typeof maxWidth === \'number\') {\n                            context[METHOD_STROKE_TEXT](text, x, y, maxWidth);\n                          }\n                          else {\n                            throw new Sk.builtin.TypeError("maxWidth");\n                          }\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE_TEXT);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_STROKE_TEXT);\n                        });\n                      }, METHOD_STROKE_TEXT, []));\n                    }\n                    case METHOD_TRANSFORM: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_TRANSFORM;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, a, b, c, d, e, f) {\n                          a = Sk.ffi.remapToJs(a);\n                          b = Sk.ffi.remapToJs(b);\n                          c = Sk.ffi.remapToJs(c);\n                          d = Sk.ffi.remapToJs(d);\n                          e = Sk.ffi.remapToJs(e);\n                          f = Sk.ffi.remapToJs(f);\n                          context[METHOD_TRANSFORM](a, b, c, d, e, f);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_TRANSFORM);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_TRANSFORM);\n                        });\n                      }, METHOD_TRANSFORM, []));\n                    }\n                    case METHOD_TRANSLATE: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_TRANSLATE;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n                          x = Sk.ffi.remapToJs(x);\n                          y = Sk.ffi.remapToJs(y);\n                          context[METHOD_TRANSLATE](x, y);\n                        });\n                        $loc.__str__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_TRANSLATE);\n                        });\n                        $loc.__repr__ = new Sk.builtin.func(function(self) {\n                          return new Sk.builtin.str(METHOD_TRANSLATE);\n                        });\n                      }, METHOD_TRANSLATE, []));\n                    }\n                  }\n                })\n                $loc.__setattr__ = new Sk.builtin.func(function(contextPy, name, valuePy) {\n                  var context = Sk.ffi.remapToJs(contextPy);\n                  var value = Sk.ffi.remapToJs(valuePy);\n                  switch(name) {\n                    case PROP_FILL_STYLE: {\n                      context[PROP_FILL_STYLE] = value;\n                    }\n                    break;\n                    case PROP_FONT: {\n                      context[PROP_FONT] = value;\n                    }\n                    break;\n                    case PROP_LINE_CAP: {\n                      context[PROP_LINE_CAP] = value;\n                    }\n                    break;\n                    case PROP_LINE_JOIN: {\n                      context[PROP_LINE_JOIN] = value;\n                    }\n                    break;\n                    case PROP_LINE_WIDTH: {\n                      context[PROP_LINE_WIDTH] = value;\n                    }\n                    break;\n                    case PROP_SHADOW_BLUR: {\n                      context[PROP_SHADOW_BLUR] = value;\n                    }\n                    break;\n                    case PROP_SHADOW_COLOR: {\n                      context[PROP_SHADOW_COLOR] = value;\n                    }\n                    break;\n                    case PROP_SHADOW_OFFSET_X: {\n                      context[PROP_SHADOW_OFFSET_X] = value;\n                    }\n                    break;\n                    case PROP_SHADOW_OFFSET_Y: {\n                      context[PROP_SHADOW_OFFSET_Y] = value;\n                    }\n                    break;\n                    case PROP_STROKE_STYLE: {\n                      context[PROP_STROKE_STYLE] = value;\n                    }\n                    break;\n                    case PROP_TEXT_ALIGN: {\n                      context[PROP_TEXT_ALIGN] = value;\n                    }\n                    break;\n                    case PROP_TEXT_BASELINE: {\n                      context[PROP_TEXT_BASELINE] = value;\n                    }\n                    break;\n                    default: {\n                      throw new Sk.builtin.AssertionError(name + " is not a writeable attribute of " + CANVAS_RENDERING_CONTEXT_2D);\n                    }\n                  }\n                })\n                $loc.__str__ = new Sk.builtin.func(function(self) {\n                  return new Sk.builtin.str(CANVAS_RENDERING_CONTEXT_2D);\n                });\n                $loc.__repr__ = new Sk.builtin.func(function(self) {\n                  return new Sk.builtin.str(CANVAS_RENDERING_CONTEXT_2D);\n                });\n              }, CANVAS_RENDERING_CONTEXT_2D, []));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CONTEXT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CONTEXT);\n            });\n          }, METHOD_GET_CONTEXT, []));\n        }\n        case METHOD_INSERT_BEFORE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_INSERT_BEFORE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, newNode, refNode) {\n              return wrapNode(node.insertBefore(nodeFromArg(newNode), nodeFromArg(refNode)));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INSERT_BEFORE)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INSERT_BEFORE)\n            })\n          }, METHOD_INSERT_BEFORE, []));\n        }\n        case METHOD_REMOVE_CHILD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_REMOVE_CHILD;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, childNode) {\n              return wrapNode(node.removeChild(nodeFromArg(childNode)));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_CHILD);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_CHILD);\n            });\n          }, METHOD_REMOVE_CHILD, []));\n        }\n        case METHOD_SET_ATTRIBUTE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_ATTRIBUTE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, name, value) {\n              node.setAttribute(stringFromArg(name), stringFromArg(value));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_ATTRIBUTE)\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_ATTRIBUTE);\n            });\n          }, METHOD_SET_ATTRIBUTE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(nodePy, name, valuePy) {\n      var node = Sk.ffi.remapToJs(nodePy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_DIR: {\n          node[PROP_DIR] = value;\n        }\n        break;\n        case \'id\': {\n          node.setAttribute(name, value);\n        }\n        break;\n        case PROP_HEIGHT: {\n          node[PROP_HEIGHT] = value;\n        }\n        break;\n        case PROP_WIDTH: {\n          node[PROP_WIDTH] = value;\n        }\n        break;\n        default: {\n          node.setAttribute(name, stringFromArg(value));\n        }\n      }\n    });\n    $loc.getCSS = new Sk.builtin.func(function(self,key) {\n      return new Sk.builtin.str(self.v.style[key.v]);\n    });\n    $loc.setCSS = new Sk.builtin.func(function(self, attr, value) {\n      self.v.style[attr.v] = value.v\n    });\n    $loc.getAttribute = new Sk.builtin.func(function(self, key) {\n      var res = self.v.getAttribute(key.v)\n      if (res) {\n        return new Sk.builtin.str(res)\n      }\n      else {\n        return null;\n      }\n    });\n    $loc.setAttribute = new Sk.builtin.func(function(self, attr, value) {\n      self.v.setAttribute(attr.v,value.v)\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(self.v.tagName)\n    })\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(NODE)\n    })\n  }, NODE, []);\n\n  mod[PROP_WINDOW] = Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = WINDOW_CLASS;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_ANIMATION_TIME: {\n          return wrapNumber(window[PROP_ANIMATION_TIME]);\n        }\n        case PROP_DOCUMENT: {\n          return mod[PROP_DOCUMENT];\n        }\n        case "innerHeight": {\n          return wrapNumber(window[name]);\n        }\n        case "innerWidth": {\n          return wrapNumber(window[name]);\n        }\n        case PROP_DEVICE_PIXEL_RATIO: {\n          return Sk.builtin.assk$(window[PROP_DEVICE_PIXEL_RATIO], Sk.builtin.nmber.int$);\n        }\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD_EVENT_LISTENER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, typePy, listenerPy, useCapture) {\n              var type = Sk.ffi.remapToJs(typePy);\n              var listener = function(event) {\n                var eventPy = Sk.misceval.callsim(mod[EVENT], Sk.ffi.referenceToPy(event), EVENT);\n                Sk.misceval.callsim(listenerPy, eventPy);\n              };\n              winListeners[type] = listener;\n              window[METHOD_ADD_EVENT_LISTENER](type, listener, useCapture);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD_EVENT_LISTENER)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD_EVENT_LISTENER)\n            })\n          }, METHOD_ADD_EVENT_LISTENER, []));\n        }\n        case METHOD_REMOVE_EVENT_LISTENER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_REMOVE_EVENT_LISTENER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, typePy, listener, useCapture) {\n              var type = Sk.ffi.remapToJs(typePy);\n              var listener = winListeners[type];\n              delete winListeners[type];\n              window[METHOD_REMOVE_EVENT_LISTENER](type, listener, useCapture);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_EVENT_LISTENER)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_EVENT_LISTENER)\n            })\n          }, METHOD_REMOVE_EVENT_LISTENER, []));\n        }\n        case METHOD_CANCEL_ANIMATION_FRAME: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CANCEL_ANIMATION_FRAME;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, requestID) {\n              if (requestID) {\n                window[METHOD_CANCEL_ANIMATION_FRAME](numberFromArg(requestID));\n              }\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CANCEL_ANIMATION_FRAME)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CANCEL_ANIMATION_FRAME)\n            })\n          }, METHOD_CANCEL_ANIMATION_FRAME, []));\n        }\n        case METHOD_REQUEST_ANIMATION_FRAME: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_REQUEST_ANIMATION_FRAME;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, callback) {\n              var requestID = window[METHOD_REQUEST_ANIMATION_FRAME](function(timestamp) {\n                Sk.misceval.callsim(callback, wrapNumber(timestamp));\n              });\n              return wrapNumber(requestID);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REQUEST_ANIMATION_FRAME)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REQUEST_ANIMATION_FRAME)\n            })\n          }, METHOD_REQUEST_ANIMATION_FRAME, []));\n        }\n        case METHOD_SET_TIMEOUT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_TIMEOUT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, funcPy, delayPy, paramsPy) {\n              var delay = Sk.ffi.remapToJs(delayPy);\n              var params = Sk.ffi.remapToJs(paramsPy);\n              var timeoutID = window[METHOD_SET_TIMEOUT](function() {\n                Sk.misceval.callsim(funcPy);\n              }, delay, params);\n              return wrapNumber(timeoutID);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_TIMEOUT)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_TIMEOUT)\n            })\n          }, METHOD_SET_TIMEOUT, []));\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(WINDOW_CLASS)\n    })\n    $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n      return new Sk.builtin.str(WINDOW_CLASS)\n    })\n  }, WINDOW_CLASS, []));\n\n  mod[PROP_DOCUMENT] = Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = DOCUMENT_CLASS;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_BODY: {\n          return Sk.misceval.callsim(mod[NODE], document[PROP_BODY]);\n        }\n        case PROP_WEBKIT_HIDDEN: {\n          return document[PROP_WEBKIT_HIDDEN];\n        }\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD_EVENT_LISTENER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, typePy, listenerPy, useCapture) {\n              var type = Sk.ffi.remapToJs(typePy);\n              var listener = function(event) {\n                var eventPy = Sk.misceval.callsim(mod[EVENT], Sk.ffi.referenceToPy(event), EVENT);\n                Sk.misceval.callsim(listenerPy, eventPy);\n              };\n              docListeners[type] = listener;\n              document[METHOD_ADD_EVENT_LISTENER](type, listener, useCapture);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD_EVENT_LISTENER)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD_EVENT_LISTENER)\n            })\n          }, METHOD_ADD_EVENT_LISTENER, []));\n        }\n        case METHOD_REMOVE_EVENT_LISTENER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_REMOVE_EVENT_LISTENER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, typePy, listener, useCapture) {\n              var type = Sk.ffi.remapToJs(typePy);\n              var listener = docListeners[type];\n              delete docListeners[type];\n              document[METHOD_REMOVE_EVENT_LISTENER](type, listener, useCapture);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_EVENT_LISTENER)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_REMOVE_EVENT_LISTENER)\n            })\n          }, METHOD_REMOVE_EVENT_LISTENER, []));\n        }\n        case METHOD_CREATE_ELEMENT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CREATE_ELEMENT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, tagName, attributes) {\n              var element = document.createElement(stringFromArg(tagName));\n              if (attributes instanceof Sk.builtin.dict) {\n                for (var iter = attributes.tp$iter(), k = iter.tp$iternext(); k !== undefined; k = iter.tp$iternext()) {\n                  var v = attributes.mp$subscript(k);\n                  if (v === undefined) {\n                    v = null;\n                  }\n                  var kAsJs = Sk.ffi.remapToJs(k);\n                  var vAsJs = Sk.ffi.remapToJs(v);\n                  element.setAttribute(kAsJs, vAsJs);\n                }\n              }\n              return wrapNode(element);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CREATE_ELEMENT)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CREATE_ELEMENT)\n            })\n          }, METHOD_CREATE_ELEMENT, []));\n        }\n        case METHOD_GET_ELEMENT_BY_ID: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_ELEMENT_BY_ID;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, id) {\n              return wrapNode(document.getElementById(stringFromArg(id)));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_ELEMENT_BY_ID)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_ELEMENT_BY_ID)\n            })\n          }, METHOD_GET_ELEMENT_BY_ID, []));\n        }\n        case METHOD_GET_ELEMENTS_BY_TAG_NAME: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_ELEMENTS_BY_TAG_NAME;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, tagName) {\n              var elements = document.getElementsByTagName(stringFromArg(tagName))\n              var xs = [];\n              for (var i = elements.length - 1; i >= 0; i--) {\n                xs.push(wrapNode(elements[i]));\n              }\n              return new Sk.builtin.list(xs);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_ELEMENTS_BY_TAG_NAME)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_ELEMENTS_BY_TAG_NAME)\n            })\n          }, METHOD_GET_ELEMENTS_BY_TAG_NAME, []));\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(DOCUMENT_CLASS)\n    })\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(DOCUMENT_CLASS)\n    })\n  }, DOCUMENT_CLASS, []));\n\n  return mod;\n}\n',"src/lib/pythonds/basic/__init__.py":'\n#__all__ = ["stack"]\n\n\n#from .stack import Stack\n#from .queue import Queue\n\n\n\n',"src/lib/c2ga/__init__.js":'/**\n * Geometric Algebra (c2ga) module for DaVinci Python.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n  /**\n   * Symbolic constants representing the Python classes or functions that are exported by this module.\n   * These are captured here for both consistency and self-documentation.\n   */\n  var CONFORMAL_2    = "Conformal2";    // Multivector of 4-dimensional Conformal space to represent Euclidean 2D Motions.\n\n  // The following symbolic constant simulates a zero scalar argument for convenience functions.\n  var ARG_ZERO      = Sk.builtin.assk$(0, Sk.builtin.nmber.float$);\n\n  var mod = {};\n\n  function isNumber(x)    { return typeof x === \'number\'; }\n  function isString(x)    { return typeof x === \'string\'; }\n  function isBoolean(x)   { return typeof x === \'boolean\'; }\n  function isNull(x)      { return typeof x === \'object\' && x === null; }\n  function isUndefined(x) { return typeof x === \'undefined\'; }\n  function isDefined(x)   { return typeof x !== \'undefined\'; }\n\n  function remapC3ToPy(x0, x1, x2, x3) {\n    return Sk.misceval.callsim(mod[CONFORMAL_2],\n      Sk.builtin.assk$(x0, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x1, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x2, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x3, Sk.builtin.nmber.float$));\n  }\n\n  mod[CONFORMAL_2] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x0, x1, x2, x3) {\n      x0 = Sk.ffi.remapToJs(x0);\n      x1 = Sk.ffi.remapToJs(x1);\n      x2 = Sk.ffi.remapToJs(x2);\n      x3 = Sk.ffi.remapToJs(x3);\n      self.tp$name = CONFORMAL_2;\n      self.v = [x0, x1, x2, x3];\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " + " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.addE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " - " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.subE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " * " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.mulE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " ^ " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.extE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " << " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.lcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        var a0 = a[0];\n        var a1 = a[1];\n        var a2 = a[2];\n        var a3 = a[3];\n        var b0 = b[0];\n        var b1 = b[1];\n        var b2 = b[2];\n        var b3 = b[3];\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        var a0 = lhs;\n        var a1 = 0;\n        var a2 = 0;\n        var a3 = 0;\n        var b0 = rhs[0];\n        var b1 = rhs[1];\n        var b2 = rhs[2];\n        var b3 = rhs[3];\n        var x0 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        var x1 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        var x2 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        var x3 = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return remapC3ToPy(x0, x1, x2, x3);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " >> " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other;\n        var b1 = 0;\n        var b2 = 0;\n        var b3 = 0;\n        self[0] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n      else {\n        var a0 = self[0];\n        var a1 = self[1];\n        var a2 = self[2];\n        var a3 = self[3];\n        var b0 = other[0];\n        var b1 = other[1];\n        var b2 = other[2];\n        var b3 = other[3];\n        self[0] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 0);\n        self[1] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 1);\n        self[2] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 2);\n        self[3] = bladeASM.rcoE2(a0, a1, a2, a3, b0, b1, b2, b3, 3);\n        return selfPy;\n      }\n    });\n    $loc.__or__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction or");\n    });\n    $loc.nb$negative = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapC3ToPy(-self[0], -self[1], -self[2], -self[3]);\n    };\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$invert = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapC3ToPy(self[0], self[1], self[2], -self[3]);\n    };\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      return new Sk.builtin.str(CONFORMAL_2 + "(" + mv.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (isDefined(mv)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([mv[0], mv[1], mv[2], mv[3]], ["1", "i", "j", "I"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + CONFORMAL_2 + "\'>");\n      }\n    });\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction eq");\n    });\n\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      throw new Error("Under construction ne");\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(selfPy, key) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      if (key === \'w\') {\n        return Sk.builtin.assk$(self[0], Sk.builtin.nmber.float$);\n      }\n      else if (key === \'x\') {\n        return Sk.builtin.assk$(self[1], Sk.builtin.nmber.float$);\n      }\n      else if (key === \'y\') {\n        return Sk.builtin.assk$(self[2], Sk.builtin.nmber.float$);\n      }\n      else if (key === \'xy\') {\n        return Sk.builtin.assk$(self[3], Sk.builtin.nmber.float$);\n      }\n      else {\n        throw new Error(key + " is not a valid " + CONFORMAL_2 + " attribute.");\n      }\n    });\n  }, CONFORMAL_2, []);\n\n  return mod;\n}\n',"src/lib/sprite/__init__.js":'//\n//\n// Sprite Graphics Module for DaVinci.\n//\n// Based on the turtle module by Brad Miller.\n//\n// Dependencies:\n//   jQuery\n//\n//\n\nvar SpriteGraphics; // the single identifier needed in the global scope\n\nif (! SpriteGraphics) {\n  SpriteGraphics = {};\n}\n\n\n(function () {\n\n  var Degree2Rad = Math.PI / 180.0; // conversion factor for degrees to radians.\n  var Rad2Degree = 180.0 / Math.PI; // conversion factor for radians to degrees.\n\n  function SpriteCanvas(options) {\n    this.canvasID = SpriteGraphics.defaults.canvasID;\n    if (options.canvasID) {\n      this.canvasID = options.canvasID;\n    }\n\n    this.canvas = document.getElementById(this.canvasID);\n    this.context = this.canvas.getContext(\'2d\');\n    $(this.canvas).fadeIn();\n\n    this.lineScale = 1.0;\n    this.xptscale = 1.0;\n    this.yptscale = 1.0;\n\n    this.llx = -this.canvas.width / 2;\n    this.lly = -this.canvas.height / 2;\n    this.urx = this.canvas.width / 2;\n    this.ury = this.canvas.height / 2;\n    this.setup(this.canvas.width,this.canvas.height);\n    SpriteGraphics.canvasInit = true;\n    this.tlist = []\n\n    this.timeFactor = 5;\n    if (SpriteGraphics.defaults.animate) {\n      this.delay = 5 * this.timeFactor;\n    }\n    else {\n      this.delay = 0;\n    }\n    this.segmentLength = 10;\n    this.renderCounter = 1;\n    this.clearPoint = 0;\n    SpriteGraphics.canvasLib[this.canvasID] = this;\n    //  This can be set to false AFTER the program completes to turn off the fade out on the canvas as a result of exitonclick\n    Sk.tg.fadeOnExit = true;\n  }\n\n  SpriteCanvas.prototype.setup = function(width, height) {\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.lineScale = 1.0;\n    this.xptscale = 1.0;\n    this.yptscale = 1.0;\n\n    this.llx = -this.canvas.width / 2;\n    this.lly = -this.canvas.height / 2;\n    this.urx = this.canvas.width / 2;\n    this.ury = this.canvas.height / 2;\n    this.renderCounter = 1;\n    this.clearPoint = 0;\n    this.timeFactor = 5;\n    if (SpriteGraphics.defaults.animate) {\n      this.delay = 5 * this.timeFactor;\n    }\n    else {\n      this.delay = 0;\n    }\n\n    if (SpriteGraphics.canvasInit == false) {\n      this.context.save();\n      this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n      this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n      SpriteGraphics.canvasInit = true;\n      SpriteGraphics.eventCount = 0;\n      SpriteGraphics.renderClock = 0;\n      SpriteGraphics.renderTime = 0;\n    }\n    else {\n      this.context.restore();\n      this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n      this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n      this.context.clearRect(-this.canvas.width / 2, -this.canvas.height / 2, this.canvas.width, this.canvas.height);\n    }\n  }\n\n  SpriteCanvas.prototype.addToCanvas = function(t) {\n    this.tlist.push(t);\n  }\n\n  SpriteCanvas.prototype.onCanvas = function(t) {\n    return (this.tlist.indexOf(t) >= 0);\n  }\n\n  SpriteCanvas.prototype.isAnimating = function() {\n    return (this.tlist.length > 0);\n  }\n\n  SpriteCanvas.prototype.startAnimating = function(t) {\n    if (! this.isAnimating()) {\n      this.intervalId = setTimeout(render, this.delay);\n    }\n    // Added in case startAnimating is called after it\'s already been added.\n    if (!this.onCanvas(t)) {\n      this.addToCanvas(t);\n    }\n    Sk.isSpriteProgram = true;\n  }\n\n  SpriteCanvas.prototype.doneAnimating = function(t) {\n    this.tlist.splice(0,this.tlist.length);\n    clearTimeout(this.intervalId);\n    $(Sk.runButton).removeAttr(\'disabled\');\n  }\n\n  SpriteCanvas.prototype.cancelAnimation = function() {\n    if (this.intervalId) {\n      clearTimeout(this.intervalId);\n    }\n\n    for (var t in this.tlist) {\n      this.tlist[t].aCount = this.tlist[t].drawingEvents.length - 1;\n    }\n    render();\n  }\n\n  SpriteCanvas.prototype.setSpeedDelay = function(s) {\n    var df = 10 - (s % 11) + 1;\n    this.delay = df * this.timeFactor;\n  }\n\n  SpriteCanvas.prototype.setDelay = function(d) {\n    this.delay = d;\n  }\n\n  SpriteCanvas.prototype.getDelay = function(s) {\n    return this.delay;\n  }\n\n  SpriteCanvas.prototype.setCounter = function(s) {\n    if (!s || s <= 0) {\n      s = 1;\n    }\n    this.renderCounter = s;\n  }\n\n  SpriteCanvas.prototype.getCounter = function() {\n    return this.renderCounter;\n  }\n\n  SpriteCanvas.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n    this.context.restore();\n    this.context.scale(this.canvas.width / (urx - llx), -this.canvas.height / (ury - lly));\n    if (lly == 0) {\n      this.context.translate(-llx, lly - (ury - lly));\n    }\n    else if (lly > 0) {\n      this.context.translate(-llx, -lly * 2);\n    }\n    else {\n      this.context.translate(-llx, -ury);\n    }\n\n    var xlinescale = (urx - llx) / this.canvas.width;\n    var ylinescale = (ury - lly) / this.canvas.height;\n    this.xptscale = xlinescale;\n    this.yptscale = ylinescale;\n    this.lineScale = Math.min(xlinescale,ylinescale);\n    this.context.save();\n\n    this.llx = llx;\n    this.lly = lly;\n    this.urx = urx;\n    this.ury = ury;\n\n  }\n\n  SpriteCanvas.prototype.window_width = function() {\n    return this.canvas.width;\n  }\n\n  SpriteCanvas.prototype.window_height = function() {\n    return this.canvas.height;\n  }\n\n  SpriteCanvas.prototype.bgcolor = function(c) {\n    this.background_color = c;\n    $(this.canvas).css("background-color",c.v);\n  }\n\n  SpriteCanvas.prototype.setSegmentLength = function(s) {\n    this.segmentLength = s;\n  }\n\n  SpriteCanvas.prototype.getSegmentLength = function() {\n    return this.segmentLength;\n  }\n\n  // todo: if animating, this should be deferred until the proper time\n  SpriteCanvas.prototype.exitonclick = function () {\n    var canvas_id = this.canvasID;\n    var theCanvas = this;\n    $(this.canvas).click(function() {\n      if (! theCanvas.isAnimating()) {\n        if (Sk.tg.fadeOnExit) {\n         $("#"+canvas_id).hide();\n       }\n       $("#"+canvas_id).unbind(\'click\');\n       Sk.tg.canvasInit = false;\n       delete Sk.tg.canvasLib[canvas_id];\n     }\n   });\n  }\n\n  SpriteCanvas.prototype.sprites = function() {\n    return SpriteGraphics.spriteList;\n  }\n\n /**\n  * New version NOT attached to a sprite (as per real sprite)\n  */\n  SpriteCanvas.prototype.tracer = function(t, d) {\n    this.setCounter(t);\n    if (t == 0) {\n      for (var i in this.spriteList) {\n        this.spriteList[i].animate = false;\n      }\n      this.cancelAnimation();\n    }\n    if (d !== undefined) {\n      this.setDelay(d);\n    }\n  }\n\n  // check if all sprites are done\n  allDone = function() {\n    var allDone = true;\n    for (var tix in SpriteGraphics.spriteList) {\n      var theT = SpriteGraphics.spriteList[tix];\n      allDone = allDone && (theT.aCount >= theT.drawingEvents.length);\n    }\n    return allDone;\n  }\n\n  //\n  //  This is the function that provides the animation\n  //\n  render = function () {\n    var context = document.getElementById(SpriteGraphics.defaults.canvasID).getContext(\'2d\');\n    with (context) {\n      with (SpriteGraphics.canvasLib[SpriteGraphics.defaults.canvasID]) {\n        clearRect(llx, lly, (urx - llx), (ury - lly));\n      }\n      var incr = SpriteGraphics.canvasLib[SpriteGraphics.defaults.canvasID].getCounter();\n      var lastCanvas = null;\n\n      SpriteGraphics.renderClock += incr;\n\n      for (var tix in SpriteGraphics.spriteList) {\n        var t = SpriteGraphics.spriteList[tix]\n        lastCanvas = t.spriteCanvas \n        if (t.aCount >= t.drawingEvents.length) {\n          t.aCount = t.drawingEvents.length - 1;\n        }\n        moveTo(0, 0);\n        var currentPos = new Vector(0,0,0);\n        var currentHead = new Vector(1,0,0);\n        lineWidth = t.get_pen_width();\n        lineCap = \'round\';\n        lineJoin = \'round\';\n        strokeStyle = \'black\';\n        var filling = false;\n        if (isNaN(t.spriteCanvas.delay)) {\n          t.spriteCanvas.delay = 0\n        }\n        for (var i = t.clearPoint; (i <= t.aCount || t.spriteCanvas.delay == 0) && i < t.drawingEvents.length; i++) {\n          if (i > t.aCount) {\n            // If se jump past aCount, jump it ahead\n            t.aCount = i\n          }\n          var oper = t.drawingEvents[i];\n          var ts = oper[oper.length-1];\n          if (ts <= SpriteGraphics.renderClock || t.spriteCanvas.delay == 0) {\n            if (ts > SpriteGraphics.renderClock) {\n              // If we go past the render clock, jump it ahead\n              SpriteGraphics.renderClock = ts\n            }\n            if (oper[0] == "LT") {  //  line to\n              if (! filling) {\n                beginPath();\n                moveTo(oper[1], oper[2]);\n              }\n              lineTo(oper[3], oper[4]);\n              strokeStyle = oper[5];\n              stroke();\n              currentPos = new Vector(oper[3],oper[4],0);\n              if (! filling)\n                closePath();\n            }\n            else if (oper[0] == "MT") {  // move to\n              moveTo(oper[3], oper[4]);\n              currentPos = new Vector(oper[3],oper[4],0);\n            }\n            else if (oper[0] == "BF") {  // begin fill\n              beginPath();\n              moveTo(oper[1], oper[2]);\n              filling = true;\n            }\n            else if (oper[0] == "EF") {  // end fill\n              fillStyle = oper[3];\n              stroke();\n              fill();\n              closePath();\n              filling = false;\n            }\n            else if (oper[0] == "FC") {  // fill color\n              fillStyle = oper[1];\n            }\n            else if (oper[0] == "TC") {  // sprite color\n              strokeStyle = oper[1];\n            }\n            else if (oper[0] == "PW") {  // Pen width\n              lineWidth = oper[1];\n            }\n            else if (oper[0] == "DT") {  // Dot\n              var col = fillStyle;\n              fillStyle = oper[2];\n              var size = oper[1];\n              fillRect(oper[3] - size / 2, oper[4] - size / 2, size, size);\n              fillStyle = col;\n            }\n            else if (oper[0] == "CI") {  // Circle\n              if (!filling)\n                beginPath();\n              arc(oper[1], oper[2], oper[3], oper[4], oper[5], oper[6]);\n              currentPos = new Vector(oper[1]+Math.cos(oper[5])*oper[3],\n                oper[2]+Math.sin(oper[5])*oper[3],0);\n              stroke();\n              if (! filling) {\n                closePath();\n              }\n            }\n            else if (oper[0] == "WT") { // write\n              if (font)\n                font = oper[2];\n              scale(1, -1);\n              fillText(oper[1], oper[3], -oper[4]);\n              scale(1, -1);\n            } else if (oper[0] == "ST") {  // stamp\n              t.drawSprite(oper[3], new Vector(oper[1], oper[2], 0));\n            } else if (oper[0] == "HT") { // hide sprite\n              t.visible = false;\n            } else if (oper[0] == "SH") { // show sprite\n              t.visible = true;\n            } else if (oper[0] == "TT") {\n              currentHead = oper[1];\n            } else if (oper[0] == "CL") { // RNL clear\n              clear_canvas(t.canvasID);\n              t.clearPoint = i; // Different from reset that calls clear because it leaves the sprites where they are\n            } else if (oper[0] == "DL") { // RNL delay\n              var df = oper[1];\n              t.spriteCanvas.delay = df\n            } else if (oper[0] == "SC") { // RNL speed change\n              var s = oper[1]\n              if (s < 0)\n                s = 0\n              if (s > 10)\n                s = 10\n              var df = (10 - (s % 11) + 1) * t.spriteCanvas.timeFactor  //  10\n              if (s == 0) {\n                df = 0\n              }\n              // t.spriteCanvas.intervalId = clearInterval(t.spriteCanvas.intervalId);\n              t.spriteCanvas.delay = df;\n              // t.spriteCanvas.intervalId = setInterval(render, t.spriteCanvas.delay)\n              if (oper[2]) {\n                t.spriteCanvas.setSegmentLength(oper[2]);\n              }\n            } else if (oper[0] == "NO") {\n              // RNL no op\n            } else {\n            } // end of oper[0] test\n          } // end of if ts < render clock\n        } // end of for\n        t.aCount += incr;\n        if (t.visible) {\n          // draw the sprite\n          t.drawSprite(currentHead.toAngle(), currentPos); // just use currentHead\n        }\n      }\n      // if (t.aCount >= t.drawingEvents.length) {\n      if (SpriteGraphics.renderClock > SpriteGraphics.eventCount ){ // && allDone() ){\n        // t.spriteCanvas.doneAnimating(t);\n        if (lastCanvas) lastCanvas.doneAnimating(t);\n      }\n      else {\n        // t.spriteCanvas.intervalId = setTimeout(render, t.spriteCanvas.delay)\n        if (lastCanvas) {\n          lastCanvas.intervalId = setTimeout(render, lastCanvas.delay)\n        }\n      }\n    }\n  }\n\n  // Constructor for Sprite objects\n  function Sprite() {\n    if (arguments.length >= 1) {\n      this.initialize(arguments[0]);\n    }\n    else {\n      this.initialize();\n    }\n    SpriteGraphics.spriteList.push(this);\n  }\n\n  Sprite.prototype.go_home = function () {\n    // Put sprite in initial state\n    // sprite is headed to the right\n    // with position 0,0,0 in the middle of the canvas.\n    // x grows to the right\n    // y grows towards the top of the canvas\n    with (this) {\n      position = home;\n      context.moveTo(home[0], home[1]);\n      heading = new Vector([1.0, 0.0, 0.0]); // to the right; in sprite space x+ direction\n      normal = new Vector([0.0, 0.0, -1.0]); // in z- direction\n    }\n  };\n\n  Sprite.prototype.initialize = function () {\n    // Initialize the sprite.\n    var options = { };\n\n    if (arguments.length >= 1) {\n      options = arguments[0];\n    }\n\n    this.canvasID = SpriteGraphics.defaults.canvasID;\n    if (options.canvasID) {\n      this.canvasID = options.canvasID;\n    }\n    this.context = document.getElementById(this.canvasID).getContext(\'2d\');\n\n    this.animate = SpriteGraphics.defaults.animate;\n\n    with (this.context) {\n      if (SpriteGraphics.canvasInit == false) {\n        save();\n        translate(canvas.width / 2, canvas.height / 2); // move 0,0 to center.\n        scale(1, -1); // scaling like this flips the y axis the right way.\n        if (! SpriteGraphics.canvasLib[this.canvasID]) {\n          SpriteGraphics.canvasLib[this.canvasID] = new SpriteCanvas(options);\n        }\n        SpriteGraphics.canvasInit = true;\n      }\n      else {\n        clear_canvas(this.canvasID);\n      }\n\n      this.spriteCanvas = SpriteGraphics.canvasLib[this.canvasID];\n      this.home = new Vector([0.0, 0.0, 0.0]);\n      this.visible = true;\n      this.shapeStore = {};\n      this.shapeStore[\'turtle\'] = turtleShapePoints();\n      this.shapeStore[\'arrow\'] = defaultShapePoints();\n      this.shapeStore[\'circle\'] = circleShapePoints();\n      this.shapeStore[\'classic\'] = classicShapePoints();\n      this.currentShape = \'classic\';\n      this.drawingEvents = [];\n\n      this.filling = false;\n      this.pen = true;\n      this.penStyle = \'black\';\n      this.penWidth = 2;\n      this.fillStyle = \'black\';\n      this.position = [ ];\n      this.heading = [ ];\n      this.normal = [ ];\n      this.go_home();\n      this.aCount = 0;\n      this.clearPoint = 0;\n    }\n  }\n\n  function turtleShapePoints() {\n    var pl = [\n    [0,16],\n    [-2,14],\n    [-1,10],\n    [-4,7],\n    [-7,9],\n    [-9,8],\n    [-6,5],\n    [-7,1],\n    [-5,-3],\n    [-8,-6],\n    [-6,-8],\n    [-4,-5],\n    [0,-7],\n    [4,-5],\n    [6,-8],\n    [8,-6],\n    [5,-3],\n    [7,1],\n    [6,5],\n    [9,8],\n    [7,9],\n    [4,7],\n    [1,10],\n    [2,14]\n    ];\n    res = [];\n    for (p in pl) {\n      res.push(new Vector(pl[p]));\n    }\n    return res;\n  }\n\n  function defaultShapePoints() {\n    var pl = [\n    [-10,0],\n    [10,0],\n    [0,10]\n    ];\n    res = [];\n    for (p in pl) {\n      res.push(new Vector(pl[p]));\n    }\n    return res;\n  }\n\n  function circleShapePoints() {\n    var pl = [\n    [10,0],\n    [9.51,3.09],\n    [8.09,5.88],\n    [5.88,8.09],\n    [3.09,9.51],\n    [0,10],\n    [-3.09,9.51],\n    [-5.88,8.09],\n    [-8.09,5.88],\n    [-9.51,3.09],\n    [-10,0],\n    [-9.51,-3.09],\n    [-8.09,-5.88],\n    [-5.88,-8.09],\n    [-3.09,-9.51],\n    [-0.00,-10.00],\n    [3.09,-9.51],\n    [5.88,-8.09],\n    [8.09,-5.88],\n    [9.51,-3.09]\n    ];\n    res = [];\n    for (p in pl) {\n      res.push(new Vector(pl[p]));\n    }\n    return res;\n  }\n\n  function classicShapePoints() {\n    var pl = [\n    [0,0],\n    [-5,-9],\n    [0,-7],\n    [5,-9]\n    ];\n    res = [];\n    for (p in pl) {\n      res.push(new Vector(pl[p]));\n    }\n    return res;\n  }\n\n  Sprite.prototype.clean = function () {\n    // Clean the canvas\n    // Optional second argument is color\n    with (this) {\n      if (arguments.length >= 1) {\n        clear_canvas(canvasID, arguments[0]);\n      }\n      else {\n        clear_canvas(canvasID);\n      }\n      initialize();\n    }\n  }\n\n  Sprite.prototype.addDrawingEvent = function(eventList) {\n    SpriteGraphics.eventCount += 1;\n    eventList.push(SpriteGraphics.eventCount);\n    this.drawingEvents.push(eventList);\n  }\n\n  //  \n  //  Drawing Functions\n  //\n\n    // break a line into segments\n    // sp:  Vector of starting position\n    // ep:  Vector of ending position\n    // sl:  int length of segments\n    segmentLine = function(sp, ep, sL, pen) {\n      var head = ep.sub(sp).normalize();\n      var numSegs = Math.floor(ep.sub(sp).len() / sL);\n      var res = [];\n      var oldp = sp;\n      var newp;\n      var op = ""\n      if (pen)\n        op = "LT"\n      else\n        op = "MT"\n      for (var i = 0; i < numSegs; i++) {\n        newp = oldp.linear(1, sL, head);\n        res.push([op,oldp[0],oldp[1],newp[0],newp[1]]);\n        oldp = newp;\n      }\n      if (! ((oldp[0] == ep[0]) && (oldp[1] == ep[1])))\n        res.push([op, oldp[0], oldp[1], ep[0], ep[1]]);\n      return res;\n    }\n\n    Sprite.prototype.draw_line = function(newposition) {\n      with (this) {\n        with (context) {\n          if (! animate) {\n            if (! filling) {\n              beginPath();\n              moveTo(position[0], position[1]);\n            }\n            lineCap = \'round\';\n            lineJoin = \'round\';\n            lineWidth = get_pen_width();\n            strokeStyle = penStyle;\n            lineTo(newposition[0], newposition[1]);\n            stroke();\n            if (! filling)\n              closePath();\n          } else {\n            var r = segmentLine(position, newposition, spriteCanvas.getSegmentLength(), pen);\n            for (var s in r) {\n              r[s].push(penStyle);\n              addDrawingEvent(r[s]);\n            }\n            if (! spriteCanvas.isAnimating()) {\n              spriteCanvas.startAnimating(this);\n            } else {\n              if (! spriteCanvas.onCanvas(this))\n                spriteCanvas.addToCanvas(this);\n            }\n          }\n        }\n      }\n    }\n\n    Sprite.prototype.forward = function (d) {\n      with (this) {\n        var newposition = position.linear(1, d, heading);\n        goto(newposition);\n      }\n    }\n\n    Sprite.prototype.backward = function(d) {\n      this.forward(-d);\n    }\n\n    // This is an internal function that sets the position without doing any drawing\n    Sprite.prototype.teleport_to = function(nx, ny) {\n      if (nx instanceof Vector)\n        var newposition = nx;\n      else\n        var newposition = new Vector([nx,ny,0]);\n      this.context.moveTo(newposition[0], newposition[1]);\n      this.position = newposition;\n    }\n\n    Sprite.prototype.goto = function(nx, ny) {\n      if (nx instanceof Vector)\n        var newposition = nx;\n      else\n        var newposition = new Vector([nx,ny,0]);\n      with (this) {\n        if (pen) {\n          draw_line(newposition);\n        } else {\n          if (! animate) {\n            context.moveTo(newposition[0], newposition[1]);\n          } else {\n            var r = segmentLine(position, newposition, spriteCanvas.getSegmentLength(), pen);\n            for (var s in r)\n              addDrawingEvent(r[s]);\n            if (! spriteCanvas.isAnimating()) {\n              spriteCanvas.startAnimating(this);\n            } else {\n              if (! spriteCanvas.onCanvas(this))\n                spriteCanvas.addToCanvas(this);\n            }\n          }\n        }\n        position = newposition;\n      }\n    }\n\n    Sprite.prototype.delay = function(d) {\n      if (d != null) {\n        if (d < 0) {\n          d = -d;\n        }\n        if (!this.animate) {\n          this.spriteCanvas.setDelay(d);\n        } \n        else {\n          this.spriteCanvas.setDelay(d);\n          this.addDrawingEvent(["DL", d]);\n          this.addDrawingEvent(["NO"]);\n        }\n      }\n      return this.spriteCanvas.getDelay();\n    }\n\n    Sprite.prototype.speed = function(s,t) {\n      if (s > 0 && !this.animate) {\n        this.animate = true;\n        this.spriteCanvas.setSpeedDelay(s);\n      }\n      else if (s == 0 && !this.animate) {\n        this.spriteCanvas.setSpeedDelay(s);\n      }\n      else {\n        // this.animate = false;\n        // this.spriteCanvas.cancelAnimation();\n        this.addDrawingEvent(["SC", s, t]);\n        this.addDrawingEvent(["NO"]);\n      }\n      if (t) {\n        this.spriteCanvas.setSegmentLength(t);\n        // set the number of units to divide a segment into\n      }\n      else {\n        this.spriteCanvas.setSegmentLength(10);\n      }\n    }\n\n    Sprite.prototype.tracer = function(t, d) {\n      this.spriteCanvas.setCounter(t);\n      if (t == 0) {\n       this.animate=false;\n       this.spriteCanvas.cancelAnimation();\n     }\n     if (d !== undefined)\n       this.spriteCanvas.setDelay(d);\n   }\n\n   Sprite.prototype.getRenderCounter = function() {\n    return this.spriteCanvas.getCounter();\n  }\n\n  Sprite.prototype.turn = function (phi) {\n    with (this) {\n      var alpha = phi * Degree2Rad;\n      var left = normal.cross(heading);\n      var newheading = heading.rotateNormal(left, normal, alpha);\n      heading = newheading;\n\n      if (animate) {\n        addDrawingEvent(["TT",heading]);\n      }\n    }\n  }\n\n  Sprite.prototype.right = Sprite.prototype.turn;\n\n  Sprite.prototype.left = function(phi) {\n    this.turn(-phi);\n  }\n\n  Sprite.prototype.get_heading = function () {\n    if (SpriteGraphics.defaults.degrees)\n      return this.heading.toAngle()\n    else\n      return this.heading\n  }\n\n  Sprite.prototype.get_position = function () {\n    return this.position;\n  }\n\n  Sprite.prototype.getx = function () {\n    return this.position[0];\n  }\n\n  Sprite.prototype.gety = function () {\n    return this.position[1];\n  }\n\n  Sprite.prototype.set_heading = function(newhead) {\n    if ((typeof(newhead)).toLowerCase() === \'number\') {\n      this.heading = Vector.angle2vec(newhead);\n    } else {\n      this.heading = newhead;\n    }\n  }\n\n  Sprite.prototype.towards = function(to, y) {\n    // set heading vector to point towards another point.\n    if ((typeof(to)).toLowerCase() === \'number\')\n      to = new Vector(to, y, 0);\n    else if (! (to instanceof Vector)) {\n      to = new Vector(to);\n    }\n    var res = to.sub(this.position);\n    res = res.normalize();\n    if (SpriteGraphics.defaults.degrees)\n      return res.toAngle();\n    else\n      return res;\n  }\n\n  Sprite.prototype.distance = function(to, y) {\n    if ((typeof(to)).toLowerCase() === \'number\')\n      to = new Vector(to, y, 0);\n    return this.position.sub(new Vector(to)).len();\n  }\n\n  Sprite.prototype.dot = function() {\n    var size = 2;\n    if (arguments.length >= 1) size = arguments[0];\n    size = size * this.spriteCanvas.lineScale;\n    with (this) {\n      with (context) {\n        var color = penStyle;\n        var nc = arguments[1] || color;\n        if (! animate) {\n          fillStyle = nc;\n          fillRect(position[0] - size / 2, position[1] - size / 2, size, size);\n          fillStyle = color;\n        } else {\n          addDrawingEvent(["DT", size, nc, position[0], position[1]]);\n        }\n      }\n    }\n  }\n\n  Sprite.prototype.circle = function(radius, extent) {\n    if (extent === undefined) {\n      extent = 360\n    }\n    if (this.animate) {\n     var arcLen = Math.abs(radius * Math.PI * 2.0  * extent / 360);\n     var segLen = this.spriteCanvas.getSegmentLength();\n     if (arcLen <= segLen)\n      this.arc(radius,extent);\n    else {\n        //  Break the arc into segments for animation\n        var extentPart = (segLen / arcLen) * extent;\n        var extentLeft = extent;\n        while (Math.abs(extentLeft) > Math.abs(extentPart)) {\n          this.arc(radius, extentPart);\n          extentLeft = extentLeft - extentPart;\n        }\n        if (Math.abs(extentLeft) > 0.01)\n          this.arc(radius, extentLeft);\n      }\n    } else {\n      this.arc(radius,extent);\n    }\n  }\n  \n  Sprite.prototype.arc = function(radius, extent) {\n    //  Figure out where the sprite is and which way it\'s facing\n    var spriteHeading = this.get_heading()\n    var tx = this.position[0]\n    var ty = this.position[1]\n\n    //  Figure out the circle center\n    var cx = tx + (radius * Math.cos((spriteHeading + 90) * Degree2Rad));\n    var cy = ty + (radius * Math.sin((spriteHeading + 90) * Degree2Rad));\n\n    //  Canvas arc angles go CLOCKWISE, not COUNTERCLOCKWISE like Sprite\n\n    //  Figure out our arc angles\n    var startAngleDeg;\n    if (radius >= 0)\n      startAngleDeg = spriteHeading - 90;\n    else\n      startAngleDeg = spriteHeading + 90;\n\n    var endAngleDeg;\n    if (extent) {\n      if (radius >= 0)\n        endAngleDeg = startAngleDeg + extent;\n      else\n        endAngleDeg = startAngleDeg - extent;\n    }\n    else {\n      if (radius >= 0)\n        endAngleDeg = startAngleDeg + 360;\n      else\n        endAngleDeg = startAngleDeg - 360;\n    }\n\n    //  Canvas angles are opposite\n    startAngleDeg = 360 - startAngleDeg\n    endAngleDeg   = 360 - endAngleDeg\n\n    //  Becuase the y axis has been flipped in HTML5 Canvas with a tanslation, we need to adjust the angles\n    startAngleDeg = -startAngleDeg\n    endAngleDeg   = -endAngleDeg\n\n    //  Convert to radians\n    var startAngle = startAngleDeg * Degree2Rad;\n    var endAngle   = endAngleDeg   * Degree2Rad;\n\n\n    //  Do the drawing\n    if (! this.animate) {\n      if (!this.filling)\n        this.context.beginPath();\n      this.context.arc(cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0));\n      this.context.stroke();\n      if (!this.filling)\n        this.context.closePath();\n    }\n    else {\n      this.addDrawingEvent(["CI", cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0)]);\n    }\n\n    //  Move the sprite only if we have to\n    if (extent && (extent % 360) != 0) {\n      var turtleArc;\n      if (radius >= 0)\n        turtleArc = extent;\n      else \n        turtleArc = -extent;\n      var newHeading = (spriteHeading + turtleArc) % 360;\n      if (newHeading < 0)\n        newHeading = newHeading + 360;\n\n      var nx = cx + (radius * Math.cos((newHeading - 90) * Degree2Rad));\n      var ny = cy + (radius * Math.sin((newHeading - 90) * Degree2Rad));  //  y coord is inverted in sprite\n\n      //  Move it internally\n      this.set_heading(newHeading);\n      this.teleport_to(nx,ny);\n\n      //  If we\'re animating the sprite, move it on the screen\n      if (this.animate) {\n        this.addDrawingEvent(["TT", this.heading]);\n      }\n    }\n  }\n\n  Sprite.prototype.write = function(theText, move, align, font) {\n    if (! this.animate) {\n      if (font)\n        this.context.font = font.v;\n      this.context.scale(1, -1);\n      this.context.fillText(theText, this.position[0], -this.position[1]);\n      this.context.scale(1, -1);\n    } else {\n      var fontspec;\n      if (font)\n        fontspec = font.v\n      this.addDrawingEvent(["WT", theText, fontspec, this.position[0], this.position[1]]);\n    }\n  }\n\n  Sprite.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n    this.spriteCanvas.setworldcoordinates(llx, lly, urx, ury);\n  }\n\n  //\n  // Pen and Style functions\n  //\n  Sprite.prototype.pen_down = function () {\n    this.pen = true;\n  }\n\n  Sprite.prototype.down = Sprite.prototype.pen_down;\n\n  Sprite.prototype.pen_up = function () {\n    this.pen = false;\n  }\n\n  Sprite.prototype.up = Sprite.prototype.pen_up;\n\n  Sprite.prototype.get_pen = function () {\n    return this.pen;\n  }\n\n  Sprite.prototype.set_pen_width = function (w) {\n    if (this.animate)\n      this.addDrawingEvent(["PW", w * this.spriteCanvas.lineScale]);\n    else\n      this.penWidth = w;\n  }\n\n  Sprite.prototype.get_pen_width = function() {\n    return this.penWidth * this.spriteCanvas.lineScale;\n  }\n\n  Sprite.prototype.set_pen_color = function (c, g, b) {\n    if (typeof(c) == "string") {\n      this.penStyle = c;\n    }\n    else {\n      var rs\n      var gs\n      var bs\n      if (typeof( c) == "object" && c.length == 3) {\n        var c0 = Sk.builtin.asnum$(c[0]);\n        var c1 = Sk.builtin.asnum$(c[1]);\n        var c2 = Sk.builtin.asnum$(c[2]);\n      }\n      else {\n        var c0 = Sk.builtin.asnum$(c);\n        var c1 = Sk.builtin.asnum$(g);\n        var c2 = Sk.builtin.asnum$(b);\n      }\n      rs = c0.toString(16);\n      gs = c1.toString(16);\n      bs = c2.toString(16);\n      while (rs.length < 2) rs = "0" + rs;\n      while (gs.length < 2) gs = "0" + gs;\n      while (bs.length < 2) bs = "0" + bs;\n      c = "#" + rs + gs + bs;\n      this.penStyle = c;\n    }\n\n    this.context.strokeStyle = c;\n    if (this.animate)\n      this.addDrawingEvent(["TC", c]);\n  }\n\n  Sprite.prototype.set_fill_color = function (c, g, b) {\n    if (typeof(c) == "string") {\n      this.fillStyle = c;\n    }\n    else {\n      var rs\n      var gs\n      var bs\n      if (typeof( c) == "object" && c.length == 3) {\n        var c0 = Sk.builtin.asnum$(c[0]);\n        var c1 = Sk.builtin.asnum$(c[1]);\n        var c2 = Sk.builtin.asnum$(c[2]);\n      } else {\n        var c0 = Sk.builtin.asnum$(c);\n        var c1 = Sk.builtin.asnum$(g);\n        var c2 = Sk.builtin.asnum$(b);\n      }\n      rs = c0.toString(16)\n      gs = c1.toString(16)\n      bs = c2.toString(16)\n      while (rs.length < 2) rs = "0" + rs;\n      while (gs.length < 2) gs = "0" + gs;\n      while (bs.length < 2) bs = "0" + bs;\n      c = "#" + rs + gs + bs;\n      this.fillStyle = c;\n    }\n\n    this.context.fillStyle = c;\n    if (this.animate)\n      this.addDrawingEvent(["FC", c]);\n  }\n\n  Sprite.prototype.begin_fill = function () {\n    if (! this.animate) {\n      this.filling = true;\n      this.context.beginPath();\n      this.context.moveTo(this.position[0], this.position[1]);\n    }\n    else {\n      this.addDrawingEvent(["BF", this.position[0], this.position[1]]);\n    }\n  }\n\n  Sprite.prototype.end_fill = function () {\n    if (! this.animate) {\n      this.context.stroke();\n      this.context.fill();\n      this.context.closePath();\n      this.filling = false;\n    } else\n    this.addDrawingEvent(["EF", this.position[0], this.position[1], this.fillStyle]);\n  }\n\n  Sprite.prototype.showturtle = function() {\n    if (this.animate) {\n      this.addDrawingEvent(["SH"]);\n    }\n    this.visible = true;\n  }\n\n  Sprite.prototype.hideturtle = function() {\n    if (this.animate) {\n      this.addDrawingEvent(["HT"]);\n    }\n    this.visible = false;\n  }\n\n  Sprite.prototype.isvisible = function() {\n    return this.visible;\n  }\n\n  // \n  // Appearance\n  //\n\n  Sprite.prototype.shape = function(s) {\n    if (this.shapeStore[s])\n      this.currentShape = s;\n    else {\n    }\n  }\n\n  Sprite.prototype.drawSprite = function(heading, position) {\n    var rtPoints = [];\n    var plist = this.shapeStore[this.currentShape];\n    var head;\n    if (! (heading === undefined))\n      head = heading - 90.0;\n    else\n      head = this.heading.toAngle() - 90.0;\n    if (! position)\n      position = this.position\n    for (p in plist) {\n      rtPoints.push(plist[p].scale(this.spriteCanvas.xptscale,this.spriteCanvas.yptscale).rotate(head).add(position));\n    }\n    this.context.beginPath();\n    this.context.moveTo(rtPoints[0][0], rtPoints[0][1]);\n    for (var i = 1; i < rtPoints.length; i++) {\n      this.context.lineTo(rtPoints[i][0], rtPoints[i][1]);\n    }\n    this.context.closePath();\n    this.context.stroke();\n    if (this.fillStyle) {\n      this.context.fill();\n    }\n  }\n\n  Sprite.prototype.stamp = function() {\n    // either call drawSprite or just add a DT with current position and heading to the drawingEvents list.\n    if (this.animate) {\n      this.addDrawingEvent(["ST",this.position[0],this.position[1],this.heading.toAngle()]);\n    } else\n    this.drawSprite();\n  }\n\n  Sprite.prototype.clear = function () {\n    if (this.animate) {\n      this.addDrawingEvent(["CL"])\n    }\n    else {\n      clear_canvas(this.canvasID);\n    }\n  }\n\n  function clear_canvas(canId) {\n    with (document.getElementById(canId).getContext(\'2d\')) {\n      if (arguments.length >= 2) {\n        // fillStyle = arguments[1];\n        // fillRect(0, 0, canvas.width, canvas.height);\n      }\n      clearRect(-canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);\n    }\n  }\n\n\n  // Create a 3d Vector class for manipulating sprite heading, and position.\n\n  function Vector(x, y, z) {\n    if ((typeof(x)).toLowerCase() === \'number\') {\n      Array.prototype.push.call(this, x);\n      Array.prototype.push.call(this, y);\n      Array.prototype.push.call(this, z);\n    }\n    else {\n      for (var i in x) {\n        Array.prototype.push.call(this, x[i]);\n      }\n    }\n  }\n\n\n  // Create a vector object given a direction as an angle.\n  Vector.angle2vec = function(phi) {\n    var res = new Vector([0.0,0.0,0.0]);\n    phi = phi * Degree2Rad;\n    res[0] = Math.cos(phi);\n    res[1] = Math.sin(phi);\n    return res.normalize();\n  }\n\n  // This trick allows you to access a Vector object like an array\n  // myVec[0] == x\n  // myVec[1] == y\n  // myVec[2] == z\n  // we really only need the z for the convenience of rotating!\n  // If we were using Geometric Algebra we wouldn\'t need it at all and could stay in the plane.\n  Vector.prototype.addItem = function(item) {\n    Array.prototype.push.call(this, item);\n  }\n\n  Vector.prototype.linear = function(a, b, v) {\n    var result = [ ];\n    for (var c = 0; c <= 2; ++c) {\n      result[c] = a * this[c] + b * v[c];\n    }\n    return new Vector(result);\n  }\n\n  Vector.prototype.cross = function(v) {\n    // Return cross product of this and v\n    var result = [ ];\n    for (var c = 0; c <= 2; ++c) {\n      result[c] = this[(c + 1) % 3] * v[(c + 2) % 3] - this[(c + 2) % 3] * v[(c + 1) % 3];\n    }\n    return new Vector(result);\n  }\n\n  Vector.prototype.rotate = function(angle) {\n    // Rotate this counter clockwise by angle.\n    var perp = new Vector(-this[1], this[0], 0);\n    angle = angle * Degree2Rad;\n    var c = Math.cos(angle);\n    var s = Math.sin(angle);\n    return new Vector(this[0] * c + perp[0] * s, this[1] * c + perp[1] * s, 0);\n  }\n\n  Vector.prototype.rotateNormal = function(v, w, alpha) {\n    // Return rotation of this in direction of v about w over alpha\n    // Requires: v, w are vectors; alpha is angle in radians\n    //   this, v, w are orthonormal\n    return this.linear(Math.cos(alpha), Math.sin(alpha), v);\n  }\n\n  Vector.prototype.normalize = function() {\n    var n = this.len();\n    var res = this.div(n);\n    return res;\n  }\n\n  Vector.prototype.toAngle = function() {\n    // workaround for values getting set to +/i xxx e -16 fooling the +/- checks below\n    if (Math.abs(this[1]) < 0.00001) this[1] = 0.0;\n    if (Math.abs(this[0]) < 0.00001) this[0] = 0.0;\n    var rads = Math.atan(Math.abs(this[1]) / Math.abs(this[0]));\n    var deg = rads * Rad2Degree;\n    if (this[0] < 0 && this[1] > 0) deg = 180 - deg;\n    else if (this[0] < 0 && this[1] <= 0) deg = 180.0 + deg;\n    else if (this[0] >= 0 && this[1] < 0) deg = 360 - deg;\n    return deg;\n  }\n\n  // divide all vector components by the same value\n  Vector.prototype.div = function(n) {\n    res = []\n    res[0] = this[0] / n;\n    res[1] = this[1] / n;\n    res[2] = this[2] / n;\n    return new Vector(res);\n  }\n\n  // subtract one vector from another\n  Vector.prototype.sub = function(v) {\n    res = new Vector(0, 0, 0);\n    res[0] = this[0] - v[0];\n    res[1] = this[1] - v[1];\n    res[2] = this[2] - v[2];\n    return res;\n  }\n\n  Vector.prototype.add = function(v) {\n    res = new Vector(0, 0, 0);\n    res[0] = this[0] + v[0];\n    res[1] = this[1] + v[1];\n    res[2] = this[2] + v[2];\n    return res;\n  }\n\n  Vector.prototype.smul = function(k) {  // scalar multiplication\n    res = new Vector(0, 0, 0);\n    res[0] = this[0] * k;\n    res[1] = this[1] * k;\n    res[2] = this[2] * k;\n    return res;\n  }\n\n  Vector.prototype.scale = function(xs,ys) {\n    res = new Vector(0,0,0);\n    res[0] =  this[0] * ys;\n    res[1] =  this[1] * xs;\n    res[2] = 1.0;\n    return res;\n  }\n\n  Vector.prototype.len = function() {\n    return Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n  }\n\n  SpriteGraphics.defaults = {canvasID: \'mycanvas\', degrees: true, animate: true};\n  SpriteGraphics.spriteList = [];\n  SpriteGraphics.Sprite = Sprite;\n  SpriteGraphics.SpriteCanvas = SpriteCanvas;\n  SpriteGraphics.canvasLib = {};\n  SpriteGraphics.clear_canvas = clear_canvas;\n  SpriteGraphics.Vector = Vector;\n  SpriteGraphics.canvasInit = false;\n  SpriteGraphics.eventCount = 0;\n  SpriteGraphics.renderClock = 0;\n  SpriteGraphics.renderTime  = 0;\n\n})();\n\nvar $builtinmodule = function(name) {\n\n  var mod = {};\n\n  // The exported name of the SPRITE class.\n  var SPRITE = "Sprite";\n\n  // First we create an object, this will end up being the class\n  Sk.tg = SpriteGraphics;\n\n  var checkArgs = function(expected, actual, func) {\n    if (actual != expected ) {\n      throw new Sk.builtin.TypeError(func + " takes exactly " + expected + " positional argument (" + actual + " given)");\n    }\n  }\n\n  var sprite = function($gbl, $loc) {\n\n    $loc.__init__ = new Sk.builtin.func(function(self, options) {\n      SpriteGraphics.defaults = {"canvasID": Sk.canvas, "animate": true, "degrees": true};\n      self.skType = SPRITE;\n      self.tp$name = SPRITE;\n      self.v = new SpriteGraphics.Sprite();\n      if (options instanceof Sk.builtin.dict) {\n        for (var iter = options.tp$iter(), k = iter.tp$iternext(); k !== undefined; k = iter.tp$iternext()) {\n          var v = options.mp$subscript(k);\n          if (v === undefined) {\n            v = null;\n          }\n          var kAsJs = Sk.ffi.remapToJs(k);\n          var vAsJs = Sk.ffi.remapToJs(v);\n          Sk.misceval.callsim(self[\'__setattr__\'], self, kAsJs, v);\n        }\n      }\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(self, key) {\n\n      var BACKWARD = "backward";\n      var BEGIN_FILL = "begin_fill";\n      // color is implemented as a callable attribute for compatibility.\n      var COLOR = "color";\n      var DOWN = "down";\n      var END_FILL = "end_fill";\n      // FILL_COLOR is implemented as a callable attribute for backwcompatibility.\n      var FILL_COLOR = "fillcolor";\n      var FORWARD = "forward";\n      var GOTO = "goto";\n      var LEFT = "left";\n      var POSITION = "position";\n      var RIGHT = "right";\n      // shape is implemented as a callable attribute for compatibility.\n      var SHAPE = "shape";\n      var STAMP = "stamp";\n      var UP = "up";\n      // Capture the target of the attribute operation.\n      var target = self.v;\n\n      switch(key) {\n        case BACKWARD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = BACKWARD;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, distance) {\n              distance = Sk.builtin.asnum$(distance);\n              checkArgs(2, arguments.length, BACKWARD);\n              target.forward(-distance);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(BACKWARD)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(BACKWARD)\n            })\n\n          }, BACKWARD, []));\n        }\n        case BEGIN_FILL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = BEGIN_FILL;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              checkArgs(1, arguments.length, BEGIN_FILL);\n              target.begin_fill();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(BEGIN_FILL)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(BEGIN_FILL)\n            })\n\n          }, BEGIN_FILL, []));\n        }\n        case COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = COLOR;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, color, green, blue) {\n              if(color) {\n                if (blue) {\n                  target.set_pen_color(color, green, blue);\n                  target.set_fill_color(color, green, blue);\n                }\n                else {\n                  color = color.v || target.context.fillStyle;\n                  target.set_pen_color(color);\n                  target.set_fill_color(color);\n                }\n              }\n              else {\n                return [target.penStyle, target.fillStyle];\n              }\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(COLOR)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(COLOR)\n            })\n\n          }, COLOR, []));\n        }\n        case DOWN: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = DOWN;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              checkArgs(1, arguments.length, DOWN);\n              target.pen_down();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(DOWN)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(DOWN)\n            })\n\n          }, DOWN, []));\n        }\n        case END_FILL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = END_FILL;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              checkArgs(1, arguments.length, END_FILL);\n              target.end_fill();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(END_FILL)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(END_FILL)\n            })\n\n          }, END_FILL, []));\n        }\n        case FILL_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = FILL_COLOR;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, color, green, blue) {\n              if (color) {\n                if (blue) {\n                  target.set_fill_color(color, green, blue);\n                }\n                else {\n                  color = color.v || target.context.fillStyle;\n                  target.set_fill_color(color);\n                }\n              }\n              else {\n                return target.fillStyle;\n              }\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(FILL_COLOR)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(FILL_COLOR)\n            })\n\n          }, FILL_COLOR, []));\n        }\n        case FORWARD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = FORWARD;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, distance) {\n              distance = Sk.builtin.asnum$(distance);\n              checkArgs(2, arguments.length, FORWARD);\n              target.forward(distance);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(FORWARD)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(FORWARD)\n            })\n\n          }, FORWARD, []));\n        }\n        case GOTO: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = GOTO;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, nx, ny) {\n              nx = Sk.builtin.asnum$(nx);\n              ny = Sk.builtin.asnum$(ny);\n              checkArgs(3, arguments.length, GOTO);\n              target.goto(nx, ny);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(GOTO)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(GOTO)\n            })\n\n          }, GOTO, []));\n        }\n        case LEFT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = LEFT;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, angle) {\n              angle = Sk.builtin.asnum$(angle);\n              checkArgs(2, arguments.length, LEFT);\n              target.turn(-angle);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(LEFT)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(LEFT)\n            })\n\n          }, LEFT, []));\n        }\n        case POSITION: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = POSITION;\n              checkArgs(1, arguments.length, POSITION);\n            });\n\n            $loc.__getattr__ = new Sk.builtin.func(function(self, key) {\n              switch(key) {\n                case "x": {\n                  var position = target.get_position();\n                  return Sk.builtin.assk$(position[0], Sk.builtin.nmber.float$);\n                }\n                break;\n                case "y": {\n                  var position = target.get_position();\n                  return Sk.builtin.assk$(position[1], Sk.builtin.nmber.float$);\n                }\n                break;\n                default: {\n                  // do nothing.\n                }\n              }\n            });\n\n            $loc.__setattr__ = new Sk.builtin.func(function(self, key, value) {\n              switch(key) {\n                case "x": {\n                  var nx = Sk.builtin.asnum$(value);\n                  checkArgs(3, arguments.length, key);\n                  target.goto(nx, target.gety());\n                }\n                break;\n                case "y": {\n                  var ny = Sk.builtin.asnum$(value);\n                  checkArgs(3, arguments.length, key);\n                  target.goto(target.getx(), ny);\n                }\n                break;\n                default: {\n                  // do nothing.\n                }\n              }\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(POSITION)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(POSITION)\n            })\n\n          }, POSITION, []));\n        }\n        case RIGHT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = RIGHT;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, angle) {\n              angle = Sk.builtin.asnum$(angle);\n              checkArgs(2, arguments.length, RIGHT);\n              target.turn(angle);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(RIGHT)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(RIGHT)\n            })\n\n          }, RIGHT, []));\n        }\n        case SHAPE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = SHAPE;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self, shape) {\n              checkArgs(2, arguments.length, SHAPE);\n              target.shape(shape.v);\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(SHAPE)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(SHAPE)\n            })\n\n          }, SHAPE, []));\n        }\n        case STAMP: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = STAMP;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              checkArgs(1, arguments.length, STAMP);\n              target.stamp();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(STAMP)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(STAMP)\n            })\n\n          }, STAMP, []));\n        }\n        case UP: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = UP;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              checkArgs(1, arguments.length, UP);\n              target.pen_up();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UP)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self, arg) {\n              return new Sk.builtin.str(UP)\n            })\n\n          }, UP, []));\n        }\n        default: {\n          // Do nothing\n        }\n      }\n    });\n\n    $loc.__setattr__ = new Sk.builtin.func(function(self, name, value) {\n\n      var COLOR = "color";\n      var FILL_COLOR = "fillcolor";\n      var POSITION = "position";\n      var SHAPE = "shape";\n\n      switch(name) {\n        case COLOR: {\n          if(value) {\n            var color = value.v || self.v.context.fillStyle;\n            self.v.set_pen_color(color);\n            self.v.set_fill_color(color);\n          }\n        }\n        break;\n        case FILL_COLOR: {\n          if (value) {\n            self.v.set_fill_color(value.v || self.v.context.fillStyle);\n          }\n        }\n        break;\n        case POSITION: {\n          if (value) {\n            checkArgs(3, arguments.length, SHAPE);\n            self.v.goto(value.v[1], value.v[2]);\n          }\n        }\n        break;\n        case SHAPE: {\n          if (value) {\n            checkArgs(3, arguments.length, SHAPE);\n            self.v.shape(value.v);\n          }\n        }\n        break;\n        default: {\n//          throw new Sk.builtin.AttributeError("\'" + SPRITE + "\' object has no attribute setter \'" + name + "\'.");\n        }\n      }\n    });\n\n    $loc.setposition = new Sk.builtin.func(function(self,nx,ny) {\n      nx = Sk.builtin.asnum$(nx);\n      ny = Sk.builtin.asnum$(ny);\n      checkArgs(3,arguments.length,"setposition()");\n      self.v.up();\n      self.v.goto(nx,ny);\n      self.v.down();\n    });\n\n    $loc.setpos = $loc.setposition;\n\n    $loc.setheading = new Sk.builtin.func(function(self, newhead) {\n      newhead = Sk.builtin.asnum$(newhead);\n      checkArgs(2,arguments.length,"setheading()");\n      return self.v.set_heading(newhead);\n    });\n\n    $loc.seth = $loc.setheading;\n\n    $loc.home = new Sk.builtin.func(function(self) {\n      self.v.go_home();\n    });\n\n    $loc.dot = new Sk.builtin.func(function(self, /*opt*/ size, color) {\n      size = Sk.builtin.asnum$(size);\n      size = size || 1;\n      if (color) {\n        color = color.v || self.v.penStyle;\n      }\n      self.v.dot(size, color);\n    });\n\n    $loc.circle = new Sk.builtin.func(function(self, radius, extent) {\n      radius = Sk.builtin.asnum$(radius);\n      extent = Sk.builtin.asnum$(extent);\n      self.v.circle(radius, extent);\n    });\n\n    $loc.delay = new Sk.builtin.func(function(self, d) {\n      d = Sk.builtin.asnum$(d);\n      return self.v.delay(d);\n    });\n\n    $loc.speed = new Sk.builtin.func(function(self, s, t) {\n      s = Sk.builtin.asnum$(s);\n      t = Sk.builtin.asnum$(t);\n      self.v.speed(s,t);\n    });\n\n    $loc.tracer = new Sk.builtin.func(function(self, t, d) {\n      t = Sk.builtin.asnum$(t);\n      d = Sk.builtin.asnum$(d);\n      self.v.tracer(t, d);\n    });\n\n    $loc.update = new Sk.builtin.func(function(self) {\n      //  Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n    });\n\n    $loc.heading = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"heading()");\n      return self.v.get_heading();\n    });\n\n    $loc.xcor = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"xcor()");\n      var res = self.v.getx();\n      return res;\n    });\n\n    $loc.ycor = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"ycor()");\n      var res = self.v.gety();\n      return res;\n    });\n\n    $loc.towards = new Sk.builtin.func(function(self, tx, ty) {\n      tx = Sk.builtin.asnum$(tx);\n      ty = Sk.builtin.asnum$(ty);\n      if ((typeof(tx)).toLowerCase() === \'number\')\n        tx = [tx, ty, 0];\n      return self.v.towards(tx);\n    });\n\n    // tx can be either a number or a vector position.\n    // tx can not be a sprite at this time as multiple sprites have not been implemented yet.\n    $loc.distance = new Sk.builtin.func(function(self, tx, ty) {\n      tx = Sk.builtin.asnum$(tx);\n      ty = Sk.builtin.asnum$(ty);\n      if ((typeof(tx)).toLowerCase() === \'number\') {\n        tx = [tx, ty, 0];\n      }\n      else {\n        tx = [tx.v.getx(), tx.v.gety(), 0];\n      }\n      return self.v.distance(tx);\n    });\n\n    //\n    // Setting and Measurement\n    //\n\n    $loc.width = new Sk.builtin.func(function(self, w) {\n     w = Sk.builtin.asnum$(w);\n     checkArgs(2,arguments.length,"width()");\n     self.v.set_pen_width(w);\n   });\n\n    $loc.pensize = $loc.width;\n\n    $loc.isdown = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"isdown()");\n      return self.v.get_pen();\n    });\n\n    $loc.pencolor = new Sk.builtin.func(function(self, color, green, blue) {\n      if (color) {\n        if (blue) {\n          color = Sk.builtin.asnum$(color);\n          green = Sk.builtin.asnum$(green);\n          blue = Sk.builtin.asnum$(blue);\n          self.v.set_pen_color(color, green, blue);\n        }\n        else {\n          color = color.v || self.v.context.fillStyle;\n          self.v.set_pen_color(color);\n        }\n      }\n      else {\n        return self.v.penStyle;\n      }\n    });\n\n    $loc.color = new Sk.builtin.func(function(self, color, green, blue) {\n      if(color) {\n        if (blue) {\n          self.v.set_pen_color(color, green, blue);\n          self.v.set_fill_color(color, green, blue);\n        }\n        else {\n          color = color.v || self.v.context.fillStyle;\n          self.v.set_pen_color(color);\n          self.v.set_fill_color(color);\n        }\n      }\n      else {\n        return [self.v.penStyle, self.v.fillStyle];\n      }\n    });\n\n    $loc.fill = new Sk.builtin.func(function(self, fillt) {\n      if (fillt === undefined)\n        return self.v.filling;\n      if (fillt)\n        self.v.begin_fill();\n      else\n        self.v.end_fill();\n    });\n\n    //\n    // More drawing control\n    //\n\n    $loc.reset = new Sk.builtin.func(function(self) {\n      self.v.clean();\n    });\n\n    $loc.showturtle = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"showturtle()");\n      self.v.showturtle();\n    });\n\n    $loc.st = $loc.showturtle;\n\n    $loc.hideturtle = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"hideturtle()");\n      self.v.hideturtle();\n    });\n\n    $loc.ht = $loc.hideturtle;\n\n    $loc.isvisible = new Sk.builtin.func(function(self) {\n      checkArgs(1,arguments.length,"isvisible()");\n      self.v.isvisible()\n    });\n\n    // todo the move, align, and font parameters should be kwargs...\n    $loc.write = new Sk.builtin.func(function(self, mystr, move, align, font) {\n      self.v.write(mystr.v, move, align, font);\n    });\n\n    // todo clean  -- again multiple sprites\n\n    $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx, lly, urx, ury) {\n      llx = Sk.builtin.asnum$(llx);\n      lly = Sk.builtin.asnum$(lly);\n      urx = Sk.builtin.asnum$(urx);\n      ury = Sk.builtin.asnum$(ury);\n      self.v.setworldcoordinates(llx, lly, urx, ury);\n    });\n\n    $loc.clear = new Sk.builtin.func(function(self) {\n      self.v.clear()\n    });\n  }\n\n  mod[SPRITE] = Sk.misceval.buildClass(mod, sprite, SPRITE, []);\n\n  var screen = function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      SpriteGraphics.defaults = {canvasID: Sk.canvas, animate: true, degrees: true};\n      var currentCanvas = SpriteGraphics.canvasLib[SpriteGraphics.defaults.canvasID];\n      if (currentCanvas === undefined) {\n        self.theScreen = new SpriteGraphics.SpriteCanvas(SpriteGraphics.defaults);\n      } else {\n        self.theScreen = currentCanvas;\n      }\n    });\n\n    $loc.bgcolor = new Sk.builtin.func(function(self, c) {\n      self.theScreen.bgcolor(c);\n    });\n\n    $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx,lly,urx,ury) {\n     llx = Sk.builtin.asnum$(llx);\n     lly = Sk.builtin.asnum$(lly);\n     urx = Sk.builtin.asnum$(urx);\n     ury = Sk.builtin.asnum$(ury);\n     self.theScreen.setworldcoordinates(llx,lly,urx,ury);\n   });\n\n    $loc.exitonclick = new Sk.builtin.func(function(self) {\n      self.theScreen.exitonclick();\n    });\n\n    $loc.title = new Sk.builtin.func(function(self,titlestring) {\n      // no op....\n    });\n\n    $loc.window_width = new Sk.builtin.func(function(self) {\n      return self.theScreen.window_width();\n    });\n\n    $loc.window_height = new Sk.builtin.func(function(self) {\n      return self.theScreen.window_height();\n    });\n\n    $loc.sprites = new Sk.builtin.func(function(self) {\n      return self.theScreen.sprites();\n    });\n\n    $loc.colormode = new Sk.builtin.func(function(self) {\n      //  Empty function to emulate compatibility\n    });\n\n    var myfunc = function(self, width, height, startx, starty) {\n      width = Sk.builtin.asnum$(width);\n      height = Sk.builtin.asnum$(height);\n      self.theScreen.setup(width,height);\n    }\n    // this should allow for named parameters\n    myfunc.co_varnames = [\'self\',\'width\',\'height\',\'startx\',\'starty\'];\n    myfunc.$defaults = [null,500,500,0,0];\n    $loc.setup = new Sk.builtin.func(myfunc);\n  }\n\n  mod.Screen = Sk.misceval.buildClass(mod, screen, \'Screen\', []);\n\n  mod.tracer = new Sk.builtin.func(function(t, d) {\n    t = Sk.builtin.asnum$(t);\n    d = Sk.builtin.asnum$(d);\n    for (var i in Sk.tg.canvasLib) {\n      Sk.tg.canvasLib[i].tracer(t, d);\n    }\n  });\n\n  mod.update = new Sk.builtin.func(function(self) {\n    //  Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n  });\n\n  return mod\n}\n',"src/lib/unittestgui/__init__.py":"__author__ = 'bmiller'\n\nimport document\n\n\nclass unittest:\n    def __init__(self):\n        self.numPassed = 0\n        self.numFailed = 0\n        self.divid = document.currentDiv()\n        self.mydiv = document.getElementById(self.divid)\n        res = document.getElementById(self.divid+'_unit_results')\n        if res:\n            self.resdiv = res\n            res.innerHTML = ''\n        else:\n            self.resdiv = document.createElement('div')\n            self.resdiv.setAttribute('id',self.divid+'_unit_results')\n            self.resdiv.setAttribute('class','unittest-results')\n        self.mydiv.appendChild(self.resdiv)\n\n        self.tlist = []\n        testNames = {}\n        for name in dir(self):\n            if name[:4] == 'test' and name not in testNames:\n                self.tlist.append(getattr(self,name))\n                testNames[name]=True\n\n    def setup(self):\n        pass\n\n    def tearDown(self):\n        pass\n\n    def main(self):\n        l = document.createElement('ul')\n        self.resdiv.appendChild(l)\n        self.resList = l\n\n        for func in self.tlist:\n            try:\n                self.setup()\n                func()\n                self.tearDown()\n            except:\n                self.appendResult('Error')\n                self.numFailed += 1\n        self.showSummary()\n\n    def assertEqual(self, actual, expected, feedback=\"\"):\n        res = actual==expected\n        self.appendResult(res,str(actual)+' to be equal to ',expected, feedback)\n\n    def assertNotEqual(actual, expected, feedback=\"\"):\n        res = actual != expected\n        self.appendResult(res,str(actual)+' to not equal ',expected,feedback)\n\n    def assertTrue(self,x, feedback=\"\"):\n        res = x\n        self.appendResult(res,str(x)+' to be ',True,feedback)\n\n    def assertFalse(self,x, feedback=\"\"):\n        res = not x\n        self.appendResult(res,str(x)+' to be ',False,feedback)\n\n    def assertIs(self,a,b, feedback=\"\"):\n        res = a is b\n        self.appendResult(res,str(a)+' to be the same object as ',b,feedback)\n\n    def assertIsNot(self,a,b, feedback=\"\"):\n        res = a is not b\n        self.appendResult(res,str(a)+' to not be the same object as ',b,feedback)\n\n    def assertIsNone(self,x, feedback=\"\"):\n        res = x is None\n        self.appendResult(res,x,None,feedback)\n\n    def assertIsNotNone(self,x, feedback=\"\"):\n        res = x is not None\n        self.appendResult(res,str(x)+' to not be ',None,feedback)\n\n    def assertIn(self,a,b, feedback=\"\"):\n        res = a in b\n        self.appendResult(res,str(a)+' to be in ',b,feedback)\n\n    def assertNotIn(self,a,b, feedback=\"\"):\n        res = a not in b\n        self.appendResult(res,str(a)+' to not be in ',b,feedback)\n\n    def assertIsInstance(self,a,b, feedback=\"\"):\n        res = isinstance(a,b)\n        self.appendResult(res,str(a)+' to be an instance of ',b,feedback)\n\n    def assertNotIsInstance(self,a,b, feedback=\"\"):\n        res = not isinstance(a,b)\n        self.appendResult(res,str(a)+' to not be an instance of ',b,feedback)\n\n    def assertAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) == 0\n        self.appendResult(res,str(a)+' to equal ',b,feedback)\n\n    def assertNotAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) != 0\n        self.appendResult(res,str(a)+' to not equal ',b,feedback)\n\n    def assertGreater(self,a,b, feedback=\"\"):\n        res = a > b\n        self.appendResult(res,str(a)+' to be greater than ',b,feedback)\n\n    def assertGreaterEqual(self,a,b, feedback=\"\"):\n        res = a >= b\n        self.appendResult(res,str(a)+' to be greater than or equal to ',b,feedback)\n\n    def assertLess(self,a,b, feedback=\"\"):\n        res = a < b\n        self.appendResult(res,str(a)+' to be less than ',b,feedback)\n\n    def assertLessEqual(self,a,b, feedback=\"\"):\n        res = a <= b\n        self.appendResult(res,str(a)+' to be less than or equal to ',b,feedback)\n\n    def appendResult(self,res,actual,expected,feedback):\n        if res == 'Error':\n            msg = 'Error'\n        elif res:\n            msg = 'Pass'\n            self.numPassed += 1\n        else:\n            msg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n            self.numFailed += 1\n\n        pTag = document.createElement('li')\n        pTag.innerHTML = msg\n        self.resList.appendChild(pTag)\n\n    def showSummary(self):\n        pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n        pTag = document.createElement('p')\n        pTag.innerHTML = \"You passed: \" + str(pct) + \"% of the tests\"\n        self.resdiv.appendChild(pTag)\n        if pct < 90:\n            self.resdiv.setCSS('background-color','#de8e96')\n        else:\n            self.resdiv.setCSS('background-color','#83d382')\n\n\n\n","src/lib/webgl/matrix4.js":"// more from 'tdl'\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var temp0v3_ = new Float32Array(3);\n    var temp1v3_ = new Float32Array(3);\n    var temp2v3_ = new Float32Array(3);\n\n    var temp0v4_ = new Float32Array(4);\n    var temp1v4_ = new Float32Array(4);\n    var temp2v4_ = new Float32Array(4);\n\n    var temp0m4_ = new Float32Array(16);\n    var temp1m4_ = new Float32Array(16);\n    var temp2m4_ = new Float32Array(16);\n\n    var normalize = function(dst, a) {\n        var n = 0.0;\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            n += a[i] * a[i];\n        n = Math.sqrt(n);\n        if (n > 0.00001) {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = a[i] / n;\n        } else {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = 0;\n        }\n        return dst;\n    };\n\n    var cross = function(dst, a, b) {\n        dst[0] = a[1] * b[2] - a[2] * b[1];\n        dst[1] = a[2] * b[0] - a[0] * b[2];\n        dst[2] = a[0] * b[1] - a[1] * b[0];\n        return dst;\n    };\n\n    var subVector = function(dst, a, b) {\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            dst[i] = a[i] - b[i];\n        return dst;\n    };\n\n    var dot = function(a, b) {\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n    };\n\n    mod.lookAt = new Sk.builtin.func(function(view, eye, target, up)\n            {\n                var t0 = temp0v3_;\n                var t1 = temp1v3_;\n                var t2 = temp2v3_;\n\n                var vz = normalize(t0, subVector(t0, eye.v, target.v));\n                var vx = normalize(t1, cross(t1, up.v, vz));\n                var vy = cross(t2, vz, vx);\n\n                var dst = view.v;\n                dst[ 0] = vx[0];\n                dst[ 1] = vy[0];\n                dst[ 2] = vz[0];\n                dst[ 3] = 0;\n                dst[ 4] = vx[1];\n                dst[ 5] = vy[1];\n                dst[ 6] = vz[1];\n                dst[ 7] = 0;\n                dst[ 8] = vx[2];\n                dst[ 9] = vy[2];\n                dst[10] = vz[2];\n                dst[11] = 0;\n                dst[12] = -dot(vx, eye.v);\n                dst[13] = -dot(vy, eye.v);\n                dst[14] = -dot(vz, eye.v);\n                dst[15] = 1;\n\n                return view;\n            });\n\n    mod.perspective = new Sk.builtin.func(function(proj, angle, aspect, near, far)\n            {\n                var f = Math.tan(Math.PI * 0.5 - 0.5 * (angle * Math.PI / 180));\n                var rangeInv = 1.0 / (near - far);\n\n                var dst = proj.v;\n\n                dst[0]  = f / aspect;\n                dst[1]  = 0;\n                dst[2]  = 0;\n                dst[3]  = 0;\n\n                dst[4]  = 0;\n                dst[5]  = f;\n                dst[6]  = 0;\n                dst[7]  = 0;\n\n                dst[8]  = 0;\n                dst[9]  = 0;\n                dst[10] = (near + far) * rangeInv;\n                dst[11] = -1;\n\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = near * far * rangeInv * 2;\n                dst[15] = 0;\n\n                return proj;\n            });\n\n    // builds, not appending\n    mod.rotationY = new Sk.builtin.func(function(target, angle)\n            {\n                var dst = target.v;\n                var c = Math.cos(angle * Math.PI / 180);\n                var s = Math.sin(angle * Math.PI / 180);\n\n                dst[ 0] = c;\n                dst[ 1] = 0;\n                dst[ 2] = -s;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = s;\n                dst[ 9] = 0;\n                dst[10] = c;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n\n                return target;\n            });\n\n    mod.identity = new Sk.builtin.func(function(target)\n            {\n                var dst = target.v;\n                dst[ 0] = 1;\n                dst[ 1] = 0;\n                dst[ 2] = 0;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = 0;\n                dst[ 9] = 0;\n                dst[10] = 1;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n                return target;\n            });\n\n    // row major\n    mod.mul = new Sk.builtin.func(function(target, x, y)\n            {\n                var dst = target.v;\n                var a = x.v;\n                var b = y.v;\n                var a00 = a[0];\n                var a01 = a[1];\n                var a02 = a[2];\n                var a03 = a[3];\n                var a10 = a[ 4 + 0];\n                var a11 = a[ 4 + 1];\n                var a12 = a[ 4 + 2];\n                var a13 = a[ 4 + 3];\n                var a20 = a[ 8 + 0];\n                var a21 = a[ 8 + 1];\n                var a22 = a[ 8 + 2];\n                var a23 = a[ 8 + 3];\n                var a30 = a[12 + 0];\n                var a31 = a[12 + 1];\n                var a32 = a[12 + 2];\n                var a33 = a[12 + 3];\n                var b00 = b[0];\n                var b01 = b[1];\n                var b02 = b[2];\n                var b03 = b[3];\n                var b10 = b[ 4 + 0];\n                var b11 = b[ 4 + 1];\n                var b12 = b[ 4 + 2];\n                var b13 = b[ 4 + 3];\n                var b20 = b[ 8 + 0];\n                var b21 = b[ 8 + 1];\n                var b22 = b[ 8 + 2];\n                var b23 = b[ 8 + 3];\n                var b30 = b[12 + 0];\n                var b31 = b[12 + 1];\n                var b32 = b[12 + 2];\n                var b33 = b[12 + 3];\n                dst[ 0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n                dst[ 1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n                dst[ 2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n                dst[ 3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n                dst[ 4] = a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;\n                dst[ 5] = a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;\n                dst[ 6] = a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;\n                dst[ 7] = a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;\n                dst[ 8] = a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;\n                dst[ 9] = a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;\n                dst[10] = a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;\n                dst[11] = a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;\n                dst[12] = a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;\n                dst[13] = a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;\n                dst[14] = a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;\n                dst[15] = a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;\n                return target;\n            });\n\n    mod.invert = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                var m00 = m[0 * 4 + 0];\n                var m01 = m[0 * 4 + 1];\n                var m02 = m[0 * 4 + 2];\n                var m03 = m[0 * 4 + 3];\n                var m10 = m[1 * 4 + 0];\n                var m11 = m[1 * 4 + 1];\n                var m12 = m[1 * 4 + 2];\n                var m13 = m[1 * 4 + 3];\n                var m20 = m[2 * 4 + 0];\n                var m21 = m[2 * 4 + 1];\n                var m22 = m[2 * 4 + 2];\n                var m23 = m[2 * 4 + 3];\n                var m30 = m[3 * 4 + 0];\n                var m31 = m[3 * 4 + 1];\n                var m32 = m[3 * 4 + 2];\n                var m33 = m[3 * 4 + 3];\n                var tmp_0  = m22 * m33;\n                var tmp_1  = m32 * m23;\n                var tmp_2  = m12 * m33;\n                var tmp_3  = m32 * m13;\n                var tmp_4  = m12 * m23;\n                var tmp_5  = m22 * m13;\n                var tmp_6  = m02 * m33;\n                var tmp_7  = m32 * m03;\n                var tmp_8  = m02 * m23;\n                var tmp_9  = m22 * m03;\n                var tmp_10 = m02 * m13;\n                var tmp_11 = m12 * m03;\n                var tmp_12 = m20 * m31;\n                var tmp_13 = m30 * m21;\n                var tmp_14 = m10 * m31;\n                var tmp_15 = m30 * m11;\n                var tmp_16 = m10 * m21;\n                var tmp_17 = m20 * m11;\n                var tmp_18 = m00 * m31;\n                var tmp_19 = m30 * m01;\n                var tmp_20 = m00 * m21;\n                var tmp_21 = m20 * m01;\n                var tmp_22 = m00 * m11;\n                var tmp_23 = m10 * m01;\n\n                var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n                    (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n                var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n                    (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n                var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n                    (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n                var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n                    (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n                var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n                dst[ 0] = d * t0;\n                dst[ 1] = d * t1;\n                dst[ 2] = d * t2;\n                dst[ 3] = d * t3;\n                dst[ 4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n                        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n                dst[ 5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n                        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n                dst[ 6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n                        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n                dst[ 7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n                        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n                dst[ 8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n                        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n                dst[ 9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n                        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n                dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n                        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n                dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n                        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n                dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n                        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n                dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n                        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n                dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n                        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n                dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n                        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n                return target;\n            });\n\n    mod.transpose = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                for (var j = 0; j < 4; ++j) {\n                    for (var i = 0; i < 4; ++i)\n                    dst[j * 4 + i] = m[i * 4 + j];\n                }\n                return dst;\n            });\n\n    return mod;\n};\n","src/lib/webgl/__init__.js":"var $builtinmodule = function(name)\n{\n  var mod = {};\n\n  var makeFailHTML = function(msg) {\n    return '' +\n      '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\n      '<td align=\"center\">' +\n      '<div style=\"display: table-cell; vertical-align: middle;\">' +\n      '<div style=\"\">' + msg + '</div>' +\n      '</div>' +\n      '</td></tr></table>';\n  };\n\n  var GET_A_WEBGL_BROWSER = '' +\n    'This page requires a browser that supports WebGL.<br/>' +\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\n\n  var NEED_HARDWARE = '' +\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\n    '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\n  \n  var create3DContext = function(canvas) {\n    var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n    var gl = null;\n    for (var ii = 0; ii < names.length; ++ii) {\n      try {\n        gl = canvas.getContext(names[ii]);\n      }\n      catch(e) {\n      }\n      if (gl) {\n          break;\n      }\n    }\n    if (gl) {\n      // Disallow selection by default. This keeps the cursor from changing to an\n      // I-beam when the user clicks and drags. It's easier on the eyes.\n      function returnFalse() {\n        return false;\n      }\n\n      canvas.onselectstart = returnFalse;\n      canvas.onmousedown = returnFalse;\n    }\n    return gl;\n  };\n\n  var setupWebGL = function(canvasContainerId, opt_canvas) {\n    var container = document.getElementById(canvasContainerId);\n    var context;\n    if (!opt_canvas) {\n      opt_canvas = container.getElementsByTagName(\"canvas\")[0];\n    }\n    if (!opt_canvas) {\n        // this browser doesn't support the canvas tag at all. Not even 2d.\n      container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      return;\n    }\n\n    var gl = create3DContext(opt_canvas);\n    if (!gl) {\n      // TODO(gman): fix to official way to detect that it's the user's machine, not the browser.\n      var browserStrings = navigator.userAgent.match(/(\\w+\\/.*? )/g);\n      var browsers = {};\n      try {\n        for (var b = 0; b < browserStrings.length; ++b) {\n          var parts = browserStrings[b].match(/(\\w+)/g);\n          var bb = [];\n          for (var ii = 1; ii < parts.length; ++ii) {\n            bb.push(parseInt(parts[ii]));\n          }\n          browsers[parts[0]] = bb;\n        }\n      }\n      catch (e) {\n      }\n      if (browsers.Chrome &&\n           (browsers.Chrome[0] > 7 ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] > 0) ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] == 0 && browsers.Chrome[2] >= 521))) {\n        container.innerHTML = makeFailHTML(NEED_HARDWARE);\n      }\n      else {\n        container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      }\n    }\n    return gl;\n  };\n\n  /**\n   * The Context encapsulates the underlying WebGL native JavaScript API.\n   */\n  mod.Context = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(\n      function(self, canvasid) {\n        var canvas = document.getElementById(canvasid.v);\n        var gl = setupWebGL(canvasid.v, canvas)\n        if (!gl) {\n          throw new Error(\"Your browser does not appear to support WebGL.\");\n        }\n\n        self.gl = gl;\n\n        // Copy symbolic constants and functions from native WebGL, encapsulating where necessary.       \n        for (var k in gl.__proto__) {\n          if (typeof gl.__proto__[k] === 'number') {\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), gl.__proto__[k]);\n          }\n          else if (typeof gl.__proto__[k] === \"function\") {\n            switch(k) {\n              case 'bufferData': {\n              }\n              break;\n              case 'clearColor': {\n              }\n              break;\n              case 'drawArrays': {\n              }\n              break;\n              case 'getAttribLocation': {\n              }\n              break;\n              case 'getUniformLocation': {\n              }\n              break;\n              case 'shaderSource': {\n              }\n              break;\n              case 'uniformMatrix4fv': {\n              }\n              break;\n              case 'vertexAttribPointer': {\n              }\n              break;\n              case 'viewport': {\n              }\n              break;\n              default: {\n                (function(key) {\n                  Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), new Sk.builtin.func(function() {\n                    var f = gl.__proto__[key];\n                    return f.apply(gl, arguments);\n                  }));\n                 }(k));\n              }\n            }\n          }\n        }\n\n        gl.clearColor(100.0/255.0, 149.0/255.0, 237.0/255.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n    );\n\n    $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n    $loc.bufferData = new Sk.builtin.func(\n      function(self, target, data, usage) {\n        self.gl.bufferData(target, data.v, usage);\n      }\n    );\n\n    $loc.clearColor = new Sk.builtin.func(\n      function(self, red, green, blue, alpha) {\n        self.gl.clearColor(Sk.builtin.asnum$(red), Sk.builtin.asnum$(green), Sk.builtin.asnum$(blue), Sk.builtin.asnum$(alpha));\n      }\n    );\n\n    $loc.getAttribLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getAttribLocation(program, name.v);\n      }\n    );\n\n    $loc.getUniformLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getUniformLocation(program, name.v);\n      }\n    );\n\n    $loc.shaderSource = new Sk.builtin.func(\n      function(self, shader, src) {\n        self.gl.shaderSource(shader, src.v);\n      }\n    );\n\n    $loc.drawArrays = new Sk.builtin.func(\n      function(self, mode, first, count) {\n        self.gl.drawArrays(Sk.builtin.asnum$(mode), Sk.builtin.asnum$(first), Sk.builtin.asnum$(count));\n      }\n    );\n\n    $loc.vertexAttribPointer = new Sk.builtin.func(\n      function(self, index, size, type, normalized, stride, dunno) {\n        self.gl.vertexAttribPointer(index, Sk.builtin.asnum$(size), Sk.builtin.asnum$(type), normalized, Sk.builtin.asnum$(stride), Sk.builtin.asnum$(dunno));\n      }\n    );\n\n    $loc.viewport = new Sk.builtin.func(\n      function(self, x, y, width, height) {\n        self.gl.viewport(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y), Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n      }\n    );\n\n    $loc.uniformMatrix4fv = new Sk.builtin.func(\n      function(self, location, transpose, values) {\n//        console.log(\"location  \" + (typeof location));\n//        console.log(\"transpose \" + (typeof transpose));\n//        console.log(\"values.v  \" + (typeof values.v));\n        self.gl.uniformMatrix4fv(Sk.builtin.asnum$(location), transpose, values.v);\n      }\n    );\n\n    $loc.setDrawFunc = new Sk.builtin.func(function(self, func) {\n      var startTime = (new Date()).getTime();\n      var intervalId = setInterval(\n        function() {\n          Sk.misceval.callsim(func, self, (new Date()).getTime() - startTime);\n        }, 1000.0 / 60.0); // 60 fps\n    });\n\n  }, 'Context', []);\n\n  mod.Float32Array = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      if (typeof data === \"number\") {\n        self.v = new Float32Array(data);\n      }\n      else {\n        self.v = new Float32Array(Sk.ffi.remapToJs(data));\n      }\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Float32Array', []);\n\n  /**\n   * A 4x4 (mutable) matrix suitable for OpenGL.\n   *\n   * Mutability is chosen for performance.\n   * The inderlying implementation is Float32Array.\n   * The indexing of the elements is\n   * 0 4  8 12\n   * 1 5  9 13\n   * 2 6 10 14\n   * 3 7 11 15\n   */\n  mod.Matrix4x4 = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      self.v = new Float32Array(Sk.ffi.remapToJs(data));\n    });\n\n    $loc.identity = new Sk.builtin.func(\n      function(self) {\n\n        var m = self.v;\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = 0;\n        m[15] = 1;\n      }\n    );\n\n    $loc.perspective = new Sk.builtin.func(\n      function(self, fov, aspect, near, far) {\n        \n        var t = Math.tan(Math.PI * 0.5 - 0.5 * (Sk.builtin.asnum$(fov) * Math.PI / 180));\n        var a = Sk.builtin.asnum$(aspect)\n        var n = Sk.builtin.asnum$(near)\n        var f = Sk.builtin.asnum$(far)\n        var k = 1.0 / (n - f);\n\n        var m = self.v;\n\n        m[0]  = t / a;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = t;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = (n + f) * k;\n        m[11] = -1;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = n * f * k * 2;\n        m[15] = 0;\n      }\n    );\n\n    $loc.translate = new Sk.builtin.func(\n      function(self, translation) {\n\n        var m = self.v;\n        var t = Sk.ffi.remapToJs(translation);\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = t[0];\n        m[13] = t[1];\n        m[14] = t[2];\n        m[15] = 1;\n      }\n    );\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Matrix4x4', []);\n\n  return mod;\n};","src/builtin/sys.js":"var $builtinmodule = function(name)\n{\n    var sys = {};\n\n    var args = [];\n    var argv = Sk.getSysArgv();\n    for (var i = 0; i < argv.length; ++i)\n        args.push(new Sk.builtin.str(argv[i]));\n    sys.argv = new Sk.builtins['list'](args);\n\n    sys.copyright = Sk.builtin['str'](\"Copyright 2009-2010 Scott Graham.\\nAll Rights Reserved.\\n\");\n\n    sys.modules = Sk.sysmodules;\n\n    sys.path = Sk.realsyspath;\n\n    sys.getExecutionLimit = new Sk.builtin.func(function() {\n        return Sk.execLimit\n    });\n\n    sys.setExecutionLimit = new Sk.builtin.func(function(t) {\n        if (t !==  undefined) {\n            Sk.execLimit = t\n        }\n    });\n\n    sys.resetTimeout = new Sk.builtin.func(function() {\n        Sk.execStart = new Date();\n    });\n\n    sys.debug = new Sk.builtin.func(function() {\n        debugger;\n    });\n\n    return sys;\n};\n","src/lib/pythonds/trees/balance.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nfrom .bst import BinarySearchTree, TreeNode\n\nclass AVLTree(BinarySearchTree):\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  has_key(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n    '''\n\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.leftChild)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.rightChild)                \n\n    def updateBalance(self,node):\n        if node.balanceFactor > 1 or node.balanceFactor < -1:\n            self.rebalance(node)\n            return\n        if node.parent != None:\n            if node.isLeftChild():\n                node.parent.balanceFactor += 1\n            elif node.isRightChild():\n                node.parent.balanceFactor -= 1\n\n            if node.parent.balanceFactor != 0:\n                self.updateBalance(node.parent)\n\n    def rebalance(self,node):\n        if node.balanceFactor < 0:\n            if node.rightChild.balanceFactor > 0:\n                # Do an LR Rotation\n                self.rotateRight(node.rightChild)\n                self.rotateLeft(node)\n            else:\n                # single left\n                self.rotateLeft(node)\n        elif node.balanceFactor > 0:\n            if node.leftChild.balanceFactor < 0:\n                # Do an RL Rotation\n                self.rotateLeft(node.leftChild)\n                self.rotateRight(node)\n            else:\n                # single right\n                self.rotateRight(node)\n\n    def rotateLeft(self,rotRoot):\n        newRoot = rotRoot.rightChild\n        rotRoot.rightChild = newRoot.leftChild\n        if newRoot.leftChild != None:\n            newRoot.leftChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isLeftChild():\n                rotRoot.parent.leftChild = newRoot\n            else:\n                rotRoot.parent.rightChild = newRoot\n        newRoot.leftChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor + 1 - min(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor + 1 + max(rotRoot.balanceFactor, 0)\n\n\n    def rotateRight(self,rotRoot):\n        newRoot = rotRoot.leftChild\n        rotRoot.leftChild = newRoot.rightChild\n        if newRoot.rightChild != None:\n            newRoot.rightChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isRightChild():\n                rotRoot.parent.rightChild = newRoot\n            else:\n                rotRoot.parent.leftChild = newRoot\n        newRoot.rightChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor - 1 - max(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor - 1 + min(rotRoot.balanceFactor, 0)\n        \n","src/lib/urllib/request/__init__.js":'var $builtinmodule = function(name)\n{\n  var request = {};\n\n\n  //~ Classes .................................................................\n\n  // Response class\n  //\n  // Response objects are returned by the request, get, post, etc.\n  // methods, allowing the user to access the response text, status\n  // code, and other information.\n\n  // ------------------------------------------------------------\n  var response = function($gbl, $loc) {\n\n    // ------------------------------------------------------------\n    $loc.__init__ = new Sk.builtin.func(function(self, xhr) {\n      self.data$ = xhr.responseText;\n      self.lineList = self.data$.split("\\n");\n      self.lineList = self.lineList.slice(0,-1);\n      for(var i =0 ; i < self.lineList.length; i++) {\n        self.lineList[i] = self.lineList[i]+\'\\n\';\n      }\n      self.currentLine = 0;\n      self.pos$ = 0;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return Sk.ffi.remapToPy(\'<Response>\');\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__iter__ = new Sk.builtin.func(function(self) {\n      var allLines = self.lineList;\n\n      return Sk.builtin.makeGenerator(function() {\n          if (this.$index >= this.$lines.length) return undefined;\n          return new Sk.builtin.str(this.$lines[this.$index++]);\n        }, {\n          $obj: self,\n          $index: 0,\n          $lines: allLines\n        });\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.read = new Sk.builtin.func(function(self, size) {\n      if (self.closed) throw new Sk.builtin.ValueError("I/O operation on closed file");\n      var len = self.data$.length;\n      if (size === undefined) size = len;\n      var ret = new Sk.builtin.str(self.data$.substr(self.pos$, size));\n      self.pos$ += size;\n      if (self.pos$ >= len) self.pos$ = len;\n      return ret;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readline = new Sk.builtin.func(function(self, size) {\n      var line = "";\n      if (self.currentLine < self.lineList.length) {\n        line = self.lineList[self.currentLine];\n        self.currentLine++;\n      }\n      return new Sk.builtin.str(line);\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readlines = new Sk.builtin.func(function(self, sizehint) {\n      var arr = [];\n      for(var i = self.currentLine; i < self.lineList.length; i++) {\n        arr.push(new Sk.builtin.str(self.lineList[i]));\n      }\n      return new Sk.builtin.list(arr);\n    });\n\n  };\n\n  request.Response =\n    Sk.misceval.buildClass(request, response, \'Response\', []);\n\n\n  //~ Module functions ........................................................\n\n  // ------------------------------------------------------------\n  /**\n   * Constructs and sends a Request. Returns Response object.\n   *\n   * http://docs.python-requests.org/en/latest/api/#requests.request\n   *\n   * For now, this implementation doesn\'t actually construct a Request\n   * object; it just makes the request through jQuery.ajax and then\n   * constructs a Response.\n   */\n  request.urlopen = new Sk.builtin.func(function(url, data, timeout) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("GET",url.v,false);\n    xmlhttp.send(null);\n\n    return Sk.misceval.callsim(request.Response,xmlhttp)\n  });\n\n\n  return request;\n};\n',"src/lib/pythonds/basic/queue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#queue.py\r\n\r\nclass Queue:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def enqueue(self, item):\r\n        self.items.insert(0,item)\r\n\r\n    def dequeue(self):\r\n        return self.items.pop()\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n","src/lib/pythonds/graphs/adjGraph.py":'#\n#  adjGraph\n#\n#  Created by Brad Miller on 2005-02-24.\n#  Copyright (c) 2005 Brad Miller, David Ranum, Luther College. All rights reserved.\n#\n\nimport sys\nimport os\nimport unittest\n\nclass Graph:\n    def __init__(self):\n        self.vertices = {}\n        self.numVertices = 0\n        \n    def addVertex(self,key):\n        self.numVertices = self.numVertices + 1\n        newVertex = Vertex(key)\n        self.vertices[key] = newVertex\n        return newVertex\n    \n    def getVertex(self,n):\n        if n in self.vertices:\n            return self.vertices[n]\n        else:\n            return None\n\n    def __contains__(self,n):\n        return n in self.vertices\n    \n    def addEdge(self,f,t,cost=0):\n            if f not in self.vertices:\n                nv = self.addVertex(f)\n            if t not in self.vertices:\n                nv = self.addVertex(t)\n            self.vertices[f].addNeighbor(self.vertices[t],cost)\n    \n    def getVertices(self):\n        return list(self.vertices.keys())\n        \n    def __iter__(self):\n        return iter(self.vertices.values())\n                \nclass Vertex:\n    def __init__(self,num):\n        self.id = num\n        self.connectedTo = {}\n        self.color = \'white\'\n        self.dist = sys.maxsize\n        self.pred = None\n        self.disc = 0\n        self.fin = 0\n\n    # def __lt__(self,o):\n    #     return self.id < o.id\n    \n    def addNeighbor(self,nbr,weight=0):\n        self.connectedTo[nbr] = weight\n        \n    def setColor(self,color):\n        self.color = color\n        \n    def setDistance(self,d):\n        self.dist = d\n\n    def setPred(self,p):\n        self.pred = p\n\n    def setDiscovery(self,dtime):\n        self.disc = dtime\n        \n    def setFinish(self,ftime):\n        self.fin = ftime\n        \n    def getFinish(self):\n        return self.fin\n        \n    def getDiscovery(self):\n        return self.disc\n        \n    def getPred(self):\n        return self.pred\n        \n    def getDistance(self):\n        return self.dist\n        \n    def getColor(self):\n        return self.color\n    \n    def getConnections(self):\n        return self.connectedTo.keys()\n        \n    def getWeight(self,nbr):\n        return self.connectedTo[nbr]\n                \n    def __str__(self):\n        return str(self.id) + ":color " + self.color + ":disc " + str(self.disc) + ":fin " + str(self.fin) + ":dist " + str(self.dist) + ":pred \\n\\t[" + str(self.pred)+ "]\\n"\n    \n    def getId(self):\n        return self.id\n\nclass adjGraphTests(unittest.TestCase):\n    def setUp(self):\n        self.tGraph = Graph()\n        \n    def testMakeGraph(self):\n        gFile = open("test.dat")\n        for line in gFile:\n            fVertex, tVertex = line.split(\'|\')\n            fVertex = int(fVertex)\n            tVertex = int(tVertex)\n            self.tGraph.addEdge(fVertex,tVertex)\n        for i in self.tGraph:\n            adj = i.getAdj()\n            for k in adj:\n                print(i, k)\n\n        \nif __name__ == \'__main__\':\n    unittest.main()\n              \n',"src/lib/easel/__init__.js":'/**\n * Geometric Algebra (e2ga) module.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n\n  var CONTAINER                 = "Container";\n  var EASE                      = "Ease";\n  var EUCLIDEAN_2               = "Euclidean2";\n  var EVENT                     = "Event";\n  var GRAPHICS                  = "Graphics";\n  var MOVIE_CLIP                = "MovieClip";\n  var POINT                     = "Point";\n  var SHAPE                     = "Shape";\n  var STAGE                     = "Stage";\n  var TEXT                      = "Text";\n  var TICKER                    = "Ticker";\n  var TWEEN                     = "Tween";\n\n  var PROP_ALPHA                = "alpha";\n  var PROP_AUTO_CLEAR           = "autoClear";\n  var PROP_BOUNCE_OUT           = "bounceOut";\n  var PROP_CANVAS               = "canvas";\n  var PROP_GRAPHICS             = "graphics";\n  var PROP_MOUSE_IN_BOUNDS      = "mouseInBounds";\n  var PROP_MOUSE_MOVE_OUTSIDE   = "mouseMoveOutside";\n  var PROP_MOUSE_X              = "mouseX";\n  var PROP_MOUSE_Y              = "mouseY";\n  var PROP_NAME                 = "name";\n  var PROP_ROTATION             = "rotation";\n  var PROP_TEXT                 = "text";\n  var PROP_TEXT_ALIGN           = "textAlign";\n  var PROP_TIMELINE             = "timeline";\n  var PROP_W                    = "w";\n  var PROP_X                    = "x";\n  var PROP_Y                    = "y";\n  var PROP_XY                   = "xy";\n\n  var METHOD_ADD_CHILD          = "addChild";\n  var METHOD_ADD_EVENT_LISTENER = "addEventListener";\n  var METHOD_ADD_TWEEN          = "addTween";\n  var METHOD_BEGIN_FILL         = "beginFill";\n  var METHOD_BEGIN_STROKE       = "beginStroke";\n  var METHOD_CALL               = "onComplete";\n  var METHOD_CLONE              = "clone";\n  var METHOD_DRAW_CIRCLE        = "drawCircle";\n  var METHOD_DRAW_RECT          = "drawRect";\n  var METHOD_ENABLE_MOUSE_OVER  = "enableMouseOver";\n  var METHOD_END_FILL           = "endFill";\n  var METHOD_END_STROKE         = "endStroke";\n  var METHOD_GET                = "get";\n  var METHOD_GET_CHILD_AT       = "getChildAt";\n  var METHOD_GET_NUM_CHILDREN   = "getNumChildren";\n  var METHOD_GLOBAL_TO_LOCAL    = "globalToLocal";\n  var METHOD_GOTO_AND_PLAY      = "gotoAndPlay";\n  var METHOD_HIT_TEST           = "hitTest";\n  var METHOD_LENGTH             = "length";\n  var METHOD_LOCAL_TO_LOCAL     = "localToLocal";\n  var METHOD_LINE_TO            = "lineTo";\n  var METHOD_MOVE_TO            = "moveTo";\n  var METHOD_SET_STROKE_STYLE   = "setStrokeStyle";\n  var METHOD_TO                 = "to";\n  var METHOD_UPDATE             = "update";\n  var METHOD_WAIT               = "wait";\n\n  var mod = {};\n\n  function isNumber(x)    { return typeof x === \'number\'; }\n\n  function remapE2ToPy(x00, x01, x10, x11) {\n    return Sk.misceval.callsim(mod[EUCLIDEAN_2],\n      Sk.builtin.assk$(x00, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x01, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x10, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x11, Sk.builtin.nmber.float$));\n  }\n\n  function stringFromCoordinates(coordinates, labels, multiplier) {\n    var append, i, sb, str, _i, _ref;\n    sb = [];\n    append = function(number, label) {\n      var n;\n      if (number !== 0) {\n        if (number >= 0) {\n          if (sb.length > 0) {\n            sb.push("+");\n          }\n        } else {\n          sb.push("-");\n        }\n        n = Math.abs(number);\n        if (n === 1) {\n          return sb.push(label);\n        } else {\n          sb.push(n.toString());\n          if (label !== "1") {\n            sb.push(multiplier);\n            return sb.push(label);\n          }\n        }\n      }\n    };\n    for (i = _i = 0, _ref = coordinates.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n      append(coordinates[i], labels[i]);\n    }\n    if (sb.length > 0) {\n      str = sb.join("");\n    } else {\n      str = "0";\n    }\n    return str;\n  }\n\n  function divide(a00, a01, a10, a11, b00, b01, b10, b11, x) {\n    // r = ~b\n    var r00 = +b00;\n    var r01 = +b01;\n    var r10 = +b10;\n    var r11 = -b11;\n    // m = b * r\n    var m00 = b00 * r00 + b01 * r01 + b10 * r10 - b11 * r11;\n    var m01 = 0;\n    var m10 = 0;\n    var m11 = 0;\n    // c = cliffordConjugate(m)\n    var c00 = +m00;\n    var c01 = -m01;\n    var c10 = -m10;\n    var c11 = -m11;\n    // s = r * c\n    var s00 = r00 * c00 + r01 * c01 + r10 * c10 - r11 * c11;\n    var s01 = r00 * c01 + r01 * c00 - r10 * c11 + r11 * c10;\n    var s10 = r00 * c10 + r01 * c11 + r10 * c00 - r11 * c01;\n    var s11 = r00 * c11 + r01 * c10 - r10 * c01 + r11 * c00;\n    // k = b * s\n    var k00 = b00 * s00 + b01 * s01 + b10 * s10 - b11 * s11;\n    // i = inverse(b)\n    var i00 = s00/k00;\n    var i01 = s01/k00;\n    var i10 = s10/k00;\n    var i11 = s11/k00;\n    // x = a * inverse(b)\n    var x00 = a00 * i00 + a01 * i01 + a10 * i10 - a11 * i11;\n    var x01 = a00 * i01 + a01 * i00 - a10 * i11 + a11 * i10;\n    var x10 = a00 * i10 + a01 * i11 + a10 * i00 - a11 * i01;\n    var x11 = a00 * i11 + a01 * i10 - a10 * i01 + a11 * i00;\n    if (typeof x !== \'undefined\') {\n      x[0] = x00;\n      x[1] = x01;\n      x[2] = x10;\n      x[3] = x11;\n    }\n    else {\n      return remapE2ToPy(x00, x01, x10, x11);\n    }\n  }\n\n  mod[EVENT] = Sk.builtin.event(mod);\n\n  mod[GRAPHICS] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, graphicsPy) {\n      self.tp$name = GRAPHICS;\n      var graphics = Sk.ffi.remapToJs(graphicsPy);\n      if (graphics) {\n        self.v = graphics;\n      }\n      else {\n        if (typeof createjs[GRAPHICS] === \'undefined\') {\n          throw new Error("Missing " + GRAPHICS + " JavaScript implementation.");\n        }\n        self.v = new createjs[GRAPHICS]();\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(graphicsPy, name) {\n      var graphics = Sk.ffi.remapToJs(graphicsPy);\n      switch(name) {\n        case METHOD_BEGIN_FILL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_BEGIN_FILL;\n              self.v = graphics[METHOD_BEGIN_FILL];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color) {\n              color = Sk.ffi.remapToJs(color);\n              graphics[METHOD_BEGIN_FILL](color);\n              return graphicsPy;\n            });\n          }, METHOD_BEGIN_FILL, []));\n        }\n        case METHOD_BEGIN_STROKE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_BEGIN_STROKE;\n              self.v = graphics[METHOD_BEGIN_STROKE];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color) {\n              color = Sk.ffi.remapToJs(color);\n              graphics[METHOD_BEGIN_STROKE](color);\n              return graphicsPy;\n            });\n          }, METHOD_BEGIN_STROKE, []));\n        }\n        case METHOD_DRAW_CIRCLE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_DRAW_CIRCLE;\n              self.v = graphics[METHOD_DRAW_CIRCLE];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, radius) {\n              x = Sk.ffi.remapToJs(x);\n              y = Sk.ffi.remapToJs(y);\n              radius = Sk.ffi.remapToJs(radius);\n              graphics[METHOD_DRAW_CIRCLE](x, y, radius);\n              return graphicsPy;\n            });\n          }, METHOD_DRAW_CIRCLE, []));\n        }\n        case METHOD_DRAW_RECT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_DRAW_RECT;\n              self.v = graphics[METHOD_DRAW_RECT];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, w, h) {\n              x = Sk.ffi.remapToJs(x);\n              y = Sk.ffi.remapToJs(y);\n              w = Sk.ffi.remapToJs(w);\n              h = Sk.ffi.remapToJs(h);\n              graphics[METHOD_DRAW_RECT](x, y, w, h);\n              return graphicsPy;\n            });\n          }, METHOD_DRAW_RECT, []));\n        }\n        case METHOD_END_FILL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_END_FILL;\n              self.v = graphics[METHOD_END_FILL];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              graphics[METHOD_END_FILL]();\n              return graphicsPy;\n            });\n          }, METHOD_END_FILL, []));\n        }\n        case METHOD_END_STROKE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_END_STROKE;\n              self.v = graphics[METHOD_END_STROKE];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              graphics[METHOD_END_STROKE]();\n              return graphicsPy;\n            });\n          }, METHOD_END_STROKE, []));\n        }\n        case METHOD_LINE_TO: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LINE_TO;\n              self.v = graphics[METHOD_LINE_TO];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n              x = Sk.ffi.remapToJs(x);\n              y = Sk.ffi.remapToJs(y);\n              graphics[METHOD_LINE_TO](x, y);\n              return graphicsPy;\n            });\n          }, METHOD_LINE_TO, []));\n        }\n        case METHOD_MOVE_TO: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_MOVE_TO;\n              self.v = graphics[METHOD_MOVE_TO];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y) {\n              x = Sk.ffi.remapToJs(x);\n              y = Sk.ffi.remapToJs(y);\n              graphics[METHOD_MOVE_TO](x, y);\n              return graphicsPy;\n            });\n          }, METHOD_MOVE_TO, []));\n        }\n        case METHOD_SET_STROKE_STYLE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_STROKE_STYLE;\n              self.v = graphics[METHOD_SET_STROKE_STYLE];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, thickness, caps, joints, miterLimit, ignoreScale) {\n              thickness = Sk.ffi.remapToJs(thickness);\n              caps = Sk.ffi.remapToJs(caps);\n              joints = Sk.ffi.remapToJs(joints);\n              miterLimit = Sk.ffi.remapToJs(miterLimit);\n              ignoreScale = Sk.ffi.remapToJs(ignoreScale);\n              graphics[METHOD_SET_STROKE_STYLE](thickness, caps, joints, miterLimit, ignoreScale);\n              return graphicsPy;\n            });\n          }, METHOD_SET_STROKE_STYLE, []));\n        }\n      }\n    });\n  }, GRAPHICS, []);\n\n  mod[MOVIE_CLIP] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, modePy, startPositionPy, loopPy, labelsPy) {\n      var mode = (modePy !== null) ? Sk.ffi.remapToJs(modePy) : null;\n      var startPosition = Sk.ffi.remapToJs(startPositionPy);\n      var loop = Sk.ffi.remapToJs(loopPy);\n      var labels = Sk.ffi.remapToJs(labelsPy);\n      self.tp$name = MOVIE_CLIP;\n      if (typeof createjs[MOVIE_CLIP] === \'undefined\') {\n        throw new Error("Missing " + MOVIE_CLIP + " JavaScript implementation.");\n      }\n      self.v = new createjs[MOVIE_CLIP](mode, startPosition, loop, labels);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(movieClipPy, name) {\n      var movieClip = Sk.ffi.remapToJs(movieClipPy);\n      switch(name) {\n        case PROP_TIMELINE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = PROP_TIMELINE;\n              self.v = movieClip.timeline;\n            });\n            $loc.__getattr__ = new Sk.builtin.func(function(timelinePy, name) {\n              var timeline = Sk.ffi.remapToJs(timelinePy);\n              switch(name) {\n                case METHOD_ADD_TWEEN: {\n                  return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                    $loc.__init__ = new Sk.builtin.func(function(self) {\n                      self.tp$name = METHOD_ADD_TWEEN;\n                      self.v = timeline[METHOD_ADD_TWEEN];\n                    });\n                    $loc.__call__ = new Sk.builtin.func(function(self, tweenPy) {\n                      var tween = Sk.ffi.remapToJs(tweenPy);\n                      timeline.addTween(tween);\n                    });\n                  }, METHOD_ADD_TWEEN, []));\n                }\n                break;\n              }\n            });\n          }, PROP_TIMELINE, []));\n        }\n        break;\n        case METHOD_GOTO_AND_PLAY: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GOTO_AND_PLAY;\n              self.v = movieClip[METHOD_GOTO_AND_PLAY];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, labelPy) {\n              var label = Sk.ffi.remapToJs(labelPy);\n              movieClip[METHOD_GOTO_AND_PLAY](label);\n            });\n          }, METHOD_GOTO_AND_PLAY, []));\n        }\n        break;\n       }\n    });\n  }, MOVIE_CLIP, []);\n\n  mod[SHAPE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(shapePy, argPy) {\n      shapePy.tp$name = SHAPE;\n      if (typeof argPy === \'undefined\') {\n        shapePy.v = new createjs[SHAPE]();\n      }\n      else {\n        var name = argPy.tp$name;\n        if (typeof name === \'string\') {\n          switch(name) {\n            case SHAPE: {\n              shapePy.v = Sk.ffi.remapToJs(argPy);\n            }\n            break;\n            case GRAPHICS: {\n              shapePy.v = new createjs[SHAPE](Sk.ffi.remapToJs(argPy));\n            }\n            break;\n            default: {\n              throw new Error(name);\n            }\n          }\n        }\n        else {\n          throw new Error(typeof name);\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(shapePy, name) {\n      var shape = Sk.ffi.remapToJs(shapePy);\n      switch(name) {\n        case PROP_ALPHA: {\n          return Sk.builtin.assk$(shape[PROP_ALPHA], Sk.builtin.nmber.float$);\n        }\n        case PROP_GRAPHICS: {\n          return Sk.misceval.callsim(mod[GRAPHICS], Sk.ffi.referenceToPy(shape.graphics, GRAPHICS));\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(shape[PROP_NAME]);\n        }\n        case PROP_X: {\n          return Sk.builtin.assk$(shape[PROP_X], Sk.builtin.nmber.int$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(shape[PROP_Y], Sk.builtin.nmber.int$);\n        }\n        case PROP_ROTATION: {\n          return Sk.builtin.assk$(shape[PROP_ROTATION], Sk.builtin.nmber.float$);\n        }\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.builtin.addEventListener(mod, shape);\n        }\n        case METHOD_GLOBAL_TO_LOCAL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GLOBAL_TO_LOCAL;\n              self.v = shape[METHOD_GLOBAL_TO_LOCAL];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, x, y) {\n              var point = shape[METHOD_GLOBAL_TO_LOCAL](Sk.ffi.remapToJs(x), Sk.ffi.remapToJs(y));\n              return Sk.misceval.callsim(mod[POINT], Sk.ffi.referenceToPy(point, POINT));\n            });\n          }, METHOD_GLOBAL_TO_LOCAL, []));\n        }\n        case METHOD_HIT_TEST: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_HIT_TEST;\n              self.v = shape[METHOD_HIT_TEST];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, x, y) {\n              return Sk.ffi.remapToPy(shape[METHOD_HIT_TEST](Sk.ffi.remapToJs(x), Sk.ffi.remapToJs(y)));\n            });\n          }, METHOD_HIT_TEST, []));\n        }\n        case METHOD_LOCAL_TO_LOCAL: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOCAL_TO_LOCAL;\n              self.v = shape[METHOD_LOCAL_TO_LOCAL];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, x, y, target) {\n              var point = shape[METHOD_LOCAL_TO_LOCAL](Sk.ffi.remapToJs(x), Sk.ffi.remapToJs(y), Sk.ffi.remapToJs(target));\n              return Sk.misceval.callsim(mod[POINT], Sk.ffi.referenceToPy(point, POINT));\n            });\n          }, METHOD_LOCAL_TO_LOCAL, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(shapePy, name, valuePy) {\n      var shape = Sk.ffi.remapToJs(shapePy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_ALPHA: {\n          shape[PROP_ALPHA] = value;\n        }\n        break;\n        case PROP_NAME: {\n          shape[PROP_NAME] = value;\n        }\n        break;\n        case PROP_X: {\n          shape[PROP_X] = value;\n        }\n        break;\n        case PROP_Y: {\n          shape[PROP_Y] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          shape[PROP_ROTATION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + SHAPE);\n        }\n      }\n    });\n  }, SHAPE, []);\n\n  mod[STAGE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, canvasPy) {\n      var canvas = Sk.ffi.remapToJs(canvasPy);\n      self.tp$name = STAGE;\n      if (typeof createjs[STAGE] === \'undefined\') {\n        throw new Error("Missing " + STAGE + " JavaScript implementation.");\n      }\n      self.v = new createjs[STAGE](canvas);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(stagePy, name) {\n      var stage = Sk.ffi.remapToJs(stagePy);\n      switch(name) {\n        case PROP_CANVAS: {\n          return Sk.builtin.assk$(5, Sk.builtin.nmber.int$);\n        }\n        case PROP_MOUSE_IN_BOUNDS: {\n          return Sk.ffi.remapToPy(stage[PROP_MOUSE_IN_BOUNDS]);\n        }\n        case PROP_MOUSE_MOVE_OUTSIDE: {\n          return Sk.ffi.remapToPy(stage[PROP_MOUSE_MOVE_OUTSIDE]);\n        }\n        case PROP_MOUSE_X: {\n          return Sk.builtin.assk$(stage[PROP_MOUSE_X], Sk.builtin.nmber.int$);\n        }\n        case PROP_MOUSE_Y: {\n          return Sk.builtin.assk$(stage[PROP_MOUSE_Y], Sk.builtin.nmber.int$);\n        }\n        case METHOD_ADD_CHILD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD_CHILD;\n              self.v = stage[METHOD_ADD_CHILD];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, childPy) {\n              var child = stage.addChild(Sk.ffi.remapToJs(childPy));\n              return Sk.misceval.callsim(mod[childPy.tp$name], Sk.ffi.referenceToPy(child, childPy.tp$name));\n            });\n          }, METHOD_ADD_CHILD, []));\n        }\n        case METHOD_ENABLE_MOUSE_OVER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ENABLE_MOUSE_OVER;\n              self.v = stage[METHOD_ENABLE_MOUSE_OVER];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(updatePy) {\n              stage[METHOD_ENABLE_MOUSE_OVER]();\n            });\n          }, METHOD_ENABLE_MOUSE_OVER, []));\n        }\n        case METHOD_UPDATE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_UPDATE;\n              self.v = stage[METHOD_UPDATE];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(updatePy) {\n              stage[METHOD_UPDATE]();\n            });\n          }, METHOD_UPDATE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(stagePy, name, valuePy) {\n      var stage = Sk.ffi.remapToJs(stagePy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          stage[PROP_AUTO_CLEAR] = value;\n        }\n        break;\n        case PROP_MOUSE_MOVE_OUTSIDE: {\n          stage[PROP_MOUSE_MOVE_OUTSIDE] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + STAGE);\n        }\n      }\n    });\n  }, STAGE, []);\n\n  mod[TEXT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(selfPy, textPy, fontPy, colorPy) {\n      selfPy.tp$name = TEXT;\n      var text = Sk.ffi.remapToJs(textPy);\n      var font = Sk.ffi.remapToJs(fontPy);\n      var color = Sk.ffi.remapToJs(colorPy);\n      selfPy.v = new createjs[TEXT](text, font, color);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(textPy, name) {\n      var text = Sk.ffi.remapToJs(textPy);\n      switch(name) {\n        case PROP_X: {\n          return Sk.builtin.assk$(text[PROP_X], Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(text[PROP_Y], Sk.builtin.nmber.float$);\n        }\n        case PROP_ROTATION: {\n          return Sk.builtin.assk$(text[PROP_ROTATION], Sk.builtin.nmber.float$);\n        }\n        case PROP_TEXT: {\n          return new Sk.builtin.str(text[PROP_TEXT]);\n        }\n        case PROP_TEXT_ALIGN: {\n          return new Sk.builtin.str(text[PROP_TEXT_ALIGN]);\n        }\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.builtin.addEventListener(mod, text);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(textPy, name, valuePy) {\n      var text = Sk.ffi.remapToJs(textPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_X: {\n          text[PROP_X] = value;\n        }\n        break;\n        case PROP_Y: {\n          text[PROP_Y] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          text[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_TEXT: {\n          text[PROP_TEXT] = value;\n        }\n        break;\n        case PROP_TEXT_ALIGN: {\n          text[PROP_TEXT_ALIGN] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + TEXT);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(selfPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      return new Sk.builtin.str(TEXT + "(" + self.x + ", " + self.y + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(selfPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      return new Sk.builtin.str("[" + self.x + ", " + self.y + "]");\n    });\n  }, TEXT, []);\n\n  mod[TICKER] = Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = TICKER;\n      self.v = createjs[TICKER];\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(tickerPy, name) {\n      var ticker = Sk.ffi.remapToJs(tickerPy);\n      switch(name) {\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD_EVENT_LISTENER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, typePy, listenerPy, useCapture) {\n              var type = Sk.ffi.remapToJs(typePy);\n              var listener = Sk.ffi.remapToJs(listenerPy);\n              if (typeof listener === \'object\') {\n                ticker[METHOD_ADD_EVENT_LISTENER](type, listener, useCapture);\n              }\n              else {\n                var listener = function(event) {\n                  Sk.misceval.callsim(listenerPy);\n                };\n                ticker[METHOD_ADD_EVENT_LISTENER](type, listener, useCapture);\n              }\n            });\n          }, METHOD_ADD_EVENT_LISTENER, []));\n        }\n        break;\n      }\n    });\n  }, TICKER, []));\n\n  mod[TWEEN] = Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = TWEEN;\n      self.v = createjs[TWEEN];\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(entryPointPy, name) {\n      var entryPoint = Sk.ffi.remapToJs(entryPointPy);\n      switch(name) {\n        case METHOD_GET: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, target, props, pluginData, override) {\n              target = Sk.ffi.remapToJs(target);\n              props = Sk.ffi.remapToJs(props);\n              pluginData = Sk.ffi.remapToJs(pluginData);\n              override = Sk.ffi.remapToJs(override);\n              var tween = entryPoint[METHOD_GET](target, props, pluginData, override);\n              return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                $loc.__init__ = new Sk.builtin.func(function(self) {\n                  self.tp$name = TWEEN;\n                  self.v = tween;\n                });\n                $loc.__getattr__ = new Sk.builtin.func(function(tweenPy, name) {\n                  var tween = Sk.ffi.remapToJs(tweenPy);\n                  switch(name) {\n                    case METHOD_TO: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_TO;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, props, duration, ease) {\n                          props = Sk.ffi.remapToJs(props);\n                          duration = Sk.ffi.remapToJs(duration);\n                          ease = Sk.ffi.remapToJs(ease);\n                          tween[METHOD_TO](props, duration, ease);\n                          return tweenPy;\n                        });\n                      }, METHOD_TO, []));\n                    }\n                    break;\n                    case METHOD_CALL: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_CALL;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, callbackPy, argsPy) {\n                          var callbackJS = function(argsJs) {\n                            Sk.misceval.callsim(callbackPy, Sk.ffi.remapToPy(argsJs));\n                          };\n                          var argsJs = Sk.ffi.remapToJs(argsPy);\n                          tween.call(callbackJS, argsJs);\n                          return tweenPy;\n                        });\n                      }, METHOD_CALL, []));\n                    }\n                    break;\n                    case METHOD_WAIT: {\n                      return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n                        $loc.__init__ = new Sk.builtin.func(function(self) {\n                          self.tp$name = METHOD_WAIT;\n                        });\n                        $loc.__call__ = new Sk.builtin.func(function(self, duration) {\n                          duration = Sk.ffi.remapToJs(duration);\n                          tween[METHOD_WAIT](duration);\n                          return tweenPy;\n                        });\n                      }, METHOD_WAIT, []));\n                    }\n                    break;\n                  }\n                });\n              }, TWEEN, []));\n            });\n          }, METHOD_GET, []));\n        }\n        break;\n      }\n    });\n  }, TWEEN, []));\n\n  mod[CONTAINER] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(containerPy, argPy) {\n      containerPy.tp$name = CONTAINER;\n      if (typeof argPy === \'undefined\') {\n        containerPy.v = new createjs[CONTAINER]();\n      }\n      else {\n        var name = argPy.tp$name;\n        if (typeof name === \'string\') {\n          switch(name) {\n            case CONTAINER: {\n              containerPy.v = Sk.ffi.remapToJs(argPy);\n            }\n            break;\n            default: {\n              throw new Error(name);\n            }\n          }\n        }\n        else {\n          throw new Error(typeof name);\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(containerPy, name) {\n      var container = Sk.ffi.remapToJs(containerPy);\n      switch(name) {\n        case PROP_NAME: {\n          return new Sk.builtin.str(container[PROP_NAME]);\n        }\n        case PROP_X: {\n          return Sk.builtin.assk$(container[PROP_X], Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(container[PROP_Y], Sk.builtin.nmber.float$);\n        }\n        case PROP_ROTATION: {\n          return Sk.builtin.assk$(container[PROP_ROTATION], Sk.builtin.nmber.float$);\n        }\n        case METHOD_ADD_CHILD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_ADD_CHILD;\n              methodPy.v = container[METHOD_ADD_CHILD];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, childPy) {\n              var child = container.addChild(Sk.ffi.remapToJs(childPy));\n              return Sk.misceval.callsim(mod[childPy.tp$name], Sk.ffi.referenceToPy(child, childPy.tp$name));\n            });\n          }, METHOD_ADD_CHILD, []));\n        }\n        case METHOD_ADD_EVENT_LISTENER: {\n          return Sk.builtin.addEventListener(mod, container);\n        }\n        case METHOD_GET_CHILD_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_GET_CHILD_AT;\n              methodPy.v = container[METHOD_GET_CHILD_AT];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, indexPy) {\n              var child = container[METHOD_GET_CHILD_AT](Sk.ffi.remapToJs(indexPy));\n              return Sk.misceval.callsim(mod[SHAPE], Sk.ffi.referenceToPy(child, SHAPE));\n            });\n          }, METHOD_GET_CHILD_AT, []));\n        }\n        case METHOD_GET_NUM_CHILDREN: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_GET_NUM_CHILDREN;\n              methodPy.v = container[METHOD_GET_NUM_CHILDREN];\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy, childPy) {\n              return Sk.builtin.assk$(container[METHOD_GET_NUM_CHILDREN](), Sk.builtin.nmber.int$);\n            });\n          }, METHOD_GET_NUM_CHILDREN, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(containerPy, name, valuePy) {\n      var container = Sk.ffi.remapToJs(containerPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_NAME: {\n          container[PROP_NAME] = value;\n        }\n        break;\n        case PROP_X: {\n          container[PROP_X] = value;\n        }\n        break;\n        case PROP_Y: {\n          container[PROP_Y] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          container[PROP_ROTATION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + CONTAINER);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(selfPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      return new Sk.builtin.str(CONTAINER + "(" + self.x + ", " + self.y + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(selfPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      return new Sk.builtin.str("[" + self.x + ", " + self.y + "]");\n    });\n  }, CONTAINER, []);\n\n  mod[EASE] = Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = EASE;\n      self.v = createjs[EASE];\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_BOUNCE_OUT: {\n          var fn = createjs[EASE][PROP_BOUNCE_OUT];\n          return {"v": fn};\n        }\n      }\n    });\n  }, EASE, []));\n\n  mod[POINT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x, y) {\n      Sk.builtin.pyCheckArgs(POINT, arguments, 1, 3);\n      self.tp$name = POINT;\n      switch(arguments.length) {\n        case 1: {\n          self.v = new createjs.Point();\n        }\n        break;\n        case 2: {\n          x = Sk.ffi.remapToJs(x);\n          self.tp$name = POINT;\n          self.v = x;\n        }\n        break;\n        case 3: {\n          Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n          Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n          x = Sk.ffi.remapToJs(x);\n          y = Sk.ffi.remapToJs(y);\n          self.tp$name = POINT;\n          self.v = new createjs.Point(x, y);\n        }\n        break;\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(pointPy, name) {\n      var point = Sk.ffi.remapToJs(pointPy);\n      switch(name) {\n        case PROP_X: {\n          return Sk.builtin.assk$(point.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(point.y, Sk.builtin.nmber.float$);\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy) {\n              return Sk.misceval.callsim(mod[POINT], Sk.ffi.remapToPy(point.x), Sk.ffi.remapToPy(point.y));\n            });\n          }, METHOD_CLONE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(pointPy, name, valuePy) {\n      var point = Sk.ffi.remapToJs(pointPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_X: {\n          point.x = value;\n        }\n        break;\n        case PROP_Y: {\n          point.y = value;\n        }\n        break;\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(pointPy) {\n      var point = Sk.ffi.remapToJs(pointPy);\n      return new Sk.builtin.str(POINT + "(" + point.x + ", " + point.y + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(pointPy) {\n      var point = Sk.ffi.remapToJs(pointPy);\n      return new Sk.builtin.str("[" + point.x + ", " + point.y + "]");\n    });\n  }, POINT, []);\n\n  mod[EUCLIDEAN_2] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x00, x01, x10, x11) {\n      x00 = Sk.ffi.remapToJs(x00);\n      x01 = Sk.ffi.remapToJs(x01);\n      x10 = Sk.ffi.remapToJs(x10);\n      x11 = Sk.ffi.remapToJs(x11);\n      self.tp$name = EUCLIDEAN_2;\n      self.v = [x00, x01, x10, x11];\n    });\n    $loc.__add__ = new Sk.builtin.func(function(lhs, rhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(rhs)) {\n        return remapE2ToPy(lhs[0] + rhs, lhs[1], lhs[2], lhs[3]);\n      }\n      else {\n        return remapE2ToPy(lhs[0] + rhs[0], lhs[1] + rhs[1], lhs[2] + rhs[2], lhs[3] + rhs[3]);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs + rhs[0], rhs[1], rhs[2], rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " + " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] += other;\n        return selfPy;\n      }\n      else {\n        self[0] += other[0];\n        self[1] += other[1];\n        self[2] += other[2];\n        self[3] += other[3];\n        return selfPy;\n      }\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(lhs, rhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(rhs)) {\n        return remapE2ToPy(lhs[0] - rhs, lhs[1], lhs[2], lhs[3]);\n      }\n      else {\n        return remapE2ToPy(lhs[0] - rhs[0], lhs[1] - rhs[1], lhs[2] - rhs[2], lhs[3] - rhs[3]);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs - rhs[0], -rhs[1], -rhs[2], -rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " - " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] -= other;\n        return selfPy;\n      }\n      else {\n        self[0] -= other[0];\n        self[1] -= other[1];\n        self[2] -= other[2];\n        self[3] -= other[3];\n        return selfPy;\n      }\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, a[1] * b, a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 = a00 * b01 + a01 * b00 - a10 * b11 + a11 * b10;\n        var x10 = a00 * b10 + a01 * b11 + a10 * b00 - a11 * b01;\n        var x11 = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " * " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] *= other;\n        self[2] *= other;\n        self[3] *= other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] = a00 * b01 + a01 * b00 - a10 * b11 + a11 * b10;\n        self[2] = a00 * b10 + a01 * b11 + a10 * b00 - a11 * b01;\n        self[3] = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return divide(a[0], a[1], a[2], a[3], b, 0, 0, 0);\n      }\n      else {\n        return divide(a[0], a[1], a[2], a[3], b[0], b[1], b[2], b[3]);\n      }\n    });\n    $loc.__rdiv__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return divide(lhs, 0, 0, 0, rhs[0], rhs[1], rhs[2], rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " / " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__idiv__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        divide(self[0], self[1], self[2], self[3], other, 0, 0, 0, self);\n        return selfPy;\n      }\n      else {\n        divide(self[0], self[1], self[2], self[3], other[0], other[1], other[2], other[3], self);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, a[1] * b, a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00;\n        var x01 = a00 * b01 + a01 * b00;\n        var x10 = a00 * b10             + a10 * b00;\n        var x11 = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " ^ " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] *= other;\n        self[2] *= other;\n        self[3] *= other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00;\n        self[1] = a00 * b01 + a01 * b00;\n        self[2] = a00 * b10             + a10 * b00;\n        self[3] = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, 0, 0, 0);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 = a00 * b01             - a10 * b11;\n        var x10 = a00 * b10 + a01 * b11;\n        var x11 = a00 * b11;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " << " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] = 0;\n        self[2] = 0;\n        self[3] = 0;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] = a00 * b01             - a10 * b11;\n        self[2] = a00 * b10 + a01 * b11;\n        self[3] = a00 * b11;\n        return selfPy;\n      }\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, -a[1] * b, -a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 =           + a01 * b00             + a11 * b10;\n        var x10 =                       + a10 * b00 - a11 * b01;\n        var x11 =                                     a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " >> " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other;\n        var b01 = 0;\n        var b10 = 0;\n        var b11 = 0;\n        self[0] *=  other;\n        self[1] *= -other;\n        self[2] *= -other;\n        self[3] *=  other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] =           + a01 * b00             + a11 * b10;\n        self[2] =                       + a10 * b00 - a11 * b01;\n        self[3] =                                     a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.nb$negative = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapE2ToPy(-self[0], -self[1], -self[2], -self[3]);\n    };\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$invert = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapE2ToPy(self[0], self[1], self[2], -self[3]);\n    };\n    $loc.__getitem__ = new Sk.builtin.func(function(mv, index) {\n      mv = Sk.ffi.remapToJs(mv);\n      index = Sk.builtin.asnum$(index);\n      switch(index) {\n        case 0: {\n          return remapE2ToPy(mv[0], 0, 0, 0);\n        }\n        case 1: {\n          return remapE2ToPy(0, mv[1], mv[2], 0);\n        }\n        case 2: {\n          return remapE2ToPy(0, 0, 0, mv[3]);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      return new Sk.builtin.str(EUCLIDEAN_2 + "(" + mv.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (typeof mv !== \'undefined\') {\n        return new Sk.builtin.str(stringFromCoordinates([mv[0], mv[1], mv[2], mv[3]], ["1", "i", "j", "I"], "*"));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + EUCLIDEAN_2 + "\'>");\n      }\n    });\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a[0] === b[0]) && (a[1] === b[1]) && (a[2] === b[2]) && (a[3] === b[3]);\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a[0] !== b[0]) || (a[1] !== b[1]) || (a[2] !== b[2]) || (a[3] !== b[3]);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(mvPy, name) {\n      var mv = Sk.ffi.remapToJs(mvPy);\n      switch(name) {\n        case PROP_W: {\n          return Sk.builtin.assk$(mv[0], Sk.builtin.nmber.float$);\n        }\n        case PROP_X: {\n          return Sk.builtin.assk$(mv[1], Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(mv[2], Sk.builtin.nmber.float$);\n        }\n        case PROP_XY: {\n          return Sk.builtin.assk$(mv[3], Sk.builtin.nmber.float$);\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy) {\n              return remapE2ToPy(mv[0], mv[1], mv[2], mv[3]);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(4, Sk.builtin.nmber.int$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a readable attribute of " + EUCLIDEAN_2);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(selfPy, name, valuePy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_W: {\n          self[0] = value;\n        }\n        break;\n        case PROP_X: {\n          self[1] = value;\n        }\n        break;\n        case PROP_Y: {\n          self[2] = value;\n        }\n        break;\n        case PROP_XY: {\n          self[3] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + EUCLIDEAN_2);\n        }\n      }\n    });\n  }, EUCLIDEAN_2, []);\n\n  mod[\'getHSL\'] = new Sk.builtin.func(function(hue, saturation, lightness, alpha) {\n    hue = Sk.ffi.remapToJs(hue);\n    saturation = Sk.ffi.remapToJs(saturation);\n    lightness = Sk.ffi.remapToJs(lightness);\n    alpha = Sk.ffi.remapToJs(alpha);\n    return new Sk.builtin.str(createjs[GRAPHICS].getHSL(hue, saturation, lightness, alpha));\n  });\n\n  return mod;\n}\n',"src/lib/turtle/__init__.js":'//\n//\n// Turtle Graphics Module for Skulpt\n//\n// Brad Miller\n//\n//\n//\n\n\nvar TurtleGraphics; // the single identifier needed in the global scope\n\nif (! TurtleGraphics) {\n    TurtleGraphics = { };\n}\n\n\n(function () {\n\n    // Define private constants\n\n    var Degree2Rad = Math.PI / 180.0; // conversion factor for degrees to radians\n    var Rad2Degree = 180.0 / Math.PI\n\n    //\n    // Define TurtleCanvas\n    // \n\n    function TurtleCanvas(options) {\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n\n        this.canvas = document.getElementById(this.canvasID);\n        this.context = this.canvas.getContext(\'2d\');\n        //this.canvas.style.display = \'block\';\n        $(this.canvas).fadeIn();\n\n        this.lineScale = 1.0;\n        this.xptscale = 1.0;\n        this.yptscale = 1.0\n\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.setup(this.canvas.width,this.canvas.height);\n        TurtleGraphics.canvasInit = true;\n        this.tlist = []\n\n		this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        this.segmentLength = 10;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        TurtleGraphics.canvasLib[this.canvasID] = this;\n		Sk.tg.fadeOnExit = true;	//	This can be set to false AFTER the program completes to turn off the fade out on the canvas as a result of exitonclick\n    }\n\n    TurtleCanvas.prototype.setup = function(width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.lineScale = 1.0;\n        this.xptscale = 1.0;\n        this.yptscale = 1.0;\n\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n		this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate ) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n\n        if (TurtleGraphics.canvasInit == false) {\n            this.context.save();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n            this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n            TurtleGraphics.canvasInit = true;\n            TurtleGraphics.eventCount = 0;\n            TurtleGraphics.renderClock = 0;\n            TurtleGraphics.renderTime = 0;	// RNL\n        } else {\n            this.context.restore();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2); // move 0,0 to center.\n            this.context.scale(1, -1); // scaling like this flips the y axis the right way.\n            this.context.clearRect(-this.canvas.width / 2, -this.canvas.height / 2,\n                                    this.canvas.width, this.canvas.height);\n        }\n    }\n    TurtleCanvas.prototype.addToCanvas = function(t) {\n	        this.tlist.push(t);\n    }\n\n    TurtleCanvas.prototype.onCanvas = function(t) {\n        return (this.tlist.indexOf(t) >= 0);\n    }\n\n    TurtleCanvas.prototype.isAnimating = function() {\n        return (this.tlist.length > 0)\n    }\n\n    TurtleCanvas.prototype.startAnimating = function(t) {\n		if (! this.isAnimating()) {\n        	this.intervalId = setTimeout(render, this.delay);	//	setInterval(render, this.delay);\n		}\n    	if (!this.onCanvas(t))	//	Added by RNL in case startAnimating is called after it\'s already been added\n       		this.addToCanvas(t);\n        Sk.isTurtleProgram = true;\n    }\n\n    TurtleCanvas.prototype.doneAnimating = function(t) {\n        this.tlist.splice(0,this.tlist.length)\n        clearTimeout(this.intervalId)   \n        $(Sk.runButton).removeAttr(\'disabled\');\n    }\n\n    TurtleCanvas.prototype.cancelAnimation = function() {\n        if (this.intervalId) {\n            clearTimeout(this.intervalId)	//	clearInterval(this.intervalId);\n        }\n\n        for (var t in this.tlist) {\n            this.tlist[t].aCount = this.tlist[t].drawingEvents.length - 1;\n        }\n        render();\n    }\n\n    TurtleCanvas.prototype.setSpeedDelay = function(s) {	// RNL\n        var df = 10 - (s % 11) + 1;\n        this.delay = df * this.timeFactor;	//	RNL was 10;\n    }\n\n    TurtleCanvas.prototype.setDelay = function(d) {\n        this.delay = d;\n    }\n\n    TurtleCanvas.prototype.getDelay = function(s) { // RNL\n        return this.delay;\n    }\n\n    TurtleCanvas.prototype.setCounter = function(s) {\n		if (!s || s <= 0)	//	Don\'t let this be less than 1\n			s = 1;\n        this.renderCounter = s;\n    }\n\n    TurtleCanvas.prototype.getCounter = function() {\n        return this.renderCounter;\n    }\n\n    TurtleCanvas.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n        this.context.restore();\n        this.context.scale(this.canvas.width / (urx - llx), -this.canvas.height / (ury - lly));\n        if (lly == 0)\n            this.context.translate(-llx, lly - (ury - lly));\n        else if (lly > 0)\n            this.context.translate(-llx, -lly * 2);\n        else\n            this.context.translate(-llx, -ury);\n\n        var xlinescale = (urx - llx) / this.canvas.width;\n        var ylinescale = (ury - lly) / this.canvas.height;\n        this.xptscale = xlinescale;\n        this.yptscale = ylinescale;\n        this.lineScale = Math.min(xlinescale,ylinescale)\n        this.context.save();\n\n        this.llx = llx;\n        this.lly = lly;\n        this.urx = urx;\n        this.ury = ury;\n\n    }\n\n    TurtleCanvas.prototype.window_width = function() {\n        return this.canvas.width;\n    }\n\n    TurtleCanvas.prototype.window_height = function() {\n        return this.canvas.height;\n    }\n\n    TurtleCanvas.prototype.bgcolor = function(c) {\n        this.background_color = c;\n        //this.canvas.style.setProperty("background-color", c.v);\n        $(this.canvas).css("background-color",c.v);\n    }\n\n    TurtleCanvas.prototype.setSegmentLength = function(s) {\n        this.segmentLength = s;\n    }\n\n    TurtleCanvas.prototype.getSegmentLength = function() {\n        return this.segmentLength;\n    }\n    \n    // todo: if animating, this should be deferred until the proper time\n    TurtleCanvas.prototype.exitonclick = function () {\n        var canvas_id = this.canvasID;\n        var theCanvas = this;\n        $(this.canvas).click(function() {\n            if (! theCanvas.isAnimating()) {\n				if (Sk.tg.fadeOnExit)	//	Let\'s this be configurable\n                	$("#"+canvas_id).hide();\n                $("#"+canvas_id).unbind(\'click\');\n                Sk.tg.canvasInit = false;\n                delete Sk.tg.canvasLib[canvas_id];\n            }\n        });\n    }\n\n    TurtleCanvas.prototype.turtles = function() {\n        return TurtleGraphics.turtleList;\n    }\n\n	TurtleCanvas.prototype.tracer = function(t, d) {	//	New version NOT attached to a turtle (as per real turtle)\n        this.setCounter(t);\n		if (t == 0) {\n			for (var i in this.turtleList)\n				this.turtleList[i].animate = false;\n			this.cancelAnimation();\n		}\n		if (d !== undefined)\n			this.setDelay(d);\n	}\n\n    // check if all turtles are done\n    allDone = function() {\n        var allDone = true;\n        for (var tix in TurtleGraphics.turtleList) {\n            var theT = TurtleGraphics.turtleList[tix];\n            allDone = allDone && (theT.aCount >= theT.drawingEvents.length);\n        }\n        return allDone;\n    }\n    //\n    //  This is the function that provides the animation\n    //\n    render = function () {\n        var context = document.getElementById(TurtleGraphics.defaults.canvasID).getContext(\'2d\');\n        with (context) {\n            with (TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID]) {\n                clearRect(llx, lly, (urx - llx), (ury - lly));\n                //canvas.style.setProperty("background-color",TurtleGraphics.turtleCanvas.bgcolor.v);\n            }\n            var incr = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID].getCounter();\n            var lastCanvas = null\n\n            TurtleGraphics.renderClock += incr;\n\n            for (var tix in TurtleGraphics.turtleList) {\n                var t = TurtleGraphics.turtleList[tix]\n                lastCanvas = t.turtleCanvas \n                if (t.aCount >= t.drawingEvents.length)\n                    t.aCount = t.drawingEvents.length - 1;\n                moveTo(0, 0);\n                var currentPos = new Vector(0,0,0);\n                var currentHead = new Vector(1,0,0);\n                lineWidth = t.get_pen_width();\n                lineCap = \'round\';\n                lineJoin = \'round\';\n                strokeStyle = \'black\';\n                var filling = false;\n                if (isNaN(t.turtleCanvas.delay))\n                	t.turtleCanvas.delay = 0\n//				console.log(tix + " : " + t.clearPoint + " to " + t.aCount)\n                for (var i = t.clearPoint; (i <= t.aCount || t.turtleCanvas.delay == 0) && i < t.drawingEvents.length; i++) {\n                	if (i > t.aCount)	//	If se jump past aCount, jump it ahead\n                		t.aCount = i\n                    var oper = t.drawingEvents[i];\n                    var ts = oper[oper.length-1];\n//					console.log(i + "/" + ts + oper [0] + "{" + oper [1] + "}" + t.turtleCanvas.delay)\n                    if (ts <= TurtleGraphics.renderClock || t.turtleCanvas.delay == 0) {\n                    	if (ts > TurtleGraphics.renderClock)	//	If we go past the render clock, jump it ahead\n                    		TurtleGraphics.renderClock = ts\n//						console.log("<==")\n                        if (oper[0] == "LT") {  //  line to\n                            if (! filling) {\n                                beginPath();\n                                moveTo(oper[1], oper[2]);\n                            }\n                            lineTo(oper[3], oper[4]);\n                            strokeStyle = oper[5];\n                            stroke();\n                            currentPos = new Vector(oper[3],oper[4],0);\n                            if (! filling)\n                                closePath();\n                        }\n                        else if (oper[0] == "MT") {  // move to\n                            moveTo(oper[3], oper[4]);\n                            currentPos = new Vector(oper[3],oper[4],0);\n                        }\n                        else if (oper[0] == "BF") {  // begin fill\n                            beginPath();\n                            moveTo(oper[1], oper[2]);\n                            filling = true;\n                        }\n                        else if (oper[0] == "EF") {  // end fill\n                            fillStyle = oper[3];\n                            stroke();\n                            fill();\n                            closePath();\n                            filling = false;\n                        }\n                        else if (oper[0] == "FC") {  // fill color\n                            fillStyle = oper[1];\n                        }\n                        else if (oper[0] == "TC") {  // turtle color\n                            strokeStyle = oper[1];\n                        }\n                        else if (oper[0] == "PW") {  // Pen width\n                            lineWidth = oper[1];\n                        }\n                        else if (oper[0] == "DT") {  // Dot\n                            var col = fillStyle;\n                            fillStyle = oper[2];\n                            var size = oper[1];\n                            fillRect(oper[3] - size / 2, oper[4] - size / 2, size, size);\n                            fillStyle = col;\n                        }\n                        else if (oper[0] == "CI") {  // Circle\n                            if (!filling)\n								beginPath();\n                            arc(oper[1], oper[2], oper[3], oper[4], oper[5], oper[6]);\n                            currentPos = new Vector(oper[1]+Math.cos(oper[5])*oper[3],\n                                oper[2]+Math.sin(oper[5])*oper[3],0);\n                            stroke();\n                            if (! filling) {\n                                closePath();\n                            }\n                        }\n                        else if (oper[0] == "WT") { // write\n                            if (font)\n                                font = oper[2];\n                            scale(1, -1);\n                            fillText(oper[1], oper[3], -oper[4]);\n                            scale(1, -1);\n                        } else if (oper[0] == "ST") {  // stamp\n                            t.drawturtle(oper[3], new Vector(oper[1], oper[2], 0));\n                        } else if (oper[0] == "HT") { // hide turtle\n                            t.visible = false;\n                        } else if (oper[0] == "SH") { // show turtle\n                            t.visible = true;\n                        } else if (oper[0] == "TT") {\n                            currentHead = oper[1];\n                        } else if (oper[0] == "CL") { // RNL clear\n                        	clear_canvas(t.canvasID);\n                        	t.clearPoint = i;	// Different from reset that calls clear because it leaves the turtles where they are\n                        } else if (oper[0] == "DL") { // RNL delay\n                        	var df = oper[1]\n//                      	console.log("animated delay set " + df)\n                        	t.turtleCanvas.delay = df\n                        } else if (oper[0] == "SC") { // RNL speed change\n                        	var s = oper[1]\n                        	if (s < 0)\n                        		s = 0\n                        	if (s > 10)\n                        		s = 10\n       						var df = (10 - (s % 11) + 1) * t.turtleCanvas.timeFactor	//	10\n       						if (s == 0) {\n       							df = 0\n       						}\n	                        //	t.turtleCanvas.intervalId = clearInterval(t.turtleCanvas.intervalId);\n	       					t.turtleCanvas.delay = df;\n	       					//	t.turtleCanvas.intervalId = setInterval(render, t.turtleCanvas.delay)\n       						if (oper[2]) {\n       							t.turtleCanvas.setSegmentLength(oper[2]);\n       						}\n       					} else if (oper[0] == "NO") { // RNL no op                	\n                        } else {\n							console.log("unknown op: " + oper[0]);\n                        } // end of oper[0] test\n                    } // end of if ts < render clock\n                } // end of for\n//				console.log(TurtleGraphics.renderClock + " / " + t.aCount)\n//				console.log("------------------------------")\n                t.aCount += incr;\n                if (t.visible) {\n                    // draw the turtle\n                    t.drawturtle(currentHead.toAngle(), currentPos); // just use currentHead\n                }\n            }\n            //if (t.aCount >= t.drawingEvents.length) {\n            if (TurtleGraphics.renderClock > TurtleGraphics.eventCount ){ // && allDone() ){\n//              t.turtleCanvas.doneAnimating(t);\n//				console.log("done animating")\n                if (lastCanvas) lastCanvas.doneAnimating(t);\n            } else {\n//    			t.turtleCanvas.intervalId = setTimeout(render, t.turtleCanvas.delay)\n    			if (lastCanvas) {\n    				lastCanvas.intervalId = setTimeout(render, lastCanvas.delay)\n    			}\n            }\n        }\n    }\n\n\n\n    // Constructor for Turtle objects\n    function Turtle() {\n        if (arguments.length >= 1) {\n            this.initialize(arguments[0]);\n        }\n        else {\n            this.initialize();\n        }\n        TurtleGraphics.turtleList.push(this);\n    }\n\n\n    Turtle.prototype.go_home = function () {\n        // Put turtle in initial state\n        // turtle is headed to the right\n        // with location 0,0,0 in the middle of the canvas.\n        // x grows to the right\n        // y grows towards the top of the canvas\n        with (this) {\n            position = home;\n            context.moveTo(home[0], home[1]);\n            heading = new Vector([1.0, 0.0, 0.0]); // to the right; in turtle space x+ direction\n            normal = new Vector([0.0, 0.0, -1.0]); // in z- direction\n        }\n    };\n\n    Turtle.prototype.initialize = function () {\n        // Initialize the turtle.\n        var options = { };\n\n        if (arguments.length >= 1) {\n            options = arguments[0];\n        }\n\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.context = document.getElementById(this.canvasID).getContext(\'2d\');\n\n        this.animate = TurtleGraphics.defaults.animate;\n\n        with (this.context) {\n            if (TurtleGraphics.canvasInit == false) {   // This is a workaround until I understand skulpt re-running better\n                // the downside is that this limits us to a single turtle...\n                save();\n                translate(canvas.width / 2, canvas.height / 2); // move 0,0 to center.\n                scale(1, -1); // scaling like this flips the y axis the right way.\n                if (! TurtleGraphics.canvasLib[this.canvasID]) {\n                    TurtleGraphics.canvasLib[this.canvasID] = new TurtleCanvas(options);\n                }\n                TurtleGraphics.canvasInit = true;\n            } else {\n                clear_canvas(this.canvasID);\n            }\n\n            this.turtleCanvas = TurtleGraphics.canvasLib[this.canvasID];\n            this.home = new Vector([0.0, 0.0, 0.0]);\n            this.visible = true;\n            this.shapeStore = {};\n            this.shapeStore[\'turtle\'] = turtleShapePoints();\n            this.shapeStore[\'arrow\'] = defaultShapePoints();\n            this.shapeStore[\'circle\'] = circleShapePoints();\n            this.shapeStore[\'square\'] = squareShapePoints();\n            this.shapeStore[\'triangle\'] = triangleShapePoints();\n            this.shapeStore[\'blank\'] = [new Vector(0,0)];\n            this.shapeStore[\'classic\'] = classicShapePoints();\n            this.currentShape = \'classic\';\n            this.drawingEvents = [];\n\n            this.filling = false;\n            this.pen = true;\n            this.penStyle = \'black\';\n            this.penWidth = 2;\n            this.fillStyle = \'black\';\n            this.position = [ ];\n            this.heading = [ ];\n            this.normal = [ ];\n            this.go_home();\n            this.aCount = 0;\n            this.clearPoint = 0;	// RNL for clear/clearScreen\n        }\n    }\n    function turtleShapePoints() {\n        var pl = [\n            [0,16],\n            [-2,14],\n            [-1,10],\n            [-4,7],\n            [-7,9],\n            [-9,8],\n            [-6,5],\n            [-7,1],\n            [-5,-3],\n            [-8,-6],\n            [-6,-8],\n            [-4,-5],\n            [0,-7],\n            [4,-5],\n            [6,-8],\n            [8,-6],\n            [5,-3],\n            [7,1],\n            [6,5],\n            [9,8],\n            [7,9],\n            [4,7],\n            [1,10],\n            [2,14]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function defaultShapePoints() {\n        var pl = [\n            [-10,0],\n            [10,0],\n            [0,10]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function circleShapePoints() {\n        var pl = [\n            [10,0],\n            [9.51,3.09],\n            [8.09,5.88],\n            [5.88,8.09],\n            [3.09,9.51],\n            [0,10],\n            [-3.09,9.51],\n            [-5.88,8.09],\n            [-8.09,5.88],\n            [-9.51,3.09],\n            [-10,0],\n            [-9.51,-3.09],\n            [-8.09,-5.88],\n            [-5.88,-8.09],\n            [-3.09,-9.51],\n            [-0.00,-10.00],\n            [3.09,-9.51],\n            [5.88,-8.09],\n            [8.09,-5.88],\n            [9.51,-3.09]\n        ];\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n    }\n\n    function triangleShapePoints() {\n        var pl = [\n            [10,-5.77],\n            [0,11.55],\n            [-10,-5.77]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    function squareShapePoints() {\n        var pl = [\n            [10,-10],\n            [10,10],\n            [-10,10],\n            [-10,-10]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    function classicShapePoints() {\n        var pl = [\n            [0,0],\n            [-5,-9],\n            [0,-7],\n            [5,-9]\n        ];\n\n        res = [];\n        for (p in pl) {\n            res.push(new Vector(pl[p]));\n        }\n        return res;\n\n    }\n\n    Turtle.prototype.clean = function () {\n        // Clean the canvas\n        // Optional second argument is color\n        with (this) {\n            if (arguments.length >= 1) {\n                clear_canvas(canvasID, arguments[0]);\n            }\n            else {\n                clear_canvas(canvasID);\n            }\n            initialize();\n        }\n    }\n\n    Turtle.prototype.addDrawingEvent = function(eventList) {\n        TurtleGraphics.eventCount += 1;\n        eventList.push(TurtleGraphics.eventCount);\n        this.drawingEvents.push(eventList);\n    }\n//  \n//  Drawing Functions\n//\n\n    // break a line into segments\n    // sp:  Vector of starting position\n    // ep:  Vector of ending position\n    // sl:  int length of segments\n    segmentLine = function(sp, ep, sL, pen) {\n        var head = ep.sub(sp).normalize();\n        var numSegs = Math.floor(ep.sub(sp).len() / sL);\n        var res = [];\n        var oldp = sp;\n        var newp;\n        var op = ""\n        if (pen)\n            op = "LT"\n        else\n            op = "MT"\n        for (var i = 0; i < numSegs; i++) {\n            newp = oldp.linear(1, sL, head);\n            res.push([op,oldp[0],oldp[1],newp[0],newp[1]]);\n            oldp = newp;\n        }\n        if (! ((oldp[0] == ep[0]) && (oldp[1] == ep[1])))\n            res.push([op, oldp[0], oldp[1], ep[0], ep[1]]);\n        return res;\n    }\n\n    Turtle.prototype.draw_line = function(newposition) {\n        with (this) {\n            with (context) {\n                if (! animate) {\n                    if (! filling) {\n                        beginPath();\n                        moveTo(position[0], position[1]);\n                    }\n                    lineCap = \'round\';\n                    lineJoin = \'round\';\n                    lineWidth = get_pen_width();\n                    strokeStyle = penStyle;\n                    lineTo(newposition[0], newposition[1]);\n                    stroke();\n                    if (! filling)\n                        closePath();\n                } else {\n                    var r = segmentLine(position, newposition, turtleCanvas.getSegmentLength(), pen);\n                    for (var s in r) {\n                        r[s].push(penStyle);\n                        addDrawingEvent(r[s]);\n                    }\n                    if (! turtleCanvas.isAnimating()) {\n                        turtleCanvas.startAnimating(this);\n                    } else {\n                        if (! turtleCanvas.onCanvas(this))\n                            turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n        }\n\n    }\n\n\n    Turtle.prototype.forward = function (d) {\n        with (this) {\n            var newposition = position.linear(1, d, heading);\n            goto(newposition);\n        }\n    }\n\n    Turtle.prototype.backward = function(d) {\n        this.forward(-d);\n    }\n\n//	This is an internal function that sets the position without doing any drawing\n    Turtle.prototype.teleport_to = function(nx, ny) {\n        if (nx instanceof Vector)\n            var newposition = nx;\n        else\n            var newposition = new Vector([nx,ny,0]);\n        this.context.moveTo(newposition[0], newposition[1]);\n		this.position = newposition;\n	}\n\n    Turtle.prototype.goto = function(nx, ny) {\n        if (nx instanceof Vector)\n            var newposition = nx;\n        else\n            var newposition = new Vector([nx,ny,0]);\n        with (this) {\n            if (pen) {\n                draw_line(newposition);\n            } else {\n                if (! animate) {\n                    context.moveTo(newposition[0], newposition[1]);\n                } else {\n                    var r = segmentLine(position, newposition, turtleCanvas.getSegmentLength(), pen);\n                    for (var s in r)\n                        addDrawingEvent(r[s]);\n                    if (! turtleCanvas.isAnimating()) {\n                        turtleCanvas.startAnimating(this);\n                    } else {\n                        if (! turtleCanvas.onCanvas(this))\n                            turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n            position = newposition;\n\n        }\n    }\n\n    Turtle.prototype.delay = function(d) {	// RNL\n    	if (d != null) {\n    		if (d < 0)\n    			d = -d\n    		if (!this.animate) \n    			this.turtleCanvas.setDelay(d)\n    		else {\n    			this.turtleCanvas.setDelay(d)\n	    		this.addDrawingEvent(["DL", d])\n	    		this.addDrawingEvent(["NO"])\n    		}\n    	}\n        return this.turtleCanvas.getDelay();\n    }\n\n    Turtle.prototype.speed = function(s,t) {\n        if (s > 0 && !this.animate) {\n            this.animate = true;\n            this.turtleCanvas.setSpeedDelay(s)\n        } else if (s == 0 && !this.animate) {\n        	this.turtleCanvas.setSpeedDelay(s)\n        } else {\n//          this.animate = false;\n//          this.turtleCanvas.cancelAnimation();\n			this.addDrawingEvent(["SC", s, t])\n			this.addDrawingEvent(["NO"])\n        }\n        if (t) {\n            this.turtleCanvas.setSegmentLength(t);\n            // set the number of units to divide a segment into\n        } else {\n            this.turtleCanvas.setSegmentLength(10);\n        }\n    }\n\n    Turtle.prototype.tracer = function(t, d) {\n        this.turtleCanvas.setCounter(t);\n		if (t == 0) {\n			this.animate=false;\n			this.turtleCanvas.cancelAnimation();\n		}\n		if (d !== undefined)\n			this.turtleCanvas.setDelay(d);\n    }\n\n    Turtle.prototype.getRenderCounter = function() {\n        return this.turtleCanvas.getCounter();\n    }\n\n    Turtle.prototype.turn = function (phi) {\n        with (this) {\n            var alpha = phi * Degree2Rad;\n            var left = normal.cross(heading);\n            var newheading = heading.rotateNormal(left, normal, alpha);\n            heading = newheading;\n\n            if (animate) {\n                addDrawingEvent(["TT",heading]);\n            }\n        }\n    }\n\n    Turtle.prototype.right = Turtle.prototype.turn;\n\n    Turtle.prototype.left = function(phi) {\n        this.turn(-phi);\n    }\n\n    Turtle.prototype.get_heading = function () {\n        if (TurtleGraphics.defaults.degrees)\n            return this.heading.toAngle()\n        else\n            return this.heading\n    }\n\n    Turtle.prototype.get_position = function () {\n        return this.position;\n    }\n\n    Turtle.prototype.getx = function () {\n        return this.position[0];\n    }\n\n    Turtle.prototype.gety = function () {\n        return this.position[1];\n    }\n\n    Turtle.prototype.set_heading = function(newhead) {\n        if ((typeof(newhead)).toLowerCase() === \'number\') {\n            this.heading = Vector.angle2vec(newhead);\n        } else {\n            this.heading = newhead;\n        }\n    }\n\n    Turtle.prototype.towards = function(to, y) {\n        // set heading vector to point towards another point.\n        if ((typeof(to)).toLowerCase() === \'number\')\n            to = new Vector(to, y, 0);\n        else if (! (to instanceof Vector)) {\n            to = new Vector(to);\n        }\n        var res = to.sub(this.position);\n        res = res.normalize();\n        if (TurtleGraphics.defaults.degrees)\n            return res.toAngle();\n        else\n            return res;\n    }\n\n    Turtle.prototype.distance = function(to, y) {\n        if ((typeof(to)).toLowerCase() === \'number\')\n            to = new Vector(to, y, 0);\n        return this.position.sub(new Vector(to)).len();\n    }\n\n    Turtle.prototype.dot = function() {\n        var size = 2;\n        if (arguments.length >= 1) size = arguments[0];\n        size = size * this.turtleCanvas.lineScale;\n        with (this) {\n            with (context) {\n                var color = penStyle;\n                var nc = arguments[1] || color;\n                if (! animate) {\n                    fillStyle = nc;\n                    fillRect(position[0] - size / 2, position[1] - size / 2, size, size);\n                    fillStyle = color;\n                } else {\n                    addDrawingEvent(["DT", size, nc, position[0], position[1]]);\n                }\n            }\n        }\n\n    }\n\n    Turtle.prototype.circle = function(radius, extent) {\n        if (extent === undefined) {\n            extent = 360\n        }\n		if (this.animate) {\n			var arcLen = Math.abs(radius * Math.PI * 2.0  * extent / 360);\n			var segLen = this.turtleCanvas.getSegmentLength();\n			if (arcLen <= segLen)\n				this.arc(radius,extent);\n			else {\n				//	Break the arc into segments for animation\n				var extentPart = (segLen / arcLen) * extent;\n				var extentLeft = extent;\n				while (Math.abs(extentLeft) > Math.abs(extentPart)) {\n					this.arc(radius, extentPart);\n					extentLeft = extentLeft - extentPart;\n				}\n				if (Math.abs(extentLeft) > 0.01)\n					this.arc(radius, extentLeft);\n			}\n		} else {\n			this.arc(radius,extent);\n		}\n	}\n	\n    Turtle.prototype.arc = function(radius, extent) {\n		//	Figure out where the turtle is and which way it\'s facing\n		var turtleHeading = this.get_heading()\n		var tx = this.position[0]\n		var ty = this.position[1]\n\n		//	Figure out the circle center\n		var cx = tx + (radius * Math.cos((turtleHeading + 90) * Degree2Rad));\n		var cy = ty + (radius * Math.sin((turtleHeading + 90) * Degree2Rad));\n\n		//	Canvas arc angles go CLOCKWISE, not COUNTERCLOCKWISE like Turtle\n\n		//	Figure out our arc angles\n		var startAngleDeg;\n		if (radius >= 0)\n			startAngleDeg = turtleHeading - 90;\n		else\n			startAngleDeg = turtleHeading + 90;\n\n		var endAngleDeg;\n        if (extent) {\n			if (radius >= 0)\n	            endAngleDeg = startAngleDeg + extent;\n			else\n	            endAngleDeg = startAngleDeg - extent;\n        } else {\n			if (radius >= 0)\n	            endAngleDeg = startAngleDeg + 360;\n			else\n				endAngleDeg = startAngleDeg - 360;\n		}\n\n		//	Canvas angles are opposite\n		startAngleDeg = 360 - startAngleDeg\n		endAngleDeg   = 360 - endAngleDeg\n\n		//	Becuase the y axis has been flipped in HTML5 Canvas with a tanslation, we need to adjust the angles\n		startAngleDeg = -startAngleDeg\n		endAngleDeg   = -endAngleDeg\n\n		//	Convert to radians\n		var startAngle = startAngleDeg * Degree2Rad;\n		var endAngle   = endAngleDeg   * Degree2Rad;\n\n\n		//	Do the drawing\n        if (! this.animate) {\n			if (!this.filling)\n				this.context.beginPath();\n            this.context.arc(cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0));\n            this.context.stroke();\n			if (!this.filling)\n				this.context.closePath();\n        } else {\n            this.addDrawingEvent(["CI", cx, cy, Math.abs(radius), startAngle, endAngle, (radius * extent <= 0)]);\n        }\n\n		//	Move the turtle only if we have to\n		if (extent && (extent % 360) != 0) {\n			var turtleArc;\n			if (radius >= 0)\n				turtleArc = extent;\n			else \n				turtleArc = -extent;\n			var newTurtleHeading = (turtleHeading + turtleArc) % 360;\n			if (newTurtleHeading < 0)\n				newTurtleHeading = newTurtleHeading + 360;\n\n			var nx = cx + (radius * Math.cos((newTurtleHeading - 90) * Degree2Rad));\n			var ny = cy + (radius * Math.sin((newTurtleHeading - 90) * Degree2Rad));	//	y coord is inverted in turtle\n\n			//	Move it internally\n			this.set_heading(newTurtleHeading);\n			this.teleport_to(nx,ny);\n\n			//	If we\'re animating the turtle, move it on the screen\n			if (this.animate) {\n				this.addDrawingEvent(["TT", this.heading]);\n			}\n		}\n\n    }\n\n    Turtle.prototype.write = function(theText, move, align, font) {\n        if (! this.animate) {\n            if (font)\n                this.context.font = font.v;\n            this.context.scale(1, -1);\n            this.context.fillText(theText, this.position[0], -this.position[1]);\n            this.context.scale(1, -1);\n        } else {\n            var fontspec;\n            if (font)\n                fontspec = font.v\n            this.addDrawingEvent(["WT", theText, fontspec, this.position[0], this.position[1]]);\n        }\n    }\n\n    Turtle.prototype.setworldcoordinates = function(llx, lly, urx, ury) {\n        this.turtleCanvas.setworldcoordinates(llx, lly, urx, ury);\n    }\n\n//\n// Pen and Style functions\n//\n    Turtle.prototype.pen_down = function () {\n        this.pen = true;\n    }\n\n    Turtle.prototype.down = Turtle.prototype.pen_down;\n\n    Turtle.prototype.pen_up = function () {\n        this.pen = false;\n    }\n\n    Turtle.prototype.up = Turtle.prototype.pen_up;\n\n    Turtle.prototype.get_pen = function () {\n        return this.pen;\n    }\n\n    Turtle.prototype.set_pen_width = function (w) {\n        if (this.animate)\n            this.addDrawingEvent(["PW", w * this.turtleCanvas.lineScale]);\n        else\n            this.penWidth = w;\n    }\n\n    Turtle.prototype.get_pen_width = function() {\n        return this.penWidth * this.turtleCanvas.lineScale;\n    }\n\n    Turtle.prototype.set_pen_color = function (c, g, b) {\n        if (typeof(c) == "string") {\n            this.penStyle = c;\n        } else {\n        	var rs\n        	var gs\n        	var bs\n        	if (typeof( c) == "object" && c.length == 3) {\n				var c0 = Sk.builtin.asnum$(c[0]);\n				var c1 = Sk.builtin.asnum$(c[1]);\n				var c2 = Sk.builtin.asnum$(c[2]);\n        	} else {\n                var c0 = Sk.builtin.asnum$(c);\n                var c1 = Sk.builtin.asnum$(g);\n                var c2 = Sk.builtin.asnum$(b);\n        	}\n            rs = c0.toString(16);\n            gs = c1.toString(16);\n            bs = c2.toString(16);\n            while (rs.length < 2) rs = "0" + rs;\n            while (gs.length < 2) gs = "0" + gs;\n            while (bs.length < 2) bs = "0" + bs;\n            c = "#" + rs + gs + bs;\n            this.penStyle = c;\n        }\n\n        this.context.strokeStyle = c;\n        if (this.animate)\n            this.addDrawingEvent(["TC", c]);\n    }\n\n    Turtle.prototype.set_fill_color = function (c, g, b) {\n        if (typeof(c) == "string") {\n            this.fillStyle = c;\n        } else {\n        	var rs\n        	var gs\n        	var bs\n        	if (typeof( c) == "object" && c.length == 3) {\n				var c0 = Sk.builtin.asnum$(c[0]);\n				var c1 = Sk.builtin.asnum$(c[1]);\n				var c2 = Sk.builtin.asnum$(c[2]);\n        	} else {\n                var c0 = Sk.builtin.asnum$(c);\n                var c1 = Sk.builtin.asnum$(g);\n                var c2 = Sk.builtin.asnum$(b);\n        	}\n            rs = c0.toString(16)\n            gs = c1.toString(16)\n            bs = c2.toString(16)\n            while (rs.length < 2) rs = "0" + rs;\n            while (gs.length < 2) gs = "0" + gs;\n            while (bs.length < 2) bs = "0" + bs;\n            c = "#" + rs + gs + bs;\n            this.fillStyle = c;\n        }\n\n        this.context.fillStyle = c;\n        if (this.animate)\n            this.addDrawingEvent(["FC", c]);\n    }\n\n    Turtle.prototype.begin_fill = function () {\n        if (! this.animate) {\n            this.filling = true;\n            this.context.beginPath();\n            this.context.moveTo(this.position[0], this.position[1]);\n        } else\n            this.addDrawingEvent(["BF", this.position[0], this.position[1]]);\n\n    }\n\n    Turtle.prototype.end_fill = function () {\n        if (! this.animate) {\n            this.context.stroke();\n            this.context.fill();\n            this.context.closePath();\n            this.filling = false;\n        } else\n            this.addDrawingEvent(["EF", this.position[0], this.position[1], this.fillStyle]);\n    }\n\n\n    Turtle.prototype.showturtle = function() {\n        if (this.animate) {\n            this.addDrawingEvent(["SH"]);\n        }\n        this.visible = true;\n    }\n\n    Turtle.prototype.hideturtle = function() {\n        if (this.animate) {\n            this.addDrawingEvent(["HT"]);\n        }\n        this.visible = false;\n    }\n\n    Turtle.prototype.isvisible = function() {\n        return this.visible;\n    }\n\n    // \n    // Appearance\n    //\n\n    Turtle.prototype.shape = function(s) {\n        if (this.shapeStore[s])\n            this.currentShape = s;\n        else {\n        }\n    }\n\n    Turtle.prototype.drawturtle = function(heading, position) {\n        var rtPoints = [];\n        var plist = this.shapeStore[this.currentShape];\n        var head;\n        if (! (heading === undefined))\n            head = heading - 90.0;\n        else\n            head = this.heading.toAngle() - 90.0;\n        if (! position)\n            position = this.position\n        for (p in plist) {\n            rtPoints.push(plist[p].scale(this.turtleCanvas.xptscale,this.turtleCanvas.yptscale).rotate(head).add(position));\n        }\n        this.context.beginPath();\n        this.context.moveTo(rtPoints[0][0], rtPoints[0][1]);\n        for (var i = 1; i < rtPoints.length; i++) {\n            this.context.lineTo(rtPoints[i][0], rtPoints[i][1]);\n        }\n        this.context.closePath();\n        this.context.stroke();\n        if (this.fillStyle) {\n            this.context.fill();\n        }\n    }\n\n    Turtle.prototype.stamp = function() {\n        // either call drawTurtle or just add a DT with current position and heading to the drawingEvents list.\n        if (this.animate) {\n            this.addDrawingEvent(["ST",this.position[0],this.position[1],this.heading.toAngle()]);\n        } else\n            this.drawturtle();\n    }\n    \n    Turtle.prototype.clear = function () {\n    	if (this.animate) {\n    		this.addDrawingEvent(["CL"])\n    	} else {\n    		clear_canvas(this.canvasID);\n    	}\n    }\n\n    function clear_canvas(canId) {\n        with (document.getElementById(canId).getContext(\'2d\')) {\n            if (arguments.length >= 2) {\n//		fillStyle = arguments[1];\n//		fillRect(0, 0, canvas.width, canvas.height);\n            }\n            clearRect(-canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);\n        }\n    }\n\n\n    // Create a 3d Vector class for manipulating turtle heading, and position.\n\n    function Vector(x, y, z) {\n        if ((typeof(x)).toLowerCase() === \'number\') {\n            Array.prototype.push.call(this, x);\n            Array.prototype.push.call(this, y);\n            Array.prototype.push.call(this, z);\n        }\n        else {\n            for (var i in x) {\n                Array.prototype.push.call(this, x[i]);\n            }\n        }\n    }\n\n\n    // Create a vector object given a direction as an angle.\n    Vector.angle2vec = function(phi) {\n        var res = new Vector([0.0,0.0,0.0]);\n        phi = phi * Degree2Rad;\n        res[0] = Math.cos(phi);\n        res[1] = Math.sin(phi);\n        return res.normalize();\n    }\n\n    // This trick allows you to access a Vector object like an array\n    // myVec[0] == x\n    // myVec[1] == y\n    // myVec[2] == z\n    // we really only need the z for the convenience of rotating\n    Vector.prototype.addItem = function(item) {\n        Array.prototype.push.call(this, item);\n    }\n\n    Vector.prototype.linear = function(a, b, v) {\n        var result = [ ];\n        for (var c = 0; c <= 2; ++c) {\n            result[c] = a * this[c] + b * v[c];\n        }\n        return new Vector(result);\n    }\n\n    Vector.prototype.cross = function(v) {\n        // Return cross product of this and v\n        var result = [ ];\n        for (var c = 0; c <= 2; ++c) {\n            result[c] = this[(c + 1) % 3] * v[(c + 2) % 3] - this[(c + 2) % 3] * v[(c + 1) % 3];\n        }\n        return new Vector(result);\n    }\n\n    Vector.prototype.rotate = function(angle) {\n        // Rotate this counter clockwise by angle.\n        var perp = new Vector(-this[1], this[0], 0);\n        angle = angle * Degree2Rad;\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        return new Vector(this[0] * c + perp[0] * s, this[1] * c + perp[1] * s, 0);\n    }\n\n    Vector.prototype.rotateNormal = function(v, w, alpha) {\n        // Return rotation of this in direction of v about w over alpha\n        // Requires: v, w are vectors; alpha is angle in radians\n        //   this, v, w are orthonormal\n        return this.linear(Math.cos(alpha), Math.sin(alpha), v);\n    }\n\n    Vector.prototype.normalize = function() {\n        var n = this.len();\n        var res = this.div(n);\n        return res;\n    }\n\n    Vector.prototype.toAngle = function() {\n        // workaround for values getting set to +/i xxx e -16 fooling the +/- checks below\n        if (Math.abs(this[1]) < 0.00001) this[1] = 0.0;\n        if (Math.abs(this[0]) < 0.00001) this[0] = 0.0;\n        var rads = Math.atan(Math.abs(this[1]) / Math.abs(this[0]));\n        var deg = rads * Rad2Degree;\n        if (this[0] < 0 && this[1] > 0) deg = 180 - deg;\n        else if (this[0] < 0 && this[1] <= 0) deg = 180.0 + deg;\n        else if (this[0] >= 0 && this[1] < 0) deg = 360 - deg;\n        return deg;\n    }\n\n    // divide all vector components by the same value\n    Vector.prototype.div = function(n) {\n        res = []\n        res[0] = this[0] / n;\n        res[1] = this[1] / n;\n        res[2] = this[2] / n;\n        return new Vector(res);\n    }\n\n    // subtract one vector from another\n    Vector.prototype.sub = function(v) {\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] - v[0];\n        res[1] = this[1] - v[1];\n        res[2] = this[2] - v[2];\n        return res;\n    }\n\n    Vector.prototype.add = function(v) {\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] + v[0];\n        res[1] = this[1] + v[1];\n        res[2] = this[2] + v[2];\n        return res;\n    }\n\n    Vector.prototype.smul = function(k) {  // scalar multiplication\n        res = new Vector(0, 0, 0);\n        res[0] = this[0] * k;\n        res[1] = this[1] * k;\n        res[2] = this[2] * k;\n        return res;\n    }\n\n    Vector.prototype.scale = function(xs,ys) {\n        res = new Vector(0,0,0);\n        res[0] =  this[0] * ys;\n        res[1] =  this[1] * xs;\n        res[2] = 1.0;\n        return res;\n    }\n\n    Vector.prototype.len = function() {\n        return Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    }\n\n\n    TurtleGraphics.defaults = { canvasID: \'mycanvas\', degrees: true, animate: true }\n    TurtleGraphics.turtleList = [];\n    TurtleGraphics.Turtle = Turtle;\n    TurtleGraphics.TurtleCanvas = TurtleCanvas;\n    TurtleGraphics.canvasLib = {}\n    TurtleGraphics.clear_canvas = clear_canvas;\n    TurtleGraphics.Vector = Vector;\n    TurtleGraphics.canvasInit = false;\n    TurtleGraphics.eventCount = 0;\n    TurtleGraphics.renderClock = 0;\n    TurtleGraphics.renderTime  = 0; // RNL\n\n})();\n\n\n//\n// Wrapper around the Turtle Module starts here.\n//\n//\nvar $builtinmodule = function(name) {\n    var mod = {};\n    // First we create an object, this will end up being the class\n    // class\n    Sk.tg = TurtleGraphics;\n\n    var checkArgs = function(expected, actual, func) {\n        if (actual != expected ) {\n            throw new Sk.builtin.TypeError(func + " takes exactly " + expected +\n                    " positional argument (" + actual + " given)")\n        }\n    }\n\n    var turtle = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            TurtleGraphics.defaults = {canvasID: Sk.canvas, animate: true, degrees: true};\n            self.theTurtle = new TurtleGraphics.Turtle();\n        });\n\n//\n// Turtle Motion\n//\n        //\n        // Move and Draw\n        //\n        $loc.forward = new Sk.builtin.func(function(self, dist) {\n			dist = Sk.builtin.asnum$(dist);\n            checkArgs(2,arguments.length,"forward()");\n            self.theTurtle.forward(dist);\n        });\n\n        $loc.fd = $loc.forward;\n\n        $loc.backward = new Sk.builtin.func(function(self, dist) {\n			dist = Sk.builtin.asnum$(dist);\n            checkArgs(2,arguments.length,"backward()");\n            self.theTurtle.forward(-dist);\n        });\n\n        $loc.back = $loc.backward;\n        $loc.bk = $loc.backward;\n\n        $loc.right = new Sk.builtin.func(function(self, angle) {\n			angle = Sk.builtin.asnum$(angle);\n            checkArgs(2,arguments.length,"right()");\n            self.theTurtle.turn(angle);\n        });\n\n        $loc.rt = $loc.right;\n\n        $loc.left = new Sk.builtin.func(function(self, angle) {\n			angle = Sk.builtin.asnum$(angle);\n            checkArgs(2,arguments.length,"left()");\n            self.theTurtle.turn(-angle);\n        });\n\n        $loc.lt = $loc.left;\n\n        $loc.goto_$rw$ = new Sk.builtin.func(function(self, nx, ny) {\n			nx = Sk.builtin.asnum$(nx);\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(3,arguments.length,"goto()");\n            self.theTurtle.goto(nx, ny);\n        });\n\n        $loc.setposition = new Sk.builtin.func(function(self,nx,ny) {\n			nx = Sk.builtin.asnum$(nx);\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(3,arguments.length,"setposition()");\n            self.theTurtle.up();\n            self.theTurtle.goto(nx,ny);\n            self.theTurtle.down();\n        });\n        $loc.setpos = $loc.setposition;\n\n        $loc.setx = new Sk.builtin.func(function(self, nx) {\n			nx = Sk.builtin.asnum$(nx);\n            checkArgs(2,arguments.length,"setx()");\n            self.theTurtle.goto(nx, self.theTurtle.GetY());\n        });\n\n        $loc.sety = new Sk.builtin.func(function(self, ny) {\n			ny = Sk.builtin.asnum$(ny);\n            checkArgs(2,arguments.length,"sety()");\n            self.theTurtle.goto(self.theTurtle.GetX(), ny);\n        });\n\n        $loc.setheading = new Sk.builtin.func(function(self, newhead) {\n			newhead = Sk.builtin.asnum$(newhead);\n            checkArgs(2,arguments.length,"setheading()");\n            return self.theTurtle.set_heading(newhead);\n        });\n\n        $loc.seth = $loc.setheading;\n\n        $loc.home = new Sk.builtin.func(function(self) {\n            self.theTurtle.go_home();\n        });\n\n        $loc.dot = new Sk.builtin.func(function(self, /*opt*/ size, color) {\n			size = Sk.builtin.asnum$(size);\n            size = size || 1;\n            if (color) {\n                color = color.v || self.theTurtle.penStyle;\n            }\n            self.theTurtle.dot(size, color);\n        });\n\n        $loc.circle = new Sk.builtin.func(function(self, radius, extent) {\n			radius = Sk.builtin.asnum$(radius);\n			extent = Sk.builtin.asnum$(extent);\n            self.theTurtle.circle(radius, extent);\n        });\n\n        $loc.delay = new Sk.builtin.func(function(self, d) {\n			d = Sk.builtin.asnum$(d);\n            return self.theTurtle.delay(d);\n        });\n\n        $loc.speed = new Sk.builtin.func(function(self, s, t) {\n			s = Sk.builtin.asnum$(s);\n			t = Sk.builtin.asnum$(t);\n            self.theTurtle.speed(s,t);\n        });\n\n        $loc.tracer = new Sk.builtin.func(function(self, t, d) {\n			t = Sk.builtin.asnum$(t);\n			d = Sk.builtin.asnum$(d);\n            self.theTurtle.tracer(t, d);\n        });\n\n		$loc.update = new Sk.builtin.func(function(self) {\n			//	Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n		});\n\n        // todo:  stamp, clearstamp, clearstamps, undo, speed\n\n        //\n        // Tell Turtle\'s state\n        //\n        $loc.heading = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"heading()");\n            return self.theTurtle.get_heading();\n        });\n\n        $loc.position = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"position()");\n            var res = self.theTurtle.get_position();\n            var x = new Sk.builtin.tuple([res[0],res[1]]);\n            return x;\n        });\n\n        $loc.pos = $loc.position;\n\n        $loc.xcor = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"xcor()");\n            var res = self.theTurtle.getx();\n            return res;\n        });\n\n        $loc.ycor = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"ycor()");\n            var res = self.theTurtle.gety();\n            return res;\n        });\n\n        $loc.towards = new Sk.builtin.func(function(self, tx, ty) {\n			tx = Sk.builtin.asnum$(tx);\n			ty = Sk.builtin.asnum$(ty);\n            if ((typeof(tx)).toLowerCase() === \'number\')\n                tx = [tx, ty, 0];\n            return self.theTurtle.towards(tx);\n        });\n\n        // tx can be either a number or a vector position.\n        // tx can not be a turtle at this time as multiple turtles have not been implemented yet.\n        $loc.distance = new Sk.builtin.func(function(self, tx, ty) {\n			tx = Sk.builtin.asnum$(tx);\n			ty = Sk.builtin.asnum$(ty);\n            if ((typeof(tx)).toLowerCase() === \'number\') {\n                tx = [tx, ty, 0];\n            } else {\n                tx = [tx.theTurtle.getx(), tx.theTurtle.gety(), 0];\n            }\n            return self.theTurtle.distance(tx);\n        });\n\n        //\n        // Setting and Measurement\n        //\n\n        // todo:  degrees and radians...\n\n//\n// Pen Control\n//\n\n        //\n        // Drawing State\n        //\n\n        $loc.up = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"up()");\n            self.theTurtle.pen_up();\n        });\n\n        $loc.penup = $loc.up;\n        $loc.pu = $loc.up;\n\n        $loc.down = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"down()");\n            self.theTurtle.pen_down();\n        });\n\n        $loc.pendown = $loc.down;\n        $loc.pd = $loc.down;\n\n        $loc.width = new Sk.builtin.func(function(self, w) {\n			w = Sk.builtin.asnum$(w);\n            checkArgs(2,arguments.length,"width()");\n            self.theTurtle.set_pen_width(w);\n        });\n\n        $loc.pensize = $loc.width;\n\n        $loc.isdown = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"isdown()");\n            return self.theTurtle.get_pen();\n        });\n\n        // todo:  pen  -- return a dictionary full of pen stuff\n\n        //\n        // Color Control\n        //\n\n        $loc.fillcolor = new Sk.builtin.func(function(self, color, green, blue) {\n            if (color) {\n                if (blue) {\n                    self.theTurtle.set_fill_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_fill_color(color);\n                }\n            } else\n                return self.theTurtle.fillStyle;\n        });\n\n        $loc.pencolor = new Sk.builtin.func(function(self, color, green, blue) {\n            if (color) {\n                if (blue) {\n					color = Sk.builtin.asnum$(color);\n					green = Sk.builtin.asnum$(green);\n					blue = Sk.builtin.asnum$(blue);\n                    self.theTurtle.set_pen_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_pen_color(color);\n                }\n            } else\n                return self.theTurtle.penStyle;\n        });\n\n        $loc.color = new Sk.builtin.func(function(self, color, green, blue) {\n            if(color) {\n                if (blue) {\n                    self.theTurtle.set_pen_color(color, green, blue);\n                    self.theTurtle.set_fill_color(color, green, blue);\n                } else {\n                    color = color.v || self.theTurtle.context.fillStyle;\n                    self.theTurtle.set_pen_color(color);\n                    self.theTurtle.set_fill_color(color);\n                }\n            } else \n                return [self.theTurtle.penStyle, self.theTurtle.fillStyle];            \n        });\n\n        //\n        //  Filling\n        //\n\n        $loc.begin_fill = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"begin_fill()");\n            self.theTurtle.begin_fill();\n        });\n\n        $loc.end_fill = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"end_fill()");\n            self.theTurtle.end_fill();\n        });\n\n        $loc.fill = new Sk.builtin.func(function(self, fillt) {\n			if (fillt === undefined)\n				return self.theTurtle.filling;\n            if (fillt)\n                self.theTurtle.begin_fill();\n            else\n                self.theTurtle.end_fill();\n        });\n\n        //\n        // More drawing control\n        //\n\n        $loc.reset = new Sk.builtin.func(function(self) {\n            self.theTurtle.clean();\n        });\n\n        $loc.showturtle = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"showturtle()");\n            self.theTurtle.showturtle();\n        });\n        $loc.st = $loc.showturtle;\n\n        $loc.hideturtle = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"hideturtle()");\n            self.theTurtle.hideturtle();\n        });\n        $loc.ht = $loc.hideturtle;\n\n        $loc.isvisible = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"isvisible()");\n            self.theTurtle.isvisible()\n        });\n\n        $loc.stamp = new Sk.builtin.func(function(self) {\n            checkArgs(1,arguments.length,"stamp()");\n            self.theTurtle.stamp();\n        });\n\n        $loc.shape = new Sk.builtin.func(function(self, s) {\n            checkArgs(2,arguments.length,"shape()");\n            self.theTurtle.shape(s.v);\n        });\n\n\n        // todo the move, align, and font parameters should be kwargs...\n        $loc.write = new Sk.builtin.func(function(self, mystr, move, align, font) {\n            self.theTurtle.write(mystr.v, move, align, font);\n        });\n\n        // todo clean  -- again multiple turtles\n\n        $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx, lly, urx, ury) {\n			llx = Sk.builtin.asnum$(llx);\n			lly = Sk.builtin.asnum$(lly);\n			urx = Sk.builtin.asnum$(urx);\n			ury = Sk.builtin.asnum$(ury);\n            self.theTurtle.setworldcoordinates(llx, lly, urx, ury);\n        });\n\n		//	Added by RNL\n\n		$loc.clear = new Sk.builtin.func(function(self) {\n			self.theTurtle.clear()\n		});\n\n    }\n\n    mod.Turtle = Sk.misceval.buildClass(mod, turtle, \'Turtle\', []);\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            TurtleGraphics.defaults = {canvasID: Sk.canvas, animate: true, degrees: true};\n            var currentCanvas = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID];\n            if (currentCanvas === undefined) {\n                self.theScreen = new TurtleGraphics.TurtleCanvas(TurtleGraphics.defaults);\n            } else {\n                self.theScreen = currentCanvas;\n            }\n        });\n\n        $loc.bgcolor = new Sk.builtin.func(function(self, c) {\n            self.theScreen.bgcolor(c);\n        });\n\n        $loc.setworldcoordinates = new Sk.builtin.func(function(self, llx,lly,urx,ury) {\n			llx = Sk.builtin.asnum$(llx);\n			lly = Sk.builtin.asnum$(lly);\n			urx = Sk.builtin.asnum$(urx);\n			ury = Sk.builtin.asnum$(ury);\n            self.theScreen.setworldcoordinates(llx,lly,urx,ury);\n        });\n\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            self.theScreen.exitonclick();\n        });\n\n        $loc.title = new Sk.builtin.func(function(self,titlestring) {\n            // no op....\n        });\n\n        $loc.window_width = new Sk.builtin.func(function(self) {\n            return self.theScreen.window_width();\n        });\n\n        $loc.window_height = new Sk.builtin.func(function(self) {\n            return self.theScreen.window_height();\n        });\n\n        $loc.turtles = new Sk.builtin.func(function(self) {\n            return self.theScreen.turtles();\n        });\n\n		$loc.colormode = new Sk.builtin.func(function(self) {\n			//	Empty function to emulate compatibility\n		});\n        \n//        $loc.clear = new Sk.builtin.func(function(self) {\n//        	\n//        });\n\n        var myfunc = function(self, width, height, startx, starty) {\n			width = Sk.builtin.asnum$(width);\n			height = Sk.builtin.asnum$(height);\n            self.theScreen.setup(width,height);\n        }\n        // this should allow for named parameters\n        myfunc.co_varnames = [\'self\',\'width\',\'height\',\'startx\',\'starty\'];\n        myfunc.$defaults = [null,500,500,0,0];\n        $loc.setup = new Sk.builtin.func(myfunc);\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod, screen, \'Screen\', []);\n\n    mod.tracer = new Sk.builtin.func(function(t, d) {\n		t = Sk.builtin.asnum$(t);\n		d = Sk.builtin.asnum$(d);\n		for (var i in Sk.tg.canvasLib)\n			Sk.tg.canvasLib[i].tracer(t, d);\n    });\n\n	mod.update = new Sk.builtin.func(function(self) {\n		//	Dummy function to emulate update... when not animating, we don\'t save the drawing operations, so this is pointless for us\n	});\n\n\n    return mod\n}\n',"src/lib/webgl/math.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // todo; should probably put this in a math package\n    mod.Mat44 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                        self.stack = [];\n                    });\n\n                $loc.push = new Sk.builtin.func(function(self)\n                    {\n                        self.stack.push(self.elements.slice(0));\n                    });\n\n                $loc.pop = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = self.stack.pop();\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0, 0.0,\n                                         0.0, 0.0, 1.0, 0.0,\n                                         0.0, 0.0, 0.0, 1.0];\n                    });\n\n                $loc.transform3 = new Sk.builtin.func(function(self, v)\n                    {\n                        var e = self.elements;\n                        return Sk.misceval.callsim(mod.Vec3,\n                            e[0] * v.x + e[4] * v.y + e[8] * v.z,\n                            e[1] * v.x + e[5] * v.y + e[9] * v.z,\n                            e[2] * v.x + e[6] * v.y + e[10] * v.z);\n                    });\n\n                $loc.scale = new Sk.builtin.func(function(self, sx, sy, sz)\n                        {\n                            self.elements[0*4+0] *= sx;\n                            self.elements[0*4+1] *= sx;\n                            self.elements[0*4+2] *= sx;\n                            self.elements[0*4+3] *= sx;\n\n                            self.elements[1*4+0] *= sy;\n                            self.elements[1*4+1] *= sy;\n                            self.elements[1*4+2] *= sy;\n                            self.elements[1*4+3] *= sy;\n\n                            self.elements[2*4+0] *= sz;\n                            self.elements[2*4+1] *= sz;\n                            self.elements[2*4+2] *= sz;\n                            self.elements[2*4+3] *= sz;\n\n                            return self;\n                        });\n\n                $loc.translate = new Sk.builtin.func(function(self, tx, ty, tz)\n                        {\n                            self.elements[3*4+0] += self.elements[0*4+0] * tx + self.elements[1*4+0] * ty + self.elements[2*4+0] * tz;\n                            self.elements[3*4+1] += self.elements[0*4+1] * tx + self.elements[1*4+1] * ty + self.elements[2*4+1] * tz;\n                            self.elements[3*4+2] += self.elements[0*4+2] * tx + self.elements[1*4+2] * ty + self.elements[2*4+2] * tz;\n                            self.elements[3*4+3] += self.elements[0*4+3] * tx + self.elements[1*4+3] * ty + self.elements[2*4+3] * tz;\n                            return self;\n                        });\n\n                $loc.rotate = new Sk.builtin.func(function(self, angle, x, y, z)\n                        {\n                            var mag = Math.sqrt(x*x + y*y + z*z);\n                            var sinAngle = Math.sin(angle * Math.PI / 180.0);\n                            var cosAngle = Math.cos(angle * Math.PI / 180.0);\n\n                            if (mag > 0)\n                            {\n                                var xx, yy, zz, xy, yz, zx, xs, ys, zs;\n                                var oneMinusCos;\n                                var rotMat;\n\n                                x /= mag;\n                                y /= mag;\n                                z /= mag;\n\n                                xx = x * x;\n                                yy = y * y;\n                                zz = z * z;\n                                xy = x * y;\n                                yz = y * z;\n                                zx = z * x;\n                                xs = x * sinAngle;\n                                ys = y * sinAngle;\n                                zs = z * sinAngle;\n                                oneMinusCos = 1.0 - cosAngle;\n\n                                rotMat = Sk.misceval.callsim(mod.Mat44);\n\n                                rotMat.elements[0*4+0] = (oneMinusCos * xx) + cosAngle;\n                                rotMat.elements[0*4+1] = (oneMinusCos * xy) - zs;\n                                rotMat.elements[0*4+2] = (oneMinusCos * zx) + ys;\n                                rotMat.elements[0*4+3] = 0.0;\n\n                                rotMat.elements[1*4+0] = (oneMinusCos * xy) + zs;\n                                rotMat.elements[1*4+1] = (oneMinusCos * yy) + cosAngle;\n                                rotMat.elements[1*4+2] = (oneMinusCos * yz) - xs;\n                                rotMat.elements[1*4+3] = 0.0;\n\n                                rotMat.elements[2*4+0] = (oneMinusCos * zx) - ys;\n                                rotMat.elements[2*4+1] = (oneMinusCos * yz) + xs;\n                                rotMat.elements[2*4+2] = (oneMinusCos * zz) + cosAngle;\n                                rotMat.elements[2*4+3] = 0.0;\n\n                                rotMat.elements[3*4+0] = 0.0;\n                                rotMat.elements[3*4+1] = 0.0;\n                                rotMat.elements[3*4+2] = 0.0;\n                                rotMat.elements[3*4+3] = 1.0;\n\n                                rotMat = rotMat.multiply(self);\n                                self.elements = rotMat.elements;\n                            }\n                            return self;\n                        });\n\n                $loc.multiply = new Sk.builtin.func(function(self, right)\n                        {\n                            var tmp = Sk.misceval.callsim(mod.Mat44);\n\n                            for (var i = 0; i < 4; i++)\n                            {\n                                tmp.elements[i*4+0] =\n                                (self.elements[i*4+0] * right.elements[0*4+0]) +\n                                (self.elements[i*4+1] * right.elements[1*4+0]) +\n                                (self.elements[i*4+2] * right.elements[2*4+0]) +\n                                (self.elements[i*4+3] * right.elements[3*4+0]) ;\n\n                                tmp.elements[i*4+1] =\n                                (self.elements[i*4+0] * right.elements[0*4+1]) +\n                                (self.elements[i*4+1] * right.elements[1*4+1]) +\n                                (self.elements[i*4+2] * right.elements[2*4+1]) +\n                                (self.elements[i*4+3] * right.elements[3*4+1]) ;\n\n                                tmp.elements[i*4+2] =\n                                (self.elements[i*4+0] * right.elements[0*4+2]) +\n                                (self.elements[i*4+1] * right.elements[1*4+2]) +\n                                (self.elements[i*4+2] * right.elements[2*4+2]) +\n                                (self.elements[i*4+3] * right.elements[3*4+2]) ;\n\n                                tmp.elements[i*4+3] =\n                                (self.elements[i*4+0] * right.elements[0*4+3]) +\n                                (self.elements[i*4+1] * right.elements[1*4+3]) +\n                                (self.elements[i*4+2] * right.elements[2*4+3]) +\n                                (self.elements[i*4+3] * right.elements[3*4+3]) ;\n                            }\n\n                            self.elements = tmp.elements;\n                            return self;\n                        });\n\n                /* Following gluLookAt implementation is adapted from\n                 * the Mesa 3D Graphics library. http://www.mesa3d.org\n                 */\n                // todo; rewrite this with proper vec/mat ops\n                $loc.lookAt = new Sk.builtin.func(function(self, eyeX, eyeY, eyeZ,\n                                                                 centerX, centerY, centerZ,\n                                                                 upX, upY, upZ)\n                        {\n                            /* Z vector */\n                            var z = [\n                                eyeX - centerX,\n                                eyeY - centerY,\n                                eyeZ - centerZ\n                            ];\n                            var mag = Math.sqrt(z[0] * z[0] + z[1] * z[1] + z[2] * z[2]);\n                            if (mag)\n                            {\n                                z[0] /= mag;\n                                z[1] /= mag;\n                                z[2] /= mag;\n                            }\n\n                            /* Y vector */\n                            var y = [ upX, upY, upZ ];\n\n                            /* X vector = Y cross Z */\n                            var x = [];\n                            x[0] = y[1] * z[2] - y[2] * z[1];\n                            x[1] = -y[0] * z[2] + y[2] * z[0];\n                            x[2] = y[0] * z[1] - y[1] * z[0];\n\n                            /* Recompute Y = Z cross X */\n                            y[0] = z[1] * x[2] - z[2] * x[1];\n                            y[1] = -z[0] * x[2] + z[2] * x[0];\n                            y[2] = z[0] * x[1] - z[1] * x[0];\n\n                            /* mpichler, 19950515 */\n                            /* cross product gives area of parallelogram, which is < 1.0 for\n                            * non-perpendicular unit-length vectors; so normalize x, y here\n                            */\n\n                            mag = Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n                            if (mag) {\n                                x[0] /= mag;\n                                x[1] /= mag;\n                                x[2] /= mag;\n                            }\n\n                            mag = Math.sqrt(y[0] * y[0] + y[1] * y[1] + y[2] * y[2]);\n                            if (mag) {\n                                y[0] /= mag;\n                                y[1] /= mag;\n                                y[2] /= mag;\n                            }\n\n                            var lookAt = Sk.misceval.callsim(mod.Mat44);\n                            lookAt.elements[0 * 4 + 0] = x[0];\n                            lookAt.elements[1 * 4 + 0] = x[1];\n                            lookAt.elements[2 * 4 + 0] = x[2];\n                            lookAt.elements[3 * 4 + 0] = 0.;\n                            lookAt.elements[0 * 4 + 1] = y[0];\n                            lookAt.elements[1 * 4 + 1] = y[1];\n                            lookAt.elements[2 * 4 + 1] = y[2];\n                            lookAt.elements[3 * 4 + 1] = 0.;\n                            lookAt.elements[0 * 4 + 2] = z[0];\n                            lookAt.elements[1 * 4 + 2] = z[1];\n                            lookAt.elements[2 * 4 + 2] = z[2];\n                            lookAt.elements[3 * 4 + 2] = 0.;\n                            lookAt.elements[0 * 4 + 3] = 0.;\n                            lookAt.elements[1 * 4 + 3] = 0.;\n                            lookAt.elements[2 * 4 + 3] = 0.;\n                            lookAt.elements[3 * 4 + 3] = 1.;\n\n                            // log(lookAt.elements);\n\n                            lookAt = lookAt.multiply(self);\n                            self.elements = lookAt.elements;\n                            self.translate(-eyeX, -eyeY, -eyeZ);\n\n                            // log(this.elements);\n\n                            return self;\n                        });\n            },\n            'Mat44', []);\n\n    // todo; should probably put this in a math package\n    mod.Mat33 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0,\n                                         0.0, 0.0, 1.0];\n                    });\n            },\n            'Mat33', []);\n\n    mod.Vec3 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, x, y, z)\n                    {\n                        self.x = x;\n                        self.y = y;\n                        self.z = z;\n                    });\n                $loc.__sub__ = new Sk.builtin.func(function(self, other)\n                    {\n                        return Sk.misceval.callsim(mod.Vec3, self.x - other.x, self.y - other.y, self.z - other.z);\n                    });\n            },\n            'Vec3', []);\n    \n    mod.cross = new Sk.builtin.func(function(v1, v2)\n            {\n                goog.asserts.assert(v1 instanceof mod.Vec3 && v2 instanceof mod.Vec3);\n                return Sk.misceval.callsim(mod.Vec3,\n                    v1.y * v2.z - v1.z * v2.y,\n                    v1.z * v2.x - v1.x * v2.z,\n                    v1.x * v2.y - v1.y * v2.x);\n            });\n\n    return mod;\n};\n","src/builtin/unittest.py":'#!/usr/bin/env python\n\'\'\'\nPython unit testing framework, based on Erich Gamma\'s JUnit and Kent Beck\'s\nSmalltalk testing framework.\n\nThis module contains the core framework classes that form the basis of\nspecific test cases and suites (TestCase, TestSuite etc.), and also a\ntext-based utility class for running the tests and reporting the results\n (TextTestRunner).\n\nSimple usage:\n\n    import unittest\n\n    class IntegerArithmenticTestCase(unittest.TestCase):\n        def testAdd(self):  ## test method names begin \'test*\'\n            self.assertEquals((1 + 2), 3)\n            self.assertEquals(0 + 1, 1)\n        def testMultiply(self):\n            self.assertEquals((0 * 10), 0)\n            self.assertEquals((5 * 8), 40)\n\n    if __name__ == \'__main__\':\n        unittest.main()\n\nFurther information is available in the bundled documentation, and from\n\n  http://docs.python.org/lib/module-unittest.html\n\nCopyright (c) 1999-2003 Steve Purcell\nThis module is free software, and you may redistribute it and/or modify\nit under the same terms as Python itself, so long as this copyright message\nand disclaimer are retained in their original form.\n\nIN NO EVENT SHALL THE AUTHOR BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,\nSPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OF\nTHIS CODE, EVEN IF THE AUTHOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH\nDAMAGE.\n\nTHE AUTHOR SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\nPARTICULAR PURPOSE.  THE CODE PROVIDED HEREUNDER IS ON AN "AS IS" BASIS,\nAND THERE IS NO OBLIGATION WHATSOEVER TO PROVIDE MAINTENANCE,\nSUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.\n\'\'\'\n\n__author__ = "Steve Purcell"\n__email__ = "stephen_purcell at yahoo dot com"\n__version__ = "#Revision: 1.63 $"[11:-2]\n\nimport time\nimport sys\nimport traceback\nimport os\nimport types\n\n##############################################################################\n# Exported classes and functions\n##############################################################################\n__all__ = [\'TestResult\', \'TestCase\', \'TestSuite\', \'TextTestRunner\',\n           \'TestLoader\', \'FunctionTestCase\', \'main\', \'defaultTestLoader\']\n\n# Expose obsolete functions for backwards compatibility\n__all__.extend([\'getTestCaseNames\', \'makeSuite\', \'findTestCases\'])\n\n\n##############################################################################\n# Backward compatibility\n##############################################################################\nif sys.version_info[:2] < (2, 2):\n    def isinstance(obj, clsinfo):\n        import __builtin__\n        if type(clsinfo) in (tuple, list):\n            for cls in clsinfo:\n                if cls is type: cls = types.ClassType\n                if __builtin__.isinstance(obj, cls):\n                    return 1\n            return 0\n        else: return __builtin__.isinstance(obj, clsinfo)\n\ndef _CmpToKey(mycmp):\n    \'Convert a cmp= function into a key= function\'\n    class K(object):\n        def __init__(self, obj):\n            self.obj = obj\n        def __lt__(self, other):\n            return mycmp(self.obj, other.obj) == -1\n    return K\n\n##############################################################################\n# Test framework core\n##############################################################################\n\n# All classes defined herein are \'new-style\' classes, allowing use of \'super()\'\n__metaclass__ = type\n\ndef _strclass(cls):\n    return "%s.%s" % (cls.__module__, cls.__name__)\n\n__unittest = 1\n\nclass TestResult:\n    """Holder for test result information.\n\n    Test results are automatically managed by the TestCase and TestSuite\n    classes, and do not need to be explicitly manipulated by writers of tests.\n\n    Each instance holds the total number of tests run, and collections of\n    failures and errors that occurred among those test runs. The collections\n    contain tuples of (testcase, exceptioninfo), where exceptioninfo is the\n    formatted traceback of the error that occurred.\n    """\n    def __init__(self):\n        self.failures = []\n        self.errors = []\n        self.testsRun = 0\n        self.shouldStop = False\n\n    def startTest(self, test):\n        "Called when the given test is about to be run"\n        self.testsRun = self.testsRun + 1\n\n    def stopTest(self, test):\n        "Called when the given test has been run"\n        pass\n\n    def addError(self, test, err):\n        """Called when an error has occurred. \'err\' is a tuple of values as\n        returned by sys.exc_info().\n        """\n        self.errors.append((test, self._exc_info_to_string(err, test)))\n\n    def addFailure(self, test, err):\n        """Called when an error has occurred. \'err\' is a tuple of values as\n        returned by sys.exc_info()."""\n        self.failures.append((test, self._exc_info_to_string(err, test)))\n\n    def addSuccess(self, test):\n        "Called when a test has completed successfully"\n        pass\n\n    def wasSuccessful(self):\n        "Tells whether or not this result was a success"\n        return len(self.failures) == len(self.errors) == 0\n\n    def stop(self):\n        "Indicates that the tests should be aborted"\n        self.shouldStop = True\n\n    def _exc_info_to_string(self, err, test):\n        """Converts a sys.exc_info()-style tuple of values into a string."""\n        exctype, value, tb = err\n        # Skip test runner traceback levels\n        while tb and self._is_relevant_tb_level(tb):\n            tb = tb.tb_next\n        if exctype is test.failureException:\n            # Skip assert*() traceback levels\n            length = self._count_relevant_tb_levels(tb)\n            return \'\'.join(traceback.format_exception(exctype, value, tb, length))\n        return \'\'.join(traceback.format_exception(exctype, value, tb))\n\n    def _is_relevant_tb_level(self, tb):\n        return \'__unittest\' in tb.tb_frame.f_globals\n\n    def _count_relevant_tb_levels(self, tb):\n        length = 0\n        while tb and not self._is_relevant_tb_level(tb):\n            length += 1\n            tb = tb.tb_next\n        return length\n\n    def __repr__(self):\n        return "<%s run=%i errors=%i failures=%i>" % \\\n               (_strclass(self.__class__), self.testsRun, len(self.errors),\n                len(self.failures))\n\nclass TestCase:\n    """A class whose instances are single test cases.\n\n    By default, the test code itself should be placed in a method named\n    \'runTest\'.\n\n    If the fixture may be used for many test cases, create as\n    many test methods as are needed. When instantiating such a TestCase\n    subclass, specify in the constructor arguments the name of the test method\n    that the instance is to execute.\n\n    Test authors should subclass TestCase for their own tests. Construction\n    and deconstruction of the test\'s environment (\'fixture\') can be\n    implemented by overriding the \'setUp\' and \'tearDown\' methods respectively.\n\n    If it is necessary to override the __init__ method, the base class\n    __init__ method must always be called. It is important that subclasses\n    should not change the signature of their __init__ method, since instances\n    of the classes are instantiated automatically by parts of the framework\n    in order to be run.\n    """\n\n    # This attribute determines which exception will be raised when\n    # the instance\'s assertion methods fail; test methods raising this\n    # exception will be deemed to have \'failed\' rather than \'errored\'\n\n    failureException = AssertionError\n\n    def __init__(self, methodName=\'runTest\'):\n        """Create an instance of the class that will use the named test\n           method when executed. Raises a ValueError if the instance does\n           not have a method with the specified name.\n        """\n        try:\n            self._testMethodName = methodName\n            testMethod = getattr(self, methodName)\n            self._testMethodDoc = testMethod.__doc__\n        except AttributeError:\n            raise ValueError, "no such test method in %s: %s" % \\\n                  (self.__class__, methodName)\n\n    def setUp(self):\n        "Hook method for setting up the test fixture before exercising it."\n        pass\n\n    def tearDown(self):\n        "Hook method for deconstructing the test fixture after testing it."\n        pass\n\n    def countTestCases(self):\n        return 1\n\n    def defaultTestResult(self):\n        return TestResult()\n\n    def shortDescription(self):\n        """Returns a one-line description of the test, or None if no\n        description has been provided.\n\n        The default implementation of this method returns the first line of\n        the specified test method\'s docstring.\n        """\n        doc = self._testMethodDoc\n        return doc and doc.split("\\n")[0].strip() or None\n\n    def id(self):\n        return "%s.%s" % (_strclass(self.__class__), self._testMethodName)\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n\n        return self._testMethodName == other._testMethodName\n\n    def __ne__(self, other):\n        return not self == other\n\n    def __hash__(self):\n        return hash((type(self), self._testMethodName))\n\n    def __str__(self):\n        return "%s (%s)" % (self._testMethodName, _strclass(self.__class__))\n\n    def __repr__(self):\n        return "<%s testMethod=%s>" % \\\n               (_strclass(self.__class__), self._testMethodName)\n\n    def run(self, result=None):\n        if result is None: result = self.defaultTestResult()\n        result.startTest(self)\n        testMethod = getattr(self, self._testMethodName)\n        try:\n            try:\n                self.setUp()\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n                return\n\n            ok = False\n            try:\n                testMethod()\n                ok = True\n            except self.failureException:\n                result.addFailure(self, self._exc_info())\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n\n            try:\n                self.tearDown()\n            except KeyboardInterrupt:\n                raise\n            except:\n                result.addError(self, self._exc_info())\n                ok = False\n            if ok: result.addSuccess(self)\n        finally:\n            result.stopTest(self)\n\n    def __call__(self, *args, **kwds):\n        return self.run(*args, **kwds)\n\n    def debug(self):\n        """Run the test without collecting errors in a TestResult"""\n        self.setUp()\n        getattr(self, self._testMethodName)()\n        self.tearDown()\n\n    def _exc_info(self):\n        """Return a version of sys.exc_info() with the traceback frame\n           minimised; usually the top level of the traceback frame is not\n           needed.\n        """\n        return sys.exc_info()\n\n    def fail(self, msg=None):\n        """Fail immediately, with the given message."""\n        raise self.failureException, msg\n\n    def failIf(self, expr, msg=None):\n        "Fail the test if the expression is true."\n        if expr: raise self.failureException, msg\n\n    def failUnless(self, expr, msg=None):\n        """Fail the test unless the expression is true."""\n        if not expr: raise self.failureException, msg\n\n    def failUnlessRaises(self, excClass, callableObj, *args, **kwargs):\n        """Fail unless an exception of class excClass is thrown\n           by callableObj when invoked with arguments args and keyword\n           arguments kwargs. If a different type of exception is\n           thrown, it will not be caught, and the test case will be\n           deemed to have suffered an error, exactly as for an\n           unexpected exception.\n        """\n        try:\n            callableObj(*args, **kwargs)\n        except excClass:\n            return\n        else:\n            if hasattr(excClass,\'__name__\'): excName = excClass.__name__\n            else: excName = str(excClass)\n            raise self.failureException, "%s not raised" % excName\n\n    def failUnlessEqual(self, first, second, msg=None):\n        """Fail if the two objects are unequal as determined by the \'==\'\n           operator.\n        """\n        if not first == second:\n            raise self.failureException, \\\n                  (msg or \'%r != %r\' % (first, second))\n\n    def failIfEqual(self, first, second, msg=None):\n        """Fail if the two objects are equal as determined by the \'==\'\n           operator.\n        """\n        if first == second:\n            raise self.failureException, \\\n                  (msg or \'%r == %r\' % (first, second))\n\n    def failUnlessAlmostEqual(self, first, second, places=7, msg=None):\n        """Fail if the two objects are unequal as determined by their\n           difference rounded to the given number of decimal places\n           (default 7) and comparing to zero.\n\n           Note that decimal places (from zero) are usually not the same\n           as significant digits (measured from the most signficant digit).\n        """\n        if round(abs(second-first), places) != 0:\n            raise self.failureException, \\\n                  (msg or \'%r != %r within %r places\' % (first, second, places))\n\n    def failIfAlmostEqual(self, first, second, places=7, msg=None):\n        """Fail if the two objects are equal as determined by their\n           difference rounded to the given number of decimal places\n           (default 7) and comparing to zero.\n\n           Note that decimal places (from zero) are usually not the same\n           as significant digits (measured from the most signficant digit).\n        """\n        if round(abs(second-first), places) == 0:\n            raise self.failureException, \\\n                  (msg or \'%r == %r within %r places\' % (first, second, places))\n\n    # Synonyms for assertion methods\n\n    assertEqual = assertEquals = failUnlessEqual\n\n    assertNotEqual = assertNotEquals = failIfEqual\n\n    assertAlmostEqual = assertAlmostEquals = failUnlessAlmostEqual\n\n    assertNotAlmostEqual = assertNotAlmostEquals = failIfAlmostEqual\n\n    assertRaises = failUnlessRaises\n\n    assert_ = assertTrue = failUnless\n\n    assertFalse = failIf\n\n\n\nclass TestSuite:\n    """A test suite is a composite test consisting of a number of TestCases.\n\n    For use, create an instance of TestSuite, then add test case instances.\n    When all tests have been added, the suite can be passed to a test\n    runner, such as TextTestRunner. It will run the individual test cases\n    in the order in which they were added, aggregating the results. When\n    subclassing, do not forget to call the base class constructor.\n    """\n    def __init__(self, tests=()):\n        self._tests = []\n        self.addTests(tests)\n\n    def __repr__(self):\n        return "<%s tests=%s>" % (_strclass(self.__class__), self._tests)\n\n    __str__ = __repr__\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n        return self._tests == other._tests\n\n    def __ne__(self, other):\n        return not self == other\n\n    # Can\'t guarantee hash invariant, so flag as unhashable\n    __hash__ = None\n\n    def __iter__(self):\n        return iter(self._tests)\n\n    def countTestCases(self):\n        cases = 0\n        for test in self._tests:\n            cases += test.countTestCases()\n        return cases\n\n    def addTest(self, test):\n        # sanity checks\n        if not hasattr(test, \'__call__\'):\n            raise TypeError("the test to add must be callable")\n        if (isinstance(test, (type, types.ClassType)) and\n            issubclass(test, (TestCase, TestSuite))):\n            raise TypeError("TestCases and TestSuites must be instantiated "\n                            "before passing them to addTest()")\n        self._tests.append(test)\n\n    def addTests(self, tests):\n        if isinstance(tests, basestring):\n            raise TypeError("tests must be an iterable of tests, not a string")\n        for test in tests:\n            self.addTest(test)\n\n    def run(self, result):\n        for test in self._tests:\n            if result.shouldStop:\n                break\n            test(result)\n        return result\n\n    def __call__(self, *args, **kwds):\n        return self.run(*args, **kwds)\n\n    def debug(self):\n        """Run the tests without collecting errors in a TestResult"""\n        for test in self._tests: test.debug()\n\n\nclass FunctionTestCase(TestCase):\n    """A test case that wraps a test function.\n\n    This is useful for slipping pre-existing test functions into the\n    unittest framework. Optionally, set-up and tidy-up functions can be\n    supplied. As with TestCase, the tidy-up (\'tearDown\') function will\n    always be called if the set-up (\'setUp\') function ran successfully.\n    """\n\n    def __init__(self, testFunc, setUp=None, tearDown=None,\n                 description=None):\n        TestCase.__init__(self)\n        self.__setUpFunc = setUp\n        self.__tearDownFunc = tearDown\n        self.__testFunc = testFunc\n        self.__description = description\n\n    def setUp(self):\n        if self.__setUpFunc is not None:\n            self.__setUpFunc()\n\n    def tearDown(self):\n        if self.__tearDownFunc is not None:\n            self.__tearDownFunc()\n\n    def runTest(self):\n        self.__testFunc()\n\n    def id(self):\n        return self.__testFunc.__name__\n\n    def __eq__(self, other):\n        if type(self) is not type(other):\n            return False\n\n        return self.__setUpFunc == other.__setUpFunc and \\\n               self.__tearDownFunc == other.__tearDownFunc and \\\n               self.__testFunc == other.__testFunc and \\\n               self.__description == other.__description\n\n    def __ne__(self, other):\n        return not self == other\n\n    def __hash__(self):\n        return hash((type(self), self.__setUpFunc, self.__tearDownFunc,\n                                           self.__testFunc, self.__description))\n\n    def __str__(self):\n        return "%s (%s)" % (_strclass(self.__class__), self.__testFunc.__name__)\n\n    def __repr__(self):\n        return "<%s testFunc=%s>" % (_strclass(self.__class__), self.__testFunc)\n\n    def shortDescription(self):\n        if self.__description is not None: return self.__description\n        doc = self.__testFunc.__doc__\n        return doc and doc.split("\\n")[0].strip() or None\n\n\n\n##############################################################################\n# Locating and loading tests\n##############################################################################\n\nclass TestLoader:\n    """This class is responsible for loading tests according to various\n    criteria and returning them wrapped in a TestSuite\n    """\n    testMethodPrefix = \'test\'\n    sortTestMethodsUsing = cmp\n    suiteClass = TestSuite\n\n    def loadTestsFromTestCase(self, testCaseClass):\n        """Return a suite of all tests cases contained in testCaseClass"""\n        if issubclass(testCaseClass, TestSuite):\n            raise TypeError("Test cases should not be derived from TestSuite. Maybe you meant to derive from TestCase?")\n        testCaseNames = self.getTestCaseNames(testCaseClass)\n        if not testCaseNames and hasattr(testCaseClass, \'runTest\'):\n            testCaseNames = [\'runTest\']\n        return self.suiteClass(map(testCaseClass, testCaseNames))\n\n    def loadTestsFromModule(self, module):\n        """Return a suite of all tests cases contained in the given module"""\n        tests = []\n        for name in dir(module):\n            obj = getattr(module, name)\n            if (isinstance(obj, (type, types.ClassType)) and\n                issubclass(obj, TestCase)):\n                tests.append(self.loadTestsFromTestCase(obj))\n        return self.suiteClass(tests)\n\n    def loadTestsFromName(self, name, module=None):\n        """Return a suite of all tests cases given a string specifier.\n\n        The name may resolve either to a module, a test case class, a\n        test method within a test case class, or a callable object which\n        returns a TestCase or TestSuite instance.\n\n        The method optionally resolves the names relative to a given module.\n        """\n        parts = name.split(\'.\')\n        if module is None:\n            parts_copy = parts[:]\n            while parts_copy:\n                try:\n                    module = __import__(\'.\'.join(parts_copy))\n                    break\n                except ImportError:\n                    del parts_copy[-1]\n                    if not parts_copy: raise\n            parts = parts[1:]\n        obj = module\n        for part in parts:\n            parent, obj = obj, getattr(obj, part)\n\n        if type(obj) == types.ModuleType:\n            return self.loadTestsFromModule(obj)\n        elif (isinstance(obj, (type, types.ClassType)) and\n              issubclass(obj, TestCase)):\n            return self.loadTestsFromTestCase(obj)\n        elif (type(obj) == types.UnboundMethodType and\n              isinstance(parent, (type, types.ClassType)) and\n              issubclass(parent, TestCase)):\n            return TestSuite([parent(obj.__name__)])\n        elif isinstance(obj, TestSuite):\n            return obj\n        elif hasattr(obj, \'__call__\'):\n            test = obj()\n            if isinstance(test, TestSuite):\n                return test\n            elif isinstance(test, TestCase):\n                return TestSuite([test])\n            else:\n                raise TypeError("calling %s returned %s, not a test" %\n                                (obj, test))\n        else:\n            raise TypeError("don\'t know how to make test from: %s" % obj)\n\n    def loadTestsFromNames(self, names, module=None):\n        """Return a suite of all tests cases found using the given sequence\n        of string specifiers. See \'loadTestsFromName()\'.\n        """\n        suites = [self.loadTestsFromName(name, module) for name in names]\n        return self.suiteClass(suites)\n\n    def getTestCaseNames(self, testCaseClass):\n        """Return a sorted sequence of method names found within testCaseClass\n        """\n        def isTestMethod(attrname, testCaseClass=testCaseClass, prefix=self.testMethodPrefix):\n            return attrname.startswith(prefix) and hasattr(getattr(testCaseClass, attrname), \'__call__\')\n        testFnNames = filter(isTestMethod, dir(testCaseClass))\n        if self.sortTestMethodsUsing:\n            testFnNames.sort(key=_CmpToKey(self.sortTestMethodsUsing))\n        return testFnNames\n\n\n\ndefaultTestLoader = TestLoader()\n\n\n##############################################################################\n# Patches for old functions: these functions should be considered obsolete\n##############################################################################\n\ndef _makeLoader(prefix, sortUsing, suiteClass=None):\n    loader = TestLoader()\n    loader.sortTestMethodsUsing = sortUsing\n    loader.testMethodPrefix = prefix\n    if suiteClass: loader.suiteClass = suiteClass\n    return loader\n\ndef getTestCaseNames(testCaseClass, prefix, sortUsing=cmp):\n    return _makeLoader(prefix, sortUsing).getTestCaseNames(testCaseClass)\n\ndef makeSuite(testCaseClass, prefix=\'test\', sortUsing=cmp, suiteClass=TestSuite):\n    return _makeLoader(prefix, sortUsing, suiteClass).loadTestsFromTestCase(testCaseClass)\n\ndef findTestCases(module, prefix=\'test\', sortUsing=cmp, suiteClass=TestSuite):\n    return _makeLoader(prefix, sortUsing, suiteClass).loadTestsFromModule(module)\n\n\n##############################################################################\n# Text UI\n##############################################################################\n\nclass _WritelnDecorator:\n    """Used to decorate file-like objects with a handy \'writeln\' method"""\n    def __init__(self,stream):\n        self.stream = stream\n\n    def __getattr__(self, attr):\n        return getattr(self.stream,attr)\n\n    def writeln(self, arg=None):\n        if arg: self.write(arg)\n        self.write(\'\\n\') # text-mode streams translate to \\r\\n if needed\n\n\nclass _TextTestResult(TestResult):\n    """A test result class that can print formatted text results to a stream.\n\n    Used by TextTestRunner.\n    """\n    separator1 = \'=\' * 70\n    separator2 = \'-\' * 70\n\n    def __init__(self, stream, descriptions, verbosity):\n        TestResult.__init__(self)\n        self.stream = stream\n        self.showAll = verbosity > 1\n        self.dots = verbosity == 1\n        self.descriptions = descriptions\n\n    def getDescription(self, test):\n        if self.descriptions:\n            return test.shortDescription() or str(test)\n        else:\n            return str(test)\n\n    def startTest(self, test):\n        TestResult.startTest(self, test)\n        if self.showAll:\n            self.stream.write(self.getDescription(test))\n            self.stream.write(" ... ")\n            self.stream.flush()\n\n    def addSuccess(self, test):\n        TestResult.addSuccess(self, test)\n        if self.showAll:\n            self.stream.writeln("ok")\n        elif self.dots:\n            self.stream.write(\'.\')\n            self.stream.flush()\n\n    def addError(self, test, err):\n        TestResult.addError(self, test, err)\n        if self.showAll:\n            self.stream.writeln("ERROR")\n        elif self.dots:\n            self.stream.write(\'E\')\n            self.stream.flush()\n\n    def addFailure(self, test, err):\n        TestResult.addFailure(self, test, err)\n        if self.showAll:\n            self.stream.writeln("FAIL")\n        elif self.dots:\n            self.stream.write(\'F\')\n            self.stream.flush()\n\n    def printErrors(self):\n        if self.dots or self.showAll:\n            self.stream.writeln()\n        self.printErrorList(\'ERROR\', self.errors)\n        self.printErrorList(\'FAIL\', self.failures)\n\n    def printErrorList(self, flavour, errors):\n        for test, err in errors:\n            self.stream.writeln(self.separator1)\n            self.stream.writeln("%s: %s" % (flavour,self.getDescription(test)))\n            self.stream.writeln(self.separator2)\n            self.stream.writeln("%s" % err)\n\n\nclass TextTestRunner:\n    """A test runner class that displays results in textual form.\n\n    It prints out the names of tests as they are run, errors as they\n    occur, and a summary of the results at the end of the test run.\n    """\n    def __init__(self, stream=sys.stderr, descriptions=1, verbosity=1):\n        self.stream = _WritelnDecorator(stream)\n        self.descriptions = descriptions\n        self.verbosity = verbosity\n\n    def _makeResult(self):\n        return _TextTestResult(self.stream, self.descriptions, self.verbosity)\n\n    def run(self, test):\n        "Run the given test case or test suite."\n        result = self._makeResult()\n        startTime = time.time()\n        test(result)\n        stopTime = time.time()\n        timeTaken = stopTime - startTime\n        result.printErrors()\n        self.stream.writeln(result.separator2)\n        run = result.testsRun\n        self.stream.writeln("Ran %d test%s in %.3fs" %\n                            (run, run != 1 and "s" or "", timeTaken))\n        self.stream.writeln()\n        if not result.wasSuccessful():\n            self.stream.write("FAILED (")\n            failed, errored = map(len, (result.failures, result.errors))\n            if failed:\n                self.stream.write("failures=%d" % failed)\n            if errored:\n                if failed: self.stream.write(", ")\n                self.stream.write("errors=%d" % errored)\n            self.stream.writeln(")")\n        else:\n            self.stream.writeln("OK")\n        return result\n\n\n\n##############################################################################\n# Facilities for running tests from the command line\n##############################################################################\n\nclass TestProgram:\n    """A command-line program that runs a set of tests; this is primarily\n       for making test modules conveniently executable.\n    """\n    USAGE = """\\\nUsage: %(progName)s [options] [test] [...]\n\nOptions:\n  -h, --help       Show this message\n  -v, --verbose    Verbose output\n  -q, --quiet      Minimal output\n\nExamples:\n  %(progName)s                               - run default set of tests\n  %(progName)s MyTestSuite                   - run suite \'MyTestSuite\'\n  %(progName)s MyTestCase.testSomething      - run MyTestCase.testSomething\n  %(progName)s MyTestCase                    - run all \'test*\' test methods\n                                               in MyTestCase\n"""\n    def __init__(self, module=\'__main__\', defaultTest=None,\n                 argv=None, testRunner=None,\n                 testLoader=defaultTestLoader):\n        if type(module) == type(\'\'):\n            self.module = __import__(module)\n            for part in module.split(\'.\')[1:]:\n                self.module = getattr(self.module, part)\n        else:\n            self.module = module\n        if argv is None:\n            argv = sys.argv\n        self.verbosity = 1\n        self.defaultTest = defaultTest\n        self.testRunner = testRunner\n        self.testLoader = testLoader\n        self.progName = os.path.basename(argv[0])\n        self.parseArgs(argv)\n        self.runTests()\n\n    def usageExit(self, msg=None):\n        if msg: print msg\n        print self.USAGE % self.__dict__\n        sys.exit(2)\n\n    def parseArgs(self, argv):\n        import getopt\n        try:\n            options, args = getopt.getopt(argv[1:], \'hHvq\',\n                                          [\'help\',\'verbose\',\'quiet\'])\n            for opt, value in options:\n                if opt in (\'-h\',\'-H\',\'--help\'):\n                    self.usageExit()\n                if opt in (\'-q\',\'--quiet\'):\n                    self.verbosity = 0\n                if opt in (\'-v\',\'--verbose\'):\n                    self.verbosity = 2\n            if len(args) == 0 and self.defaultTest is None:\n                self.test = self.testLoader.loadTestsFromModule(self.module)\n                return\n            if len(args) > 0:\n                self.testNames = args\n            else:\n                self.testNames = (self.defaultTest,)\n            self.createTests()\n        except getopt.error, msg:\n            self.usageExit(msg)\n\n    def createTests(self):\n        self.test = self.testLoader.loadTestsFromNames(self.testNames,\n                                                       self.module)\n\n    def runTests(self):\n        if self.testRunner is None:\n            self.testRunner = TextTestRunner\n\n        if isinstance(self.testRunner, (type, types.ClassType)):\n            try:\n                testRunner = self.testRunner(verbosity=self.verbosity)\n            except TypeError:\n                # didn\'t accept the verbosity argument\n                testRunner = self.testRunner()\n        else:\n            # it is assumed to be a TestRunner instance\n            testRunner = self.testRunner\n        result = testRunner.run(self.test)\n        sys.exit(not result.wasSuccessful())\n\nmain = TestProgram\n\n\n##############################################################################\n# Executing this module from the command line\n##############################################################################\n\nif __name__ == "__main__":\n    main(module=None)\n',"src/lib/pythonds/graphs/__init__.py":"\n\nfrom .adjGraph import Graph\nfrom .adjGraph import Vertex\nfrom .priorityQueue import PriorityQueue\n","src/lib/pythonds/graphs/priorityQueue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \nimport unittest\n\n# this implementation of binary heap takes key value pairs,\n# we will assume that the keys are all comparable\n\nclass PriorityQueue:\n    def __init__(self):\n        self.heapArray = [(0,0)]\n        self.currentSize = 0\n\n    def buildHeap(self,alist):\n        self.currentSize = len(alist)\n        self.heapArray = [(0,0)]\n        for i in alist:\n            self.heapArray.append(i)\n        i = len(alist) // 2            \n        while (i > 0):\n            self.percDown(i)\n            i = i - 1\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapArray[i][0] > self.heapArray[mc][0]:\n                tmp = self.heapArray[i]\n                self.heapArray[i] = self.heapArray[mc]\n                self.heapArray[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i*2 > self.currentSize:\n            return -1\n        else:\n            if i*2 + 1 > self.currentSize:\n                return i*2\n            else:\n                if self.heapArray[i*2][0] < self.heapArray[i*2+1][0]:\n                    return i*2\n                else:\n                    return i*2+1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapArray[i][0] < self.heapArray[i//2][0]:\n               tmp = self.heapArray[i//2]\n               self.heapArray[i//2] = self.heapArray[i]\n               self.heapArray[i] = tmp\n            i = i//2\n \n    def add(self,k):\n        self.heapArray.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapArray[1][1]\n        self.heapArray[1] = self.heapArray[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapArray.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if self.currentSize == 0:\n            return True\n        else:\n            return False\n\n    def decreaseKey(self,val,amt):\n        # this is a little wierd, but we need to find the heap thing to decrease by\n        # looking at its value\n        done = False\n        i = 1\n        myKey = 0\n        while not done and i <= self.currentSize:\n            if self.heapArray[i][1] == val:\n                done = True\n                myKey = i\n            else:\n                i = i + 1\n        if myKey > 0:\n            self.heapArray[myKey] = (amt,self.heapArray[myKey][1])\n            self.percUp(myKey)\n            \n    def __contains__(self,vtx):\n        for pair in self.heapArray:\n            if pair[1] == vtx:\n                return True\n        return False\n        \nclass TestBinHeap(unittest.TestCase):\n    def setUp(self):\n        self.theHeap = PriorityQueue()\n        self.theHeap.add((2,'x'))\n        self.theHeap.add((3,'y'))\n        self.theHeap.add((5,'z'))\n        self.theHeap.add((6,'a'))\n        self.theHeap.add((4,'d'))\n\n\n    def testInsert(self):\n        assert self.theHeap.currentSize == 5\n\n    def testDelmin(self):\n        assert self.theHeap.delMin() == 'x'\n        assert self.theHeap.delMin() == 'y'\n    \n    def testDecKey(self):\n        self.theHeap.decreaseKey('d',1)\n        assert self.theHeap.delMin() == 'd'\n        \nif __name__ == '__main__':\n    unittest.main()\n","src/lib/pythonds/__init__.py":"","src/lib/cmath/__init__.js":'var $builtinmodule = function(name) {\n\n  function isNumber(x) {return typeof x === \'number\';}\n  function isUndefined(x) {return typeof x === \'undefined\';}\n\n  function phase(x, y) {\n    return Math.atan2(y, x);\n  }\n\n  function norm(x, y) {\n    return Math.sqrt(x * x + y * y);\n  }\n\n  function stringFromCoordinates(coordinates, labels, multiplier) {\n    var append, i, sb, str, _i, _ref;\n    sb = [];\n    append = function(number, label) {\n      var n;\n      if (number !== 0) {\n        if (number >= 0) {\n          if (sb.length > 0) {\n            sb.push("+");\n          }\n        } else {\n          sb.push("-");\n        }\n        n = Math.abs(number);\n        if (n === 1) {\n          return sb.push(label);\n        } else {\n          sb.push(n.toString());\n          if (label !== "1") {\n            sb.push(multiplier);\n            return sb.push(label);\n          }\n        }\n      }\n    };\n    for (i = _i = 0, _ref = coordinates.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n      append(coordinates[i], labels[i]);\n    }\n    if (sb.length > 0) {\n      str = sb.join("");\n    } else {\n      str = "0";\n    }\n    return str;\n  }\n\n  // This is what you would use in code. e.g. i = complex(0.0, 1.0)\n  var COMPLEX_CONSTRUCTOR_NAME = "complex";\n  var PROP_REAL = "real";\n  var PROP_IMAG = "imag";\n\n  var mod = {};\n\n  mod[COMPLEX_CONSTRUCTOR_NAME] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, re, im) {\n      self.tp$name = COMPLEX_CONSTRUCTOR_NAME;\n      self.v = {"x": Sk.ffi.remapToJs(re), "y": Sk.ffi.remapToJs(im)};\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(z, name) {\n      z = Sk.ffi.remapToJs(z);\n      switch(name) {\n        case PROP_REAL: {\n          return Sk.builtin.assk$(z.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_IMAG: {\n          return Sk.builtin.assk$(z.y, Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        x = a.x + b;\n        y = a.y;\n      }\n      else {\n        x = a.x + b.x;\n        y = a.y + b.y;\n      }\n      return Sk.misceval.callsim(\n        mod[COMPLEX_CONSTRUCTOR_NAME],\n        Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n        Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(b, a) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        x = a + b.x;\n        y = b.y;\n        return Sk.misceval.callsim(\n          mod[COMPLEX_CONSTRUCTOR_NAME],\n          Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n          Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(aPy, b) {\n      var a = Sk.ffi.remapToJs(aPy);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        a.x += b;\n      }\n      else {\n        a.x += b.x;\n        a.y += b.y;\n      }\n      return aPy;\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        x = a.x - b;\n        y = a.y;\n      }\n      else {\n        x = a.x - b.x;\n        y = a.y - b.y;\n      }\n      return Sk.misceval.callsim(\n        mod[COMPLEX_CONSTRUCTOR_NAME],\n        Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n        Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(b, a) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        x = a - b.x;\n        y = -b.y;\n        return Sk.misceval.callsim(\n          mod[COMPLEX_CONSTRUCTOR_NAME],\n          Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n          Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(aPy, b) {\n      var a = Sk.ffi.remapToJs(aPy);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        a.x -= b;\n      }\n      else {\n        a.x -= b.x;\n        a.y -= b.y;\n      }\n      return aPy;\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        x = a.x * b;\n        y = a.y * b;\n      }\n      else {\n        x = a.x * b.x - a.y * b.y;\n        y = a.y * b.x + a.x * b.y;\n      }\n      return Sk.misceval.callsim(\n        mod[COMPLEX_CONSTRUCTOR_NAME],\n        Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n        Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(b, a) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        x = a * b.x;\n        y = a * b.y;\n        return Sk.misceval.callsim(\n          mod[COMPLEX_CONSTRUCTOR_NAME],\n          Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n          Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(aPy, b) {\n      var a = Sk.ffi.remapToJs(aPy);\n      var aX = a.x;\n      var aY = a.y;\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        a.x *= b;\n        a.y *= b;\n      }\n      else {\n        a.x = aX * b.x - aY * b.y;\n        a.y = aY * b.x + aX * b.y;\n      }\n      return aPy;\n    });\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        x = a.x / b;\n        y = a.y / b;\n      }\n      else {\n        var factor = b.x * b.x + b.y * b.y;\n        x = (a.x * b.x + a.y * b.y) / factor;\n        y = (a.y * b.x - a.x * b.y) / factor;\n      }\n      return Sk.misceval.callsim(\n        mod[COMPLEX_CONSTRUCTOR_NAME],\n        Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n        Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n    });\n    $loc.__rdiv__ = new Sk.builtin.func(function(b, a) {\n      var x, y;\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        var factor = b.x * b.x + b.y * b.y;\n        x = (a * b.x) / factor;\n        y = (-a * b.y) / factor;\n        return Sk.misceval.callsim(\n          mod[COMPLEX_CONSTRUCTOR_NAME],\n          Sk.builtin.assk$(x, Sk.builtin.nmber.float$),\n          Sk.builtin.assk$(y, Sk.builtin.nmber.float$));\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__idiv__ = new Sk.builtin.func(function(aPy, b) {\n      var a = Sk.ffi.remapToJs(aPy);\n      var aX = a.x;\n      var aY = a.y;\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        a.x /= b;\n        a.y /= b;\n      }\n      else {\n        var factor = b.x * b.x + b.y * b.y;\n        a.x = (aX * b.x + aY * b.y) / factor;\n        a.y = (aY * b.x - aX * b.y) / factor;\n      }\n      return aPy;\n    });\n    $loc.__str__ = new Sk.builtin.func(function(z) {\n      z = Sk.ffi.remapToJs(z);\n      if (!isUndefined(z)) {\n        return new Sk.builtin.str("(" + stringFromCoordinates([z.x, z.y], ["1", "j"], "") + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + COMPLEX_CONSTRUCTOR_NAME + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(z) {\n      z = Sk.ffi.remapToJs(z);\n      if (!isUndefined(z)) {\n        return new Sk.builtin.str(COMPLEX_CONSTRUCTOR_NAME + \'(\' + z.x + \', \' + z.y + \')\');\n      }\n      else {\n        return new Sk.builtin.str("__repr__(z)");\n      }\n    });\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a.x === b.x) && (a.y === b.y);\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a.x !== b.x) || (a.y !== b.y);\n    });\n  }, COMPLEX_CONSTRUCTOR_NAME, []);\n\n  // Conversions to and from polar coordinates\n  mod.phase = new Sk.builtin.func(function(z) {\n    z = Sk.ffi.remapToJs(z);\n    if (isNumber(z.x) && isNumber(z.y)) {\n      // The argument is a complex number.\n      return Sk.builtin.assk$(phase(z.x, z.y), Sk.builtin.nmber.float$)\n    }\n    else if (isNumber(z)) {\n      // The argument should be considered as a real number with no imaginary part.\n      return Math.atan2(0, z);\n    }\n    else {\n      return z;\n    }\n  });\n\n  mod.polar = new Sk.builtin.func(function(z) {\n    z = Sk.ffi.remapToJs(z);\n    if (isNumber(z.x) && isNumber(z.y)) {\n      return new Sk.builtin.tuple([norm(z.x, z.y), phase(z.x, z.y)]);\n    }\n    else if (isNumber(z)) {\n      // The argument should be considered as a real number with no imaginary part.\n      return Math.atan2(0, z);\n    }\n    else {\n      // What do we do with illegal arguments?\n    }\n  });\n\n  // Constants\n  mod.pi = Sk.builtin.assk$(Math.PI, Sk.builtin.nmber.float$);\n  mod.e =  Sk.builtin.assk$(Math.E, Sk.builtin.nmber.float$);\n\n  return mod;\n};\n',"src/lib/pythonds/basic/deque.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#deque.py\r\n\r\n\r\nclass Deque:\r\n    def __init__(self):\r\n        self.items = []\r\n\r\n    def isEmpty(self):\r\n        return self.items == []\r\n\r\n    def addFront(self, item):\r\n        self.items.append(item)\r\n\r\n    def addRear(self, item):\r\n        self.items.insert(0,item)\r\n\r\n    def removeFront(self):\r\n        return self.items.pop()\r\n\r\n    def removeRear(self):\r\n        return self.items.pop(0)\r\n\r\n    def size(self):\r\n        return len(self.items)\r\n","src/lib/processing/__init__.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n    var imList = [];\n    var looping = true;\n\n    // We need this to store a reference to the actual processing object which is not created\n    // until the run function is called.  Even then the processing object is passed by the\n    // processing-js sytem as a parameter to the sketchProc function.  Why not set it to None here\n    //\n\n    // See:  http://processingjs.org/reference/\n\n    mod.processing = null\n    mod.p = null\n\n    mod.CENTER = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.RADIUS = Sk.builtin.assk$(2, Sk.builtin.nmber.int$);\n    mod.CORNERS = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.CORNER = Sk.builtin.assk$(0, Sk.builtin.nmber.int$);\n    mod.RGB = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.HSB = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.CMYK = Sk.builtin.assk$(5, Sk.builtin.nmber.int$);\n    mod.MITER = new Sk.builtin.str('miter');\n    mod.BEVEL = new Sk.builtin.str('bevel');\n    mod.ROUND = new Sk.builtin.str('round');\n    mod.SQUARE = new Sk.builtin.str('butt');\n    mod.PROJECT = new Sk.builtin.str('square');\n\n// 2D - Primitives\n    mod.line = new Sk.builtin.func(function(x1, y1, x2, y2) {\n        mod.processing.line(x1.v, y1.v, x2.v, y2.v);\n    });\n    \n    mod.ellipse = new Sk.builtin.func(function(x,y,r1,r2) {\n        mod.processing.ellipse(x.v,y.v,r1.v,r2.v)\n        \n    });\n\n    mod.point = new Sk.builtin.func(function(x1,y1) {\n        mod.processing.point(x1.v,y1.v)\n    });\n        \n    mod.arc = new Sk.builtin.func(function(x, y, width, height, start, stop) {\n        mod.processing.arc(x.v, y.v, width.v, height.v, start.v, stop.v)\n    });\n\n    mod.quad = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3, x4, y4) {\n        mod.processing.quad(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v, x4.v, y4.v)\n    });\n            \n    mod.rect = new Sk.builtin.func(function(x, y, width, height, radius) {\n        if (typeof(radius) == 'undefined') {\n            var rad = 0\n        } else {\n            var rad = radius.v\n        }\n        mod.processing.rect(x.v, y.v, width.v, height.v, rad)\n    });\n    \n    mod.triangle = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3) {\n            mod.processing.triangle(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v)\n        });\n            \n\n    // 3D Primitives\n\n    // todo:  box, sphere, sphereDetail\n\n    // Color\n    mod.background = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.background(r.v,g,b)\n        \n    });\n\n    mod.fill = new Sk.builtin.func(function(r,g,b) {\n        // r will be either:\n        //      a number in which case the fill will be grayscale\n        //      a color object\n        // g, and b may be undefined.  If they hold values it will\n        // be assumed that we have an r,g,b color tuple\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n    \n        mod.processing.fill(r.v,g,b)\n        \n    });\n\n\n    mod.stroke = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.stroke(r.v,g,b)\n        \n    });\n\n    mod.noStroke = new Sk.builtin.func(function() {\n        mod.processing.noStroke()\n    });\n    \n\n    mod.colorMode = new Sk.builtin.func(function(model, maxV) {\n        if (typeof(maxV) === 'undefined')\n            maxV = 255\n        else\n            maxV = maxV.v\n        mod.processing.colorMode(model.v, maxV)\n    });\n\n    mod.noFill = new Sk.builtin.func(function() {\n            mod.processing.noFill()\n        });\n            \n\n    // Environment\n\n    mod.loop = new Sk.builtin.func(function() {\n            if (mod.processing === null) {\n                throw new Sk.builtin.Exception(\"Loop should be called in setup\")\n            }\n            looping = true;\n            mod.processing.loop()\n        });\n            \n    mod.noLoop = new Sk.builtin.func(function() {\n        if (mod.processing === null) {\n            throw new Sk.builtin.Exception(\"noLoop should be called in setup\")\n        }\n        looping = false;\n        mod.processing.noLoop()\n    });\n    \n    mod.frameRate = new Sk.builtin.func(function(fr) {\n        mod.processing.frameRate(fr.v)\n        \n    });\n\n    mod.size = new Sk.builtin.func(function(h,w) {\n        mod.processing.size(h.v,w.v)\n        \n    });\n\n    mod.exitp = new Sk.builtin.func(function(h,w) {\n        mod.processing.exit()\n    });\n\n\n    mod.mouseX = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseX, Sk.builtin.nmber.int$);\n        \n    });\n\n    mod.mouseY = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseY, Sk.builtin.nmber.int$);\n        \n    });\n\n    // Attributes\n    mod.rectMode = new Sk.builtin.func(function(mode) {\n        mod.processing.rectMode(mode.v)\n    });\n\n    mod.strokeWeight = new Sk.builtin.func(function(wt) {\n        mod.processing.strokeWeight(wt.v)\n        \n    });\n\n    mod.smooth = new Sk.builtin.func(function() {\n        mod.processing.smooth()\n    });\n\n    mod.noSmooth = new Sk.builtin.func(function() {\n        mod.processing.noSmooth()\n        });\n            \n    mod.ellipseMode = new Sk.builtin.func(function(mode) {\n        mod.processing.ellipseMode(mode.v)\n        });\n\n    mod.strokeCap = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeCap(mode.v)\n        });\n\n    mod.strokeJoin = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeJoin(mode.v)\n    });\n    \n\n\n    // Transforms\n\n    mod.rotate = new Sk.builtin.func(function(rads) {\n        // rotation in radians\n        mod.processing.rotate(rads.v)\n        \n    });\n\n    mod.scale = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.scale(sx.v, sy, sz)\n    });\n\n    mod.translate = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.translate(sx.v, sy, sz)\n    });\n\n    // todo:  applyMatrix, popMatrix, printMatrix??, pushMatrix, resetMatrix, rotate{X,Y,Z}\n    \n\n    //  //////////////////////////////////////////////////////////////////////\n    //  Run\n    // \n    //  Create the processing context and setup of calls to setup, draw etc.\n    //\n    //\n    //  //////////////////////////////////////////////////////////////////////    \n    mod.run = new Sk.builtin.func(function() {\n        function sketchProc(processing) {\n            mod.processing = processing\n\n            // processing.setup = function() {\n            //     if Sk.globals['setup']\n            //         Sk.misceval.callsim(Sk.globals['setup'])\n            // }\n\n            \n            processing.draw = function() {\n                // if there are pending image loads then just use the natural looping calls to \n                // retry until all the images are loaded.  If noLoop was called in setup then make\n                // sure to revert to that after all the images in hand.\n                var wait = false\n                for (var i in imList) {\n                    if (imList[i].width == 0) {\n                        wait = true\n                    }\n                }\n                if (wait == true) {\n                    if (looping == true) \n                        return\n                    else {\n                        processing.loop()\n                        return\n                    }\n\n                } else {\n                    if (looping == false)\n                        processing.noLoop()\n                }\n\n                mod.frameCount = processing.frameCount  \n                if (Sk.globals['draw'])\n                    Sk.misceval.callsim(Sk.globals['draw'])\n            }\n            \n            var callBacks = ['setup', 'mouseMoved','mouseClicked', 'mouseDragged', 'mouseMoved', 'mouseOut',\n             'mouseOver', 'mousePressed', 'mouseReleased', 'keyPressed', 'keyReleased', 'keyTyped'\n             ];\n\n             for(var cb in callBacks) {\n                if (Sk.globals[callBacks[cb]]) {\n                    console.log('defining ' + callBacks[cb])                    \n                    processing[callBacks[cb]] = new Function(\"Sk.misceval.callsim(Sk.globals['\"+callBacks[cb]+\"']);\")\n                }\n            }\n        }\n        \n        var canvas = document.getElementById(Sk.canvas)\n        $(canvas).show()\n        mod.p = new Processing(canvas, sketchProc)\n\n        \n    });\n\n    var mouseClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'x') \n                return mod.processing.mouseX;\n            else if (key == 'y') \n                return mod.processing.mouseY;\n            else if (key == 'px')\n                return mod.processing.pmouseX;\n            else if (key == 'py')\n                return mod.processing.pmouseY;\n            else if (key == 'pressed')\n                return mod.processing.mousePressed;\n            else if (key == 'button')\n                return mod.processing.mouseButton\n        });\n\n\n    }\n\n\n    mod.Mouse = Sk.misceval.buildClass(mod, mouseClass, 'Mouse', []);\n\n    mod.mouse = Sk.misceval.callsim(mod.Mouse)\n\n    var keyboardClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'key') {\n                console.log(mod.processing.key)\n                return new Sk.builtin.str(mod.processing.key.toString())\n            }\n            else if (key == 'keyCode') \n                return mod.processing.keyCode\n            else if (key == 'keyPressed')\n                return new Sk.builtin.str(mod.processing.keyPressed) // todo bool\n        });\n\n\n    }\n\n    mod.Keyboard = Sk.misceval.buildClass(mod,keyboardClass,'Keyboard', [])\n\n    mod.keyboard = Sk.misceval.callsim(mod.Keyboard)\n\n\n\n    var environmentClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'frameCount') \n                return mod.processing.frameCount\n            else if (key == 'frameRate') \n                return mod.processing.frameRate\n            else if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'online')\n                return mod.processing.online\n            else if (key == 'focused')\n                return mod.processing.focused\n        });\n\n\n    }\n\n    mod.Environment = Sk.misceval.buildClass(mod,environmentClass,'Environment', [])\n\n    mod.environment = Sk.misceval.callsim(mod.Environment)\n\n    var screenClass = function($gbl, $loc) {\n\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            self.pixels = null;\n        });\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'pixels')\n                if (self.pixels == null) {\n                    self.pixels = new Sk.builtin.list(mod.processing.pixels.toArray())\n                }\n                return self.pixels\n        });\n\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod,screenClass,'Screen', [])\n\n    mod.screen = Sk.misceval.callsim(mod.Screen)\n\n    mod.loadPixels = new Sk.builtin.func(function() {\n        mod.processing.loadPixels()\n        console.log(mod.processing.pixels)\n    });\n    \n\n    var colorClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self, val1, val2, val3, alpha) {\n            if (typeof(val2) !== 'undefined')\n                val2 = val2.v\n            if (typeof(val3) !== 'undefined')\n                val3 = val3.v\n            if (typeof(alpha) !== 'undefined')\n                alpha = alpha.v\n            self.v = mod.processing.color(val1.v, val2, val3, alpha)\n        })\n    \n    }\n\n    mod.color = Sk.misceval.buildClass(mod,colorClass,'color', [])\n\n    mod.red = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.red(clr.v), Sk.builtin.nmber.int$);\n    });\n    \n    mod.green = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.green(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    mod.blue = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.blue(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    // Image class and functions\n    //\n    var imageClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self,im) {\n            self.v = im\n            self.width = Sk.builtin.assk$(im.width, Sk.builtin.nmber.int$);\n            self.height = Sk.builtin.assk$(im.height, Sk.builtin.nmber.int$);\n        })\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'width') return self.v.width;\n            if (key == 'height') return self.v.height;\n        });\n    \n    }\n\n    mod.PImage = Sk.misceval.buildClass(mod,imageClass,'PImage', [])\n\n    mod.loadImage = new Sk.builtin.func(function(imfile) {\n        var i = mod.processing.loadImage(imfile.v);\n        imList.push(i);\n        return Sk.misceval.callsim(mod.PImage,i);\n    });\n    \n\n    mod.image = new Sk.builtin.func(function(im,x,y) {\n        if (im.v.width > 0)\n            mod.processing.image(im.v,x.v,y.v,im.v.width,im.v.height)\n    });\n\n    mod.get = new Sk.builtin.func(function(x,y) {\n        var clr = mod.processing.get(x.v,y.v)\n        return Sk.misceval.callsim(mod.color,\n            Sk.builtin.assk$(mod.processing.red(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.green(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.blue(clr), Sk.builtin.nmber.int$));\n    });\n\n    mod.set = new Sk.builtin.func(function(x, y, color) {\n        mod.processing.set(x.v, y.v, color.v)\n    });\n    \n// todo  -- add a color class for creating color objects.\n\n\n    return mod;\n}\n","src/lib/webgl/models.js":"// most of this file is from/based on 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var Buffer = function(array, opt_target) {\n        var target = opt_target || gl.ARRAY_BUFFER;\n        var buf = gl.createBuffer();\n        this.target = target;\n        this.buf = buf;\n        this.set(array);\n        this.numComponents_ = array.numComponents;\n        this.numElements_ = array.numElements;\n        this.totalComponents_ = this.numComponents_ * this.numElements_;\n        if (array.buffer instanceof Float32Array) {\n            this.type_ = gl.FLOAT;\n        } else if (array.buffer instanceof Uint8Array) {\n            this.type_ = gl.UNSIGNED_BYTE;\n        } else if (array.buffer instanceof Int8Array) {\n            this.type_ = gl._BYTE;\n        } else if (array.buffer instanceof Uint16Array) {\n            this.type_ = gl.UNSIGNED_SHORT;\n        } else if (array.buffer instanceof Int16Array) {\n            this.type_ = gl.SHORT;\n        } else {\n            throw(\"unhandled type:\" + (typeof array.buffer));\n        }\n    };\n\n    Buffer.prototype.set = function(array) {\n        gl.bindBuffer(this.target, this.buf);\n        gl.bufferData(this.target, array.buffer, gl.STATIC_DRAW);\n    }\n\n    Buffer.prototype.type = function() {\n        return this.type_;\n    };\n\n    Buffer.prototype.numComponents = function() {\n        return this.numComponents_;\n    };\n\n    Buffer.prototype.numElements = function() {\n        return this.numElements_;\n    };\n\n    Buffer.prototype.totalComponents = function() {\n        return this.totalComponents_;\n    };\n\n    Buffer.prototype.buffer = function() {\n        return this.buf;\n    };\n\n    Buffer.prototype.stride = function() {\n        return 0;\n    };\n\n    Buffer.prototype.offset = function() {\n        return 0;\n    };\n\n\n\n    mod.Model = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, shader, arrays, textures)\n                    {\n                        self.buffers = {};\n                        var setBuffer = function(name, array)\n                        {\n                            var target = (name == 'indices') ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\n                            b = self.buffers[name];\n                            if (!b)\n                                b = new Buffer(array, target);\n                            else\n                                b.set(array);\n                            self.buffers[name] = b;\n                        };\n                        for (name in arrays)\n                            setBuffer(name, arrays[name]);\n\n                        var textureUnits = {};\n                        var unit = 0;\n                        for (var texture in textures)\n                        {\n                            textureUnits[texture] = unit++;\n                        }\n\n                        self.mode = gl.TRIANGLES;\n                        self.textures = textures.v;\n                        self.textureUnits = textureUnits;\n                        self.shader = shader;\n                    });\n\n                /**\n                * Sets up the shared parts of drawing this model. Uses the\n                * program, binds the buffers, sets the textures.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.drawPrep = new Sk.builtin.func(function(self, uniforms)\n                    {\n                        var shader = self.shader;\n                        var buffers = self.buffers;\n                        var textures = self.textures;\n\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n\n                        Sk.misceval.callsim(shader.use, shader);\n\n                        for (var buffer in buffers) {\n                            var b = buffers[buffer];\n                            if (buffer == 'indices') {\n                                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, b.buffer());\n                            } else {\n                                var attrib = shader.attrib[buffer];\n                                if (attrib) {\n                                    attrib(b);\n                                }\n                            }\n                        }\n\n                        for (var texture in textures) {\n                            var unit = self.textureUnits[texture];\n                            shader.setUniform$impl(shader, textuer, unit);\n                            textures[texture].bindToUnit(unit);\n                        }\n\n                        for (var uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n                    });\n\n                /**\n                * Draws this model.\n                *\n                * After calling tdl.models.Model.drawPrep you can call this\n                * function multiple times to draw this model.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.draw = new Sk.builtin.func(function(self, uniforms, opt_textures)\n                    {\n                        var shader = self.shader;\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n                        for (uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n\n                        if (opt_textures) {\n                            for (var texture in opt_textures) {\n                                var unit = self.textureUnits[texture];\n                                shader.setUniform$impl(shader, texture, unit);\n                                opt_textures[texture].bindToUnit(unit);\n                            }\n                        }\n\n                        var buffers = self.buffers;\n                        gl.drawElements(self.mode, buffers.indices.totalComponents(), gl.UNSIGNED_SHORT, 0);\n                    });\n            },\n            'Model', []);\n\n    return mod;\n};\n","src/lib/pythonds/trees/__init__.py":"\n# from .binaryTree import BinaryTree\n# from .balance import AVLTree\n# from .bst import BinarySearchTree\n# from .binheap import BinHeap\n\n\n","src/lib/pythonds/trees/binaryTree.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\nclass BinaryTree:\n    \"\"\"\n    A recursive implementation of Binary Tree\n    Using links and Nodes approach.\n    \"\"\"    \n    def __init__(self,rootObj):\n        self.key = rootObj\n        self.leftChild = None\n        self.rightChild = None\n\n    def insertLeft(self,newNode):\n        if self.leftChild == None:\n            self.leftChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.left = self.leftChild\n            self.leftChild = t\n    \n    def insertRight(self,newNode):\n        if self.rightChild == None:\n            self.rightChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.right = self.rightChild\n            self.rightChild = t\n\n    def isLeaf(self):\n        return ((not self.leftChild) and (not self.rightChild))\n\n    def getRightChild(self):\n        return self.rightChild\n\n    def getLeftChild(self):\n        return self.leftChild\n\n    def setRootVal(self,obj):\n        self.key = obj\n\n    def getRootVal(self,):\n        return self.key\n\n    def inorder(self):\n        if self.leftChild:\n            self.leftChild.inorder()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.inorder()\n\n    def postorder(self):\n        if self.leftChild:\n            self.leftChild.postorder()\n        if self.rightChild:\n            self.rightChild.postorder()\n        print(self.key)\n\n\n    def preorder(self):\n        print(self.key)\n        if self.leftChild:\n            self.leftChild.preorder()\n        if self.rightChild:\n            self.rightChild.preorder()\n\n    def printexp(self):\n        if self.leftChild:\n            print('(')\n            self.leftChild.printexp()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.printexp()\n            print(')')\n\n    def postordereval(self):\n        opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n        res1 = None\n        res2 = None\n        if self.leftChild:\n            res1 = self.leftChild.postordereval()  #// \\label{peleft}\n        if self.rightChild:\n            res2 = self.rightChild.postordereval() #// \\label{peright}\n        if res1 and res2:\n            return opers[self.key](res1,res2) #// \\label{peeval}\n        else:\n            return self.key\n\ndef inorder(tree):\n    if tree != None:\n        inorder(tree.getLeftChild())\n        print(tree.getRootVal())\n        inorder(tree.getRightChild())\n\ndef printexp(tree):\n    if tree.leftChild:\n        print('(')\n        printexp(tree.getLeftChild())\n    print(tree.getRootVal())\n    if tree.rightChild:\n        printexp(tree.getRightChild())\n        print(')') \n\ndef printexp(tree):\n    sVal = \"\"\n    if tree:\n        sVal = '(' + printexp(tree.getLeftChild())\n        sVal = sVal + str(tree.getRootVal())\n        sVal = sVal + printexp(tree.getRightChild()) + ')'\n    return sVal\n\ndef postordereval(tree):\n    opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n    res1 = None\n    res2 = None\n    if tree:\n        res1 = postordereval(tree.getLeftChild())  #// \\label{peleft}\n        res2 = postordereval(tree.getRightChild()) #// \\label{peright}\n        if res1 and res2:\n            return opers[tree.getRootVal()](res1,res2) #// \\label{peeval}\n        else:\n            return tree.getRootVal()\n\ndef height(tree):\n    if tree == None:\n        return -1\n    else:\n        return 1 + max(height(tree.leftChild),height(tree.rightChild))\n\n# t = BinaryTree(7)\n# t.insertLeft(3)\n# t.insertRight(9)\n# inorder(t)\n# import operator\n# x = BinaryTree('*')\n# x.insertLeft('+')\n# l = x.getLeftChild()\n# l.insertLeft(4)\n# l.insertRight(5)\n# x.insertRight(7)\n# print(printexp(x))\n# print(postordereval(x))\n# print(height(x))\n","src/lib/math/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n    mod.pi = Sk.builtin.assk$(Math.PI, Sk.builtin.nmber.float$);\n    mod.e =  Sk.builtin.assk$(Math.E, Sk.builtin.nmber.float$);\n\n//	RNL	added\n    mod.fabs = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("fabs", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.abs(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("asin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.asin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.acos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("acos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.acos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("atan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.atan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan2 = new Sk.builtin.func(function(y, x) {\n        Sk.builtin.pyCheckArgs("atan2", arguments, 2, 2);\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.atan2(Sk.builtin.asnum$(y), Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("sin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.sin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.cos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("cos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.cos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.tan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("tan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	return new Sk.builtin.nmber(Math.tan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asinh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("asinh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = x + Math.sqrt(x*x+1);\n\n	return new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.acosh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("acosh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = x + Math.sqrt(x*x-1);\n\n	return new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.atanh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("atanh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var L = (1+x)/(1-x);\n\n	return new Sk.builtin.nmber(Math.log(L)/2, Sk.builtin.nmber.float$);\n    });\n\n    mod.sinh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("sinh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = (p-n)/2;\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.cosh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("cosh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = (p+n)/2;\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.tanh = new Sk.builtin.func(function(x) {\n	Sk.builtin.pyCheckArgs("tanh", arguments, 1, 1);\n	Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	x = Sk.builtin.asnum$(x);\n\n	var e = Math.E;\n	var p = Math.pow(e, x);\n	var n = 1/p;\n	var result = ((p-n)/2)/((p+n)/2);\n\n	return new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.ceil = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("ceil", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.ceil(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.floor = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("floor", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.floor(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sqrt = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("sqrt", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.sqrt(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.trunc = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("trunc", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        return new Sk.builtin.nmber(Sk.builtin.asnum$(x)|0, Sk.builtin.nmber.float$);\n    });\n\n    mod.log = new Sk.builtin.func(function(x, base) {\n        Sk.builtin.pyCheckArgs("log", arguments, 1, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        if (base === undefined) {\n	    return new Sk.builtin.nmber(Math.log(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n        } else {\n            Sk.builtin.pyCheckType("base", "number", Sk.builtin.checkNumber(base));\n            var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(Sk.builtin.asnum$(base));\n	    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n        }\n    });\n\n    mod.log10 = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("log10", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(10);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.exp = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("exp", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n	return new Sk.builtin.nmber(Math.exp(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.pow = new Sk.builtin.func(function(x,y) {\n        Sk.builtin.pyCheckArgs("pow", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n	return new Sk.builtin.nmber(Math.pow(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y)), Sk.builtin.nmber.float$);\n    });\n\n    mod.radians = new Sk.builtin.func(function(deg) {\n        Sk.builtin.pyCheckArgs("radians", arguments, 1, 1);\n        Sk.builtin.pyCheckType("deg", "number", Sk.builtin.checkNumber(deg));\n\n	var ret = Math.PI / 180.0 * Sk.builtin.asnum$(deg);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.degrees = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("degrees", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n	var ret = 180.0 / Math.PI * Sk.builtin.asnum$(rad);\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.hypot = new Sk.builtin.func(function(x, y) {\n	Sk.builtin.pyCheckArgs("hypot", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n	Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n		x = Sk.builtin.asnum$(x);\n		y = Sk.builtin.asnum$(y);\n	return new Sk.builtin.nmber(Math.sqrt((x*x)+(y*y)), Sk.builtin.nmber.float$);\n    });\n\n	mod.factorial = new Sk.builtin.func(function(x) {\n	    Sk.builtin.pyCheckArgs("factorial", arguments, 1, 1);\n            Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n		x = Math.floor(Sk.builtin.asnum$(x));\n		var r = 1;\n		for (var i = 2; i <= x; i++)\n			r *= i;\n		return new Sk.builtin.nmber(r, Sk.builtin.nmber.int$);\n	});\n\n    return mod;\n}',"src/lib/e3ga/__init__.js":'/**\n * e3ga is a foreign function interface over Three.js for the DaVinci Python to JavaScript cross-compiler.\n *\n * The e3ga module is in most respects API-compatible with the Three.js library except that THREE.Vector3 has\n * been extended in the ffi to Euclidean3.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n  \n  var EUCLIDEAN_3           = "Euclidean3";\n  var SCALAR_3              = "Scalar3";\n  var VECTOR_3              = "Vector3";\n  var BIVECTOR_3            = "Bivector3";\n  var PSEUDOSCALAR_3        = "Pseudoscalar3";\n\n  var QUATERNION            = "Quaternion";\n\n  var SCENE                 = "Scene";\n  var CANVAS_RENDERER       = "CanvasRenderer";\n  var WEBGL_RENDERER        = "WebGLRenderer";\n  var COLOR                 = "Color";\n  var ORTHOGRAPHIC_CAMERA   = "OrthographicCamera";\n  var PERSPECTIVE_CAMERA    = "PerspectiveCamera";\n\n  var GEOMETRY              = "Geometry";\n  var OBJECT_3D             = "Object3D";\n\n  var AMBIENT_LIGHT         = "AmbientLight";\n  var DIRECTIONAL_LIGHT     = "DirectionalLight";\n  var POINT_LIGHT           = "PointLight";\n\n  var LINE                  = "Line";\n  var LINE_BASIC_MATERIAL   = "LineBasicMaterial";\n\n  var MESH                  = "Mesh";\n  var MESH_BASIC_MATERIAL   = "MeshBasicMaterial";\n  var MESH_LAMBERT_MATERIAL = "MeshLambertMaterial";\n  var MESH_NORMAL_MATERIAL  = "MeshNormalMaterial";\n  var MESH_PHONG_MATERIAL   = "MeshPhongMaterial";\n\n  var ARROW_GEOMETRY        = "ArrowGeometry";\n  var CIRCLE_GEOMETRY       = "CircleGeometry";\n  var CUBE_GEOMETRY         = "CubeGeometry";\n  var CYLINDER_GEOMETRY     = "CylinderGeometry";\n  var ICOSAHEDRON_GEOMETRY  = "IcosahedronGeometry";\n  var LATHE_GEOMETRY        = "LatheGeometry";\n  var OCTAHEDRON_GEOMETRY   = "OctahedronGeometry";\n  var PLANE_GEOMETRY        = "PlaneGeometry";\n  var SPHERE_GEOMETRY       = "SphereGeometry";\n  var TEXT_GEOMETRY         = "TextGeometry";\n  var TETRAHEDRON_GEOMETRY  = "TetrahedronGeometry";\n  var TORUS_GEOMETRY        = "TorusGeometry";\n\n  var PROP_BOTTOM              = "bottom";\n  var PROP_COLOR               = "color";\n  var PROP_DETAIL              = "detail";\n  var PROP_EULER_ORDER         = "eulerOrder";\n  var PROP_FAR                 = "far";\n  var PROP_GEOMETRY            = "geometry";\n  var PROP_ID                  = "id";\n  var PROP_LEFT                = "left";\n  var PROP_MASS                = "mass";\n  var PROP_MATERIAL            = "material";\n  var PROP_MATRIX_AUTO_UPDATE  = "matrixAutoUpdate";\n  var PROP_NAME                = "name";\n  var PROP_NEAR                = "near";\n  var PROP_NEEDS_UPDATE        = "needsUpdate";\n  var PROP_OPACITY             = "opacity";\n  var PROP_OVERDRAW            = "overdraw";\n  var PROP_POSITION            = "position";\n  var PROP_QUATERNION          = "quaternion";\n  var PROP_RADIUS              = "radius";\n  var PROP_RIGHT               = "right";\n  var PROP_ROTATION            = "rotation";\n  var PROP_SCALE               = "scale";\n  var PROP_SEGMENTS            = "segments";\n  var PROP_THETA_START         = "thetaStart";\n  var PROP_THETA_LENGTH        = "thetaLength";\n  var PROP_TOP                 = "top";\n  var PROP_TRANSPARENT         = "transparent";\n  var PROP_TYPE                = "type";\n  var PROP_UP                  = "up";\n  var PROP_USE_QUATERNION      = "useQuaternion";\n  var PROP_VELOCITY            = "velocity";\n  var PROP_VERTICES            = "vertices";\n  var PROP_VISIBLE             = "visible";\n  var PROP_WIREFRAME           = "wireframe";\n  var PROP_WIREFRAME_LINEWIDTH = "wireframeLinewidth";\n\n  var PROP_W                     = "w";\n  var PROP_X                     = "x";\n  var PROP_Y                     = "y";\n  var PROP_Z                     = "z";\n  var PROP_XY                    = "xy";\n  var PROP_YZ                    = "yz";\n  var PROP_ZX                    = "zx";\n  var PROP_XYZ                   = "xyz";\n  var METHOD_SET_X               = "setX";\n  var METHOD_SET_Y               = "setY";\n  var METHOD_SET_Z               = "setZ";\n  var METHOD_GET_COMPONENT       = "getComponent";\n  var METHOD_SET_COMPONENT       = "setComponent";\n  var METHOD_SET                 = "set";\n  var METHOD_SET_FROM_AXIS_ANGLE = "setFromAxisAngle";\n  var METHOD_SET_FROM_EULER      = "setFromEuler";\n  var METHOD_SET_GEOMETRY        = "setGeometry";\n  var METHOD_UPDATE_MATRIX       = "updateMatrix";\n\n  var METHOD_ADD               = "add";\n  var METHOD_CLONE             = "clone";\n  var METHOD_CONJUGATE         = "conjugate";\n  var METHOD_COPY              = "copy";\n  var METHOD_CROSS             = "cross";\n  var METHOD_DOT               = "dot";\n  var METHOD_INVERSE           = "inverse";\n  var METHOD_LENGTH            = "length";\n  var METHOD_LENGTH_SQ         = "lengthSq";\n  var METHOD_LOOK_AT           = "lookAt";\n  var METHOD_NORMALIZE         = "normalize";\n  var METHOD_REMOVE            = "remove";\n  var METHOD_SET_RGB           = "setRGB";\n\n  var mod = {};\n\n  function isBoolean(x)   { return typeof x === \'boolean\'; }\n  function isFunction(x)  { return typeof x === \'function\'; }\n  function isNumber(x)    { return typeof x === \'number\'; }\n  function isObject(x)    { return typeof x === \'object\'; }\n  function isString(x)    { return typeof x === \'string\'; }\n  function isUndefined(x) { return typeof x === \'undefined\'; }\n\n  function isDefined(x)   { return typeof x !== \'undefined\'; }\n  function isNull(x)      { return typeof x === \'object\' && x === null; }\n\n  function methodAdd(target) {\n    if (!isObject(target)) {\n      throw new Sk.builtin.AssertionError("target must be an object.");\n    }\n    if (!isFunction(target[METHOD_ADD])) {\n      throw new Sk.builtin.AssertionError("target must have an \'add\' function.");\n    }\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = METHOD_ADD;\n      });\n      $loc.__call__ = new Sk.builtin.func(function(self, childPy) {\n        var child = Sk.ffi.remapToJs(childPy);\n        target[METHOD_ADD](child);\n      });\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_ADD)\n      })\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_ADD)\n      })\n    }, METHOD_ADD, []));\n  }\n\n  function methodRemove(target) {\n    if (!isObject(target)) {\n      throw new Sk.builtin.AssertionError("target must be an object.");\n    }\n    if (!isFunction(target[METHOD_REMOVE])) {\n      throw new Sk.builtin.AssertionError("target must have a \'remove\' function.");\n    }\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = METHOD_REMOVE;\n      });\n      $loc.__call__ = new Sk.builtin.func(function(self, childPy) {\n        var child = Sk.ffi.remapToJs(childPy);\n        target[METHOD_REMOVE](child);\n      });\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_REMOVE)\n      })\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_REMOVE)\n      })\n    }, METHOD_REMOVE, []));\n  }\n\n  function verticesPy(vertices) {\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = PROP_VERTICES;\n        self.v = vertices;\n      });\n      $loc.__getattr__ = new Sk.builtin.func(function(verticesPy, name) {\n        var METHOD_APPEND = "append";\n        switch(name) {\n          case METHOD_APPEND: {\n            return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n              $loc.__init__ = new Sk.builtin.func(function(self) {\n                self.tp$name = METHOD_APPEND;\n              });\n              $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n                vertices.push(Sk.ffi.remapToJs(vectorPy));\n              });\n              $loc.__str__ = new Sk.builtin.func(function(self) {\n                return new Sk.builtin.str(METHOD_APPEND)\n              });\n              $loc.__repr__ = new Sk.builtin.func(function(self) {\n                return new Sk.builtin.str(METHOD_APPEND)\n              });\n            }, METHOD_APPEND, []));\n          }\n        }\n      });\n      $loc.__getitem__ = new Sk.builtin.func(function(verticesPy, indexPy) {\n        var index = Sk.ffi.remapToJs(indexPy);\n        return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(vertices[index], EUCLIDEAN_3));\n      });\n      $loc.mp$length = function() {return vertices.length;};\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(PROP_VERTICES)\n      });\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(PROP_VERTICES)\n      });\n    }, PROP_VERTICES, []));\n  }\n\n  /*\n   * Deterines whether the argument is a genuine Color reference.\n   */\n  function isColor(x) {\n    if (isDefined(x)) {\n      if (x.hasOwnProperty("r") && x.hasOwnProperty("g") && x.hasOwnProperty("b")) {\n        return isNumber(x["r"]) && isNumber(x["g"]) && isNumber(x["b"]);\n      }\n      else {\n        return false;\n      }\n    }\n    else {\n      return false;\n    }\n  }\n\n  function webGLSupported() {\n    try {\n      if (window.WebGLRenderingContext) {\n        if (document.createElement(\'canvas\').getContext(\'experimental-webgl\')) {\n          return true;\n        }\n        else {\n          return false;\n        }\n      }\n      else {\n        return false;\n      }\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function numberFromArg(arg, argName, functionName, lax) {\n    if (isUndefined(argName)) {\n      throw new Error("argName must be specified")\n    }\n    if (isUndefined(functionName)) {\n      throw new Error("functionName must be specified")\n    }\n    lax = isUndefined(lax) ? true : (isBoolean(lax) ? lax : true);\n    if (isUndefined(arg)) {\n      if (lax) {\n        return arg;\n      }\n      else {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was Missing.");\n      }\n    }\n    else if (isNull(arg)) {\n      if (lax) {\n        return arg;\n      }\n      else {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was None.");\n      }\n    }\n    if (isBoolean(arg)) {\n      throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was a Boolean.");\n    }\n\n    if (arg.skType) {\n      switch(arg.skType) {\n        case \'float\': {\n          return arg.v;\n        }\n        case \'int\': {\n          return arg.v;\n        }\n        default: {\n          throw new Sk.builtin.TypeError(functionName + "(" + argName + ": " + arg.skType + ") must be convertible to a number.");\n        }\n      }\n    }\n    else if (arg.v) {\n      if (isString(arg.v)) {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was a String.");\n      }\n      else {\n        throw new Sk.builtin.AssertionError(functionName + "." + argName + " is unknown.");\n      }\n    }\n    else {\n      throw new Sk.builtin.AssertionError(functionName + "." + argName + " is unknown.");\n    }\n  }\n\n  function numberFromIntegerArg(arg, argName, functionName) {\n    // TODO: Maybe need an argument to say whether undefined is acceptable?\n    // TODO: Likewise for whether null is acceptable.\n    if (isUndefined(arg)) {\n      return arg;\n    }\n    else if (isNull(arg)) {\n      return null;\n    }\n    else {\n      if (arg.skType) {\n        switch(arg.skType) {\n          case \'float\': {\n            // TODO: Handle coercion to nearest integer.\n            return arg.v;\n          }\n          case \'int\': {\n            return arg.v;\n          }\n        }\n      }\n      throw new Sk.builtin.AssertionError(functionName + "." + argName + " must be an integer.");\n    }\n  }\n\n  function remapE3ToPy(w, x, y, z, xy, yz, zx, xyz) {\n    w = Sk.builtin.assk$(w, Sk.builtin.nmber.float$);\n    x = Sk.builtin.assk$(x, Sk.builtin.nmber.float$);\n    y = Sk.builtin.assk$(y, Sk.builtin.nmber.float$);\n    z = Sk.builtin.assk$(z, Sk.builtin.nmber.float$);\n    xy = Sk.builtin.assk$(xy, Sk.builtin.nmber.float$);\n    yz = Sk.builtin.assk$(yz, Sk.builtin.nmber.float$);\n    zx = Sk.builtin.assk$(zx, Sk.builtin.nmber.float$);\n    xyz = Sk.builtin.assk$(xyz, Sk.builtin.nmber.float$);\n    return Sk.misceval.callsim(mod[EUCLIDEAN_3], w, x, y, z, xy, yz, zx, xyz);\n  }\n\n  function wxyzToPy(w, x, y, z) {\n    var wPy = Sk.builtin.assk$(w, Sk.builtin.nmber.float$);\n    var xPy = Sk.builtin.assk$(x, Sk.builtin.nmber.float$);\n    var yPy = Sk.builtin.assk$(y, Sk.builtin.nmber.float$);\n    var zPy = Sk.builtin.assk$(z, Sk.builtin.nmber.float$);\n    return Sk.misceval.callsim(mod[QUATERNION], xPy, yPy, zPy, wPy);\n  }\n\n  function divide(a000, a001, a010, a011, a100, a101, a110, a111, b000, b001, b010, b011, b100, b101, b110, b111, dst) {\n    // WARNING! bladeASM.mulE2 uses w,x,y,z,xy,yz,zx,xyz representation. Notice the ordering and sign change.\n    // TODO: Move everything to the more systematic bitmap representation.\n    // r = ~b = reverse(b)\n    var r000 = +b000; // w,   grade 0(+)\n    var r001 = +b001; // x,   grade 1(+)\n    var r010 = +b010; // y,   grade 1(+)\n    var r011 = -b011; // xy,  grade 2(-)\n    var r100 = +b100; // z,   grade 1(+)\n    var r101 = -b101; // yz,  grade 2(-)\n    var r110 = -b110; // yz,  grade 2(-)\n    var r111 = -b111; // xyz, grade 3(-)\n    // m = b * r = b * (~b)\n    // The grade 2 and grade 3 components evaluate to zero.\n    var m000 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 0);\n    var m001 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 1);\n    var m010 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 2);\n    var m011 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 4);\n    var m100 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 3);\n    var m101 =  0;//-bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 6);\n    var m110 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 5);\n    var m111 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 7);\n    // c = cliffordConjugate(m)\n    var c000 = +m000; // w,   grade 0(+)\n    var c001 = -m001; // x,   grade 1(-)\n    var c010 = -m010; // y,   grade 1(-)\n    var c011 = -m011; // xy,  grade 2(-)\n    var c100 = -m100; // z,   grade 1(-)\n    var c101 = -m101; // -zx, grade 2(-)\n    var c110 = -m110; // yz,  grade 2(-)\n    var c111 = +m111; // xyz, grade 3(+)\n    // s = r * c\n    // TODO: Presumably there is some simplified computation on account of the c\'s being sparse.\n    var s000 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 0);\n    var s001 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 1);\n    var s010 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 2);\n    var s011 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 4);\n    var s100 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 3);\n    var s101 = -bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 6);\n    var s110 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 5);\n    var s111 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 7);\n    // k = b * s\n    var k000 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, s000, s001, s010, s100, s011, s110, -s101, s111, 0);\n    // i = inverse(b)\n    var i000 = s000/k000;\n    var i001 = s001/k000;\n    var i010 = s010/k000;\n    var i011 = s011/k000;\n    var i100 = s100/k000;\n    var i101 = s101/k000;\n    var i110 = s110/k000;\n    var i111 = s111/k000;\n    // x = a * inverse(b)\n    var x000 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 0);\n    var x001 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 1);\n    var x010 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 2);\n    var x011 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 4);\n    var x100 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 3);\n    var x101 = -bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 6);\n    var x110 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 5);\n    var x111 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 7);\n    // translate bitmap representation to Cartesian.\n    var w   =  x000;\n    var x   =  x001;\n    var y   =  x010;\n    var z   =  x100;\n    var xy  =  x011;\n    var yz  =  x110;\n    var zx  = -x101;\n    var xyz =  x111;\n    // return or populate the optional dst parameter.\n    if (typeof dst !== \'undefined\') {\n      dst.w   = w;\n      dst.x   = x;\n      dst.y   = y;\n      dst.z   = z;\n      dst.xy  = xy;\n      dst.yz  = yz;\n      dst.zx  = zx;\n      dst.xyz = xyz;\n    }\n    else {\n      return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n    }\n  }\n\n  function multiVector3(w, vector, xy, yz, zx, xyz) {\n    vector.w = w;\n    vector.xy = xy;\n    vector.yz = yz;\n    vector.zx = zx;\n    vector.xyz = xyz;\n    return vector;\n  }\n\n  function coord(mv, index) {\n    switch(index) {\n      case 0: {\n        return mv.w;\n      }\n      case 1: {\n        return mv.x;\n      }\n      case 2: {\n        return mv.y;\n      }\n      case 3: {\n        return mv.z;\n      }\n      case 4: {\n        return mv.xy;\n      }\n      case 5: {\n        return mv.yz;\n      }\n      case 6: {\n        return mv.zx;\n      }\n      case 7: {\n        return mv.xyz;\n      }\n      default: {\n        throw new Sk.builtin.AssertionError("" + index + " is not a valid multivector coordinate index");\n      }\n    }\n  }\n  \n  function compute(f, a, b, coord, pack) {\n    var a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, x0, x1, x2, x3, x4, x5, x6, x7;\n    a0 = a.w;\n    a1 = a.x;\n    a2 = a.y;\n    a3 = a.z;\n    a4 = a.xy;\n    a5 = a.yz;\n    a6 = a.zx;\n    a7 = a.xyz;\n    b0 = b.w;\n    b1 = b.x;\n    b2 = b.y;\n    b3 = b.z;\n    b4 = b.xy;\n    b5 = b.yz;\n    b6 = b.zx;\n    b7 = b.xyz;\n    x0 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n    x1 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n    x2 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n    x3 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n    x4 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n    x5 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n    x6 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n    x7 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n    return pack(x0, x1, x2, x3, x4, x5, x6, x7);\n  }\n\n  mod[EUCLIDEAN_3] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, w, x, y, z, xy, yz, zx, xyz) {\n      w = Sk.ffi.remapToJs(w);\n      x = Sk.ffi.remapToJs(x);\n      y = Sk.ffi.remapToJs(y);\n      z = Sk.ffi.remapToJs(z);\n      xy = Sk.ffi.remapToJs(xy);\n      yz = Sk.ffi.remapToJs(yz);\n      zx = Sk.ffi.remapToJs(zx);\n      xyz = Sk.ffi.remapToJs(xyz);\n      if (isNumber(w) && isNumber(x) && isNumber(y) && isNumber(z) && isNumber(xy) && isNumber(yz) && isNumber(zx) && isNumber(xyz)) {\n        self.v = multiVector3(w, new THREE.Vector3(x, y, z), xy, yz, zx, xyz);\n      }\n      else if (isDefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isUndefined(xy) && isUndefined(yz) && isUndefined(zx) && isUndefined(xyz)) {\n        self.v = multiVector3(w.w || 0, w, w.xy || 0, w.yz || 0, w.zx|| 0, w.xyz || 0);\n      }\n      else if (isDefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isDefined(xy) && isDefined(yz) && isDefined(zx) && isDefined(xyz)) {\n        self.v = multiVector3(w, new THREE.Vector3(0, 0, 0), xy, yz, zx, xyz);\n      }\n      else if (isUndefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isUndefined(xy) && isUndefined(yz) && isUndefined(zx) && isUndefined(xyz)) {\n        self.v = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError(EUCLIDEAN_3);\n      }\n      self.tp$name = EUCLIDEAN_3;\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w + b, a.x, a.y, a.z, a.xy, a.yz, a.zx, a.xyz);\n      }\n      else {\n        var w = a.w + b.w;\n        var x = a.x + b.x;\n        var y = a.y + b.y;\n        var z = a.z + b.z;\n        var xy = a.xy + b.xy;\n        var yz = a.yz + b.yz;\n        var zx = a.zx + b.zx;\n        var xyz = a.xyz + b.xyz;\n        return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a + b.w, b.x, b.y, b.z, b.xy, b.yz, b.zx, b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w += other;\n      }\n      else {\n        self.w += other.w;\n        self.x += other.x;\n        self.y += other.y;\n        self.z += other.z;\n        self.xy += other.xy;\n        self.yz += other.yz;\n        self.zx += other.zx;\n        self.xyz += other.xyz;\n      }\n      return selfPy;\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w - b, a.x, a.y, a.z, a.xy, a.yz, a.zx, a.xyz);\n      }\n      else {\n        var w = a.w - b.w;\n        var x = a.x - b.x;\n        var y = a.y - b.y;\n        var z = a.z - b.z;\n        var xy = a.xy - b.xy;\n        var yz = a.yz - b.yz;\n        var zx = a.zx - b.zx;\n        var xyz = a.xyz - b.xyz;\n        return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a - b.w, -b.x, -b.y, -b.z, -b.xy, -b.yz, -b.zx, -b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w -= other;\n      }\n      else {\n        self.w -= other.w;\n        self.x -= other.x;\n        self.y -= other.y;\n        self.z -= other.z;\n        self.xy -= other.xy;\n        self.yz -= other.yz;\n        self.zx -= other.zx;\n        self.xyz -= other.xyz;\n      }\n      return selfPy;\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.mulE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        return divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b.w, b.x, b.y, b.xy, b.z, -b.zx, b.yz, b.xyz);\n      }\n    });\n    $loc.__rdiv__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return divide(lhs, 0, 0, 0, 0, 0, 0, 0, rhs.w, rhs.x, rhs.y, rhs.xy, rhs.z, -rhs.zx, rhs.yz, rhs.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " / " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__idiv__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(b)) {\n        divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b, 0, 0, 0, 0, 0, 0, 0, a);\n        return selfPy;\n      }\n      else {\n        divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b.w, b.x, b.y, b.xy, b.z, -b.zx, b.yz, b.xyz, a);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.extE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        return compute(bladeASM.lcoE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.rcoE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$negative = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(-mv.w, -mv.x, -mv.y, -mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.nb$invert = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w === b.w && a.x === b.x && a.y === b.y && a.z === b.z && a.xy === b.xy && a.yz === b.yz && a.zx === b.zx && a.xyz === b.xyz;\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w !== b.w || a.x !== b.x || a.y !== b.y || a.z !== b.z || a.xy !== b.xy || a.yz !== b.yz || a.zx !== b.zx || a.xyz !== b.xyz;\n    });\n    $loc.__getitem__ = new Sk.builtin.func(function(mv, index) {\n      mv = Sk.ffi.remapToJs(mv);\n      index = Sk.builtin.asnum$(index);\n      switch(index) {\n        case 0: {\n          return remapE3ToPy(mv.w, 0, 0, 0, 0, 0, 0, 0);\n        }\n        case 1: {\n          return remapE3ToPy(0, mv.x, mv.y, mv.z, 0, 0, 0, 0);\n        }\n        case 2: {\n          return remapE3ToPy(0, 0, 0, 0, mv.xy, mv.yz, mv.zx, 0);\n        }\n        case 3: {\n          return remapE3ToPy(0, 0, 0, 0, 0, 0, 0, mv.xyz);\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(mvPy, name) {\n      var mv = Sk.ffi.remapToJs(mvPy);\n      switch(name) {\n        case PROP_W: {\n          return Sk.builtin.assk$(mv.w, Sk.builtin.nmber.float$);\n        }\n        case PROP_X: {\n          return Sk.builtin.assk$(mv.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(mv.y, Sk.builtin.nmber.float$);\n        }\n        case PROP_Z: {\n          return Sk.builtin.assk$(mv.z, Sk.builtin.nmber.float$);\n        }\n        case PROP_XY: {\n          return Sk.builtin.assk$(mv.xy, Sk.builtin.nmber.float$);\n        }\n        case PROP_YZ: {\n          return Sk.builtin.assk$(mv.yz, Sk.builtin.nmber.float$);\n        }\n        case PROP_ZX: {\n          return Sk.builtin.assk$(mv.zx, Sk.builtin.nmber.float$);\n        }\n        case PROP_XYZ: {\n          return Sk.builtin.assk$(mv.xyz, Sk.builtin.nmber.float$);\n        }\n        case METHOD_ADD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, arg) {\n              arg  = Sk.ffi.remapToJs(arg);\n              mv.w += arg.w;\n              mv.x += arg.x;\n              mv.y += arg.y;\n              mv.z += arg.z;\n              mv.xy += arg.xy;\n              mv.yz += arg.yz;\n              mv.zx += arg.zx;\n              mv.xyz += arg.xyz;\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD);\n            });\n          }, METHOD_ADD, []));\n        }\n        case METHOD_CROSS: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CROSS;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vPy) {\n              var v  = Sk.ffi.remapToJs(vPy);\n              mv.w = 0;\n              mv[METHOD_CROSS](v);\n//            mv.x  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n//            mv.y  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n//            mv.z  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n              mv.xy = 0;\n              mv.yz = 0;\n              mv.zx = 0;\n              mv.xyz = 0;\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CROSS);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CROSS);\n            });\n          }, METHOD_CROSS, []));\n        }\n        case METHOD_DOT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_DOT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vPy) {\n              var v  = Sk.ffi.remapToJs(vPy);\n              return Sk.builtin.assk$(mv[METHOD_DOT](v), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_DOT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_DOT);\n            });\n          }, METHOD_DOT, []));\n        }\n        case METHOD_SET_X: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_X;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x) {\n              x  = Sk.ffi.remapToJs(x);\n              mv[METHOD_SET_X](x);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_X);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_X);\n            });\n          }, METHOD_SET_X, []));\n        }\n        case METHOD_SET_Y: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_Y;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, y) {\n              y  = Sk.ffi.remapToJs(y);\n              mv[METHOD_SET_Y](y);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Y);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Y);\n            });\n          }, METHOD_SET_Y, []));\n        }\n        case METHOD_SET_Z: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_Z;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, z) {\n              z  = Sk.ffi.remapToJs(z);\n              mv[METHOD_SET_Z](z);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Z);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Z);\n            });\n          }, METHOD_SET_Z, []));\n        }\n        case METHOD_GET_COMPONENT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_COMPONENT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, index) {\n              index  = Sk.ffi.remapToJs(index);\n              return Sk.builtin.assk$(mv[METHOD_GET_COMPONENT](index), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_COMPONENT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_COMPONENT);\n            });\n          }, METHOD_GET_COMPONENT, []));\n        }\n        case METHOD_SET_COMPONENT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_COMPONENT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, index, value) {\n              index  = Sk.ffi.remapToJs(index);\n              value  = Sk.ffi.remapToJs(value);\n              mv[METHOD_SET_COMPONENT](index, value);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_COMPONENT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_COMPONENT);\n            });\n          }, METHOD_SET_COMPONENT, []));\n        }\n        case METHOD_SET: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, z) {\n              x  = Sk.ffi.remapToJs(x);\n              y  = Sk.ffi.remapToJs(y);\n              z  = Sk.ffi.remapToJs(z);\n              mv[METHOD_SET](x, y, z);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n          }, METHOD_SET, []));\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, mv.xy, mv.yz, mv.zx, mv.xyz);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(mv[METHOD_LENGTH](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        case METHOD_NORMALIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_NORMALIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              mv[METHOD_NORMALIZE]();\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n          }, METHOD_NORMALIZE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(mv, name, value) {\n      mv = Sk.ffi.remapToJs(mv);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_W: {\n          mv.w = value;\n        }\n        break;\n        case PROP_X: {\n          mv.x = value;\n        }\n        break;\n        case PROP_Y: {\n          mv.y = value;\n        }\n        break;\n        case PROP_Z: {\n          mv.z = value;\n        }\n        break;\n        case PROP_XY: {\n          mv.xy = value;\n        }\n        break;\n        case PROP_YZ: {\n          mv.yz = value;\n        }\n        break;\n        case PROP_ZX: {\n          mv.zx = value;\n        }\n        break;\n        case PROP_XYZ: {\n          mv.xyz = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + EUCLIDEAN_3);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(m) {\n      m = Sk.ffi.remapToJs(m);\n      var grade0 = m.w !== 0;\n      var grade1 = m.x !== 0 || m.y != 0 || m.z !== 0;\n      var grade2 = m.xy !== 0 || m.yz !== 0 || m.zx !== 0;\n      var grade3 = m.xyz !== 0;\n      if (grade0 && !grade1 && !grade2 && !grade3) {\n        var args = [m.w];\n        return new Sk.builtin.str(SCALAR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && grade1 && !grade2 && !grade3) {\n        var args = [m.x, m.y, m.z];\n        return new Sk.builtin.str(VECTOR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && !grade1 && grade2 && !grade3) {\n        var args = [m.xy, m.yz, m.zx];\n        return new Sk.builtin.str(BIVECTOR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && !grade1 && !grade2 && grade3) {\n        var args = [m.xyz];\n        return new Sk.builtin.str(PSEUDOSCALAR_3 + "(" + args.join(", ") + ")");\n      }\n      else {\n        var args = [m.w, m.x, m.y, m.z, m.xy, m.yz, m.zx, m.xyz];\n        return new Sk.builtin.str(EUCLIDEAN_3 + "(" + args.join(", ") + ")");\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (isDefined(mv)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([mv.w, mv.x, mv.y, mv.z, mv.xy, mv.yz, mv.zx, mv.xyz], ["1", "i", "j", "k", "ij", "jk", "ki", "I"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + EUCLIDEAN_3 + "\'>");\n      }\n    });\n  }, EUCLIDEAN_3, []);\n\n  mod[QUATERNION] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x, y, z, w) {\n      x = Sk.ffi.remapToJs(x);\n      y = Sk.ffi.remapToJs(y);\n      z = Sk.ffi.remapToJs(z);\n      w = Sk.ffi.remapToJs(w);\n      if (isObject(x) && isUndefined(y) && isUndefined(z) && isUndefined(w)) {\n        self.v = x;\n      }\n      else {\n        self.v = new THREE[QUATERNION](x, y, z, w);\n      }\n      self.tp$name = QUATERNION;\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w + b, a.x, a.y, a.z);\n      }\n      else {\n        var w = a.w + b.w;\n        var x = a.x + b.x;\n        var y = a.y + b.y;\n        var z = a.z + b.z;\n        return wxyzToPy(w, x, y, z);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return wxyzToPy(a + b.w, b.x, b.y, b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w += other;\n      }\n      else {\n        self.w += other.w;\n        self.x += other.x;\n        self.y += other.y;\n        self.z += other.z;\n      }\n      return selfPy;\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w - b, a.x, a.y, a.z);\n      }\n      else {\n        var w = a.w - b.w;\n        var x = a.x - b.x;\n        var y = a.y - b.y;\n        var z = a.z - b.z;\n        return wxyzToPy(w, x, y, z);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return wxyzToPy(a - b.w, -b.x, -b.y, -b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w -= other;\n      }\n      else {\n        self.w -= other.w;\n        self.x -= other.x;\n        self.y -= other.y;\n        self.z -= other.z;\n      }\n      return selfPy;\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w * b, a.x * b, a.y * b, a.z * b);\n      }\n      else {\n        var ab = new THREE[QUATERNION]().multiplyQuaternions(a, b);\n        return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(ab, QUATERNION));\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return quaternionToPy(a * b.w, a * b.x, a * b.y, a * b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        a.w *= b;\n        a.x *= b;\n        a.y *= b;\n        a.z *= b;\n      }\n      else {\n        a.multiply(b);\n      }\n      return selfPy;\n    });\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$negative = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return quaternionToPy(-mv.x, -mv.y, -mv.z, -mv.w);\n    };\n    $loc.nb$invert = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w === b.w && a.x === b.x && a.y === b.y && a.z === b.z;\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w !== b.w || a.x !== b.x || a.y !== b.y || a.z !== b.z;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(quaternionPy, name) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      switch(name) {\n        case PROP_X: {\n          return Sk.builtin.assk$(quaternion.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(quaternion.y, Sk.builtin.nmber.float$);\n        }\n        case PROP_Z: {\n          return Sk.builtin.assk$(quaternion.z, Sk.builtin.nmber.float$);\n        }\n        case PROP_W: {\n          return Sk.builtin.assk$(quaternion.w, Sk.builtin.nmber.float$);\n        }\n        case METHOD_COPY: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_COPY;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, qPy) {\n              var q  = Sk.ffi.remapToJs(qPy);\n              quaternion.x = q.x;\n              quaternion.y = q.y;\n              quaternion.z = q.z;\n              quaternion.w = q.w;\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_COPY);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_COPY);\n            });\n          }, METHOD_COPY, []));\n        }\n        case METHOD_SET_FROM_AXIS_ANGLE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_FROM_AXIS_ANGLE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, axisPy, anglePy) {\n              var axis = Sk.ffi.remapToJs(axisPy);\n              var angle = Sk.ffi.remapToJs(anglePy);\n              quaternion[METHOD_SET_FROM_AXIS_ANGLE](axis, angle);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_AXIS_ANGLE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_AXIS_ANGLE);\n            });\n          }, METHOD_SET_FROM_AXIS_ANGLE, []));\n        }\n        case METHOD_SET_FROM_EULER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_FROM_EULER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy, orderPy) {\n              var vector = Sk.ffi.remapToJs(vectorPy);\n              var order = Sk.ffi.remapToJs(orderPy);\n              quaternion[METHOD_SET_FROM_EULER](vector, order);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_EULER);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_EULER);\n            });\n          }, METHOD_SET_FROM_EULER, []));\n        }\n        case METHOD_SET: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, z, w) {\n              quaternion.x = Sk.ffi.remapToJs(x);\n              quaternion.y = Sk.ffi.remapToJs(y);\n              quaternion.z = Sk.ffi.remapToJs(z);\n              quaternion.w = Sk.ffi.remapToJs(w);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n          }, METHOD_SET, []));\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return wxyzToPy(quaternion.w, quaternion.x, quaternion.y, quaternion.z);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_CONJUGATE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CONJUGATE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              quaternion[METHOD_CONJUGATE]();\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CONJUGATE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CONJUGATE);\n            });\n          }, METHOD_CONJUGATE, []));\n        }\n        case METHOD_INVERSE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_INVERSE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              var k = 1.0 / quaternion.lengthSq();\n              quaternion[METHOD_CONJUGATE]();\n              quaternion.w *= k;\n              quaternion.x *= k;\n              quaternion.y *= k;\n              quaternion.z *= k;\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INVERSE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INVERSE);\n            });\n          }, METHOD_INVERSE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(quaternion[METHOD_LENGTH](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        case METHOD_LENGTH_SQ: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH_SQ;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(quaternion[METHOD_LENGTH_SQ](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH_SQ);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH_SQ);\n            });\n          }, METHOD_LENGTH_SQ, []));\n        }\n        case METHOD_NORMALIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_NORMALIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              quaternion[METHOD_NORMALIZE]();\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n          }, METHOD_NORMALIZE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(quaternionPy, name, valuePy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_X: {\n          quaternion.x = value;\n        }\n        break;\n        case PROP_Y: {\n          quaternion.y = value;\n        }\n        break;\n        case PROP_Z: {\n          quaternion.z = value;\n        }\n        break;\n        case PROP_W: {\n          quaternion.w = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + QUATERNION);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(quaternionPy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      var args = [quaternion.x, quaternion.y, quaternion.z, quaternion.w];\n      return new Sk.builtin.str(QUATERNION + "(" + args.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(quaternionPy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      if (isDefined(quaternion)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([quaternion.w, quaternion.x, quaternion.y, quaternion.z], ["1", "i", "j", "k"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + QUATERNION + "\'>");\n      }\n    });\n  }, QUATERNION, []);\n\n  // Erik Moller\'s requestAnimationFrame for smart(er) animating\n  // Minor formatting changes and use of braces for if conditions.\n  // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n  // The purpose of this enhanced shim is to \n  (function(scope) {\n    if (isDefined(scope)) {\n      var lastTime = 0;\n      var vendors = [\'ms\', \'moz\', \'webkit\', \'o\'];\n      for(var x = 0; x < vendors.length && !scope.requestAnimationFrame; ++x) {\n        scope.requestAnimationFrame = scope[vendors[x]+\'RequestAnimationFrame\'];\n        scope.cancelRequestAnimationFrame = scope[vendors[x]+\'CancelRequestAnimationFrame\'];\n      }\n\n      if (!scope.requestAnimationFrame) {\n        scope.requestAnimationFrame = function(callback, element) {\n          var currTime = new Date().getTime();\n          var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n          var id = scope.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n          lastTime = currTime + timeToCall;\n          return id;\n        };\n      }\n\n      if (!scope.cancelAnimationFrame) {\n        scope.cancelAnimationFrame = function(id) {\n          clearTimeout(id);\n        };\n      }\n    }\n  }((typeof window === \'object\') ? window : void 0));\n\n   mod[SCENE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.v = new THREE[SCENE]();\n      self.tp$name = SCENE;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(scenePy, name) {\n      var scene = Sk.ffi.remapToJs(scenePy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_POSITION], EUCLIDEAN_3));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(scene[PROP_QUATERNION], QUATERNION));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_ROTATION], EUCLIDEAN_3));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(scene[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_SCALE], EUCLIDEAN_3));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_UP], EUCLIDEAN_3));\n        }\n        case PROP_USE_QUATERNION: {\n          return scene[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              scene.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return scenePy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case METHOD_ADD: {\n          return methodAdd(scene);\n        }\n        case METHOD_REMOVE: {\n          return methodRemove(scene);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(scenePy, name, valuePy) {\n      var scene = Sk.ffi.remapToJs(scenePy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_POSITION: {\n          scene[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          scene[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          scene[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            scene[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          scene[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          scene[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          scene[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not a write attribute of " + SCENE);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(SCENE);\n    });\n  }, SCENE, []);\n\n  mod[CANVAS_RENDERER] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_AUTO_CLEAR   = "autoClear";\n    var PROP_CLEAR_COLOR  = "clearColor";\n    var PROP_DOM_ELEMENT  = "domElement";\n    var PROP_GAMMA_INPUT  = "gammaInput";\n    var PROP_GAMMA_OUTPUT = "gammaOutput";\n    var PROP_SORT_OBJECTS = "sortObjects";\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = CANVAS_RENDERER;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[CANVAS_RENDERER](parameters);\n    });\n    $loc.setSize = new Sk.builtin.func(function(self, width, height) {\n      self.v.setSize(Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      var METHOD_RENDER = "render";\n      var METHOD_GET_CLEAR_COLOR = "getClearColor";\n      var METHOD_SET_CLEAR_COLOR = "setClearColor";\n      var METHOD_SET_SIZE        = "setSize";\n      var renderer  = Sk.ffi.remapToJs(self);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          return renderer[PROP_AUTO_CLEAR];\n        }\n        case PROP_GAMMA_INPUT: {\n          return renderer[PROP_GAMMA_INPUT];\n        }\n        case PROP_GAMMA_OUTPUT: {\n          return renderer[PROP_GAMMA_OUTPUT];\n        }\n        case PROP_SORT_OBJECTS: {\n          return renderer[PROP_SORT_OBJECTS];\n        }\n        case PROP_DOM_ELEMENT: {\n          // TODO: I think duck-typing means that this will work as long as we don\'t\n          // try to do anything more ambitious.\n          return {v: renderer.domElement};\n        }\n        case METHOD_RENDER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_RENDER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, scene, camera) {\n              scene  = Sk.ffi.remapToJs(scene);\n              camera = Sk.ffi.remapToJs(camera);\n              renderer.render(scene, camera);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n          }, METHOD_RENDER, []));\n        }\n        case METHOD_GET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(renderer.getClearColor(), COLOR));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n          }, METHOD_GET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color, alpha) {\n              color  = Sk.ffi.remapToJs(color);\n              alpha = Sk.ffi.remapToJs(alpha);\n              renderer.setClearColor(color, alpha);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n          }, METHOD_SET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_SIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_SIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, width, height, updateStyle) {\n              width  = Sk.ffi.remapToJs(width);\n              height = Sk.ffi.remapToJs(height);\n              updateStyle = Sk.ffi.remapToJs(updateStyle);\n              renderer.setSize(width, height, updateStyle);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n          }, METHOD_SET_SIZE, []));\n        }\n        default: {\n          // The framework will raise an AttributeError exception.\n          return /* undefined */;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(self, name, value) {\n      var renderer  = Sk.ffi.remapToJs(self);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          if (isBoolean(value)) {\n            renderer[PROP_AUTO_CLEAR] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_AUTO_CLEAR + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_INPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_INPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_INPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_OUTPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_OUTPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_OUTPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_SORT_OBJECTS: {\n          if (isBoolean(value)) {\n            renderer[PROP_SORT_OBJECTS] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_SORT_OBJECTS + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case "size": {\n          var width  = Sk.builtin.asnum$(value[0]);\n          var height = Sk.builtin.asnum$(value[1]);\n          renderer.setSize(width, height);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + CANVAS_RENDERER);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var args = {};\n      args[PROP_AUTO_CLEAR] = renderer[PROP_AUTO_CLEAR];\n      args[PROP_GAMMA_INPUT] = renderer[PROP_GAMMA_INPUT];\n      args[PROP_GAMMA_OUTPUT] = renderer[PROP_GAMMA_OUTPUT];\n      return new Sk.builtin.str(CANVAS_RENDERER + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var autoClear = renderer[PROP_AUTO_CLEAR];\n      // Note: The WebGLRenderer takes only one argument, but it is a dictionary.\n      var args = [{"autoClear": autoClear}];\n      return new Sk.builtin.str(CANVAS_RENDERER + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CANVAS_RENDERER, []);\n\n  mod[WEBGL_RENDERER] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_AUTO_CLEAR   = "autoClear";\n    var PROP_CLEAR_COLOR  = "clearColor";\n    var PROP_DOM_ELEMENT  = "domElement";\n    var PROP_GAMMA_INPUT  = "gammaInput";\n    var PROP_GAMMA_OUTPUT = "gammaOutput";\n    var PROP_SORT_OBJECTS = "sortObjects";\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = WEBGL_RENDERER;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[WEBGL_RENDERER](parameters);\n    });\n    $loc.setSize = new Sk.builtin.func(function(self, width, height) {\n      self.v.setSize(Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      var METHOD_RENDER = "render";\n      var METHOD_GET_CLEAR_COLOR = "getClearColor";\n      var METHOD_SET_CLEAR_COLOR = "setClearColor";\n      var METHOD_SET_SIZE        = "setSize";\n      var renderer  = Sk.ffi.remapToJs(self);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          return renderer[PROP_AUTO_CLEAR];\n        }\n        case PROP_GAMMA_INPUT: {\n          return renderer[PROP_GAMMA_INPUT];\n        }\n        case PROP_GAMMA_OUTPUT: {\n          return renderer[PROP_GAMMA_OUTPUT];\n        }\n        case PROP_SORT_OBJECTS: {\n          return renderer[PROP_SORT_OBJECTS];\n        }\n        case PROP_DOM_ELEMENT: {\n          // TODO: I think duck-typing means that this will work as long as we don\'t\n          // try to do anything more ambitious.\n          return {v: renderer.domElement};\n        }\n        case METHOD_RENDER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_RENDER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, scene, camera) {\n              scene  = Sk.ffi.remapToJs(scene);\n              camera = Sk.ffi.remapToJs(camera);\n              renderer.render(scene, camera);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n          }, METHOD_RENDER, []));\n        }\n        case METHOD_GET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(renderer.getClearColor()));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n          }, METHOD_GET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color, alpha) {\n              color  = Sk.ffi.remapToJs(color);\n              alpha = Sk.ffi.remapToJs(alpha);\n              renderer.setClearColor(color, alpha);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n          }, METHOD_SET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_SIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_SIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, width, height, updateStyle) {\n              width  = Sk.ffi.remapToJs(width);\n              height = Sk.ffi.remapToJs(height);\n              updateStyle = Sk.ffi.remapToJs(updateStyle);\n              renderer.setSize(width, height, updateStyle);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n          }, METHOD_SET_SIZE, []));\n        }\n        default: {\n          // The framework will raise an AttributeError exception.\n          return /* undefined */;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(self, name, value) {\n      var renderer  = Sk.ffi.remapToJs(self);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          if (isBoolean(value)) {\n            renderer[PROP_AUTO_CLEAR] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_AUTO_CLEAR + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_INPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_INPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_INPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_OUTPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_OUTPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_OUTPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_SORT_OBJECTS: {\n          if (isBoolean(value)) {\n            renderer[PROP_SORT_OBJECTS] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_SORT_OBJECTS + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case "size": {\n          var width  = Sk.builtin.asnum$(value[0]);\n          var height = Sk.builtin.asnum$(value[1]);\n          renderer.setSize(width, height);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + WEBGL_RENDERER);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var args = {};\n      args[PROP_AUTO_CLEAR] = renderer[PROP_AUTO_CLEAR];\n      args[PROP_GAMMA_INPUT] = renderer[PROP_GAMMA_INPUT];\n      args[PROP_GAMMA_OUTPUT] = renderer[PROP_GAMMA_OUTPUT];\n      return new Sk.builtin.str(WEBGL_RENDERER + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var autoClear = renderer[PROP_AUTO_CLEAR];\n      // Note: The WebGLRenderer takes only one argument, but it is a dictionary.\n      var args = [{"autoClear": autoClear}];\n      return new Sk.builtin.str(WEBGL_RENDERER + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, WEBGL_RENDERER, []);\n\n  mod[COLOR] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_R = "r";\n    var PROP_G = "g";\n    var PROP_B = "b";\n    $loc.__init__ = new Sk.builtin.func(function(self, value) {\n      value = Sk.ffi.remapToJs(value);\n      self.tp$name = COLOR;\n      if (isUndefined(value)) {\n        self.v = new THREE.Color();\n      }\n      else {\n        if (isNumber(value) || isString(value)) {\n          self.v = new THREE.Color(value);\n        }\n        else if (isColor(value)) {\n          self.v = new THREE.Color(value);\n        }\n        else {\n          throw new Sk.builtin.AssertionError("value must be either a number, string or Color.");\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(colorPy, name) {\n      var color = Sk.ffi.remapToJs(colorPy);\n      switch(name) {\n        case PROP_R: {\n          return Sk.builtin.assk$(color[PROP_R], Sk.builtin.nmber.float$);\n        }\n        case PROP_G: {\n          return Sk.builtin.assk$(color[PROP_G], Sk.builtin.nmber.float$);\n        }\n        case PROP_B: {\n          return Sk.builtin.assk$(color[PROP_B], Sk.builtin.nmber.float$);\n        }\n        case METHOD_SET_RGB: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_RGB;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, rPy, gPy, bPy) {\n              var r  = Sk.ffi.remapToJs(rPy);\n              var g  = Sk.ffi.remapToJs(gPy);\n              var b  = Sk.ffi.remapToJs(bPy);\n              color.setRGB(r, g, b);\n              return colorPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_RGB);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_RGB);\n            });\n          }, METHOD_SET_RGB, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(colorPy, name, valuePy) {\n      var color = Sk.ffi.remapToJs(colorPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_R: {\n          color[PROP_R] = value;\n        }\n        break;\n        case PROP_G: {\n          color[PROP_G] = value;\n        }\n        break;\n        case PROP_B: {\n          color[PROP_B] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + COLOR);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var color = self.v;\n      var args = {};\n      args[PROP_R] = color[PROP_R];\n      args[PROP_G] = color[PROP_G];\n      args[PROP_B] = color[PROP_B];\n      return new Sk.builtin.str(COLOR + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var color = self.v;\n      var r = color[PROP_R];\n      var g = color[PROP_G];\n      var b = color[PROP_B];\n      var args = [r, g, b];\n      return new Sk.builtin.str(COLOR + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, COLOR, []);\n\n  mod[PERSPECTIVE_CAMERA] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, fov, aspect, near, far) {\n      var fieldOfView = Sk.builtin.asnum$(fov)\n      var aspectRatio = Sk.builtin.asnum$(aspect)\n      var nearPlane = Sk.builtin.asnum$(near)\n      var farPlane = Sk.builtin.asnum$(far)\n      self.v = new THREE[PERSPECTIVE_CAMERA](fieldOfView, aspectRatio, nearPlane, farPlane);\n      self.tp$name = PERSPECTIVE_CAMERA;\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(cameraPy, name) {\n      camera = Sk.ffi.remapToJs(cameraPy);\n      var UPDATE_PROJECTION_MATRIX = "updateProjectionMatrix"\n      switch(name) {\n        case "aspect": {\n          return Sk.builtin.assk$(camera.aspect, Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_POSITION], EUCLIDEAN_3));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(camera[PROP_QUATERNION], QUATERNION));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_ROTATION], EUCLIDEAN_3));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(camera[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_SCALE], EUCLIDEAN_3));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_UP], EUCLIDEAN_3));\n        }\n        case PROP_USE_QUATERNION: {\n          return camera[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              camera.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return cameraPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case UPDATE_PROJECTION_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = UPDATE_PROJECTION_MATRIX;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              camera[name]();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n          }, UPDATE_PROJECTION_MATRIX, []));\n        }\n        default: {\n          return;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(cameraPy, name, valuePy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case "aspect": {\n          camera.aspect = value;\n        }\n        break;\n        case PROP_POSITION: {\n          camera[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          camera[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          camera[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            camera[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          camera[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          camera[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          camera[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AssertionError(name + " is not an attribute of " + PERSPECTIVE_CAMERA);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(PERSPECTIVE_CAMERA);\n    });\n  }, PERSPECTIVE_CAMERA, []);\n\n  mod[ORTHOGRAPHIC_CAMERA] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, leftPy, rightPy, topPy, bottomPy, nearPy, farPy) {\n      var left = Sk.builtin.asnum$(leftPy)\n      var right = Sk.builtin.asnum$(rightPy)\n      var top = Sk.builtin.asnum$(topPy)\n      var bottom = Sk.builtin.asnum$(bottomPy)\n      var near = Sk.builtin.asnum$(nearPy)\n      var far = Sk.builtin.asnum$(farPy)\n      self.v = new THREE[ORTHOGRAPHIC_CAMERA](left, right, top, bottom, near, far);\n      self.tp$name = ORTHOGRAPHIC_CAMERA;\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(cameraPy, name) {\n      camera = Sk.ffi.remapToJs(cameraPy);\n      var UPDATE_PROJECTION_MATRIX = "updateProjectionMatrix"\n      switch(name) {\n        case "aspect": {\n          return Sk.builtin.assk$(camera.aspect, Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(camera[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(camera[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return camera[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              camera.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return cameraPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case UPDATE_PROJECTION_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = UPDATE_PROJECTION_MATRIX;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              camera[name]();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n          }, UPDATE_PROJECTION_MATRIX, []));\n        }\n        default: {\n          return;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(cameraPy, name, valuePy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_LEFT: {\n          camera[PROP_LEFT] = value;\n        }\n        break;\n        case PROP_RIGHT: {\n          camera[PROP_RIGHT] = value;\n        }\n        break;\n        case PROP_TOP: {\n          camera[PROP_TOP] = value;\n        }\n        break;\n        case PROP_BOTTOM: {\n          camera[PROP_BOTTOM] = value;\n        }\n        break;\n        case PROP_POSITION: {\n          camera[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          camera[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          camera[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            camera[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          camera[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          camera[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          camera[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AssertionError(name + " is not an attribute of " + ORTHOGRAPHIC_CAMERA);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(cameraPy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var args = [camera[PROP_LEFT], camera[PROP_RIGHT], camera[PROP_TOP], camera[PROP_BOTTOM], camera[PROP_NEAR], camera[PROP_FAR]];\n      return new Sk.builtin.str(ORTHOGRAPHIC_CAMERA + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(ORTHOGRAPHIC_CAMERA);\n    });\n  }, ORTHOGRAPHIC_CAMERA, []);\n\n  mod[ARROW_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, length, segments, radiusShaft, radiusCone, lengthCone) {\n      length = Sk.ffi.remapToJs(length) || 1;\n      segments = Sk.ffi.remapToJs(segments);\n      radiusShaft = Sk.ffi.remapToJs(radiusShaft) || 0.01;\n      radiusCone = Sk.ffi.remapToJs(radiusCone) || 0.08;\n      lengthCone = Sk.ffi.remapToJs(lengthCone) || 0.2;\n      var lengthShaft = 1 - lengthCone;\n      var a = new THREE.Vector3(0, 0, length);\n      var b = new THREE.Vector3(radiusCone, 0, lengthShaft);\n      var c = new THREE.Vector3(radiusShaft, 0, lengthShaft);\n      var d = new THREE.Vector3(radiusShaft, 0, 0);\n      var e = new THREE.Vector3(0, 0, 0);\n      var points = [a, b, c, d, e];\n      self.v = new THREE.LatheGeometry(points, segments);\n      self.tp$name = ARROW_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_NAME: {\n          if (isString(value)) {\n            geometry[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + ARROW_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var geometry = Sk.ffi.remapToJs(self);\n      var args = {};\n      return new Sk.builtin.str(ARROW_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var geometry = Sk.ffi.remapToJs(self);\n      var args = [];\n      return new Sk.builtin.str(ARROW_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, ARROW_GEOMETRY, []);\n\n   mod[CIRCLE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, segments, thetaStart, thetaLength) {\n      radius      = numberFromArg(radius,          PROP_RADIUS,       CIRCLE_GEOMETRY);\n      segments    = numberFromIntegerArg(segments, PROP_SEGMENTS,     CIRCLE_GEOMETRY);\n      thetaStart  = numberFromArg(thetaStart,      PROP_THETA_START,  CIRCLE_GEOMETRY);\n      thetaLength = numberFromArg(thetaLength,     PROP_THETA_LENGTH, CIRCLE_GEOMETRY);\n      self.v = new THREE[CIRCLE_GEOMETRY](radius, segments, thetaStart, thetaLength);\n      self.tp$name = CIRCLE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CIRCLE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var args = {};\n      return new Sk.builtin.str(CIRCLE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var args = [];\n      return new Sk.builtin.str(CIRCLE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CIRCLE_GEOMETRY, []);\n\n   mod[CUBE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH           = "width";\n    var PROP_HEIGHT          = "height";\n    var PROP_DEPTH           = "depth";\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_DEPTH_SEGMENTS  = "depthSegments";\n    $loc.__init__ = new Sk.builtin.func(function(self, width, height, depth, widthSegments, heightSegments, depthSegments) {\n      width          = numberFromArg(width,                 PROP_WIDTH,           CUBE_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          CUBE_GEOMETRY);\n      depth          = numberFromArg(depth,                 PROP_DEPTH,           CUBE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  CUBE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, CUBE_GEOMETRY);\n      depthSegments  = numberFromIntegerArg(depthSegments,  PROP_DEPTH_SEGMENTS,  CUBE_GEOMETRY);\n      self.v = new THREE[CUBE_GEOMETRY](width, height, depth, widthSegments, heightSegments, depthSegments);\n      self.tp$name = CUBE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_WIDTH: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_DEPTH: {\n          return Sk.builtin.assk$(self.v[PROP_DEPTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_DEPTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_DEPTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CUBE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var cube = self.v;\n      var args = {};\n      args[PROP_WIDTH]  = cube[PROP_WIDTH];\n      args[PROP_HEIGHT] = cube[PROP_HEIGHT];\n      args[PROP_DEPTH]  = cube[PROP_DEPTH];\n      return new Sk.builtin.str(CUBE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var cube = self.v;\n      var width          = cube[PROP_WIDTH];\n      var height         = cube[PROP_HEIGHT];\n      var depth          = cube[PROP_DEPTH];\n      var widthSegments  = cube[PROP_WIDTH_SEGMENTS];\n      var heightSegments = cube[PROP_HEIGHT_SEGMENTS];\n      var depthSegments  = cube[PROP_DEPTH_SEGMENTS];\n      var args = [width, height, depth, widthSegments, heightSegments, depthSegments];\n      return new Sk.builtin.str(CUBE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CUBE_GEOMETRY, []);\n\n  mod[CYLINDER_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_RADIUS_TOP      = "radiusTop";\n    var PROP_RADIUS_BOTTOM   = "radiusBottom";\n    var PROP_HEIGHT          = "height";\n    var PROP_RADIUS_SEGMENTS = "radiusSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_OPEN_ENDED      = "openEnded";\n    $loc.__init__ = new Sk.builtin.func(function(self, radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded) {\n      radiusTop      = numberFromArg(radiusTop,             PROP_RADIUS_TOP,      CYLINDER_GEOMETRY);\n      radiusBottom   = numberFromArg(radiusBottom,          PROP_RADIUS_BOTTOM,   CYLINDER_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          CYLINDER_GEOMETRY);\n      radiusSegments = numberFromIntegerArg(radiusSegments, PROP_RADIUS_SEGMENTS, CYLINDER_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, CYLINDER_GEOMETRY);\n      openEnded      = Sk.ffi.remapToJs(openEnded);\n      self.v = new THREE[CYLINDER_GEOMETRY](radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded);\n      self.tp$name = CYLINDER_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS_TOP: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_TOP], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIUS_BOTTOM: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_BOTTOM], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIUS_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_OPEN_ENDED: {\n          return self.v[PROP_OPEN_ENDED];\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CYLINDER_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var cylinder = self.v;\n      var args = {};\n      args[PROP_RADIUS_TOP] = cylinder[PROP_RADIUS_TOP];\n      args[PROP_RADIUS_BOTTOM] = cylinder[PROP_RADIUS_BOTTOM];\n      args[PROP_HEIGHT] = cylinder[PROP_HEIGHT];\n      args[PROP_OPEN_ENDED] = cylinder[PROP_OPEN_ENDED];\n      // TODO: Need a Python.stringify because Boolean is {True, False} etc.\n      return new Sk.builtin.str(CYLINDER_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var cylinder = self.v;\n      var radiusTop      = cylinder[PROP_RADIUS_TOP];\n      var radiusBottom   = cylinder[PROP_RADIUS_BOTTOM];\n      var height         = cylinder[PROP_HEIGHT];\n      var radiusSegments = cylinder[PROP_RADIUS_SEGMENTS];\n      var heightSegments = cylinder[PROP_HEIGHT_SEGMENTS];\n      var openEnded      = cylinder[PROP_OPEN_ENDED];\n      var args = [radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded];\n      return new Sk.builtin.str(CYLINDER_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CYLINDER_GEOMETRY, []);\n\n  mod[LATHE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, pointsPy, segmentsPy, phiStart, phiLength) {\n      var points = Sk.ffi.remapToJs(pointsPy);\n      var segments = Sk.ffi.remapToJs(segmentsPy);\n      phiStart = Sk.ffi.remapToJs(phiStart);\n      phiLength = Sk.ffi.remapToJs(phiLength);\n      self.v = new THREE[LATHE_GEOMETRY](points, segments, phiStart, phiLength);\n      self.tp$name = LATHE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_NAME: {\n          if (isString(value)) {\n            geometry[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LATHE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var latheGeometry = self.v;\n      var args = {};\n      return new Sk.builtin.str(LATHE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var latheGeometry = self.v;\n      var args = [];\n      return new Sk.builtin.str(LATHE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, LATHE_GEOMETRY, []);\n\n  mod[ICOSAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, ICOSAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, ICOSAHEDRON_GEOMETRY);\n      self.v = new THREE[ICOSAHEDRON_GEOMETRY](radius, detail);\n      self.tp$name = ICOSAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + ICOSAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var icosahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = icosahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = icosahedron[PROP_DETAIL];\n      return new Sk.builtin.str(ICOSAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var icosahedron = self.v;\n      var radius = icosahedron[PROP_RADIUS];\n      var detail = icosahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(ICOSAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, ICOSAHEDRON_GEOMETRY, []);\n\n  mod[OCTAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_DETAIL = "detail";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, OCTAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, OCTAHEDRON_GEOMETRY);\n      self.v = new THREE[OCTAHEDRON_GEOMETRY](radius, detail);\n      self.v.radius = radius; // workaround for THREE not caching radius.\n      self.v.detail = detail; // workaround for THREE not caching detail.\n      self.tp$name = OCTAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + OCTAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var octahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = octahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = octahedron[PROP_DETAIL];\n      return new Sk.builtin.str(OCTAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var octahedron = self.v;\n      var radius = octahedron[PROP_RADIUS];\n      var detail = octahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(OCTAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, OCTAHEDRON_GEOMETRY, []);\n\n   mod[PLANE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH           = "width";\n    var PROP_HEIGHT          = "height";\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    $loc.__init__ = new Sk.builtin.func(function(self, width, height, widthSegments, heightSegments) {\n      width          = numberFromArg(width,                 PROP_WIDTH,           PLANE_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          PLANE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  PLANE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, PLANE_GEOMETRY);\n      self.v = new THREE[PLANE_GEOMETRY](width, height, widthSegments, heightSegments);\n      self.tp$name = PLANE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_WIDTH: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + PLANE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var plane = self.v;\n      var args = {};\n      args[PROP_WIDTH]  = plane[PROP_WIDTH];\n      args[PROP_HEIGHT] = plane[PROP_HEIGHT];\n      return new Sk.builtin.str(PLANE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var plane = self.v;\n      var width          = plane[PROP_WIDTH];\n      var height         = plane[PROP_HEIGHT];\n      var widthSegments  = plane[PROP_WIDTH_SEGMENTS];\n      var heightSegments = plane[PROP_HEIGHT_SEGMENTS];\n      var args = [width, height, widthSegments, heightSegments];\n      return new Sk.builtin.str(PLANE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, PLANE_GEOMETRY, []);\n\n   mod[SPHERE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_PHI_START       = "phiStart";\n    var PROP_PHI_LENGTH      = "phiLength";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength) {\n      radius         = numberFromArg(radius,                PROP_RADIUS,          SPHERE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  SPHERE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, SPHERE_GEOMETRY);\n      phiStart       = numberFromArg(phiStart,              PROP_PHI_START,       SPHERE_GEOMETRY);\n      phiLength      = numberFromArg(phiLength,             PROP_PHI_LENGTH,      SPHERE_GEOMETRY);\n      thetaStart     = numberFromArg(thetaStart,            PROP_THETA_START,     SPHERE_GEOMETRY);\n      thetaLength    = numberFromArg(thetaLength,           PROP_THETA_LENGTH,    SPHERE_GEOMETRY);\n      self.v = new THREE[SPHERE_GEOMETRY](radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength);\n      self.tp$name = SPHERE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_PHI_START: {\n          return Sk.builtin.assk$(self.v[PROP_PHI_START], Sk.builtin.nmber.float$);\n        }\n        case PROP_PHI_LENGTH: {\n          return Sk.builtin.assk$(self.v[PROP_PHI_LENGTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_THETA_START: {\n          return Sk.builtin.assk$(self.v[PROP_THETA_START], Sk.builtin.nmber.float$);\n        }\n        case PROP_THETA_LENGTH: {\n          return Sk.builtin.assk$(self.v[PROP_THETA_LENGTH], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + SPHERE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var radius = sphere[PROP_RADIUS];\n      var args = {};\n      args[PROP_RADIUS] = radius;\n      return new Sk.builtin.str(SPHERE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var radius         = sphere[PROP_RADIUS];\n      var widthSegments  = sphere[PROP_WIDTH_SEGMENTS];\n      var heightSegments = sphere[PROP_HEIGHT_SEGMENTS];\n      var phiStart       = sphere[PROP_PHI_START];\n      var phiLength      = sphere[PROP_PHI_LENGTH];\n      var thetaStart     = sphere[PROP_THETA_START];\n      var thetaLength    = sphere[PROP_THETA_LENGTH];\n      var args = [radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength];\n      return new Sk.builtin.str(SPHERE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, SPHERE_GEOMETRY, []);\n\n  mod[TETRAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_DETAIL = "detail";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, TETRAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, TETRAHEDRON_GEOMETRY);\n      self.v = new THREE[TETRAHEDRON_GEOMETRY](radius, detail);\n      self.v.radius = radius; // workaround for THREE not caching radius.\n      self.v.detail = detail; // workaround for THREE not caching detail.\n      self.tp$name = TETRAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TETRAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var tetrahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = tetrahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = tetrahedron[PROP_DETAIL];\n      return new Sk.builtin.str(TETRAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var tetrahedron = self.v;\n      var radius = tetrahedron[PROP_RADIUS];\n      var detail = tetrahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(TETRAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TETRAHEDRON_GEOMETRY, []);\n\n   mod[TEXT_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, text, parameters) {\n      text = Sk.ffi.remapToJs(text);\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[TEXT_GEOMETRY](text, parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TEXT_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var text = Sk.ffi.remapToJs(self);\n      var args = {};\n      return new Sk.builtin.str(TEXT_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var text = Sk.ffi.remapToJs(self);\n      var args = [];\n      return new Sk.builtin.str(TEXT_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TEXT_GEOMETRY, []);\n\n   mod[TORUS_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_TUBE             = "tube";\n    var PROP_RADIAL_SEGMENTS  = "radialSegments";\n    var PROP_TUBULAR_SEGMENTS = "tubularSegments";\n    var PROP_ARC              = "arc";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, tube, radialSegments, tubularSegments, arc) {\n      radius = numberFromArg(radius,                          PROP_RADIUS,           TORUS_GEOMETRY);\n      tube = numberFromArg(tube,                              PROP_TUBE,             TORUS_GEOMETRY);\n      radialSegments = numberFromIntegerArg(radialSegments,   PROP_RADIAL_SEGMENTS,  TORUS_GEOMETRY);\n      tubularSegments = numberFromIntegerArg(tubularSegments, PROP_TUBULAR_SEGMENTS, TORUS_GEOMETRY);\n      arc = numberFromArg(arc,                                PROP_ARC,              TORUS_GEOMETRY);\n      self.v = new THREE[TORUS_GEOMETRY](radius, tube, radialSegments, tubularSegments, arc);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_TUBE: {\n          return Sk.builtin.assk$(self.v[PROP_TUBE], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIAL_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIAL_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_TUBULAR_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_TUBULAR_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_ARC: {\n          return Sk.builtin.assk$(self.v[PROP_ARC], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TORUS_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var torus = self.v;\n      var args = {};\n      args[PROP_RADIUS] = torus[PROP_RADIUS];\n      args[PROP_TUBE]   = torus[PROP_TUBE];\n      args[PROP_ARC]    = torus[PROP_ARC];\n      return new Sk.builtin.str(TORUS_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var torus = self.v;\n      var radius          = torus[PROP_RADIUS];\n      var tube            = torus[PROP_TUBE];\n      var radialSegments  = torus[PROP_RADIAL_SEGMENTS];\n      var tubularSegments = torus[PROP_TUBULAR_SEGMENTS];\n      var arc             = torus[PROP_ARC];\n      var args = [radius, tube, radialSegments, tubularSegments, arc];\n      return new Sk.builtin.str(TORUS_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TORUS_GEOMETRY, []);\n\n   mod[GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy) {\n      if (isDefined(geometryPy)) {\n        self.v = Sk.ffi.remapToJs(geometryPy);\n        self.tp$name = geometryPy.tp$name;\n      }\n      else {\n        self.v = new THREE[GEOMETRY]();\n        self.tp$name = GEOMETRY;\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(geometryPy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      if (isDefined(geometry)) {\n        var args = {};\n        return new Sk.builtin.str(GEOMETRY + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + GEOMETRY + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(geometry) {\n      geometry = Sk.ffi.remapToJs(geometry);\n      var args = [];\n      return new Sk.builtin.str(GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, GEOMETRY, []);\n\n  mod[OBJECT_3D] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = OBJECT_3D;\n      self.v = new THREE[OBJECT_3D]();\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(objPy, name) {\n      var obj = Sk.ffi.remapToJs(objPy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(obj[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(obj[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return obj[PROP_USE_QUATERNION];\n        }\n        case METHOD_ADD: {\n          return methodAdd(obj);\n        }\n        case METHOD_REMOVE: {\n          return methodRemove(obj);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(obj, name, value) {\n      obj = Sk.ffi.remapToJs(obj);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_POSITION: {\n          obj[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          obj[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          obj[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            obj[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          obj[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          obj[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          obj[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + OBJECT_3D);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(obj) {\n      obj = Sk.ffi.remapToJs(obj);\n      if (isDefined(obj)) {\n        var args = {};\n        return new Sk.builtin.str(OBJECT_3D + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + OBJECT_3D + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(obj) {\n      obj = Sk.ffi.remapToJs(obj);\n      var args = [];\n      return new Sk.builtin.str(OBJECT_3D + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, OBJECT_3D, []);\n\n  mod[AMBIENT_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, color) {\n      self.tp$name = AMBIENT_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      self.v = new THREE[AMBIENT_LIGHT](color);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(lightPy, name, valuePy) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + AMBIENT_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        return new Sk.builtin.str(AMBIENT_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + AMBIENT_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR]];\n      return new Sk.builtin.str(AMBIENT_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, AMBIENT_LIGHT, []);\n\n  mod[DIRECTIONAL_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_INTENSITY = "intensity";\n    var PROP_DISTANCE = "distance";\n    $loc.__init__ = new Sk.builtin.func(function(self, color, intensity, distance) {\n      self.tp$name = DIRECTIONAL_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      intensity = Sk.ffi.remapToJs(intensity);\n      distance = Sk.ffi.remapToJs(distance);\n      self.v = new THREE[DIRECTIONAL_LIGHT](color, intensity, distance);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n        case PROP_DISTANCE: {\n          return Sk.builtin.nmber(light[PROP_DISTANCE], Sk.builtin.nmber.float$);\n        }\n        case PROP_INTENSITY: {\n          return Sk.builtin.nmber(light[PROP_INTENSITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(light[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(light[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return light[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              light.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return lightPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(light, name, value) {\n      light = Sk.ffi.remapToJs(light);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_DISTANCE: {\n          if (isNumber(value)) {\n            light[PROP_DISTANCE] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_DISTANCE + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_INTENSITY: {\n          if (isNumber(value)) {\n            light[PROP_INTENSITY] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_INTENSITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          light[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          light[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          light[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            light[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          light[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          light[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          light[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + DIRECTIONAL_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        args[PROP_INTENSITY] = light[PROP_INTENSITY];\n        args[PROP_DISTANCE] = light[PROP_DISTANCE];\n        return new Sk.builtin.str(DIRECTIONAL_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + DIRECTIONAL_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR], light[PROP_INTENSITY], light[PROP_DISTANCE]];\n      return new Sk.builtin.str(DIRECTIONAL_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, DIRECTIONAL_LIGHT, []);\n\n  mod[POINT_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_INTENSITY = "intensity";\n    var PROP_DISTANCE = "distance";\n    $loc.__init__ = new Sk.builtin.func(function(self, color, intensity, distance) {\n      self.tp$name = POINT_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      intensity = Sk.ffi.remapToJs(intensity);\n      distance = Sk.ffi.remapToJs(distance);\n      self.v = new THREE[POINT_LIGHT](color, intensity, distance);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n        case PROP_DISTANCE: {\n          return Sk.builtin.nmber(light[PROP_DISTANCE], Sk.builtin.nmber.float$);\n        }\n        case PROP_INTENSITY: {\n          return Sk.builtin.nmber(light[PROP_INTENSITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(light[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(light[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return light[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              light.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return lightPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(light, name, value) {\n      light = Sk.ffi.remapToJs(light);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_DISTANCE: {\n          if (isNumber(value)) {\n            light[PROP_DISTANCE] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_DISTANCE + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_INTENSITY: {\n          if (isNumber(value)) {\n            light[PROP_INTENSITY] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_INTENSITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          light[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          light[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          light[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            light[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          light[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          light[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          light[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + POINT_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        args[PROP_INTENSITY] = light[PROP_INTENSITY];\n        args[PROP_DISTANCE] = light[PROP_DISTANCE];\n        return new Sk.builtin.str(POINT_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + POINT_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR], light[PROP_INTENSITY], light[PROP_DISTANCE]];\n      return new Sk.builtin.str(POINT_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, POINT_LIGHT, []);\n\n  mod[LINE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy, materialPy, typePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy)\n      var material = Sk.ffi.remapToJs(materialPy)\n      var type = Sk.ffi.remapToJs(typePy)\n      self.v = new THREE[LINE](geometry, material, type);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(linePy, name) {\n      var line = Sk.ffi.remapToJs(linePy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(line[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(line[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return line[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              line.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return linePy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case PROP_TYPE: {\n          return Sk.builtin.nmber(line[PROP_TYPE], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(linePy, name, value) {\n      var line = Sk.ffi.remapToJs(linePy);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_TYPE: {\n          if (isNumber(value)) {\n            line[PROP_TYPE] = value;\n          }\n          else {\n            throw new Error(PROP_TYPE + " must be either LineStrip or LinePieces");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LINE);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(LINE);\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(LINE);\n    });\n  }, LINE, []);\n\n  mod[LINE_BASIC_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = LINE_BASIC_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[LINE_BASIC_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(material, name) {\n      material = Sk.ffi.remapToJs(material);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(material, name, value) {\n      material = Sk.ffi.remapToJs(material);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          if (isColor(value)) {\n            material.color = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'" + COLOR + "\'>.");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LINE_BASIC_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      args[PROP_COLOR] = material[PROP_COLOR];\n      args[PROP_OPACITY] = material[PROP_OPACITY];\n      return new Sk.builtin.str(LINE_BASIC_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(LINE_BASIC_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, LINE_BASIC_MATERIAL, []);\n\n  mod[MESH] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy, materialPy) {\n      self.tp$name = MESH;\n      self.v = new THREE[MESH](Sk.ffi.remapToJs(geometryPy), Sk.ffi.remapToJs(materialPy));\n      self.v[PROP_MASS] = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n      self.v[PROP_VELOCITY] = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(meshPy, name) {\n      var mesh = Sk.ffi.remapToJs(meshPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(mesh[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_GEOMETRY: {\n          var geometry = mesh[PROP_GEOMETRY];\n          return Sk.misceval.callsim(mod[GEOMETRY], Sk.ffi.referenceToPy(mesh[PROP_GEOMETRY]));\n        }\n        case PROP_MASS: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_MASS]));\n        }\n        case PROP_MATRIX_AUTO_UPDATE: {\n          return mesh[PROP_MATRIX_AUTO_UPDATE];\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(mesh[PROP_NAME]);\n        }\n        case PROP_OVERDRAW: {\n          if (isBoolean(mesh[PROP_OVERDRAW])) {\n            return mesh[PROP_OVERDRAW];\n          }\n          else {\n            return null;\n          }\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(mesh[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(mesh[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return mesh[PROP_USE_QUATERNION];\n        }\n        case PROP_VELOCITY: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_VELOCITY]));\n        }\n        case PROP_VISIBLE: {\n          return mesh[PROP_VISIBLE];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              mesh.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return meshPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case METHOD_SET_GEOMETRY: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_GEOMETRY;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, geometryPy) {\n              var geometry = Sk.ffi.remapToJs(geometryPy);\n              mesh[METHOD_SET_GEOMETRY](geometry);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_GEOMETRY)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_GEOMETRY)\n            })\n          }, METHOD_SET_GEOMETRY, []));\n        }\n        case METHOD_UPDATE_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_UPDATE_MATRIX;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              mesh[METHOD_UPDATE_MATRIX]();\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_UPDATE_MATRIX)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_UPDATE_MATRIX)\n            })\n          }, METHOD_UPDATE_MATRIX, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(mesh, name, value) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_MASS: {\n          if (isNumber(value)) {\n            mesh[PROP_MASS] = multiVector3(value, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n          }\n          else {\n            mesh[PROP_MASS] = value;\n          }\n        }\n        break;\n        case PROP_MATRIX_AUTO_UPDATE: {\n          if (isBoolean(value)) {\n            mesh[PROP_MATRIX_AUTO_UPDATE] = value;\n          }\n          else {\n            throw new Error(PROP_MATRIX_AUTO_UPDATE + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            mesh[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            mesh[PROP_OVERDRAW] = value;\n          }\n          else if (isNull(value)) {\n            mesh[PROP_OVERDRAW] = null;\n          }\n          else {\n            throw new Error(name + " must be either Boolean or None");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          mesh[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          mesh[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          mesh[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            mesh[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          mesh[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          mesh[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          mesh[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        case PROP_VELOCITY: {\n          mesh[PROP_VELOCITY] = value;\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            mesh[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(PROP_VISIBLE + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mesh) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      var args = {};\n      args[PROP_ID] = mesh[PROP_ID];\n      args[PROP_NAME] = mesh[PROP_NAME];\n      return new Sk.builtin.str(MESH + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mesh) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      var args = [/*mesh[PROP_GEOMETRY], mesh[PROP_MATERIAL]*/];\n      return new Sk.builtin.str(MESH + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH, []);\n\n  mod[MESH_BASIC_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_BASIC_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_BASIC_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(materialPy, name) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(material[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(material[PROP_NAME]);\n        }\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_NEEDS_UPDATE: {\n          return material[PROP_NEEDS_UPDATE];\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_OVERDRAW: {\n          return material[PROP_OVERDRAW];\n        }\n        case PROP_TRANSPARENT: {\n          return material[PROP_TRANSPARENT];\n        }\n        case PROP_WIREFRAME: {\n          return material[PROP_WIREFRAME];\n        }\n        case PROP_WIREFRAME_LINEWIDTH: {\n          return Sk.builtin.nmber(material[PROP_WIREFRAME_LINEWIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_VISIBLE: {\n          return material[PROP_VISIBLE];\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          material[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            material[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_NEEDS_UPDATE: {\n          if (isBoolean(value)) {\n            material[PROP_NEEDS_UPDATE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            material[PROP_OVERDRAW] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_TRANSPARENT: {\n          if (isBoolean(value)) {\n            material[PROP_TRANSPARENT] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME: {\n          if (isBoolean(value)) {\n            material[PROP_WIREFRAME] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME_LINEWIDTH: {\n          if (isNumber(value)) {\n            material[PROP_WIREFRAME_LINEWIDTH] = value;\n          }\n          else {\n            throw new Error(name + " must be a number");\n          }\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            material[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_BASIC_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(materialPy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var args = {};\n      args[PROP_COLOR] = material[PROP_COLOR];\n      args[PROP_WIREFRAME] = material[PROP_WIREFRAME];\n      args[PROP_WIREFRAME_LINEWIDTH] = material[PROP_WIREFRAME_LINEWIDTH];\n      return new Sk.builtin.str(MESH_BASIC_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var parameters = {};\n      parameters[PROP_COLOR] = material[PROP_COLOR];\n      parameters[PROP_WIREFRAME] = material[PROP_WIREFRAME];\n      parameters[PROP_WIREFRAME_LINEWIDTH] = material[PROP_WIREFRAME_LINEWIDTH];\n      var args = [parameters];\n      return new Sk.builtin.str(MESH_BASIC_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_BASIC_MATERIAL, []);\n\n  mod[MESH_LAMBERT_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_LAMBERT_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_LAMBERT_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(materialPy, name) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(material[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(material[PROP_NAME]);\n        }\n        case PROP_NEEDS_UPDATE: {\n          return material[PROP_NEEDS_UPDATE];\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_OVERDRAW: {\n          return material[PROP_OVERDRAW];\n        }\n        case PROP_TRANSPARENT: {\n          return material[PROP_TRANSPARENT];\n        }\n        case PROP_VISIBLE: {\n          return material[PROP_VISIBLE];\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          material[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            material[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_NEEDS_UPDATE: {\n          if (isBoolean(value)) {\n            material[PROP_NEEDS_UPDATE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            material[PROP_OVERDRAW] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_TRANSPARENT: {\n          if (isBoolean(value)) {\n            material[PROP_TRANSPARENT] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME: {\n          if (isBoolean(value)) {\n            material[PROP_WIREFRAME] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME_LINEWIDTH: {\n          if (isNumber(value)) {\n            material[PROP_WIREFRAME_LINEWIDTH] = value;\n          }\n          else {\n            throw new Error(name + " must be a number");\n          }\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            material[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_LAMBERT_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_LAMBERT_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var parameters = {};\n      parameters[PROP_COLOR] = material[PROP_COLOR];\n      var args = [parameters];\n      return new Sk.builtin.str(MESH_LAMBERT_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_LAMBERT_MATERIAL, []);\n\n  mod[MESH_NORMAL_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_NORMAL_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_NORMAL_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_NORMAL_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_NORMAL_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(MESH_NORMAL_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_NORMAL_MATERIAL, []);\n\n  mod[MESH_PHONG_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_PHONG_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_PHONG_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_PHONG_MATERIAL);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_PHONG_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_PHONG_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(MESH_PHONG_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_PHONG_MATERIAL, []);\n\n  if (typeof THREE !== \'undefined\') {\n    mod.LineStrip  = Sk.builtin.assk$(THREE.LineStrip,  Sk.builtin.nmber.int$);\n    mod.LinePieces = Sk.builtin.assk$(THREE.LinePieces, Sk.builtin.nmber.int$);\n\n    mod.FlatShading   = Sk.builtin.assk$(THREE.FlatShading,   Sk.builtin.nmber.int$);\n    mod.NoShading     = Sk.builtin.assk$(THREE.NoShading,     Sk.builtin.nmber.int$);\n    mod.SmoothShading = Sk.builtin.assk$(THREE.SmoothShading, Sk.builtin.nmber.int$);\n  }\n\n  mod[SCALAR_3] = new Sk.builtin.func(function(w) {\n    w = Sk.ffi.remapToJs(w);\n    return remapE3ToPy(w, 0, 0, 0, 0, 0, 0, 0);\n  });\n\n  mod[VECTOR_3] = new Sk.builtin.func(function(x, y, z) {\n    x = Sk.ffi.remapToJs(x);\n    y = Sk.ffi.remapToJs(y);\n    z = Sk.ffi.remapToJs(z);\n    return remapE3ToPy(0, x, y, z, 0, 0, 0, 0);\n  });\n\n  mod[BIVECTOR_3] = new Sk.builtin.func(function(xy, yz, zx) {\n    xy = Sk.ffi.remapToJs(xy);\n    yz = Sk.ffi.remapToJs(yz);\n    zx = Sk.ffi.remapToJs(zx);\n    return remapE3ToPy(0, 0, 0, 0, xy, yz, zx, 0);\n  });\n\n  mod[PSEUDOSCALAR_3] = new Sk.builtin.func(function(xyz) {\n    xyz = Sk.ffi.remapToJs(xyz);\n    return remapE3ToPy(0, 0, 0, 0, 0, 0, 0, xyz);\n  });\n\n  return mod;\n}\n',"src/lib/webgl/primitives.js":"// most of this file is from 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n\n\n    /**\n     * AttribBuffer manages a TypedArray as an array of vectors.\n     *\n     * @param {number} numComponents Number of components per\n     *     vector.\n     * @param {number|!Array.<number>} numElements Number of vectors or the data.\n     * @param {string} opt_type The type of the TypedArray to\n     *     create. Default = 'Float32Array'.\n     * @param {!Array.<number>} opt_data The data for the array.\n     */\n    var AttribBuffer = function(\n            numComponents, numElements, opt_type) {\n        opt_type = opt_type || 'Float32Array';\n        var type = window[opt_type];\n        if (numElements.length) {\n            this.buffer = new type(numElements);\n            numElements = this.buffer.length / numComponents;\n            this.cursor = numElements;\n        } else {\n            this.buffer = new type(numComponents * numElements);\n            this.cursor = 0;\n        }\n        this.numComponents = numComponents;\n        this.numElements = numElements;\n        this.type = opt_type;\n    };\n\n    AttribBuffer.prototype.stride = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.offset = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.getElement = function(index) {\n        var offset = index * this.numComponents;\n        var value = [];\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            value.push(this.buffer[offset + ii]);\n        }\n        return value;\n    };\n\n    AttribBuffer.prototype.setElement = function(index, value) {\n        var offset = index * this.numComponents;\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            this.buffer[offset + ii] = value[ii];\n        }\n    };\n\n    AttribBuffer.prototype.clone = function() {\n        var copy = new AttribBuffer(\n                this.numComponents, this.numElements, this.type);\n        copy.pushArray(this);\n        return copy;\n    }\n\n    AttribBuffer.prototype.push = function(value) {\n        this.setElement(this.cursor++, value);\n    };\n\n    AttribBuffer.prototype.pushArray = function(array) {\n        //  this.buffer.set(array, this.cursor * this.numComponents);\n        //  this.cursor += array.numElements;\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            this.push(array.getElement(ii));\n        }\n    };\n\n    AttribBuffer.prototype.pushArrayWithOffset =\n    function(array, offset) {\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            var elem = array.getElement(ii);\n            for (var jj = 0; jj < offset.length; ++jj) {\n                elem[jj] += offset[jj];\n            }\n            this.push(elem);\n        }\n    };\n\n    /**\n    * Computes the extents\n    * @param {!AttribBuffer} positions The positions\n    * @return {!{min: !tdl.math.Vector3, max:!tdl.math.Vector3}}\n    *     The min and max extents.\n    */\n    AttribBuffer.prototype.computeExtents = function() {\n        var numElements = this.numElements;\n        var numComponents = this.numComponents;\n        var minExtent = this.getElement(0);\n        var maxExtent = this.getElement(0);\n        for (var ii = 1; ii < numElements; ++ii) {\n            var element = this.getElement(ii);\n            for (var jj = 0; jj < numComponents; ++jj) {\n                minExtent[jj] = Math.min(minExtent[jj], element[jj]);\n                maxExtent[jj] = Math.max(maxExtent[jj], element[jj]);\n            }\n        }\n        return {min: minExtent, max: maxExtent};\n    };\n\n\n    /**\n     * Creates the vertices and indices for a cube. The\n     * cube will be created around the origin. (-size / 2, size / 2)\n     *\n     * @param {number} size Width, height and depth of the cube.\n     * @return {!Object.<string, !tdl.primitives.AttribBuffer>} The\n     *         created plane vertices.\n     */\n    mod.createCube = new Sk.builtin.func(function(size)\n            {\n                var CUBE_FACE_INDICES_ = [\n                    [3, 7, 5, 1],\n                    [0, 4, 6, 2],\n                    [6, 7, 3, 2],\n                    [0, 1, 5, 4],\n                    [5, 7, 6, 4],\n                    [2, 3, 1, 0]\n                ];\n\n                var k = size / 2;\n\n                var cornerVertices = [\n                        [-k, -k, -k],\n                        [+k, -k, -k],\n                        [-k, +k, -k],\n                        [+k, +k, -k],\n                        [-k, -k, +k],\n                        [+k, -k, +k],\n                        [-k, +k, +k],\n                        [+k, +k, +k]\n                    ];\n\n                var faceNormals = [\n                        [+1, +0, +0],\n                        [-1, +0, +0],\n                        [+0, +1, +0],\n                        [+0, -1, +0],\n                        [+0, +0, +1],\n                        [+0, +0, -1]\n                    ];\n\n                var uvCoords = [\n                        [0, 0],\n                        [1, 0],\n                        [1, 1],\n                        [0, 1]\n                    ];\n\n                var numVertices = 6 * 4;\n                var positions = new AttribBuffer(3, numVertices);\n                var normals = new AttribBuffer(3, numVertices);\n                var texCoords = new AttribBuffer(2, numVertices);\n                var indices = new AttribBuffer(3, 6 * 2, 'Uint16Array');\n\n                for (var f = 0; f < 6; ++f) {\n                    var faceIndices = CUBE_FACE_INDICES_[f];\n                    for (var v = 0; v < 4; ++v) {\n                        var position = cornerVertices[faceIndices[v]];\n                        var normal = faceNormals[f];\n                        var uv = uvCoords[v];\n\n                        // Each face needs all four vertices because the normals and texture\n                        // coordinates are not all the same.\n                        positions.push(position);\n                        normals.push(normal);\n                        texCoords.push(uv);\n\n                    }\n                    // Two triangles make a square face.\n                    var offset = 4 * f;\n                    indices.push([offset + 0, offset + 1, offset + 2]);\n                    indices.push([offset + 0, offset + 2, offset + 3]);\n                }\n\n                return {\n                        position: positions,\n                        normal: normals,\n                        texCoord: texCoords,\n                        indices: indices\n                };\n            });\n\n    return mod;\n};\n","src/lib/document/__init__.js":"var $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.getElementById = new Sk.builtin.func(function(id) {\n        var result = document.getElementById(id.v);\n        if (result) {\n            return Sk.misceval.callsim(mod.Element,result);\n        }\n        return Sk.builtin.none.none$;\n    });\n\n    mod.createElement = new Sk.builtin.func(function(eName) {\n            var r = document.createElement(eName.v);\n            if (r) {\n                return Sk.misceval.callsim(mod.Element,r);\n            }\n        });\n\n\n    mod.getElementsByTagName = new Sk.builtin.func(function(tag) {\n        var r = document.getElementsByTagName(tag.v)\n        var reslist = [];\n        for (var i = r.length - 1; i >= 0; i--) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]))\n        }\n        return new Sk.builtin.list(reslist)\n    });\n\n    mod.getElementsByClassName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByClassName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n    \n    mod.getElementsByName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n        \n    mod.currentDiv = new Sk.builtin.func(function() {\n        if (Sk.divid !== undefined) {\n            return new Sk.builtin.str(Sk.divid)\n        }\n        else {\n            throw new Sk.builtin.AttributeError(\"There is no value set for divid\");\n        }\n    })\n    var elementClass = function($gbl, $loc) {\n        /*\n            Notes:  self['$d'] is the dictionary used by the GenericGetAttr mechanism for an object.\n                    for various reasons  if you create a class in Javascript and have self.xxxx instance\n                    variables, you cannot say instance.xxx and get the value of the instance variable unless \n                    it is stored in the self['$d'] object.  This seems like a duplication of storage to me\n                    but that is how it works right now  (5/2013)\n\n                    Writing your own __getattr__ is also an option but this gets very tricky when an attr is \n                    a method...\n        */\n        $loc.__init__ = new Sk.builtin.func(function(self,elem) {\n            self.v = elem\n            self.innerHTML = elem.innerHTML\n            self.innerText = elem.innerText\n            if (elem.value !== undefined) {\n                self.value = elem.value\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('value'), new Sk.builtin.str(self.value))                \n            }\n\n            if (elem.checked !== undefined) {\n                self.checked = elem.checked\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('checked'), new Sk.builtin.str(self.checked))                \n            }\n\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), new Sk.builtin.str(self.innerHTML))\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), new Sk.builtin.str(self.innerText))            \n\n        })\n\n        $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n        $loc.__setattr__ = new Sk.builtin.func(function(self,key,value) {\n            if (key === 'innerHTML') {\n                self.innerHTML = value\n                self.v.innerHTML = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), value)                \n            }\n            if (key === 'innerText') {\n                self.innerText = value\n                self.v.innerText = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), value)            \n            }\n        });\n\n\n        $loc.appendChild = new Sk.builtin.func(function(self,ch) {\n            self.v.appendChild(ch.v);\n        });\n\n        $loc.removeChild = new Sk.builtin.func(function(self,node) {\n            self.v.removeChild(node.v)\n        })\n\n        // getCSS\n                    \n        $loc.getCSS = new Sk.builtin.func(function(self,key) {\n            return new Sk.builtin.str(self.v.style[key.v]);\n        });\n    \n\n        $loc.setCSS = new Sk.builtin.func(function(self,attr,value) {\n            self.v.style[attr.v] = value.v\n\n        })\n\n        $loc.getAttribute = new Sk.builtin.func(function(self,key) {\n            var res = self.v.getAttribute(key.v)\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.setAttribute = new Sk.builtin.func(function(self,attr,value) {\n                self.v.setAttribute(attr.v,value.v)\n        });\n            \n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            console.log(self.v.tagName);\n            return new Sk.builtin.str(self.v.tagName)\n        })\n\n        $loc.__repr__ = new Sk.builtin.func(function(self) {\n            return new Sk.builtin.str('[DOM Element]')\n        })\n\n    \n    };\n\n    mod.Element = Sk.misceval.buildClass(mod,elementClass,'Element', []);\n\n    return mod;\n\n}   ","src/lib/re/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // Constants (mostly unsupported)\n    mod.I = 2;\n    mod.IGNORECASE = 2;\n    // mod.L = 4;\n    // mod.LOCALE = 4;\n    mod.M = 8;\n    mod.MULTILINE = 8;\n    // mod.S = 16;\n    // mod.DOTALL = 16;\n    // mod.U = 32;\n    // mod.UNICODE = 32;\n    // mod.X = 64;\n    // mod.VERBOSE = 64;\n\n    var validGroups = ["(?:", "(?=", "(?!"];\n\n    var convert = function(pattern) {\n        var newpattern;\n        var match;\n        var i;\n\n        // Look for disallowed constructs\n        match = pattern.match(/\\(\\?./g);\n        if (match) {\n            for (i=0; i<match.length; i++) {\n                if (validGroups.indexOf(match[i]) == -1) {\n                    throw new Sk.builtin.ValueError("Disallowed group in pattern: \'"\n                                                    + match[i] + "\'");\n                };\n            };\n        };\n\n        newpattern = pattern.replace(\'/\\\\/g\', \'\\\\\\\\\');\n        newpattern = pattern.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n\n        return newpattern;\n    };\n\n    var getFlags = function(flags) {\n        var jsflags = "g";\n        if ((flags & mod.IGNORECASE) == mod.IGNORECASE) {\n            jsflags += "i";\n        };\n        if ((flags & mod.MULTILINE) == mod.MULTILINE) {\n            jsflags += "m";\n        }; \n        return jsflags;\n    };\n\n    mod.split = Sk.nativejs.func(function split(pattern, string, maxsplit, flags) {\n        Sk.builtin.pyCheckArgs("split", arguments, 2, 4);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (maxsplit === undefined) {\n            maxsplit = 0;\n        };\n        if (!Sk.builtin.checkNumber(maxsplit)) {\n            throw new Sk.builtin.TypeError("maxsplit must be a number");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n	maxsplit = Sk.builtin.asnum$(maxsplit);\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var captured = !(pat.match(/^\\(.*\\)$/) === null);\n        //print("Captured: ", captured);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        var result = [];\n        var match;\n        var index = 0;\n        var splits = 0;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            if (match.index === regex.lastIndex) {\n                // empty match\n                break;\n            };\n            result.push(new Sk.builtin.str(str.substring(index, match.index)));\n            if (captured) {\n                // Add matching pattern, too\n                result.push(new Sk.builtin.str(match[0]));\n            };\n            index = regex.lastIndex;\n            splits += 1;\n            if (maxsplit && (splits >= maxsplit)) {\n                break;\n            };\n        };\n        result.push(new Sk.builtin.str(str.substring(index)));\n\n        return new Sk.builtin.list(result);\n    });\n\n    mod.findall = Sk.nativejs.func(function findall(pattern, string, flags) {\n        Sk.builtin.pyCheckArgs("findall", arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n	var newline_at_end = new RegExp(/\\n$/);\n	if (str.match(newline_at_end)) {\n	    str = str.slice(0,-1);\n	}\n\n        var result = [];\n        var match;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            // print("match: " + JSON.stringify(match));\n            if (match.length < 2) {\n                result.push(new Sk.builtin.str(match[0]));\n            } else if (match.length == 2) {\n                result.push(new Sk.builtin.str(match[1]));\n            } else {\n                var groups = [];\n                for (var i=1; i<match.length; i++) {\n                    groups.push(new Sk.builtin.str(match[i]));  \n                };\n                result.push(new Sk.builtin.tuple(groups));\n            };\n            if (match.index === regex.lastIndex) {\n                regex.lastIndex += 1;\n            };\n        };\n\n        return new Sk.builtin.list(result);\n    });\n\n\n    var matchobj = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,thematch, pattern, string) {\n            self.thematch = thematch;\n	    self.re = pattern;\n	    self.string = string;\n        });\n\n	$loc.groups = new Sk.builtin.func(function(self) {\n	    return new Sk.builtin.tuple(self.thematch.v.slice(1))\n	});\n\n	$loc.group = new Sk.builtin.func(function(self,grpnum) {\n		grpnum = Sk.builtin.asnum$(grpnum);\n	    if(grpnum >= self.thematch.v.length) {\n		throw new Sk.builtin.IndexError("Index out of range: " + grpnum);\n		}\n	    return self.thematch.v[grpnum]\n	});\n\n    }\n\n    mod.MatchObject = Sk.misceval.buildClass(mod, matchobj, \'MatchObject\', []);\n\n    // Internal function to return a Python list of strings \n    // From a JS regular expression string\n    mod._findre = function(res, string) {\n	res = res.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n        var re = eval(res);\n	var patt = new RegExp(\'\\n$\');\n	if (string.v.match(patt))\n	    var matches = string.v.slice(0,-1).match(re);\n	else\n            var matches = string.v.match(re);\n        retval = new Sk.builtin.list();\n        if ( matches == null ) return retval;\n        for (var i = 0; i < matches.length; ++i) {\n            var sitem = new Sk.builtin.str(matches[i]);\n            retval.v.push(sitem);\n        }\n        return retval;\n    }\n\n    mod.search = new Sk.builtin.func(function(pattern, string, flags) {\n	Sk.builtin.pyCheckArgs(\'search\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n	if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    mod.match = new Sk.builtin.func(function(pattern, string, flags) {\n	Sk.builtin.pyCheckArgs(\'match\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n	if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/^"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    return mod;\n}\n',"src/lib/urllib/__init__.js":"var $builtinmodule = function(name)\n{\n  var urllib = {};\n\n  return urllib;\n};\n","src/lib/random/__init__.js":'\n/*\n  I\'ve wrapped Makoto Matsumoto and Takuji Nishimura\'s code in a namespace\n  so it\'s better encapsulated. Now you can have multiple random number generators\n  and they won\'t stomp all over eachother\'s state.\n  \n  If you want to use this as a substitute for Math.random(), use the random()\n  method like so:\n  \n  var m = new MersenneTwister();\n  var randomNumber = m.random();\n  \n  You can also call the other genrand_{foo}() methods on the instance.\n\n  If you want to use a specific seed in order to get a repeatable random\n  sequence, pass an integer into the constructor:\n\n  var m = new MersenneTwister(123);\n\n  and that will always produce the same random sequence.\n\n  Sean McCullough (banksean@gmail.com)\n*/\n\n/* \n   A C-program for MT19937, with initialization improved 2002/1/26.\n   Coded by Takuji Nishimura and Makoto Matsumoto.\n \n   Before using, initialize the state by using init_genrand(seed)  \n   or init_by_array(init_key, key_length).\n \n   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,\n   All rights reserved.                          \n \n   Redistribution and use in source and binary forms, with or without\n   modification, are permitted provided that the following conditions\n   are met:\n \n     1. Redistributions of source code must retain the above copyright\n        notice, this list of conditions and the following disclaimer.\n \n     2. Redistributions in binary form must reproduce the above copyright\n        notice, this list of conditions and the following disclaimer in the\n        documentation and/or other materials provided with the distribution.\n \n     3. The names of its contributors may not be used to endorse or promote \n        products derived from this software without specific prior written \n        permission.\n \n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n \n   Any feedback is very welcome.\n   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html\n   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)\n*/\n\nvar MersenneTwister = function(seed) {\n  if (seed == undefined) {\n    seed = new Date().getTime();\n  } \n  /* Period parameters */  \n  this.N = 624;\n  this.M = 397;\n  this.MATRIX_A = 0x9908b0df;   /* constant vector a */\n  this.UPPER_MASK = 0x80000000; /* most significant w-r bits */\n  this.LOWER_MASK = 0x7fffffff; /* least significant r bits */\n \n  this.mt = new Array(this.N); /* the array for the state vector */\n  this.mti=this.N+1; /* mti==N+1 means mt[N] is not initialized */\n\n  this.init_genrand(seed);\n}  \n \n/* initializes mt[N] with a seed */\nMersenneTwister.prototype.init_genrand = function(s) {\n  this.mt[0] = s >>> 0;\n  for (this.mti=1; this.mti<this.N; this.mti++) {\n      var s = this.mt[this.mti-1] ^ (this.mt[this.mti-1] >>> 30);\n   this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253)\n  + this.mti;\n      /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */\n      /* In the previous versions, MSBs of the seed affect   */\n      /* only MSBs of the array mt[].                        */\n      /* 2002/01/09 modified by Makoto Matsumoto             */\n      this.mt[this.mti] >>>= 0;\n      /* for >32 bit machines */\n  }\n}\n \n/* initialize by an array with array-length */\n/* init_key is the array for initializing keys */\n/* key_length is its length */\n/* slight change for C++, 2004/2/26 */\nMersenneTwister.prototype.init_by_array = function(init_key, key_length) {\n  var i, j, k;\n  this.init_genrand(19650218);\n  i=1; j=0;\n  k = (this.N>key_length ? this.N : key_length);\n  for (; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30)\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1664525) << 16) + ((s & 0x0000ffff) * 1664525)))\n      + init_key[j] + j; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++; j++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n    if (j>=key_length) j=0;\n  }\n  for (k=this.N-1; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30);\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1566083941) << 16) + (s & 0x0000ffff) * 1566083941))\n      - i; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n  }\n\n  this.mt[0] = 0x80000000; /* MSB is 1; assuring non-zero initial array */ \n}\n \n/* generates a random number on [0,0xffffffff]-interval */\nMersenneTwister.prototype.genrand_int32 = function() {\n  var y;\n  var mag01 = new Array(0x0, this.MATRIX_A);\n  /* mag01[x] = x * MATRIX_A  for x=0,1 */\n\n  if (this.mti >= this.N) { /* generate N words at one time */\n    var kk;\n\n    if (this.mti == this.N+1)   /* if init_genrand() has not been called, */\n      this.init_genrand(5489); /* a default initial seed is used */\n\n    for (kk=0;kk<this.N-this.M;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+this.M] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    for (;kk<this.N-1;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+(this.M-this.N)] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    y = (this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);\n    this.mt[this.N-1] = this.mt[this.M-1] ^ (y >>> 1) ^ mag01[y & 0x1];\n\n    this.mti = 0;\n  }\n\n  y = this.mt[this.mti++];\n\n  /* Tempering */\n  y ^= (y >>> 11);\n  y ^= (y << 7) & 0x9d2c5680;\n  y ^= (y << 15) & 0xefc60000;\n  y ^= (y >>> 18);\n\n  return y >>> 0;\n}\n \n/* generates a random number on [0,0x7fffffff]-interval */\nMersenneTwister.prototype.genrand_int31 = function() {\n  return (this.genrand_int32()>>>1);\n}\n \n/* generates a random number on [0,1]-real-interval */\nMersenneTwister.prototype.genrand_real1 = function() {\n  return this.genrand_int32()*(1.0/4294967295.0); \n  /* divided by 2^32-1 */ \n}\n\n/* generates a random number on [0,1)-real-interval */\nMersenneTwister.prototype.random = function() {\n  return this.genrand_int32()*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on (0,1)-real-interval */\nMersenneTwister.prototype.genrand_real3 = function() {\n  return (this.genrand_int32() + 0.5)*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on [0,1) with 53-bit resolution*/\nMersenneTwister.prototype.genrand_res53 = function() { \n  var a=this.genrand_int32()>>>5, b=this.genrand_int32()>>>6; \n  return(a*67108864.0+b)*(1.0/9007199254740992.0); \n} \n\n/* These real versions are due to Isaku Wada, 2002/01/09 added */\n\n\n\nvar $builtinmodule = function(name)\n{\n\n    var mod = {};\n\n    var myGenerator = new MersenneTwister();\n\n    mod.seed = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("seed", arguments, 0, 1);\n	x = Sk.builtin.asnum$(x);\n\n        if (arguments.length > 0)\n            myGenerator = new MersenneTwister(x);\n        else\n            myGenerator = new MersenneTwister();\n\n	return Sk.builtin.none.none$;\n    });\n\n    mod.random = new Sk.builtin.func(function() {\n        Sk.builtin.pyCheckArgs("random", arguments, 0, 0);\n\n	return new Sk.builtin.nmber(myGenerator.genrand_res53(), Sk.builtin.nmber.float$);\n    });\n\n    var toInt = function(num) {\n        return num | 0;\n    };\n\n    var randrange = function(start, stop, step) {\n        // Ported from CPython 2.7\n        var width, n, ret;\n\n        if (!Sk.builtin.checkInt(start)) {\n            throw new Sk.builtin.ValueError("non-integer first argument for randrange()");\n        };\n\n        if (stop === undefined) {\n            // Random in [0, start)\n            return toInt(myGenerator.genrand_res53() * start);\n        };\n\n        if (!Sk.builtin.checkInt(stop)) {\n            throw new Sk.builtin.ValueError("non-integer stop for randrange()");\n        };\n\n        if (step === undefined) {\n            step = 1;\n        };\n\n        width = stop - start;\n\n        if ((step == 1) && (width > 0)) {\n            // Random in [start, stop), must use toInt on product for correct results with negative ranges\n            ret = start + toInt(myGenerator.genrand_res53() * width);\n	    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (step == 1) {\n            throw new Sk.builtin.ValueError("empty range for randrange() (" + start + ", " + stop + ", " + width + ")");\n        };\n\n        if (!Sk.builtin.checkInt(step)) {\n            throw new Sk.builtin.ValueError("non-integer step for randrange()");\n        };\n\n        if (step > 0) {\n            n = toInt((width + step - 1) / step);\n        } else if (step < 0) {\n            n = toInt((width + step + 1) / step);\n        } else {\n            throw new Sk.builtin.ValueError("zero step for randrange()");\n        };\n\n        if (n <= 0) {\n            throw new Sk.builtin.ValueError("empty range for randrange()");\n        };\n\n        // Random in range(start, stop, step)\n        ret = start + (step * toInt(myGenerator.genrand_res53() * n));\n	return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n    };\n\n    mod.randint = new Sk.builtin.func(function(a, b) {\n        Sk.builtin.pyCheckArgs("randint", arguments, 2, 2);\n\n	a = Sk.builtin.asnum$(a);\n	b = Sk.builtin.asnum$(b);\n        return randrange(a, b+1);\n    });\n\n    mod.randrange = new Sk.builtin.func(function(start, stop, step) {\n        Sk.builtin.pyCheckArgs("randrange", arguments, 1, 3);\n\n	start = Sk.builtin.asnum$(start);\n	stop = Sk.builtin.asnum$(stop);\n	step = Sk.builtin.asnum$(step);\n        return randrange(start, stop, step);\n    });\n\n    mod.choice = new Sk.builtin.func(function(seq) {\n        Sk.builtin.pyCheckArgs("choice", arguments, 1, 1);\n        Sk.builtin.pyCheckType("seq", "sequence", Sk.builtin.checkSequence(seq));\n\n        if (seq.sq$length !== undefined) {\n            var r = toInt(myGenerator.genrand_res53() * seq.sq$length());\n            return seq.mp$subscript(r);\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        }\n    });\n\n    mod.shuffle = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("shuffle", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "sequence", Sk.builtin.checkSequence(x));\n\n        if (x.sq$length !== undefined) {\n            if (x.mp$ass_subscript !== undefined) {\n                for (var i = x.sq$length() - 1; i > 0; i -= 1) {\n                    var r = toInt(myGenerator.genrand_res53() * (i + 1));\n                    var tmp = x.mp$subscript(r);\n                    x.mp$ass_subscript(r, x.mp$subscript(i));\n                    x.mp$ass_subscript(i, tmp);\n                };\n            } else {\n                throw new Sk.builtin.TypeError("object is immutable");\n            };\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        };        \n\n	return Sk.builtin.none.none$;\n    });\n\n    return mod;\n}',"src/lib/test/__init__.py":"__author__ = 'bmiller'\n\ndef testEqual(actual, expected):\n    if type(expected) == type(1):\n        if actual == expected:\n            print('Pass')\n            return True\n    elif type(expected) == type(1.11):\n        if abs(actual-expected) < 0.00001:\n            print('Pass')\n            return True\n    else:\n        if actual == expected:\n            print('Pass')\n            return True\n    print('Test Failed: expected ' + str(expected) + ' but got ' + str(actual))\n    return False\n\ndef testNotEqual(actual, expected):\n    pass\n\n","src/builtin/this.py":'s = """Gur Mra bs Clguba, ol Gvz Crgref\n\nOrnhgvshy vf orggre guna htyl.\nRkcyvpvg vf orggre guna vzcyvpvg.\nFvzcyr vf orggre guna pbzcyrk.\nPbzcyrk vf orggre guna pbzcyvpngrq.\nSyng vf orggre guna arfgrq.\nFcnefr vf orggre guna qrafr.\nErnqnovyvgl pbhagf.\nFcrpvny pnfrf nera\'g fcrpvny rabhtu gb oernx gur ehyrf.\nNygubhtu cenpgvpnyvgl orngf chevgl.\nReebef fubhyq arire cnff fvyragyl.\nHayrff rkcyvpvgyl fvyraprq.\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\'er Qhgpu.\nAbj vf orggre guna arire.\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg\'f n onq vqrn.\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg\'f qb zber bs gubfr!"""\n\nd = {}\nfor c in (65, 97):\n    for i in range(26):\n        d[chr(i+c)] = chr((i+13) % 26 + c)\n\nprint "".join([d.get(c, c) for c in s])\n',"src/lib/e2ga/__init__.js":'/**\n * Geometric Algebra (e2ga) module.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n  var EUCLIDEAN_2    = "Euclidean2";\n\n  var PROP_W         = "w";\n  var PROP_X         = "x";\n  var PROP_Y         = "y";\n  var PROP_XY        = "xy";\n  var METHOD_CLONE   = "clone";\n  var METHOD_LENGTH  = "length";\n\n  var mod = {};\n\n  function isNumber(x)    { return typeof x === \'number\'; }\n\n  function remapE2ToPy(x00, x01, x10, x11) {\n    return Sk.misceval.callsim(mod[EUCLIDEAN_2],\n      Sk.builtin.assk$(x00, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x01, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x10, Sk.builtin.nmber.float$),\n      Sk.builtin.assk$(x11, Sk.builtin.nmber.float$));\n  }\n\n  function stringFromCoordinates(coordinates, labels, multiplier) {\n    var append, i, sb, str, _i, _ref;\n    sb = [];\n    append = function(number, label) {\n      var n;\n      if (number !== 0) {\n        if (number >= 0) {\n          if (sb.length > 0) {\n            sb.push("+");\n          }\n        } else {\n          sb.push("-");\n        }\n        n = Math.abs(number);\n        if (n === 1) {\n          return sb.push(label);\n        } else {\n          sb.push(n.toString());\n          if (label !== "1") {\n            sb.push(multiplier);\n            return sb.push(label);\n          }\n        }\n      }\n    };\n    for (i = _i = 0, _ref = coordinates.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n      append(coordinates[i], labels[i]);\n    }\n    if (sb.length > 0) {\n      str = sb.join("");\n    } else {\n      str = "0";\n    }\n    return str;\n  }\n\n  function divide(a00, a01, a10, a11, b00, b01, b10, b11, x) {\n    // r = ~b\n    var r00 = +b00;\n    var r01 = +b01;\n    var r10 = +b10;\n    var r11 = -b11;\n    // m = b * r\n    var m00 = b00 * r00 + b01 * r01 + b10 * r10 - b11 * r11;\n    var m01 = 0;\n    var m10 = 0;\n    var m11 = 0;\n    // c = cliffordConjugate(m)\n    var c00 = +m00;\n    var c01 = -m01;\n    var c10 = -m10;\n    var c11 = -m11;\n    // s = r * c\n    var s00 = r00 * c00 + r01 * c01 + r10 * c10 - r11 * c11;\n    var s01 = r00 * c01 + r01 * c00 - r10 * c11 + r11 * c10;\n    var s10 = r00 * c10 + r01 * c11 + r10 * c00 - r11 * c01;\n    var s11 = r00 * c11 + r01 * c10 - r10 * c01 + r11 * c00;\n    // k = b * s\n    var k00 = b00 * s00 + b01 * s01 + b10 * s10 - b11 * s11;\n    // i = inverse(b)\n    var i00 = s00/k00;\n    var i01 = s01/k00;\n    var i10 = s10/k00;\n    var i11 = s11/k00;\n    // x = a * inverse(b)\n    var x00 = a00 * i00 + a01 * i01 + a10 * i10 - a11 * i11;\n    var x01 = a00 * i01 + a01 * i00 - a10 * i11 + a11 * i10;\n    var x10 = a00 * i10 + a01 * i11 + a10 * i00 - a11 * i01;\n    var x11 = a00 * i11 + a01 * i10 - a10 * i01 + a11 * i00;\n    if (typeof x !== \'undefined\') {\n      x[0] = x00;\n      x[1] = x01;\n      x[2] = x10;\n      x[3] = x11;\n    }\n    else {\n      return remapE2ToPy(x00, x01, x10, x11);\n    }\n  }\n\n  mod[EUCLIDEAN_2] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x00, x01, x10, x11) {\n      x00 = Sk.ffi.remapToJs(x00);\n      x01 = Sk.ffi.remapToJs(x01);\n      x10 = Sk.ffi.remapToJs(x10);\n      x11 = Sk.ffi.remapToJs(x11);\n      self.tp$name = EUCLIDEAN_2;\n      self.v = [x00, x01, x10, x11];\n    });\n    $loc.__add__ = new Sk.builtin.func(function(lhs, rhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(rhs)) {\n        return remapE2ToPy(lhs[0] + rhs, lhs[1], lhs[2], lhs[3]);\n      }\n      else {\n        return remapE2ToPy(lhs[0] + rhs[0], lhs[1] + rhs[1], lhs[2] + rhs[2], lhs[3] + rhs[3]);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs + rhs[0], rhs[1], rhs[2], rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " + " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] += other;\n        return selfPy;\n      }\n      else {\n        self[0] += other[0];\n        self[1] += other[1];\n        self[2] += other[2];\n        self[3] += other[3];\n        return selfPy;\n      }\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(lhs, rhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(rhs)) {\n        return remapE2ToPy(lhs[0] - rhs, lhs[1], lhs[2], lhs[3]);\n      }\n      else {\n        return remapE2ToPy(lhs[0] - rhs[0], lhs[1] - rhs[1], lhs[2] - rhs[2], lhs[3] - rhs[3]);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs - rhs[0], -rhs[1], -rhs[2], -rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " - " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] -= other;\n        return selfPy;\n      }\n      else {\n        self[0] -= other[0];\n        self[1] -= other[1];\n        self[2] -= other[2];\n        self[3] -= other[3];\n        return selfPy;\n      }\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, a[1] * b, a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 = a00 * b01 + a01 * b00 - a10 * b11 + a11 * b10;\n        var x10 = a00 * b10 + a01 * b11 + a10 * b00 - a11 * b01;\n        var x11 = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " * " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] *= other;\n        self[2] *= other;\n        self[3] *= other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] = a00 * b01 + a01 * b00 - a10 * b11 + a11 * b10;\n        self[2] = a00 * b10 + a01 * b11 + a10 * b00 - a11 * b01;\n        self[3] = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return divide(a[0], a[1], a[2], a[3], b, 0, 0, 0);\n      }\n      else {\n        return divide(a[0], a[1], a[2], a[3], b[0], b[1], b[2], b[3]);\n      }\n    });\n    $loc.__rdiv__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return divide(lhs, 0, 0, 0, rhs[0], rhs[1], rhs[2], rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " / " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__idiv__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        divide(self[0], self[1], self[2], self[3], other, 0, 0, 0, self);\n        return selfPy;\n      }\n      else {\n        divide(self[0], self[1], self[2], self[3], other[0], other[1], other[2], other[3], self);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, a[1] * b, a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00;\n        var x01 = a00 * b01 + a01 * b00;\n        var x10 = a00 * b10             + a10 * b00;\n        var x11 = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " ^ " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] *= other;\n        self[2] *= other;\n        self[3] *= other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00;\n        self[1] = a00 * b01 + a01 * b00;\n        self[2] = a00 * b10             + a10 * b00;\n        self[3] = a00 * b11 + a01 * b10 - a10 * b01 + a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, 0, 0, 0);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 = a00 * b01             - a10 * b11;\n        var x10 = a00 * b10 + a01 * b11;\n        var x11 = a00 * b11;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], lhs * rhs[1], lhs * rhs[2], lhs * rhs[3]);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " << " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self[0] *= other;\n        self[1] = 0;\n        self[2] = 0;\n        self[3] = 0;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] = a00 * b01             - a10 * b11;\n        self[2] = a00 * b10 + a01 * b11;\n        self[3] = a00 * b11;\n        return selfPy;\n      }\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE2ToPy(a[0] * b, -a[1] * b, -a[2] * b, a[3] * b);\n      }\n      else {\n        var a00 = a[0];\n        var a01 = a[1];\n        var a10 = a[2];\n        var a11 = a[3];\n        var b00 = b[0];\n        var b01 = b[1];\n        var b10 = b[2];\n        var b11 = b[3];\n        var x00 = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        var x01 =           + a01 * b00             + a11 * b10;\n        var x10 =                       + a10 * b00 - a11 * b01;\n        var x11 =                                     a11 * b00;\n        return remapE2ToPy(x00, x01, x10, x11);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return remapE2ToPy(lhs * rhs[0], 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " >> " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other;\n        var b01 = 0;\n        var b10 = 0;\n        var b11 = 0;\n        self[0] *=  other;\n        self[1] *= -other;\n        self[2] *= -other;\n        self[3] *=  other;\n        return selfPy;\n      }\n      else {\n        var a00 = self[0];\n        var a01 = self[1];\n        var a10 = self[2];\n        var a11 = self[3];\n        var b00 = other[0];\n        var b01 = other[1];\n        var b10 = other[2];\n        var b11 = other[3];\n        self[0] = a00 * b00 + a01 * b01 + a10 * b10 - a11 * b11;\n        self[1] =           + a01 * b00             + a11 * b10;\n        self[2] =                       + a10 * b00 - a11 * b01;\n        self[3] =                                     a11 * b00;\n        return selfPy;\n      }\n    });\n    $loc.nb$negative = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapE2ToPy(-self[0], -self[1], -self[2], -self[3]);\n    };\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$invert = function() {\n      var self = Sk.ffi.remapToJs(this);\n      return remapE2ToPy(self[0], self[1], self[2], -self[3]);\n    };\n    $loc.__getitem__ = new Sk.builtin.func(function(mv, index) {\n      mv = Sk.ffi.remapToJs(mv);\n      index = Sk.builtin.asnum$(index);\n      switch(index) {\n        case 0: {\n          return remapE2ToPy(mv[0], 0, 0, 0);\n        }\n        case 1: {\n          return remapE2ToPy(0, mv[1], mv[2], 0);\n        }\n        case 2: {\n          return remapE2ToPy(0, 0, 0, mv[3]);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      return new Sk.builtin.str(EUCLIDEAN_2 + "(" + mv.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (typeof mv !== \'undefined\') {\n        return new Sk.builtin.str(stringFromCoordinates([mv[0], mv[1], mv[2], mv[3]], ["1", "i", "j", "I"], "*"));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + EUCLIDEAN_2 + "\'>");\n      }\n    });\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a[0] === b[0]) && (a[1] === b[1]) && (a[2] === b[2]) && (a[3] === b[3]);\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return (a[0] !== b[0]) || (a[1] !== b[1]) || (a[2] !== b[2]) || (a[3] !== b[3]);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(mvPy, name) {\n      var mv = Sk.ffi.remapToJs(mvPy);\n      switch(name) {\n        case PROP_W: {\n          return Sk.builtin.assk$(mv[0], Sk.builtin.nmber.float$);\n        }\n        break;\n        case PROP_X: {\n          return Sk.builtin.assk$(mv[1], Sk.builtin.nmber.float$);\n        }\n        break;\n        case PROP_Y: {\n          return Sk.builtin.assk$(mv[2], Sk.builtin.nmber.float$);\n        }\n        break;\n        case PROP_XY: {\n          return Sk.builtin.assk$(mv[3], Sk.builtin.nmber.float$);\n        }\n        break;\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(methodPy) {\n              methodPy.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(methodPy) {\n              return remapE2ToPy(mv[0], mv[1], mv[2], mv[3]);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(methodPy) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(methodPy) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(4, Sk.builtin.nmber.int$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a readable attribute of " + EUCLIDEAN_2);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(selfPy, name, valuePy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_W: {\n          self[0] = value;\n        }\n        break;\n        case PROP_X: {\n          self[1] = value;\n        }\n        break;\n        case PROP_Y: {\n          self[2] = value;\n        }\n        break;\n        case PROP_XY: {\n          self[3] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not a writeable attribute of " + EUCLIDEAN_2);\n        }\n      }\n    });\n  }, EUCLIDEAN_2, []);\n  return mod;\n}\n',"src/lib/eight/__init__.js":'/**\n * eight is a foreign function interface over Three.js for the DaVinci Python to JavaScript cross-compiler.\n *\n * The name eight reflects the 2 * 2 * 2 = 8 coordinates required in the Geometric Algebra generated by 3D Euclidean space.\n *\n * The eight module is in most respects API-compatible with the Three.js library except that THREE.Vector3 has\n * been extended in the ffi to Euclidean3.\n *\n * David Holmes (david.geo.holmes@gmail.com)\n */\nvar $builtinmodule = function(name) {\n  \n  var EUCLIDEAN_3           = "Euclidean3";\n  var SCALAR_3              = "Scalar3";\n  var VECTOR_3              = "Vector3";\n  var BIVECTOR_3            = "Bivector3";\n  var PSEUDOSCALAR_3        = "Pseudoscalar3";\n\n  var QUATERNION            = "Quaternion";\n\n  var SCENE                 = "Scene";\n  var CANVAS_RENDERER       = "CanvasRenderer";\n  var WEBGL_RENDERER        = "WebGLRenderer";\n  var COLOR                 = "Color";\n  var ORTHOGRAPHIC_CAMERA   = "OrthographicCamera";\n  var PERSPECTIVE_CAMERA    = "PerspectiveCamera";\n\n  var GEOMETRY              = "Geometry";\n  var OBJECT_3D             = "Object3D";\n\n  var AMBIENT_LIGHT         = "AmbientLight";\n  var DIRECTIONAL_LIGHT     = "DirectionalLight";\n  var POINT_LIGHT           = "PointLight";\n\n  var LINE                  = "Line";\n  var LINE_BASIC_MATERIAL   = "LineBasicMaterial";\n\n  var MESH                  = "Mesh";\n  var MESH_BASIC_MATERIAL   = "MeshBasicMaterial";\n  var MESH_LAMBERT_MATERIAL = "MeshLambertMaterial";\n  var MESH_NORMAL_MATERIAL  = "MeshNormalMaterial";\n  var MESH_PHONG_MATERIAL   = "MeshPhongMaterial";\n\n  var ARROW_GEOMETRY        = "ArrowGeometry";\n  var CIRCLE_GEOMETRY       = "CircleGeometry";\n  var CUBE_GEOMETRY         = "CubeGeometry";\n  var CYLINDER_GEOMETRY     = "CylinderGeometry";\n  var ICOSAHEDRON_GEOMETRY  = "IcosahedronGeometry";\n  var LATHE_GEOMETRY        = "LatheGeometry";\n  var OCTAHEDRON_GEOMETRY   = "OctahedronGeometry";\n  var PLANE_GEOMETRY        = "PlaneGeometry";\n  var SPHERE_GEOMETRY       = "SphereGeometry";\n  var TEXT_GEOMETRY         = "TextGeometry";\n  var TETRAHEDRON_GEOMETRY  = "TetrahedronGeometry";\n  var TORUS_GEOMETRY        = "TorusGeometry";\n\n  var PROP_BOTTOM              = "bottom";\n  var PROP_COLOR               = "color";\n  var PROP_DETAIL              = "detail";\n  var PROP_EULER_ORDER         = "eulerOrder";\n  var PROP_FAR                 = "far";\n  var PROP_GEOMETRY            = "geometry";\n  var PROP_ID                  = "id";\n  var PROP_LEFT                = "left";\n  var PROP_MASS                = "mass";\n  var PROP_MATERIAL            = "material";\n  var PROP_MATRIX_AUTO_UPDATE  = "matrixAutoUpdate";\n  var PROP_NAME                = "name";\n  var PROP_NEAR                = "near";\n  var PROP_NEEDS_UPDATE        = "needsUpdate";\n  var PROP_OPACITY             = "opacity";\n  var PROP_OVERDRAW            = "overdraw";\n  var PROP_POSITION            = "position";\n  var PROP_QUATERNION          = "quaternion";\n  var PROP_RADIUS              = "radius";\n  var PROP_RIGHT               = "right";\n  var PROP_ROTATION            = "rotation";\n  var PROP_SCALE               = "scale";\n  var PROP_SEGMENTS            = "segments";\n  var PROP_THETA_START         = "thetaStart";\n  var PROP_THETA_LENGTH        = "thetaLength";\n  var PROP_TOP                 = "top";\n  var PROP_TRANSPARENT         = "transparent";\n  var PROP_TYPE                = "type";\n  var PROP_UP                  = "up";\n  var PROP_USE_QUATERNION      = "useQuaternion";\n  var PROP_VELOCITY            = "velocity";\n  var PROP_VERTICES            = "vertices";\n  var PROP_VISIBLE             = "visible";\n  var PROP_WIREFRAME           = "wireframe";\n  var PROP_WIREFRAME_LINEWIDTH = "wireframeLinewidth";\n\n  var PROP_W                     = "w";\n  var PROP_X                     = "x";\n  var PROP_Y                     = "y";\n  var PROP_Z                     = "z";\n  var PROP_XY                    = "xy";\n  var PROP_YZ                    = "yz";\n  var PROP_ZX                    = "zx";\n  var PROP_XYZ                   = "xyz";\n  var METHOD_SET_X               = "setX";\n  var METHOD_SET_Y               = "setY";\n  var METHOD_SET_Z               = "setZ";\n  var METHOD_GET_COMPONENT       = "getComponent";\n  var METHOD_SET_COMPONENT       = "setComponent";\n  var METHOD_SET                 = "set";\n  var METHOD_SET_FROM_AXIS_ANGLE = "setFromAxisAngle";\n  var METHOD_SET_FROM_EULER      = "setFromEuler";\n  var METHOD_SET_GEOMETRY        = "setGeometry";\n  var METHOD_UPDATE_MATRIX       = "updateMatrix";\n\n  var METHOD_ADD               = "add";\n  var METHOD_CLONE             = "clone";\n  var METHOD_CONJUGATE         = "conjugate";\n  var METHOD_COPY              = "copy";\n  var METHOD_CROSS             = "cross";\n  var METHOD_DOT               = "dot";\n  var METHOD_INVERSE           = "inverse";\n  var METHOD_LENGTH            = "length";\n  var METHOD_LENGTH_SQ         = "lengthSq";\n  var METHOD_LOOK_AT           = "lookAt";\n  var METHOD_NORMALIZE         = "normalize";\n  var METHOD_REMOVE            = "remove";\n  var METHOD_SET_RGB           = "setRGB";\n\n  var mod = {};\n\n  function isBoolean(x)   { return typeof x === \'boolean\'; }\n  function isFunction(x)  { return typeof x === \'function\'; }\n  function isNumber(x)    { return typeof x === \'number\'; }\n  function isObject(x)    { return typeof x === \'object\'; }\n  function isString(x)    { return typeof x === \'string\'; }\n  function isUndefined(x) { return typeof x === \'undefined\'; }\n\n  function isDefined(x)   { return typeof x !== \'undefined\'; }\n  function isNull(x)      { return typeof x === \'object\' && x === null; }\n\n  function methodAdd(target) {\n    if (!isObject(target)) {\n      throw new Sk.builtin.AssertionError("target must be an object.");\n    }\n    if (!isFunction(target[METHOD_ADD])) {\n      throw new Sk.builtin.AssertionError("target must have an \'add\' function.");\n    }\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = METHOD_ADD;\n      });\n      $loc.__call__ = new Sk.builtin.func(function(self, childPy) {\n        var child = Sk.ffi.remapToJs(childPy);\n        target[METHOD_ADD](child);\n      });\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_ADD)\n      })\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_ADD)\n      })\n    }, METHOD_ADD, []));\n  }\n\n  function methodRemove(target) {\n    if (!isObject(target)) {\n      throw new Sk.builtin.AssertionError("target must be an object.");\n    }\n    if (!isFunction(target[METHOD_REMOVE])) {\n      throw new Sk.builtin.AssertionError("target must have a \'remove\' function.");\n    }\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = METHOD_REMOVE;\n      });\n      $loc.__call__ = new Sk.builtin.func(function(self, childPy) {\n        var child = Sk.ffi.remapToJs(childPy);\n        target[METHOD_REMOVE](child);\n      });\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_REMOVE)\n      })\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(METHOD_REMOVE)\n      })\n    }, METHOD_REMOVE, []));\n  }\n\n  function verticesPy(vertices) {\n    return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n      $loc.__init__ = new Sk.builtin.func(function(self) {\n        self.tp$name = PROP_VERTICES;\n        self.v = vertices;\n      });\n      $loc.__getattr__ = new Sk.builtin.func(function(verticesPy, name) {\n        var METHOD_APPEND = "append";\n        switch(name) {\n          case METHOD_APPEND: {\n            return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n              $loc.__init__ = new Sk.builtin.func(function(self) {\n                self.tp$name = METHOD_APPEND;\n              });\n              $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n                vertices.push(Sk.ffi.remapToJs(vectorPy));\n              });\n              $loc.__str__ = new Sk.builtin.func(function(self) {\n                return new Sk.builtin.str(METHOD_APPEND)\n              });\n              $loc.__repr__ = new Sk.builtin.func(function(self) {\n                return new Sk.builtin.str(METHOD_APPEND)\n              });\n            }, METHOD_APPEND, []));\n          }\n        }\n      });\n      $loc.__getitem__ = new Sk.builtin.func(function(verticesPy, indexPy) {\n        var index = Sk.ffi.remapToJs(indexPy);\n        return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(vertices[index], EUCLIDEAN_3));\n      });\n      $loc.mp$length = function() {return vertices.length;};\n      $loc.__str__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(PROP_VERTICES)\n      });\n      $loc.__repr__ = new Sk.builtin.func(function(self) {\n        return new Sk.builtin.str(PROP_VERTICES)\n      });\n    }, PROP_VERTICES, []));\n  }\n\n  /*\n   * Deterines whether the argument is a genuine Color reference.\n   */\n  function isColor(x) {\n    if (isDefined(x)) {\n      if (x.hasOwnProperty("r") && x.hasOwnProperty("g") && x.hasOwnProperty("b")) {\n        return isNumber(x["r"]) && isNumber(x["g"]) && isNumber(x["b"]);\n      }\n      else {\n        return false;\n      }\n    }\n    else {\n      return false;\n    }\n  }\n\n  function webGLSupported() {\n    try {\n      if (window.WebGLRenderingContext) {\n        if (document.createElement(\'canvas\').getContext(\'experimental-webgl\')) {\n          return true;\n        }\n        else {\n          return false;\n        }\n      }\n      else {\n        return false;\n      }\n    }\n    catch(e) {\n      return false;\n    }\n  }\n\n  function numberFromArg(arg, argName, functionName, lax) {\n    if (isUndefined(argName)) {\n      throw new Error("argName must be specified")\n    }\n    if (isUndefined(functionName)) {\n      throw new Error("functionName must be specified")\n    }\n    lax = isUndefined(lax) ? true : (isBoolean(lax) ? lax : true);\n    if (isUndefined(arg)) {\n      if (lax) {\n        return arg;\n      }\n      else {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was Missing.");\n      }\n    }\n    else if (isNull(arg)) {\n      if (lax) {\n        return arg;\n      }\n      else {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was None.");\n      }\n    }\n    if (isBoolean(arg)) {\n      throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was a Boolean.");\n    }\n\n    if (arg.skType) {\n      switch(arg.skType) {\n        case \'float\': {\n          return arg.v;\n        }\n        case \'int\': {\n          return arg.v;\n        }\n        default: {\n          throw new Sk.builtin.TypeError(functionName + "(" + argName + ": " + arg.skType + ") must be convertible to a number.");\n        }\n      }\n    }\n    else if (arg.v) {\n      if (isString(arg.v)) {\n        throw new Sk.builtin.TypeError(functionName + "." + argName + " must be convertible to a number, but was a String.");\n      }\n      else {\n        throw new Sk.builtin.AssertionError(functionName + "." + argName + " is unknown.");\n      }\n    }\n    else {\n      throw new Sk.builtin.AssertionError(functionName + "." + argName + " is unknown.");\n    }\n  }\n\n  function numberFromIntegerArg(arg, argName, functionName) {\n    // TODO: Maybe need an argument to say whether undefined is acceptable?\n    // TODO: Likewise for whether null is acceptable.\n    if (isUndefined(arg)) {\n      return arg;\n    }\n    else if (isNull(arg)) {\n      return null;\n    }\n    else {\n      if (arg.skType) {\n        switch(arg.skType) {\n          case \'float\': {\n            // TODO: Handle coercion to nearest integer.\n            return arg.v;\n          }\n          case \'int\': {\n            return arg.v;\n          }\n        }\n      }\n      throw new Sk.builtin.AssertionError(functionName + "." + argName + " must be an integer.");\n    }\n  }\n\n  function remapE3ToPy(w, x, y, z, xy, yz, zx, xyz) {\n    w = Sk.builtin.assk$(w, Sk.builtin.nmber.float$);\n    x = Sk.builtin.assk$(x, Sk.builtin.nmber.float$);\n    y = Sk.builtin.assk$(y, Sk.builtin.nmber.float$);\n    z = Sk.builtin.assk$(z, Sk.builtin.nmber.float$);\n    xy = Sk.builtin.assk$(xy, Sk.builtin.nmber.float$);\n    yz = Sk.builtin.assk$(yz, Sk.builtin.nmber.float$);\n    zx = Sk.builtin.assk$(zx, Sk.builtin.nmber.float$);\n    xyz = Sk.builtin.assk$(xyz, Sk.builtin.nmber.float$);\n    return Sk.misceval.callsim(mod[EUCLIDEAN_3], w, x, y, z, xy, yz, zx, xyz);\n  }\n\n  function wxyzToPy(w, x, y, z) {\n    var wPy = Sk.builtin.assk$(w, Sk.builtin.nmber.float$);\n    var xPy = Sk.builtin.assk$(x, Sk.builtin.nmber.float$);\n    var yPy = Sk.builtin.assk$(y, Sk.builtin.nmber.float$);\n    var zPy = Sk.builtin.assk$(z, Sk.builtin.nmber.float$);\n    return Sk.misceval.callsim(mod[QUATERNION], xPy, yPy, zPy, wPy);\n  }\n\n  function divide(a000, a001, a010, a011, a100, a101, a110, a111, b000, b001, b010, b011, b100, b101, b110, b111, dst) {\n    // WARNING! bladeASM.mulE2 uses w,x,y,z,xy,yz,zx,xyz representation. Notice the ordering and sign change.\n    // TODO: Move everything to the more systematic bitmap representation.\n    // r = ~b = reverse(b)\n    var r000 = +b000; // w,   grade 0(+)\n    var r001 = +b001; // x,   grade 1(+)\n    var r010 = +b010; // y,   grade 1(+)\n    var r011 = -b011; // xy,  grade 2(-)\n    var r100 = +b100; // z,   grade 1(+)\n    var r101 = -b101; // yz,  grade 2(-)\n    var r110 = -b110; // yz,  grade 2(-)\n    var r111 = -b111; // xyz, grade 3(-)\n    // m = b * r = b * (~b)\n    // The grade 2 and grade 3 components evaluate to zero.\n    var m000 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 0);\n    var m001 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 1);\n    var m010 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 2);\n    var m011 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 4);\n    var m100 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 3);\n    var m101 =  0;//-bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 6);\n    var m110 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 5);\n    var m111 =  0;//bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, r000, r001, r010, r100, r011, r110, -r101, r111, 7);\n    // c = cliffordConjugate(m)\n    var c000 = +m000; // w,   grade 0(+)\n    var c001 = -m001; // x,   grade 1(-)\n    var c010 = -m010; // y,   grade 1(-)\n    var c011 = -m011; // xy,  grade 2(-)\n    var c100 = -m100; // z,   grade 1(-)\n    var c101 = -m101; // -zx, grade 2(-)\n    var c110 = -m110; // yz,  grade 2(-)\n    var c111 = +m111; // xyz, grade 3(+)\n    // s = r * c\n    // TODO: Presumably there is some simplified computation on account of the c\'s being sparse.\n    var s000 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 0);\n    var s001 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 1);\n    var s010 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 2);\n    var s011 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 4);\n    var s100 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 3);\n    var s101 = -bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 6);\n    var s110 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 5);\n    var s111 =  bladeASM.mulE3(r000, r001, r010, r100, r011, r110, -r101, r111, c000, c001, c010, c100, c011, c110, -c101, c111, 7);\n    // k = b * s\n    var k000 =  bladeASM.mulE3(b000, b001, b010, b100, b011, b110, -b101, b111, s000, s001, s010, s100, s011, s110, -s101, s111, 0);\n    // i = inverse(b)\n    var i000 = s000/k000;\n    var i001 = s001/k000;\n    var i010 = s010/k000;\n    var i011 = s011/k000;\n    var i100 = s100/k000;\n    var i101 = s101/k000;\n    var i110 = s110/k000;\n    var i111 = s111/k000;\n    // x = a * inverse(b)\n    var x000 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 0);\n    var x001 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 1);\n    var x010 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 2);\n    var x011 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 4);\n    var x100 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 3);\n    var x101 = -bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 6);\n    var x110 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 5);\n    var x111 =  bladeASM.mulE3(a000, a001, a010, a100, a011, a110, -a101, a111, i000, i001, i010, i100, i011, i110, -i101, i111, 7);\n    // translate bitmap representation to Cartesian.\n    var w   =  x000;\n    var x   =  x001;\n    var y   =  x010;\n    var z   =  x100;\n    var xy  =  x011;\n    var yz  =  x110;\n    var zx  = -x101;\n    var xyz =  x111;\n    // return or populate the optional dst parameter.\n    if (typeof dst !== \'undefined\') {\n      dst.w   = w;\n      dst.x   = x;\n      dst.y   = y;\n      dst.z   = z;\n      dst.xy  = xy;\n      dst.yz  = yz;\n      dst.zx  = zx;\n      dst.xyz = xyz;\n    }\n    else {\n      return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n    }\n  }\n\n  function multiVector3(w, vector, xy, yz, zx, xyz) {\n    vector.w = w;\n    vector.xy = xy;\n    vector.yz = yz;\n    vector.zx = zx;\n    vector.xyz = xyz;\n    return vector;\n  }\n\n  function coord(mv, index) {\n    switch(index) {\n      case 0: {\n        return mv.w;\n      }\n      case 1: {\n        return mv.x;\n      }\n      case 2: {\n        return mv.y;\n      }\n      case 3: {\n        return mv.z;\n      }\n      case 4: {\n        return mv.xy;\n      }\n      case 5: {\n        return mv.yz;\n      }\n      case 6: {\n        return mv.zx;\n      }\n      case 7: {\n        return mv.xyz;\n      }\n      default: {\n        throw new Sk.builtin.AssertionError("" + index + " is not a valid multivector coordinate index");\n      }\n    }\n  }\n  \n  function compute(f, a, b, coord, pack) {\n    var a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, x0, x1, x2, x3, x4, x5, x6, x7;\n    a0 = a.w;\n    a1 = a.x;\n    a2 = a.y;\n    a3 = a.z;\n    a4 = a.xy;\n    a5 = a.yz;\n    a6 = a.zx;\n    a7 = a.xyz;\n    b0 = b.w;\n    b1 = b.x;\n    b2 = b.y;\n    b3 = b.z;\n    b4 = b.xy;\n    b5 = b.yz;\n    b6 = b.zx;\n    b7 = b.xyz;\n    x0 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n    x1 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n    x2 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n    x3 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n    x4 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n    x5 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n    x6 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n    x7 = f(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n    return pack(x0, x1, x2, x3, x4, x5, x6, x7);\n  }\n\n  mod[EUCLIDEAN_3] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, w, x, y, z, xy, yz, zx, xyz) {\n      w = Sk.ffi.remapToJs(w);\n      x = Sk.ffi.remapToJs(x);\n      y = Sk.ffi.remapToJs(y);\n      z = Sk.ffi.remapToJs(z);\n      xy = Sk.ffi.remapToJs(xy);\n      yz = Sk.ffi.remapToJs(yz);\n      zx = Sk.ffi.remapToJs(zx);\n      xyz = Sk.ffi.remapToJs(xyz);\n      if (isNumber(w) && isNumber(x) && isNumber(y) && isNumber(z) && isNumber(xy) && isNumber(yz) && isNumber(zx) && isNumber(xyz)) {\n        self.v = multiVector3(w, new THREE.Vector3(x, y, z), xy, yz, zx, xyz);\n      }\n      else if (isDefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isUndefined(xy) && isUndefined(yz) && isUndefined(zx) && isUndefined(xyz)) {\n        self.v = multiVector3(w.w || 0, w, w.xy || 0, w.yz || 0, w.zx|| 0, w.xyz || 0);\n      }\n      else if (isDefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isDefined(xy) && isDefined(yz) && isDefined(zx) && isDefined(xyz)) {\n        self.v = multiVector3(w, new THREE.Vector3(0, 0, 0), xy, yz, zx, xyz);\n      }\n      else if (isUndefined(w) && isUndefined(x) && isUndefined(y) && isUndefined(z) && isUndefined(xy) && isUndefined(yz) && isUndefined(zx) && isUndefined(xyz)) {\n        self.v = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError(EUCLIDEAN_3);\n      }\n      self.tp$name = EUCLIDEAN_3;\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w + b, a.x, a.y, a.z, a.xy, a.yz, a.zx, a.xyz);\n      }\n      else {\n        var w = a.w + b.w;\n        var x = a.x + b.x;\n        var y = a.y + b.y;\n        var z = a.z + b.z;\n        var xy = a.xy + b.xy;\n        var yz = a.yz + b.yz;\n        var zx = a.zx + b.zx;\n        var xyz = a.xyz + b.xyz;\n        return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a + b.w, b.x, b.y, b.z, b.xy, b.yz, b.zx, b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w += other;\n      }\n      else {\n        self.w += other.w;\n        self.x += other.x;\n        self.y += other.y;\n        self.z += other.z;\n        self.xy += other.xy;\n        self.yz += other.yz;\n        self.zx += other.zx;\n        self.xyz += other.xyz;\n      }\n      return selfPy;\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w - b, a.x, a.y, a.z, a.xy, a.yz, a.zx, a.xyz);\n      }\n      else {\n        var w = a.w - b.w;\n        var x = a.x - b.x;\n        var y = a.y - b.y;\n        var z = a.z - b.z;\n        var xy = a.xy - b.xy;\n        var yz = a.yz - b.yz;\n        var zx = a.zx - b.zx;\n        var xyz = a.xyz - b.xyz;\n        return remapE3ToPy(w, x, y, z, xy, yz, zx, xyz);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a - b.w, -b.x, -b.y, -b.z, -b.xy, -b.yz, -b.zx, -b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w -= other;\n      }\n      else {\n        self.w -= other.w;\n        self.x -= other.x;\n        self.y -= other.y;\n        self.z -= other.z;\n        self.xy -= other.xy;\n        self.yz -= other.yz;\n        self.zx -= other.zx;\n        self.xyz -= other.xyz;\n      }\n      return selfPy;\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.mulE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.mulE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__div__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        return divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b.w, b.x, b.y, b.xy, b.z, -b.zx, b.yz, b.xyz);\n      }\n    });\n    $loc.__rdiv__ = new Sk.builtin.func(function(rhs, lhs) {\n      lhs = Sk.ffi.remapToJs(lhs);\n      rhs = Sk.ffi.remapToJs(rhs);\n      if (isNumber(lhs)) {\n        return divide(lhs, 0, 0, 0, 0, 0, 0, 0, rhs.w, rhs.x, rhs.y, rhs.xy, rhs.z, -rhs.zx, rhs.yz, rhs.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError("" + JSON.stringify(lhs, null, 2) + " / " + JSON.stringify(rhs, null, 2));\n      }\n    });\n    $loc.__idiv__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(b)) {\n        divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b, 0, 0, 0, 0, 0, 0, 0, a);\n        return selfPy;\n      }\n      else {\n        divide(a.w, a.x, a.y, a.xy, a.z, -a.zx, a.yz, a.xyz, b.w, b.x, b.y, b.xy, b.z, -b.zx, b.yz, b.xyz, a);\n        return selfPy;\n      }\n    });\n    $loc.__xor__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.extE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rxor__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__ixor__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__lshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        return compute(bladeASM.lcoE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rlshift__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, a * b.x, a * b.y, a * b.z, a * b.xy, a * b.yz, a * b.zx, a * b.xyz);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__ilshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.lcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.__rshift__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return remapE3ToPy(a.w * b, a.x * b, a.y * b, a.z * b, a.xy * b, a.yz * b, a.zx * b, a.xyz * b);\n      }\n      else {\n        return compute(bladeASM.rcoE3, a, b, coord, remapE3ToPy);\n      }\n    });\n    $loc.__rrshift__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return remapE3ToPy(a * b.w, 0, 0, 0, 0, 0, 0, 0);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__irshift__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var a4 = a.xy;\n      var a5 = a.yz;\n      var a6 = a.zx;\n      var a7 = a.xyz;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        b0 = b;\n        b1 = 0;\n        b2 = 0;\n        b3 = 0;\n        b4 = 0;\n        b5 = 0;\n        b6 = 0;\n        b7 = 0;\n      }\n      else {\n        b0 = b.w;\n        b1 = b.x;\n        b2 = b.y;\n        b3 = b.z;\n        b4 = b.xy;\n        b5 = b.yz;\n        b6 = b.zx;\n        b7 = b.xyz;\n      }\n      a.w   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 0);\n      a.x   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n      a.y   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n      a.z   = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n      a.xy  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 4);\n      a.yz  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 5);\n      a.zx  = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 6);\n      a.xyz = bladeASM.rcoE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 7);\n      return selfPy;\n    });\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$negative = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(-mv.w, -mv.x, -mv.y, -mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.nb$invert = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w === b.w && a.x === b.x && a.y === b.y && a.z === b.z && a.xy === b.xy && a.yz === b.yz && a.zx === b.zx && a.xyz === b.xyz;\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w !== b.w || a.x !== b.x || a.y !== b.y || a.z !== b.z || a.xy !== b.xy || a.yz !== b.yz || a.zx !== b.zx || a.xyz !== b.xyz;\n    });\n    $loc.__getitem__ = new Sk.builtin.func(function(mv, index) {\n      mv = Sk.ffi.remapToJs(mv);\n      index = Sk.builtin.asnum$(index);\n      switch(index) {\n        case 0: {\n          return remapE3ToPy(mv.w, 0, 0, 0, 0, 0, 0, 0);\n        }\n        case 1: {\n          return remapE3ToPy(0, mv.x, mv.y, mv.z, 0, 0, 0, 0);\n        }\n        case 2: {\n          return remapE3ToPy(0, 0, 0, 0, mv.xy, mv.yz, mv.zx, 0);\n        }\n        case 3: {\n          return remapE3ToPy(0, 0, 0, 0, 0, 0, 0, mv.xyz);\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(mvPy, name) {\n      var mv = Sk.ffi.remapToJs(mvPy);\n      switch(name) {\n        case PROP_W: {\n          return Sk.builtin.assk$(mv.w, Sk.builtin.nmber.float$);\n        }\n        case PROP_X: {\n          return Sk.builtin.assk$(mv.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(mv.y, Sk.builtin.nmber.float$);\n        }\n        case PROP_Z: {\n          return Sk.builtin.assk$(mv.z, Sk.builtin.nmber.float$);\n        }\n        case PROP_XY: {\n          return Sk.builtin.assk$(mv.xy, Sk.builtin.nmber.float$);\n        }\n        case PROP_YZ: {\n          return Sk.builtin.assk$(mv.yz, Sk.builtin.nmber.float$);\n        }\n        case PROP_ZX: {\n          return Sk.builtin.assk$(mv.zx, Sk.builtin.nmber.float$);\n        }\n        case PROP_XYZ: {\n          return Sk.builtin.assk$(mv.xyz, Sk.builtin.nmber.float$);\n        }\n        case METHOD_ADD: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_ADD;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, arg) {\n              arg  = Sk.ffi.remapToJs(arg);\n              mv.w += arg.w;\n              mv.x += arg.x;\n              mv.y += arg.y;\n              mv.z += arg.z;\n              mv.xy += arg.xy;\n              mv.yz += arg.yz;\n              mv.zx += arg.zx;\n              mv.xyz += arg.xyz;\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_ADD);\n            });\n          }, METHOD_ADD, []));\n        }\n        case METHOD_CROSS: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CROSS;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vPy) {\n              var v  = Sk.ffi.remapToJs(vPy);\n              mv.w = 0;\n              mv[METHOD_CROSS](v);\n//            mv.x  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 1);\n//            mv.y  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 2);\n//            mv.z  = bladeASM.extE3(a0, a1, a2, a3, a4, a5, a6, a7, b0, b1, b2, b3, b4, b5, b6, b7, 3);\n              mv.xy = 0;\n              mv.yz = 0;\n              mv.zx = 0;\n              mv.xyz = 0;\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CROSS);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CROSS);\n            });\n          }, METHOD_CROSS, []));\n        }\n        case METHOD_DOT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_DOT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vPy) {\n              var v  = Sk.ffi.remapToJs(vPy);\n              return Sk.builtin.assk$(mv[METHOD_DOT](v), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_DOT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_DOT);\n            });\n          }, METHOD_DOT, []));\n        }\n        case METHOD_SET_X: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_X;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x) {\n              x  = Sk.ffi.remapToJs(x);\n              mv[METHOD_SET_X](x);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_X);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_X);\n            });\n          }, METHOD_SET_X, []));\n        }\n        case METHOD_SET_Y: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_Y;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, y) {\n              y  = Sk.ffi.remapToJs(y);\n              mv[METHOD_SET_Y](y);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Y);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Y);\n            });\n          }, METHOD_SET_Y, []));\n        }\n        case METHOD_SET_Z: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_Z;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, z) {\n              z  = Sk.ffi.remapToJs(z);\n              mv[METHOD_SET_Z](z);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Z);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_Z);\n            });\n          }, METHOD_SET_Z, []));\n        }\n        case METHOD_GET_COMPONENT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_COMPONENT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, index) {\n              index  = Sk.ffi.remapToJs(index);\n              return Sk.builtin.assk$(mv[METHOD_GET_COMPONENT](index), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_COMPONENT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_COMPONENT);\n            });\n          }, METHOD_GET_COMPONENT, []));\n        }\n        case METHOD_SET_COMPONENT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_COMPONENT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, index, value) {\n              index  = Sk.ffi.remapToJs(index);\n              value  = Sk.ffi.remapToJs(value);\n              mv[METHOD_SET_COMPONENT](index, value);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_COMPONENT);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_COMPONENT);\n            });\n          }, METHOD_SET_COMPONENT, []));\n        }\n        case METHOD_SET: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, z) {\n              x  = Sk.ffi.remapToJs(x);\n              y  = Sk.ffi.remapToJs(y);\n              z  = Sk.ffi.remapToJs(z);\n              mv[METHOD_SET](x, y, z);\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n          }, METHOD_SET, []));\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, mv.xy, mv.yz, mv.zx, mv.xyz);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(mv[METHOD_LENGTH](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        case METHOD_NORMALIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_NORMALIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              mv[METHOD_NORMALIZE]();\n              return mvPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n          }, METHOD_NORMALIZE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(mv, name, value) {\n      mv = Sk.ffi.remapToJs(mv);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_W: {\n          mv.w = value;\n        }\n        break;\n        case PROP_X: {\n          mv.x = value;\n        }\n        break;\n        case PROP_Y: {\n          mv.y = value;\n        }\n        break;\n        case PROP_Z: {\n          mv.z = value;\n        }\n        break;\n        case PROP_XY: {\n          mv.xy = value;\n        }\n        break;\n        case PROP_YZ: {\n          mv.yz = value;\n        }\n        break;\n        case PROP_ZX: {\n          mv.zx = value;\n        }\n        break;\n        case PROP_XYZ: {\n          mv.xyz = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + EUCLIDEAN_3);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(m) {\n      m = Sk.ffi.remapToJs(m);\n      var grade0 = m.w !== 0;\n      var grade1 = m.x !== 0 || m.y != 0 || m.z !== 0;\n      var grade2 = m.xy !== 0 || m.yz !== 0 || m.zx !== 0;\n      var grade3 = m.xyz !== 0;\n      if (grade0 && !grade1 && !grade2 && !grade3) {\n        var args = [m.w];\n        return new Sk.builtin.str(SCALAR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && grade1 && !grade2 && !grade3) {\n        var args = [m.x, m.y, m.z];\n        return new Sk.builtin.str(VECTOR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && !grade1 && grade2 && !grade3) {\n        var args = [m.xy, m.yz, m.zx];\n        return new Sk.builtin.str(BIVECTOR_3 + "(" + args.join(", ") + ")");\n      }\n      else if (!grade0 && !grade1 && !grade2 && grade3) {\n        var args = [m.xyz];\n        return new Sk.builtin.str(PSEUDOSCALAR_3 + "(" + args.join(", ") + ")");\n      }\n      else {\n        var args = [m.w, m.x, m.y, m.z, m.xy, m.yz, m.zx, m.xyz];\n        return new Sk.builtin.str(EUCLIDEAN_3 + "(" + args.join(", ") + ")");\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mv) {\n      mv = Sk.ffi.remapToJs(mv);\n      if (isDefined(mv)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([mv.w, mv.x, mv.y, mv.z, mv.xy, mv.yz, mv.zx, mv.xyz], ["1", "i", "j", "k", "ij", "jk", "ki", "I"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + EUCLIDEAN_3 + "\'>");\n      }\n    });\n  }, EUCLIDEAN_3, []);\n\n  mod[QUATERNION] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, x, y, z, w) {\n      x = Sk.ffi.remapToJs(x);\n      y = Sk.ffi.remapToJs(y);\n      z = Sk.ffi.remapToJs(z);\n      w = Sk.ffi.remapToJs(w);\n      if (isObject(x) && isUndefined(y) && isUndefined(z) && isUndefined(w)) {\n        self.v = x;\n      }\n      else {\n        self.v = new THREE[QUATERNION](x, y, z, w);\n      }\n      self.tp$name = QUATERNION;\n    });\n    $loc.__add__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w + b, a.x, a.y, a.z);\n      }\n      else {\n        var w = a.w + b.w;\n        var x = a.x + b.x;\n        var y = a.y + b.y;\n        var z = a.z + b.z;\n        return wxyzToPy(w, x, y, z);\n      }\n    });\n    $loc.__radd__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return wxyzToPy(a + b.w, b.x, b.y, b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__iadd__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w += other;\n      }\n      else {\n        self.w += other.w;\n        self.x += other.x;\n        self.y += other.y;\n        self.z += other.z;\n      }\n      return selfPy;\n    });\n    $loc.__sub__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w - b, a.x, a.y, a.z);\n      }\n      else {\n        var w = a.w - b.w;\n        var x = a.x - b.x;\n        var y = a.y - b.y;\n        var z = a.z - b.z;\n        return wxyzToPy(w, x, y, z);\n      }\n    });\n    $loc.__rsub__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return wxyzToPy(a - b.w, -b.x, -b.y, -b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__isub__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var self = Sk.ffi.remapToJs(selfPy);\n      var other = Sk.ffi.remapToJs(otherPy);\n      if (isNumber(other)) {\n        self.w -= other;\n      }\n      else {\n        self.w -= other.w;\n        self.x -= other.x;\n        self.y -= other.y;\n        self.z -= other.z;\n      }\n      return selfPy;\n    });\n    $loc.__mul__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(b)) {\n        return wxyzToPy(a.w * b, a.x * b, a.y * b, a.z * b);\n      }\n      else {\n        var ab = new THREE[QUATERNION]().multiplyQuaternions(a, b);\n        return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(ab, QUATERNION));\n      }\n    });\n    $loc.__rmul__ = new Sk.builtin.func(function(b, a) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      if (isNumber(a)) {\n        return quaternionToPy(a * b.w, a * b.x, a * b.y, a * b.z);\n      }\n      else {\n        throw new Sk.builtin.AssertionError();\n      }\n    });\n    $loc.__imul__ = new Sk.builtin.func(function(selfPy, otherPy) {\n      var a = Sk.ffi.remapToJs(selfPy);\n      var b = Sk.ffi.remapToJs(otherPy);\n      var a0 = a.w;\n      var a1 = a.x;\n      var a2 = a.y;\n      var a3 = a.z;\n      var b0, b1, b2, b3, b4, b5, b6, b7;\n      if (isNumber(b)) {\n        a.w *= b;\n        a.x *= b;\n        a.y *= b;\n        a.z *= b;\n      }\n      else {\n        a.multiply(b);\n      }\n      return selfPy;\n    });\n    $loc.nb$positive = function() {\n      return this;\n    };\n    $loc.nb$negative = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return quaternionToPy(-mv.x, -mv.y, -mv.z, -mv.w);\n    };\n    $loc.nb$invert = function() {\n      var mv = Sk.ffi.remapToJs(this);\n      return remapE3ToPy(mv.w, mv.x, mv.y, mv.z, -mv.xy, -mv.yz, -mv.zx, -mv.xyz);\n    };\n    $loc.__eq__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w === b.w && a.x === b.x && a.y === b.y && a.z === b.z;\n    });\n    $loc.__ne__ = new Sk.builtin.func(function(a, b) {\n      a = Sk.ffi.remapToJs(a);\n      b = Sk.ffi.remapToJs(b);\n      return a.w !== b.w || a.x !== b.x || a.y !== b.y || a.z !== b.z;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(quaternionPy, name) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      switch(name) {\n        case PROP_X: {\n          return Sk.builtin.assk$(quaternion.x, Sk.builtin.nmber.float$);\n        }\n        case PROP_Y: {\n          return Sk.builtin.assk$(quaternion.y, Sk.builtin.nmber.float$);\n        }\n        case PROP_Z: {\n          return Sk.builtin.assk$(quaternion.z, Sk.builtin.nmber.float$);\n        }\n        case PROP_W: {\n          return Sk.builtin.assk$(quaternion.w, Sk.builtin.nmber.float$);\n        }\n        case METHOD_COPY: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_COPY;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, qPy) {\n              var q  = Sk.ffi.remapToJs(qPy);\n              quaternion.x = q.x;\n              quaternion.y = q.y;\n              quaternion.z = q.z;\n              quaternion.w = q.w;\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_COPY);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_COPY);\n            });\n          }, METHOD_COPY, []));\n        }\n        case METHOD_SET_FROM_AXIS_ANGLE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_FROM_AXIS_ANGLE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, axisPy, anglePy) {\n              var axis = Sk.ffi.remapToJs(axisPy);\n              var angle = Sk.ffi.remapToJs(anglePy);\n              quaternion[METHOD_SET_FROM_AXIS_ANGLE](axis, angle);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_AXIS_ANGLE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_AXIS_ANGLE);\n            });\n          }, METHOD_SET_FROM_AXIS_ANGLE, []));\n        }\n        case METHOD_SET_FROM_EULER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_FROM_EULER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy, orderPy) {\n              var vector = Sk.ffi.remapToJs(vectorPy);\n              var order = Sk.ffi.remapToJs(orderPy);\n              quaternion[METHOD_SET_FROM_EULER](vector, order);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_EULER);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_FROM_EULER);\n            });\n          }, METHOD_SET_FROM_EULER, []));\n        }\n        case METHOD_SET: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, x, y, z, w) {\n              quaternion.x = Sk.ffi.remapToJs(x);\n              quaternion.y = Sk.ffi.remapToJs(y);\n              quaternion.z = Sk.ffi.remapToJs(z);\n              quaternion.w = Sk.ffi.remapToJs(w);\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET);\n            });\n          }, METHOD_SET, []));\n        }\n        case METHOD_CLONE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CLONE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return wxyzToPy(quaternion.w, quaternion.x, quaternion.y, quaternion.z);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CLONE);\n            });\n          }, METHOD_CLONE, []));\n        }\n        case METHOD_CONJUGATE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_CONJUGATE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              quaternion[METHOD_CONJUGATE]();\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CONJUGATE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_CONJUGATE);\n            });\n          }, METHOD_CONJUGATE, []));\n        }\n        case METHOD_INVERSE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_INVERSE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              var k = 1.0 / quaternion.lengthSq();\n              quaternion[METHOD_CONJUGATE]();\n              quaternion.w *= k;\n              quaternion.x *= k;\n              quaternion.y *= k;\n              quaternion.z *= k;\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INVERSE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_INVERSE);\n            });\n          }, METHOD_INVERSE, []));\n        }\n        case METHOD_LENGTH: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(quaternion[METHOD_LENGTH](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH);\n            });\n          }, METHOD_LENGTH, []));\n        }\n        case METHOD_LENGTH_SQ: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LENGTH_SQ;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.builtin.assk$(quaternion[METHOD_LENGTH_SQ](), Sk.builtin.nmber.float$);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH_SQ);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LENGTH_SQ);\n            });\n          }, METHOD_LENGTH_SQ, []));\n        }\n        case METHOD_NORMALIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_NORMALIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              quaternion[METHOD_NORMALIZE]();\n              return quaternionPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_NORMALIZE);\n            });\n          }, METHOD_NORMALIZE, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(quaternionPy, name, valuePy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_X: {\n          quaternion.x = value;\n        }\n        break;\n        case PROP_Y: {\n          quaternion.y = value;\n        }\n        break;\n        case PROP_Z: {\n          quaternion.z = value;\n        }\n        break;\n        case PROP_W: {\n          quaternion.w = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + QUATERNION);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(quaternionPy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      var args = [quaternion.x, quaternion.y, quaternion.z, quaternion.w];\n      return new Sk.builtin.str(QUATERNION + "(" + args.join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(quaternionPy) {\n      var quaternion = Sk.ffi.remapToJs(quaternionPy);\n      if (isDefined(quaternion)) {\n        return new Sk.builtin.str(bladeSTR.stringFromCoordinates([quaternion.w, quaternion.x, quaternion.y, quaternion.z], ["1", "i", "j", "k"]));\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + QUATERNION + "\'>");\n      }\n    });\n  }, QUATERNION, []);\n\n  // Erik Moller\'s requestAnimationFrame for smart(er) animating\n  // Minor formatting changes and use of braces for if conditions.\n  // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n  // The purpose of this enhanced shim is to \n  (function(scope) {\n    if (isDefined(scope)) {\n      var lastTime = 0;\n      var vendors = [\'ms\', \'moz\', \'webkit\', \'o\'];\n      for(var x = 0; x < vendors.length && !scope.requestAnimationFrame; ++x) {\n        scope.requestAnimationFrame = scope[vendors[x]+\'RequestAnimationFrame\'];\n        scope.cancelRequestAnimationFrame = scope[vendors[x]+\'CancelRequestAnimationFrame\'];\n      }\n\n      if (!scope.requestAnimationFrame) {\n        scope.requestAnimationFrame = function(callback, element) {\n          var currTime = new Date().getTime();\n          var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n          var id = scope.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n          lastTime = currTime + timeToCall;\n          return id;\n        };\n      }\n\n      if (!scope.cancelAnimationFrame) {\n        scope.cancelAnimationFrame = function(id) {\n          clearTimeout(id);\n        };\n      }\n    }\n  }((typeof window === \'object\') ? window : void 0));\n\n   mod[SCENE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.v = new THREE[SCENE]();\n      self.tp$name = SCENE;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(scenePy, name) {\n      var scene = Sk.ffi.remapToJs(scenePy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_POSITION], EUCLIDEAN_3));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(scene[PROP_QUATERNION], QUATERNION));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_ROTATION], EUCLIDEAN_3));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(scene[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_SCALE], EUCLIDEAN_3));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(scene[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return scene[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              scene.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return scenePy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case METHOD_ADD: {\n          return methodAdd(scene);\n        }\n        case METHOD_REMOVE: {\n          return methodRemove(scene);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(scenePy, name, valuePy) {\n      var scene = Sk.ffi.remapToJs(scenePy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_POSITION: {\n          scene[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          scene[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          scene[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            scene[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          scene[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          scene[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          scene[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not a write attribute of " + SCENE);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(SCENE);\n    });\n  }, SCENE, []);\n\n  mod[CANVAS_RENDERER] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_AUTO_CLEAR   = "autoClear";\n    var PROP_CLEAR_COLOR  = "clearColor";\n    var PROP_DOM_ELEMENT  = "domElement";\n    var PROP_GAMMA_INPUT  = "gammaInput";\n    var PROP_GAMMA_OUTPUT = "gammaOutput";\n    var PROP_SORT_OBJECTS = "sortObjects";\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = CANVAS_RENDERER;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[CANVAS_RENDERER](parameters);\n    });\n    $loc.setSize = new Sk.builtin.func(function(self, width, height) {\n      self.v.setSize(Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      var METHOD_RENDER = "render";\n      var METHOD_GET_CLEAR_COLOR = "getClearColor";\n      var METHOD_SET_CLEAR_COLOR = "setClearColor";\n      var METHOD_SET_SIZE        = "setSize";\n      var renderer  = Sk.ffi.remapToJs(self);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          return renderer[PROP_AUTO_CLEAR];\n        }\n        case PROP_GAMMA_INPUT: {\n          return renderer[PROP_GAMMA_INPUT];\n        }\n        case PROP_GAMMA_OUTPUT: {\n          return renderer[PROP_GAMMA_OUTPUT];\n        }\n        case PROP_SORT_OBJECTS: {\n          return renderer[PROP_SORT_OBJECTS];\n        }\n        case PROP_DOM_ELEMENT: {\n          // TODO: I think duck-typing means that this will work as long as we don\'t\n          // try to do anything more ambitious.\n          return {v: renderer.domElement};\n        }\n        case METHOD_RENDER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_RENDER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, scene, camera) {\n              scene  = Sk.ffi.remapToJs(scene);\n              camera = Sk.ffi.remapToJs(camera);\n              renderer.render(scene, camera);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n          }, METHOD_RENDER, []));\n        }\n        case METHOD_GET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(renderer.getClearColor()));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n          }, METHOD_GET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color, alpha) {\n              color  = Sk.ffi.remapToJs(color);\n              alpha = Sk.ffi.remapToJs(alpha);\n              renderer.setClearColor(color, alpha);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n          }, METHOD_SET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_SIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_SIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, width, height, updateStyle) {\n              width  = Sk.ffi.remapToJs(width);\n              height = Sk.ffi.remapToJs(height);\n              updateStyle = Sk.ffi.remapToJs(updateStyle);\n              renderer.setSize(width, height, updateStyle);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n          }, METHOD_SET_SIZE, []));\n        }\n        default: {\n          // The framework will raise an AttributeError exception.\n          return /* undefined */;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(self, name, value) {\n      var renderer  = Sk.ffi.remapToJs(self);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          if (isBoolean(value)) {\n            renderer[PROP_AUTO_CLEAR] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_AUTO_CLEAR + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_INPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_INPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_INPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_OUTPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_OUTPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_OUTPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_SORT_OBJECTS: {\n          if (isBoolean(value)) {\n            renderer[PROP_SORT_OBJECTS] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_SORT_OBJECTS + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case "size": {\n          var width  = Sk.builtin.asnum$(value[0]);\n          var height = Sk.builtin.asnum$(value[1]);\n          renderer.setSize(width, height);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + CANVAS_RENDERER);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var args = {};\n      args[PROP_AUTO_CLEAR] = renderer[PROP_AUTO_CLEAR];\n      args[PROP_GAMMA_INPUT] = renderer[PROP_GAMMA_INPUT];\n      args[PROP_GAMMA_OUTPUT] = renderer[PROP_GAMMA_OUTPUT];\n      return new Sk.builtin.str(CANVAS_RENDERER + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var autoClear = renderer[PROP_AUTO_CLEAR];\n      // Note: The WebGLRenderer takes only one argument, but it is a dictionary.\n      var args = [{"autoClear": autoClear}];\n      return new Sk.builtin.str(CANVAS_RENDERER + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CANVAS_RENDERER, []);\n\n  mod[WEBGL_RENDERER] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_AUTO_CLEAR   = "autoClear";\n    var PROP_CLEAR_COLOR  = "clearColor";\n    var PROP_DOM_ELEMENT  = "domElement";\n    var PROP_GAMMA_INPUT  = "gammaInput";\n    var PROP_GAMMA_OUTPUT = "gammaOutput";\n    var PROP_SORT_OBJECTS = "sortObjects";\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = WEBGL_RENDERER;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[WEBGL_RENDERER](parameters);\n    });\n    $loc.setSize = new Sk.builtin.func(function(self, width, height) {\n      self.v.setSize(Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      var METHOD_RENDER = "render";\n      var METHOD_GET_CLEAR_COLOR = "getClearColor";\n      var METHOD_SET_CLEAR_COLOR = "setClearColor";\n      var METHOD_SET_SIZE        = "setSize";\n      var renderer  = Sk.ffi.remapToJs(self);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          return renderer[PROP_AUTO_CLEAR];\n        }\n        case PROP_GAMMA_INPUT: {\n          return renderer[PROP_GAMMA_INPUT];\n        }\n        case PROP_GAMMA_OUTPUT: {\n          return renderer[PROP_GAMMA_OUTPUT];\n        }\n        case PROP_SORT_OBJECTS: {\n          return renderer[PROP_SORT_OBJECTS];\n        }\n        case PROP_DOM_ELEMENT: {\n          // TODO: I think duck-typing means that this will work as long as we don\'t\n          // try to do anything more ambitious.\n          return {v: renderer.domElement};\n        }\n        case METHOD_RENDER: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_RENDER;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, scene, camera) {\n              scene  = Sk.ffi.remapToJs(scene);\n              camera = Sk.ffi.remapToJs(camera);\n              renderer.render(scene, camera);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_RENDER);\n            })\n          }, METHOD_RENDER, []));\n        }\n        case METHOD_GET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_GET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(renderer.getClearColor()));\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_GET_CLEAR_COLOR);\n            });\n          }, METHOD_GET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_CLEAR_COLOR: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_CLEAR_COLOR;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, color, alpha) {\n              color  = Sk.ffi.remapToJs(color);\n              alpha = Sk.ffi.remapToJs(alpha);\n              renderer.setClearColor(color, alpha);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_CLEAR_COLOR);\n            });\n          }, METHOD_SET_CLEAR_COLOR, []));\n        }\n        case METHOD_SET_SIZE: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_SIZE;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, width, height, updateStyle) {\n              width  = Sk.ffi.remapToJs(width);\n              height = Sk.ffi.remapToJs(height);\n              updateStyle = Sk.ffi.remapToJs(updateStyle);\n              renderer.setSize(width, height, updateStyle);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_SIZE);\n            });\n          }, METHOD_SET_SIZE, []));\n        }\n        default: {\n          // The framework will raise an AttributeError exception.\n          return /* undefined */;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(self, name, value) {\n      var renderer  = Sk.ffi.remapToJs(self);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_AUTO_CLEAR: {\n          if (isBoolean(value)) {\n            renderer[PROP_AUTO_CLEAR] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_AUTO_CLEAR + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_INPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_INPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_INPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_GAMMA_OUTPUT: {\n          if (isBoolean(value)) {\n            renderer[PROP_GAMMA_OUTPUT] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_GAMMA_OUTPUT + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case PROP_SORT_OBJECTS: {\n          if (isBoolean(value)) {\n            renderer[PROP_SORT_OBJECTS] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_SORT_OBJECTS + "\' attribute must be a <type \'bool\'>.");\n          }\n        }\n        break;\n        case "size": {\n          var width  = Sk.builtin.asnum$(value[0]);\n          var height = Sk.builtin.asnum$(value[1]);\n          renderer.setSize(width, height);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + WEBGL_RENDERER);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var args = {};\n      args[PROP_AUTO_CLEAR] = renderer[PROP_AUTO_CLEAR];\n      args[PROP_GAMMA_INPUT] = renderer[PROP_GAMMA_INPUT];\n      args[PROP_GAMMA_OUTPUT] = renderer[PROP_GAMMA_OUTPUT];\n      return new Sk.builtin.str(WEBGL_RENDERER + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var renderer = self.v;\n      var autoClear = renderer[PROP_AUTO_CLEAR];\n      // Note: The WebGLRenderer takes only one argument, but it is a dictionary.\n      var args = [{"autoClear": autoClear}];\n      return new Sk.builtin.str(WEBGL_RENDERER + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, WEBGL_RENDERER, []);\n\n  mod[COLOR] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_R = "r";\n    var PROP_G = "g";\n    var PROP_B = "b";\n    $loc.__init__ = new Sk.builtin.func(function(self, value) {\n      value = Sk.ffi.remapToJs(value);\n      self.tp$name = COLOR;\n      if (isUndefined(value)) {\n        self.v = new THREE.Color();\n      }\n      else {\n        if (isNumber(value) || isString(value)) {\n          self.v = new THREE.Color(value);\n        }\n        else if (isColor(value)) {\n          self.v = new THREE.Color(value);\n        }\n        else {\n          throw new Sk.builtin.AssertionError("value must be either a number, string or Color.");\n        }\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(colorPy, name) {\n      var color = Sk.ffi.remapToJs(colorPy);\n      switch(name) {\n        case PROP_R: {\n          return Sk.builtin.assk$(color[PROP_R], Sk.builtin.nmber.float$);\n        }\n        case PROP_G: {\n          return Sk.builtin.assk$(color[PROP_G], Sk.builtin.nmber.float$);\n        }\n        case PROP_B: {\n          return Sk.builtin.assk$(color[PROP_B], Sk.builtin.nmber.float$);\n        }\n        case METHOD_SET_RGB: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_RGB;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, rPy, gPy, bPy) {\n              var r  = Sk.ffi.remapToJs(rPy);\n              var g  = Sk.ffi.remapToJs(gPy);\n              var b  = Sk.ffi.remapToJs(bPy);\n              color.setRGB(r, g, b);\n              return colorPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_RGB);\n            });\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_RGB);\n            });\n          }, METHOD_SET_RGB, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(colorPy, name, valuePy) {\n      var color = Sk.ffi.remapToJs(colorPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_R: {\n          color[PROP_R] = value;\n        }\n        break;\n        case PROP_G: {\n          color[PROP_G] = value;\n        }\n        break;\n        case PROP_B: {\n          color[PROP_B] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AttributeError(name + " is not an attribute of " + COLOR);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var color = self.v;\n      var args = {};\n      args[PROP_R] = color[PROP_R];\n      args[PROP_G] = color[PROP_G];\n      args[PROP_B] = color[PROP_B];\n      return new Sk.builtin.str(COLOR + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var color = self.v;\n      var r = color[PROP_R];\n      var g = color[PROP_G];\n      var b = color[PROP_B];\n      var args = [r, g, b];\n      return new Sk.builtin.str(COLOR + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, COLOR, []);\n\n  mod[PERSPECTIVE_CAMERA] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, fov, aspect, near, far) {\n      var fieldOfView = Sk.builtin.asnum$(fov)\n      var aspectRatio = Sk.builtin.asnum$(aspect)\n      var nearPlane = Sk.builtin.asnum$(near)\n      var farPlane = Sk.builtin.asnum$(far)\n      self.v = new THREE[PERSPECTIVE_CAMERA](fieldOfView, aspectRatio, nearPlane, farPlane);\n      self.tp$name = PERSPECTIVE_CAMERA;\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(cameraPy, name) {\n      camera = Sk.ffi.remapToJs(cameraPy);\n      var UPDATE_PROJECTION_MATRIX = "updateProjectionMatrix"\n      switch(name) {\n        case "aspect": {\n          return Sk.builtin.assk$(camera.aspect, Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(camera[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(camera[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return camera[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              camera.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return cameraPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case UPDATE_PROJECTION_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = UPDATE_PROJECTION_MATRIX;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              camera[name]();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n          }, UPDATE_PROJECTION_MATRIX, []));\n        }\n        default: {\n          return;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(cameraPy, name, valuePy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case "aspect": {\n          camera.aspect = value;\n        }\n        break;\n        case PROP_POSITION: {\n          camera[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          camera[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          camera[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            camera[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          camera[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          camera[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          camera[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AssertionError(name + " is not an attribute of " + PERSPECTIVE_CAMERA);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(PERSPECTIVE_CAMERA);\n    });\n  }, PERSPECTIVE_CAMERA, []);\n\n  mod[ORTHOGRAPHIC_CAMERA] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, leftPy, rightPy, topPy, bottomPy, nearPy, farPy) {\n      var left = Sk.builtin.asnum$(leftPy)\n      var right = Sk.builtin.asnum$(rightPy)\n      var top = Sk.builtin.asnum$(topPy)\n      var bottom = Sk.builtin.asnum$(bottomPy)\n      var near = Sk.builtin.asnum$(nearPy)\n      var far = Sk.builtin.asnum$(farPy)\n      self.v = new THREE[ORTHOGRAPHIC_CAMERA](left, right, top, bottom, near, far);\n      self.tp$name = ORTHOGRAPHIC_CAMERA;\n    });\n\n    $loc.__getattr__ = new Sk.builtin.func(function(cameraPy, name) {\n      camera = Sk.ffi.remapToJs(cameraPy);\n      var UPDATE_PROJECTION_MATRIX = "updateProjectionMatrix"\n      switch(name) {\n        case "aspect": {\n          return Sk.builtin.assk$(camera.aspect, Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(camera[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(camera[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(camera[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return camera[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              camera.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return cameraPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case UPDATE_PROJECTION_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = UPDATE_PROJECTION_MATRIX;\n            });\n\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              camera[name]();\n            });\n\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(UPDATE_PROJECTION_MATRIX)\n            })\n\n          }, UPDATE_PROJECTION_MATRIX, []));\n        }\n        default: {\n          return;\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(cameraPy, name, valuePy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_LEFT: {\n          camera[PROP_LEFT] = value;\n        }\n        break;\n        case PROP_RIGHT: {\n          camera[PROP_RIGHT] = value;\n        }\n        break;\n        case PROP_TOP: {\n          camera[PROP_TOP] = value;\n        }\n        break;\n        case PROP_BOTTOM: {\n          camera[PROP_BOTTOM] = value;\n        }\n        break;\n        case PROP_POSITION: {\n          camera[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          camera[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          camera[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            camera[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          camera[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          camera[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          camera[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Sk.builtin.AssertionError(name + " is not an attribute of " + ORTHOGRAPHIC_CAMERA);\n        }\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(cameraPy) {\n      var camera = Sk.ffi.remapToJs(cameraPy);\n      var args = [camera[PROP_LEFT], camera[PROP_RIGHT], camera[PROP_TOP], camera[PROP_BOTTOM], camera[PROP_NEAR], camera[PROP_FAR]];\n      return new Sk.builtin.str(ORTHOGRAPHIC_CAMERA + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(ORTHOGRAPHIC_CAMERA);\n    });\n  }, ORTHOGRAPHIC_CAMERA, []);\n\n  mod[ARROW_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, length, segments, radiusShaft, radiusCone, lengthCone) {\n      length = Sk.ffi.remapToJs(length) || 1;\n      segments = Sk.ffi.remapToJs(segments);\n      radiusShaft = Sk.ffi.remapToJs(radiusShaft) || 0.01;\n      radiusCone = Sk.ffi.remapToJs(radiusCone) || 0.08;\n      lengthCone = Sk.ffi.remapToJs(lengthCone) || 0.2;\n      var lengthShaft = 1 - lengthCone;\n      var a = new THREE.Vector3(0, 0, length);\n      var b = new THREE.Vector3(radiusCone, 0, lengthShaft);\n      var c = new THREE.Vector3(radiusShaft, 0, lengthShaft);\n      var d = new THREE.Vector3(radiusShaft, 0, 0);\n      var e = new THREE.Vector3(0, 0, 0);\n      var points = [a, b, c, d, e];\n      self.v = new THREE.LatheGeometry(points, segments);\n      self.tp$name = ARROW_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_NAME: {\n          if (isString(value)) {\n            geometry[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + ARROW_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var geometry = Sk.ffi.remapToJs(self);\n      var args = {};\n      return new Sk.builtin.str(ARROW_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var geometry = Sk.ffi.remapToJs(self);\n      var args = [];\n      return new Sk.builtin.str(ARROW_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, ARROW_GEOMETRY, []);\n\n   mod[CIRCLE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, segments, thetaStart, thetaLength) {\n      radius      = numberFromArg(radius,          PROP_RADIUS,       CIRCLE_GEOMETRY);\n      segments    = numberFromIntegerArg(segments, PROP_SEGMENTS,     CIRCLE_GEOMETRY);\n      thetaStart  = numberFromArg(thetaStart,      PROP_THETA_START,  CIRCLE_GEOMETRY);\n      thetaLength = numberFromArg(thetaLength,     PROP_THETA_LENGTH, CIRCLE_GEOMETRY);\n      self.v = new THREE[CIRCLE_GEOMETRY](radius, segments, thetaStart, thetaLength);\n      self.tp$name = CIRCLE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CIRCLE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var args = {};\n      return new Sk.builtin.str(CIRCLE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var args = [];\n      return new Sk.builtin.str(CIRCLE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CIRCLE_GEOMETRY, []);\n\n   mod[CUBE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH           = "width";\n    var PROP_HEIGHT          = "height";\n    var PROP_DEPTH           = "depth";\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_DEPTH_SEGMENTS  = "depthSegments";\n    $loc.__init__ = new Sk.builtin.func(function(self, width, height, depth, widthSegments, heightSegments, depthSegments) {\n      width          = numberFromArg(width,                 PROP_WIDTH,           CUBE_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          CUBE_GEOMETRY);\n      depth          = numberFromArg(depth,                 PROP_DEPTH,           CUBE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  CUBE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, CUBE_GEOMETRY);\n      depthSegments  = numberFromIntegerArg(depthSegments,  PROP_DEPTH_SEGMENTS,  CUBE_GEOMETRY);\n      self.v = new THREE[CUBE_GEOMETRY](width, height, depth, widthSegments, heightSegments, depthSegments);\n      self.tp$name = CUBE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_WIDTH: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_DEPTH: {\n          return Sk.builtin.assk$(self.v[PROP_DEPTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_DEPTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_DEPTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CUBE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var cube = self.v;\n      var args = {};\n      args[PROP_WIDTH]  = cube[PROP_WIDTH];\n      args[PROP_HEIGHT] = cube[PROP_HEIGHT];\n      args[PROP_DEPTH]  = cube[PROP_DEPTH];\n      return new Sk.builtin.str(CUBE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var cube = self.v;\n      var width          = cube[PROP_WIDTH];\n      var height         = cube[PROP_HEIGHT];\n      var depth          = cube[PROP_DEPTH];\n      var widthSegments  = cube[PROP_WIDTH_SEGMENTS];\n      var heightSegments = cube[PROP_HEIGHT_SEGMENTS];\n      var depthSegments  = cube[PROP_DEPTH_SEGMENTS];\n      var args = [width, height, depth, widthSegments, heightSegments, depthSegments];\n      return new Sk.builtin.str(CUBE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CUBE_GEOMETRY, []);\n\n  mod[CYLINDER_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_RADIUS_TOP      = "radiusTop";\n    var PROP_RADIUS_BOTTOM   = "radiusBottom";\n    var PROP_HEIGHT          = "height";\n    var PROP_RADIUS_SEGMENTS = "radiusSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_OPEN_ENDED      = "openEnded";\n    $loc.__init__ = new Sk.builtin.func(function(self, radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded) {\n      radiusTop      = numberFromArg(radiusTop,             PROP_RADIUS_TOP,      CYLINDER_GEOMETRY);\n      radiusBottom   = numberFromArg(radiusBottom,          PROP_RADIUS_BOTTOM,   CYLINDER_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          CYLINDER_GEOMETRY);\n      radiusSegments = numberFromIntegerArg(radiusSegments, PROP_RADIUS_SEGMENTS, CYLINDER_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, CYLINDER_GEOMETRY);\n      openEnded      = Sk.ffi.remapToJs(openEnded);\n      self.v = new THREE[CYLINDER_GEOMETRY](radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded);\n      self.tp$name = CYLINDER_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS_TOP: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_TOP], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIUS_BOTTOM: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_BOTTOM], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIUS_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_OPEN_ENDED: {\n          return self.v[PROP_OPEN_ENDED];\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + CYLINDER_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var cylinder = self.v;\n      var args = {};\n      args[PROP_RADIUS_TOP] = cylinder[PROP_RADIUS_TOP];\n      args[PROP_RADIUS_BOTTOM] = cylinder[PROP_RADIUS_BOTTOM];\n      args[PROP_HEIGHT] = cylinder[PROP_HEIGHT];\n      args[PROP_OPEN_ENDED] = cylinder[PROP_OPEN_ENDED];\n      // TODO: Need a Python.stringify because Boolean is {True, False} etc.\n      return new Sk.builtin.str(CYLINDER_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var cylinder = self.v;\n      var radiusTop      = cylinder[PROP_RADIUS_TOP];\n      var radiusBottom   = cylinder[PROP_RADIUS_BOTTOM];\n      var height         = cylinder[PROP_HEIGHT];\n      var radiusSegments = cylinder[PROP_RADIUS_SEGMENTS];\n      var heightSegments = cylinder[PROP_HEIGHT_SEGMENTS];\n      var openEnded      = cylinder[PROP_OPEN_ENDED];\n      var args = [radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded];\n      return new Sk.builtin.str(CYLINDER_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, CYLINDER_GEOMETRY, []);\n\n  mod[LATHE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, pointsPy, segmentsPy, phiStart, phiLength) {\n      var points = Sk.ffi.remapToJs(pointsPy);\n      var segments = Sk.ffi.remapToJs(segmentsPy);\n      phiStart = Sk.ffi.remapToJs(phiStart);\n      phiLength = Sk.ffi.remapToJs(phiLength);\n      self.v = new THREE[LATHE_GEOMETRY](points, segments, phiStart, phiLength);\n      self.tp$name = LATHE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_NAME: {\n          if (isString(value)) {\n            geometry[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LATHE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var latheGeometry = self.v;\n      var args = {};\n      return new Sk.builtin.str(LATHE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var latheGeometry = self.v;\n      var args = [];\n      return new Sk.builtin.str(LATHE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, LATHE_GEOMETRY, []);\n\n  mod[ICOSAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, ICOSAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, ICOSAHEDRON_GEOMETRY);\n      self.v = new THREE[ICOSAHEDRON_GEOMETRY](radius, detail);\n      self.tp$name = ICOSAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + ICOSAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var icosahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = icosahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = icosahedron[PROP_DETAIL];\n      return new Sk.builtin.str(ICOSAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var icosahedron = self.v;\n      var radius = icosahedron[PROP_RADIUS];\n      var detail = icosahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(ICOSAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, ICOSAHEDRON_GEOMETRY, []);\n\n  mod[OCTAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_DETAIL = "detail";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, OCTAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, OCTAHEDRON_GEOMETRY);\n      self.v = new THREE[OCTAHEDRON_GEOMETRY](radius, detail);\n      self.v.radius = radius; // workaround for THREE not caching radius.\n      self.v.detail = detail; // workaround for THREE not caching detail.\n      self.tp$name = OCTAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n        default: {\n          // Framework will take care of the error message.\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + OCTAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var octahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = octahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = octahedron[PROP_DETAIL];\n      return new Sk.builtin.str(OCTAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var octahedron = self.v;\n      var radius = octahedron[PROP_RADIUS];\n      var detail = octahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(OCTAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, OCTAHEDRON_GEOMETRY, []);\n\n   mod[PLANE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH           = "width";\n    var PROP_HEIGHT          = "height";\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    $loc.__init__ = new Sk.builtin.func(function(self, width, height, widthSegments, heightSegments) {\n      width          = numberFromArg(width,                 PROP_WIDTH,           PLANE_GEOMETRY);\n      height         = numberFromArg(height,                PROP_HEIGHT,          PLANE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  PLANE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, PLANE_GEOMETRY);\n      self.v = new THREE[PLANE_GEOMETRY](width, height, widthSegments, heightSegments);\n      self.tp$name = PLANE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_WIDTH: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_HEIGHT: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + PLANE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var plane = self.v;\n      var args = {};\n      args[PROP_WIDTH]  = plane[PROP_WIDTH];\n      args[PROP_HEIGHT] = plane[PROP_HEIGHT];\n      return new Sk.builtin.str(PLANE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var plane = self.v;\n      var width          = plane[PROP_WIDTH];\n      var height         = plane[PROP_HEIGHT];\n      var widthSegments  = plane[PROP_WIDTH_SEGMENTS];\n      var heightSegments = plane[PROP_HEIGHT_SEGMENTS];\n      var args = [width, height, widthSegments, heightSegments];\n      return new Sk.builtin.str(PLANE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, PLANE_GEOMETRY, []);\n\n   mod[SPHERE_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_WIDTH_SEGMENTS  = "widthSegments";\n    var PROP_HEIGHT_SEGMENTS = "heightSegments";\n    var PROP_PHI_START       = "phiStart";\n    var PROP_PHI_LENGTH      = "phiLength";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength) {\n      radius         = numberFromArg(radius,                PROP_RADIUS,          SPHERE_GEOMETRY);\n      widthSegments  = numberFromIntegerArg(widthSegments,  PROP_WIDTH_SEGMENTS,  SPHERE_GEOMETRY);\n      heightSegments = numberFromIntegerArg(heightSegments, PROP_HEIGHT_SEGMENTS, SPHERE_GEOMETRY);\n      phiStart       = numberFromArg(phiStart,              PROP_PHI_START,       SPHERE_GEOMETRY);\n      phiLength      = numberFromArg(phiLength,             PROP_PHI_LENGTH,      SPHERE_GEOMETRY);\n      thetaStart     = numberFromArg(thetaStart,            PROP_THETA_START,     SPHERE_GEOMETRY);\n      thetaLength    = numberFromArg(thetaLength,           PROP_THETA_LENGTH,    SPHERE_GEOMETRY);\n      self.v = new THREE[SPHERE_GEOMETRY](radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength);\n      self.tp$name = SPHERE_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_WIDTH_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_WIDTH_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_HEIGHT_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_HEIGHT_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_PHI_START: {\n          return Sk.builtin.assk$(self.v[PROP_PHI_START], Sk.builtin.nmber.float$);\n        }\n        case PROP_PHI_LENGTH: {\n          return Sk.builtin.assk$(self.v[PROP_PHI_LENGTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_THETA_START: {\n          return Sk.builtin.assk$(self.v[PROP_THETA_START], Sk.builtin.nmber.float$);\n        }\n        case PROP_THETA_LENGTH: {\n          return Sk.builtin.assk$(self.v[PROP_THETA_LENGTH], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + SPHERE_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var radius = sphere[PROP_RADIUS];\n      var args = {};\n      args[PROP_RADIUS] = radius;\n      return new Sk.builtin.str(SPHERE_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var sphere = self.v;\n      var radius         = sphere[PROP_RADIUS];\n      var widthSegments  = sphere[PROP_WIDTH_SEGMENTS];\n      var heightSegments = sphere[PROP_HEIGHT_SEGMENTS];\n      var phiStart       = sphere[PROP_PHI_START];\n      var phiLength      = sphere[PROP_PHI_LENGTH];\n      var thetaStart     = sphere[PROP_THETA_START];\n      var thetaLength    = sphere[PROP_THETA_LENGTH];\n      var args = [radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength];\n      return new Sk.builtin.str(SPHERE_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, SPHERE_GEOMETRY, []);\n\n  mod[TETRAHEDRON_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_DETAIL = "detail";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, detail) {\n      radius = numberFromArg(radius,        PROP_RADIUS, TETRAHEDRON_GEOMETRY);\n      detail = numberFromIntegerArg(detail, PROP_DETAIL, TETRAHEDRON_GEOMETRY);\n      self.v = new THREE[TETRAHEDRON_GEOMETRY](radius, detail);\n      self.v.radius = radius; // workaround for THREE not caching radius.\n      self.v.detail = detail; // workaround for THREE not caching detail.\n      self.tp$name = TETRAHEDRON_GEOMETRY;\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_DETAIL: {\n          return Sk.builtin.assk$(self.v[PROP_DETAIL], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TETRAHEDRON_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var tetrahedron = self.v;\n      var args = {};\n      args[PROP_RADIUS] = tetrahedron[PROP_RADIUS];\n      args[PROP_DETAIL] = tetrahedron[PROP_DETAIL];\n      return new Sk.builtin.str(TETRAHEDRON_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var tetrahedron = self.v;\n      var radius = tetrahedron[PROP_RADIUS];\n      var detail = tetrahedron[PROP_DETAIL];\n      var args = [radius, detail];\n      return new Sk.builtin.str(TETRAHEDRON_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TETRAHEDRON_GEOMETRY, []);\n\n   mod[TEXT_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, text, parameters) {\n      text = Sk.ffi.remapToJs(text);\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[TEXT_GEOMETRY](text, parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TEXT_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var text = Sk.ffi.remapToJs(self);\n      var args = {};\n      return new Sk.builtin.str(TEXT_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var text = Sk.ffi.remapToJs(self);\n      var args = [];\n      return new Sk.builtin.str(TEXT_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TEXT_GEOMETRY, []);\n\n   mod[TORUS_GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_TUBE             = "tube";\n    var PROP_RADIAL_SEGMENTS  = "radialSegments";\n    var PROP_TUBULAR_SEGMENTS = "tubularSegments";\n    var PROP_ARC              = "arc";\n    $loc.__init__ = new Sk.builtin.func(function(self, radius, tube, radialSegments, tubularSegments, arc) {\n      radius = numberFromArg(radius,                          PROP_RADIUS,           TORUS_GEOMETRY);\n      tube = numberFromArg(tube,                              PROP_TUBE,             TORUS_GEOMETRY);\n      radialSegments = numberFromIntegerArg(radialSegments,   PROP_RADIAL_SEGMENTS,  TORUS_GEOMETRY);\n      tubularSegments = numberFromIntegerArg(tubularSegments, PROP_TUBULAR_SEGMENTS, TORUS_GEOMETRY);\n      arc = numberFromArg(arc,                                PROP_ARC,              TORUS_GEOMETRY);\n      self.v = new THREE[TORUS_GEOMETRY](radius, tube, radialSegments, tubularSegments, arc);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        case PROP_RADIUS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIUS], Sk.builtin.nmber.float$);\n        }\n        case PROP_TUBE: {\n          return Sk.builtin.assk$(self.v[PROP_TUBE], Sk.builtin.nmber.float$);\n        }\n        case PROP_RADIAL_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_RADIAL_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_TUBULAR_SEGMENTS: {\n          return Sk.builtin.assk$(self.v[PROP_TUBULAR_SEGMENTS], Sk.builtin.nmber.int$);\n        }\n        case PROP_ARC: {\n          return Sk.builtin.assk$(self.v[PROP_ARC], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + TORUS_GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      var torus = self.v;\n      var args = {};\n      args[PROP_RADIUS] = torus[PROP_RADIUS];\n      args[PROP_TUBE]   = torus[PROP_TUBE];\n      args[PROP_ARC]    = torus[PROP_ARC];\n      return new Sk.builtin.str(TORUS_GEOMETRY + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var torus = self.v;\n      var radius          = torus[PROP_RADIUS];\n      var tube            = torus[PROP_TUBE];\n      var radialSegments  = torus[PROP_RADIAL_SEGMENTS];\n      var tubularSegments = torus[PROP_TUBULAR_SEGMENTS];\n      var arc             = torus[PROP_ARC];\n      var args = [radius, tube, radialSegments, tubularSegments, arc];\n      return new Sk.builtin.str(TORUS_GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, TORUS_GEOMETRY, []);\n\n   mod[GEOMETRY] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy) {\n      if (isDefined(geometryPy)) {\n        self.v = Sk.ffi.remapToJs(geometryPy);\n        self.tp$name = geometryPy.tp$name;\n      }\n      else {\n        self.v = new THREE[GEOMETRY]();\n        self.tp$name = GEOMETRY;\n      }\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(geometryPy, name) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(geometry[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(geometry[PROP_NAME]);\n        }\n        case PROP_VERTICES: {\n          return verticesPy(geometry.vertices);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(geometryPy, name, valuePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + GEOMETRY);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(geometryPy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy);\n      if (isDefined(geometry)) {\n        var args = {};\n        return new Sk.builtin.str(GEOMETRY + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + GEOMETRY + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(geometry) {\n      geometry = Sk.ffi.remapToJs(geometry);\n      var args = [];\n      return new Sk.builtin.str(GEOMETRY + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, GEOMETRY, []);\n\n  mod[OBJECT_3D] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self) {\n      self.tp$name = OBJECT_3D;\n      self.v = new THREE[OBJECT_3D]();\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(objPy, name) {\n      var obj = Sk.ffi.remapToJs(objPy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(obj[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(obj[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(obj[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return obj[PROP_USE_QUATERNION];\n        }\n        case METHOD_ADD: {\n          return methodAdd(obj);\n        }\n        case METHOD_REMOVE: {\n          return methodRemove(obj);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(obj, name, value) {\n      obj = Sk.ffi.remapToJs(obj);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_POSITION: {\n          obj[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          obj[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          obj[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            obj[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          obj[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          obj[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          obj[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + OBJECT_3D);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(obj) {\n      obj = Sk.ffi.remapToJs(obj);\n      if (isDefined(obj)) {\n        var args = {};\n        return new Sk.builtin.str(OBJECT_3D + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + OBJECT_3D + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(obj) {\n      obj = Sk.ffi.remapToJs(obj);\n      var args = [];\n      return new Sk.builtin.str(OBJECT_3D + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, OBJECT_3D, []);\n\n  mod[AMBIENT_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, color) {\n      self.tp$name = AMBIENT_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      self.v = new THREE[AMBIENT_LIGHT](color);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(lightPy, name, valuePy) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + AMBIENT_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        return new Sk.builtin.str(AMBIENT_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + AMBIENT_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR]];\n      return new Sk.builtin.str(AMBIENT_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, AMBIENT_LIGHT, []);\n\n  mod[DIRECTIONAL_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_INTENSITY = "intensity";\n    var PROP_DISTANCE = "distance";\n    $loc.__init__ = new Sk.builtin.func(function(self, color, intensity, distance) {\n      self.tp$name = DIRECTIONAL_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      intensity = Sk.ffi.remapToJs(intensity);\n      distance = Sk.ffi.remapToJs(distance);\n      self.v = new THREE[DIRECTIONAL_LIGHT](color, intensity, distance);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n        case PROP_DISTANCE: {\n          return Sk.builtin.nmber(light[PROP_DISTANCE], Sk.builtin.nmber.float$);\n        }\n        case PROP_INTENSITY: {\n          return Sk.builtin.nmber(light[PROP_INTENSITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(light[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(light[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return light[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              light.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return lightPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(light, name, value) {\n      light = Sk.ffi.remapToJs(light);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_DISTANCE: {\n          if (isNumber(value)) {\n            light[PROP_DISTANCE] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_DISTANCE + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_INTENSITY: {\n          if (isNumber(value)) {\n            light[PROP_INTENSITY] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_INTENSITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          light[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          light[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          light[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            light[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          light[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          light[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          light[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + DIRECTIONAL_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        args[PROP_INTENSITY] = light[PROP_INTENSITY];\n        args[PROP_DISTANCE] = light[PROP_DISTANCE];\n        return new Sk.builtin.str(DIRECTIONAL_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + DIRECTIONAL_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR], light[PROP_INTENSITY], light[PROP_DISTANCE]];\n      return new Sk.builtin.str(DIRECTIONAL_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, DIRECTIONAL_LIGHT, []);\n\n  mod[POINT_LIGHT] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    var PROP_INTENSITY = "intensity";\n    var PROP_DISTANCE = "distance";\n    $loc.__init__ = new Sk.builtin.func(function(self, color, intensity, distance) {\n      self.tp$name = POINT_LIGHT;\n      color = Sk.ffi.remapToJs(color);\n      intensity = Sk.ffi.remapToJs(intensity);\n      distance = Sk.ffi.remapToJs(distance);\n      self.v = new THREE[POINT_LIGHT](color, intensity, distance);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(lightPy, name) {\n      var light = Sk.ffi.remapToJs(lightPy);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(light[PROP_COLOR]));\n        }\n        case PROP_DISTANCE: {\n          return Sk.builtin.nmber(light[PROP_DISTANCE], Sk.builtin.nmber.float$);\n        }\n        case PROP_INTENSITY: {\n          return Sk.builtin.nmber(light[PROP_INTENSITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(light[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(light[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(light[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return light[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              light.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return lightPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(light, name, value) {\n      light = Sk.ffi.remapToJs(light);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          light[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_DISTANCE: {\n          if (isNumber(value)) {\n            light[PROP_DISTANCE] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_DISTANCE + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_INTENSITY: {\n          if (isNumber(value)) {\n            light[PROP_INTENSITY] = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_INTENSITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          light[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          light[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          light[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            light[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          light[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          light[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          light[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an settable attribute of " + POINT_LIGHT);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      if (isDefined(light)) {\n        var args = {};\n        args[PROP_COLOR] = light[PROP_COLOR];\n        args[PROP_INTENSITY] = light[PROP_INTENSITY];\n        args[PROP_DISTANCE] = light[PROP_DISTANCE];\n        return new Sk.builtin.str(POINT_LIGHT + "(" + JSON.stringify(args) + ")");\n      }\n      else {\n        return new Sk.builtin.str("<type \'" + POINT_LIGHT + "\'>");\n      }\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(light) {\n      light = Sk.ffi.remapToJs(light);\n      var args = [light[PROP_COLOR], light[PROP_INTENSITY], light[PROP_DISTANCE]];\n      return new Sk.builtin.str(POINT_LIGHT + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, POINT_LIGHT, []);\n\n  mod[LINE] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy, materialPy, typePy) {\n      var geometry = Sk.ffi.remapToJs(geometryPy)\n      var material = Sk.ffi.remapToJs(materialPy)\n      var type = Sk.ffi.remapToJs(typePy)\n      self.v = new THREE[LINE](geometry, material, type);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(linePy, name) {\n      var line = Sk.ffi.remapToJs(linePy);\n      switch(name) {\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(line[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(line[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(line[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return line[PROP_USE_QUATERNION];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              line.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return linePy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case PROP_TYPE: {\n          return Sk.builtin.nmber(line[PROP_TYPE], Sk.builtin.nmber.int$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(linePy, name, value) {\n      var line = Sk.ffi.remapToJs(linePy);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_TYPE: {\n          if (isNumber(value)) {\n            line[PROP_TYPE] = value;\n          }\n          else {\n            throw new Error(PROP_TYPE + " must be either LineStrip or LinePieces");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LINE);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(LINE);\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      return new Sk.builtin.str(LINE);\n    });\n  }, LINE, []);\n\n  mod[LINE_BASIC_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = LINE_BASIC_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[LINE_BASIC_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(material, name) {\n      material = Sk.ffi.remapToJs(material);\n      switch(name) {\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(material, name, value) {\n      material = Sk.ffi.remapToJs(material);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_COLOR: {\n          if (isColor(value)) {\n            material.color = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'" + COLOR + "\'>.");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + LINE_BASIC_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      args[PROP_COLOR] = material[PROP_COLOR];\n      args[PROP_OPACITY] = material[PROP_OPACITY];\n      return new Sk.builtin.str(LINE_BASIC_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(LINE_BASIC_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, LINE_BASIC_MATERIAL, []);\n\n  mod[MESH] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, geometryPy, materialPy) {\n      self.tp$name = MESH;\n      self.v = new THREE[MESH](Sk.ffi.remapToJs(geometryPy), Sk.ffi.remapToJs(materialPy));\n      self.v[PROP_MASS] = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n      self.v[PROP_VELOCITY] = multiVector3(0, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(meshPy, name) {\n      var mesh = Sk.ffi.remapToJs(meshPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(mesh[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_GEOMETRY: {\n          var geometry = mesh[PROP_GEOMETRY];\n          return Sk.misceval.callsim(mod[GEOMETRY], Sk.ffi.referenceToPy(mesh[PROP_GEOMETRY]));\n        }\n        case PROP_MASS: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_MASS]));\n        }\n        case PROP_MATRIX_AUTO_UPDATE: {\n          return mesh[PROP_MATRIX_AUTO_UPDATE];\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(mesh[PROP_NAME]);\n        }\n        case PROP_OVERDRAW: {\n          if (isBoolean(mesh[PROP_OVERDRAW])) {\n            return mesh[PROP_OVERDRAW];\n          }\n          else {\n            return null;\n          }\n        }\n        case PROP_POSITION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_POSITION]));\n        }\n        case PROP_QUATERNION: {\n          return Sk.misceval.callsim(mod[QUATERNION], Sk.ffi.referenceToPy(mesh[PROP_QUATERNION]));\n        }\n        case PROP_ROTATION: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_ROTATION]));\n        }\n        case PROP_EULER_ORDER: {\n          return new Sk.builtin.str(mesh[PROP_EULER_ORDER]);\n        }\n        case PROP_SCALE: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_SCALE]));\n        }\n        case PROP_UP: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_UP]));\n        }\n        case PROP_USE_QUATERNION: {\n          return mesh[PROP_USE_QUATERNION];\n        }\n        case PROP_VELOCITY: {\n          return Sk.misceval.callsim(mod[EUCLIDEAN_3], Sk.ffi.referenceToPy(mesh[PROP_VELOCITY]));\n        }\n        case PROP_VISIBLE: {\n          return mesh[PROP_VISIBLE];\n        }\n        case METHOD_LOOK_AT: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_LOOK_AT;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, vectorPy) {\n              mesh.lookAt(Sk.ffi.remapToJs(vectorPy));\n              return meshPy;\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_LOOK_AT);\n            })\n          }, METHOD_LOOK_AT, []));\n        }\n        case METHOD_SET_GEOMETRY: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_SET_GEOMETRY;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self, geometryPy) {\n              var geometry = Sk.ffi.remapToJs(geometryPy);\n              mesh[METHOD_SET_GEOMETRY](geometry);\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_GEOMETRY)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_SET_GEOMETRY)\n            })\n          }, METHOD_SET_GEOMETRY, []));\n        }\n        case METHOD_UPDATE_MATRIX: {\n          return Sk.misceval.callsim(Sk.misceval.buildClass(mod, function($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function(self) {\n              self.tp$name = METHOD_UPDATE_MATRIX;\n            });\n            $loc.__call__ = new Sk.builtin.func(function(self) {\n              mesh[METHOD_UPDATE_MATRIX]();\n            });\n            $loc.__str__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_UPDATE_MATRIX)\n            })\n            $loc.__repr__ = new Sk.builtin.func(function(self) {\n              return new Sk.builtin.str(METHOD_UPDATE_MATRIX)\n            })\n          }, METHOD_UPDATE_MATRIX, []));\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(mesh, name, value) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      value = Sk.ffi.remapToJs(value);\n      switch(name) {\n        case PROP_MASS: {\n          if (isNumber(value)) {\n            mesh[PROP_MASS] = multiVector3(value, new THREE.Vector3(0, 0, 0), 0, 0, 0, 0);\n          }\n          else {\n            mesh[PROP_MASS] = value;\n          }\n        }\n        break;\n        case PROP_MATRIX_AUTO_UPDATE: {\n          if (isBoolean(value)) {\n            mesh[PROP_MATRIX_AUTO_UPDATE] = value;\n          }\n          else {\n            throw new Error(PROP_MATRIX_AUTO_UPDATE + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            mesh[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            mesh[PROP_OVERDRAW] = value;\n          }\n          else if (isNull(value)) {\n            mesh[PROP_OVERDRAW] = null;\n          }\n          else {\n            throw new Error(name + " must be either Boolean or None");\n          }\n        }\n        break;\n        case PROP_POSITION: {\n          mesh[PROP_POSITION] = value;\n        }\n        break;\n        case PROP_QUATERNION: {\n          mesh[PROP_QUATERNION] = value;\n        }\n        break;\n        case PROP_ROTATION: {\n          mesh[PROP_ROTATION] = value;\n        }\n        break;\n        case PROP_EULER_ORDER: {\n          if (isString(value)) {\n            mesh[PROP_EULER_ORDER] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_SCALE: {\n          mesh[PROP_SCALE] = value;\n        }\n        break;\n        case PROP_UP: {\n          mesh[PROP_UP] = value;\n        }\n        break;\n        case PROP_USE_QUATERNION: {\n          mesh[PROP_USE_QUATERNION] = value;\n        }\n        break;\n        case PROP_VELOCITY: {\n          mesh[PROP_VELOCITY] = value;\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            mesh[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(PROP_VISIBLE + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(mesh) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      var args = {};\n      args[PROP_ID] = mesh[PROP_ID];\n      args[PROP_NAME] = mesh[PROP_NAME];\n      return new Sk.builtin.str(MESH + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(mesh) {\n      mesh = Sk.ffi.remapToJs(mesh);\n      var args = [/*mesh[PROP_GEOMETRY], mesh[PROP_MATERIAL]*/];\n      return new Sk.builtin.str(MESH + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH, []);\n\n  mod[MESH_BASIC_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_BASIC_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_BASIC_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(materialPy, name) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(material[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(material[PROP_NAME]);\n        }\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_NEEDS_UPDATE: {\n          return material[PROP_NEEDS_UPDATE];\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_OVERDRAW: {\n          return material[PROP_OVERDRAW];\n        }\n        case PROP_TRANSPARENT: {\n          return material[PROP_TRANSPARENT];\n        }\n        case PROP_WIREFRAME: {\n          return material[PROP_WIREFRAME];\n        }\n        case PROP_WIREFRAME_LINEWIDTH: {\n          return Sk.builtin.nmber(material[PROP_WIREFRAME_LINEWIDTH], Sk.builtin.nmber.float$);\n        }\n        case PROP_VISIBLE: {\n          return material[PROP_VISIBLE];\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          material[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            material[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_NEEDS_UPDATE: {\n          if (isBoolean(value)) {\n            material[PROP_NEEDS_UPDATE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            material[PROP_OVERDRAW] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_TRANSPARENT: {\n          if (isBoolean(value)) {\n            material[PROP_TRANSPARENT] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME: {\n          if (isBoolean(value)) {\n            material[PROP_WIREFRAME] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME_LINEWIDTH: {\n          if (isNumber(value)) {\n            material[PROP_WIREFRAME_LINEWIDTH] = value;\n          }\n          else {\n            throw new Error(name + " must be a number");\n          }\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            material[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_BASIC_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(materialPy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var args = {};\n      args[PROP_COLOR] = material[PROP_COLOR];\n      args[PROP_WIREFRAME] = material[PROP_WIREFRAME];\n      args[PROP_WIREFRAME_LINEWIDTH] = material[PROP_WIREFRAME_LINEWIDTH];\n      return new Sk.builtin.str(MESH_BASIC_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var parameters = {};\n      parameters[PROP_COLOR] = material[PROP_COLOR];\n      parameters[PROP_WIREFRAME] = material[PROP_WIREFRAME];\n      parameters[PROP_WIREFRAME_LINEWIDTH] = material[PROP_WIREFRAME_LINEWIDTH];\n      var args = [parameters];\n      return new Sk.builtin.str(MESH_BASIC_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_BASIC_MATERIAL, []);\n\n  mod[MESH_LAMBERT_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_LAMBERT_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_LAMBERT_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(materialPy, name) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      switch(name) {\n        case PROP_ID: {\n          return Sk.builtin.nmber(material[PROP_ID], Sk.builtin.nmber.int$);\n        }\n        case PROP_COLOR: {\n          return Sk.misceval.callsim(mod[COLOR], Sk.ffi.referenceToPy(material[PROP_COLOR]));\n        }\n        case PROP_NAME: {\n          return new Sk.builtin.str(material[PROP_NAME]);\n        }\n        case PROP_NEEDS_UPDATE: {\n          return material[PROP_NEEDS_UPDATE];\n        }\n        case PROP_OPACITY: {\n          return Sk.builtin.nmber(material[PROP_OPACITY], Sk.builtin.nmber.float$);\n        }\n        case PROP_OVERDRAW: {\n          return material[PROP_OVERDRAW];\n        }\n        case PROP_TRANSPARENT: {\n          return material[PROP_TRANSPARENT];\n        }\n        case PROP_VISIBLE: {\n          return material[PROP_VISIBLE];\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        case PROP_COLOR: {\n          material[PROP_COLOR] = new THREE.Color(value);\n        }\n        break;\n        case PROP_NAME: {\n          if (isString(value)) {\n            material[PROP_NAME] = value;\n          }\n          else {\n            throw new Error(name + " must be a string");\n          }\n        }\n        break;\n        case PROP_NEEDS_UPDATE: {\n          if (isBoolean(value)) {\n            material[PROP_NEEDS_UPDATE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_OPACITY: {\n          if (isNumber(value)) {\n            material.opacity = value;\n          }\n          else {\n            throw new Sk.builtin.TypeError("\'" + PROP_OPACITY + "\' attribute must be a <type \'float\'>.");\n          }\n        }\n        break;\n        case PROP_OVERDRAW: {\n          if (isBoolean(value)) {\n            material[PROP_OVERDRAW] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_TRANSPARENT: {\n          if (isBoolean(value)) {\n            material[PROP_TRANSPARENT] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME: {\n          if (isBoolean(value)) {\n            material[PROP_WIREFRAME] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        case PROP_WIREFRAME_LINEWIDTH: {\n          if (isNumber(value)) {\n            material[PROP_WIREFRAME_LINEWIDTH] = value;\n          }\n          else {\n            throw new Error(name + " must be a number");\n          }\n        }\n        break;\n        case PROP_VISIBLE: {\n          if (isBoolean(value)) {\n            material[PROP_VISIBLE] = value;\n          }\n          else {\n            throw new Error(name + " must be Boolean");\n          }\n        }\n        break;\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_LAMBERT_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_LAMBERT_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var parameters = {};\n      parameters[PROP_COLOR] = material[PROP_COLOR];\n      var args = [parameters];\n      return new Sk.builtin.str(MESH_LAMBERT_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_LAMBERT_MATERIAL, []);\n\n  mod[MESH_NORMAL_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_NORMAL_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_NORMAL_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_NORMAL_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_NORMAL_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(MESH_NORMAL_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_NORMAL_MATERIAL, []);\n\n  mod[MESH_PHONG_MATERIAL] = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, parameters) {\n      self.tp$name = MESH_PHONG_MATERIAL;\n      parameters = Sk.ffi.remapToJs(parameters);\n      self.v = new THREE[MESH_PHONG_MATERIAL](parameters);\n    });\n    $loc.__getattr__ = new Sk.builtin.func(function(self, name) {\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_PHONG_MATERIAL);\n        }\n      }\n    });\n    $loc.__setattr__ = new Sk.builtin.func(function(materialPy, name, valuePy) {\n      var material = Sk.ffi.remapToJs(materialPy);\n      var value = Sk.ffi.remapToJs(valuePy);\n      switch(name) {\n        default: {\n          throw new Error(name + " is not an attribute of " + MESH_PHONG_MATERIAL);\n        }\n      }\n    });\n    $loc.__str__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = {};\n      return new Sk.builtin.str(MESH_PHONG_MATERIAL + "(" + JSON.stringify(args) + ")");\n    });\n    $loc.__repr__ = new Sk.builtin.func(function(material) {\n      material = Sk.ffi.remapToJs(material);\n      var args = [{}];\n      return new Sk.builtin.str(MESH_PHONG_MATERIAL + "(" + args.map(function(x) {return JSON.stringify(x);}).join(", ") + ")");\n    });\n  }, MESH_PHONG_MATERIAL, []);\n\n  if (typeof THREE !== \'undefined\') {\n    mod.LineStrip  = Sk.builtin.assk$(THREE.LineStrip,  Sk.builtin.nmber.int$);\n    mod.LinePieces = Sk.builtin.assk$(THREE.LinePieces, Sk.builtin.nmber.int$);\n\n    mod.FlatShading   = Sk.builtin.assk$(THREE.FlatShading,   Sk.builtin.nmber.int$);\n    mod.NoShading     = Sk.builtin.assk$(THREE.NoShading,     Sk.builtin.nmber.int$);\n    mod.SmoothShading = Sk.builtin.assk$(THREE.SmoothShading, Sk.builtin.nmber.int$);\n  }\n\n  mod[SCALAR_3] = new Sk.builtin.func(function(w) {\n    w = Sk.ffi.remapToJs(w);\n    return remapE3ToPy(w, 0, 0, 0, 0, 0, 0, 0);\n  });\n\n  mod[VECTOR_3] = new Sk.builtin.func(function(x, y, z) {\n    x = Sk.ffi.remapToJs(x);\n    y = Sk.ffi.remapToJs(y);\n    z = Sk.ffi.remapToJs(z);\n    return remapE3ToPy(0, x, y, z, 0, 0, 0, 0);\n  });\n\n  mod[BIVECTOR_3] = new Sk.builtin.func(function(xy, yz, zx) {\n    xy = Sk.ffi.remapToJs(xy);\n    yz = Sk.ffi.remapToJs(yz);\n    zx = Sk.ffi.remapToJs(zx);\n    return remapE3ToPy(0, 0, 0, 0, xy, yz, zx, 0);\n  });\n\n  mod[PSEUDOSCALAR_3] = new Sk.builtin.func(function(xyz) {\n    xyz = Sk.ffi.remapToJs(xyz);\n    return remapE3ToPy(0, 0, 0, 0, 0, 0, 0, xyz);\n  });\n\n  return mod;\n}\n'}},!function(e){"use strict";
var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),i=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i,r=this.$element.find(".item.active"),s=n||r[t](),a=this.interval,o="next"==t?"left":"right",l="next"==t?"first":"last",u=this;if(this.sliding=!0,a&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),i=e.Event("slide",{relatedTarget:s[0],direction:o}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(u.$indicators.children()[u.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;s.addClass(t),s[0].offsetWidth,r.addClass(o),s.addClass(o),this.$element.one(e.support.transition.end,function(){s.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),r=i.data("carousel"),s=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),a="string"==typeof n?n:s.slide;r||i.data("carousel",r=new t(this,s)),"number"==typeof n?r.to(n):a?r[a]():s.interval&&r.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i,r=e(this),s=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),a=e.extend({},s.data(),r.data());s.carousel(a),(i=r.attr("data-slide-to"))&&s.data("carousel").pause().to(i).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var r=this,s=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("collapse"),s=e.extend({},e.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(r).data("collapse")?"toggle":i.data();i[e(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(r).collapse(s)})}(window.jQuery),!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",r=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,s=e(this);if(!s.is(".disabled, :disabled"))return i=n(s),r=i.hasClass("open"),t(),r||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),i.toggleClass("open")),s.focus(),!1},keydown:function(t){var r,s,a,o,l;if(/(38|40|27)/.test(t.keyCode)&&(r=e(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(a=n(r),o=a.hasClass("open"),!o||o&&27==t.keyCode)return 27==t.which&&a.find(i).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",a),s.length&&(l=s.index(s.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&s.length-1>l&&l++,~l||(l=0),s.eq(l).focus())}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),r=i.data("modal"),s=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new t(this,s)),"string"==typeof n?r[n]():s.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());t.preventDefault(),r.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,r=this.element,s=r.closest("ul:not(.dropdown-menu)"),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=s.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),r.trigger(i),i.isDefaultPrevented()||(n=e(a),this.activate(r.parent("li"),s),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),a=i&&e.support.transition&&s.hasClass("fade");a?s.one(e.support.transition.end,r):r(),s.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("tab");r||i.data("tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),function(e,t,n){"use strict";function i(e){return e&&"number"==typeof e.length?"function"!=typeof e.hasOwnProperty&&"function"!=typeof e.constructor?!0:e instanceof st||Yn&&e instanceof Yn||"[object Object]"!==ei.call(e)||"function"==typeof e.callee:!1}function r(e,t,n){var s;if(e)if(S(e))for(s in e)"prototype"!=s&&"length"!=s&&"name"!=s&&e.hasOwnProperty(s)&&t.call(n,e[s],s);else if(e.forEach&&e.forEach!==r)e.forEach(t,n);else if(i(e))for(s=0;e.length>s;s++)t.call(n,e[s],s);else for(s in e)e.hasOwnProperty(s)&&t.call(n,e[s],s);return e}function s(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function a(e,t,n){for(var i=s(e),r=0;i.length>r;r++)t.call(n,e[i[r]],i[r]);return i}function o(e){return function(t,n){e(n,t)}}function l(){for(var e,t=ni.length;t;){if(t--,e=ni[t].charCodeAt(0),57==e)return ni[t]="A",ni.join("");if(90!=e)return ni[t]=String.fromCharCode(e+1),ni.join("");ni[t]="0"}return ni.unshift("0"),ni.join("")}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e){var t=e.$$hashKey;return r(arguments,function(t){t!==e&&r(t,function(t,n){e[n]=t})}),u(e,t),e}function f(e){return parseInt(e,10)}function h(e,t){return c(new(c(function(){},{prototype:e})),t)}function p(){}function d(e){return e}function m(e){return function(){return e}}function b(e){return e===n}function g(e){return e!==n}function v(e){return null!=e&&"object"==typeof e}function _(e){return"string"==typeof e}function E(e){return"number"==typeof e}function y(e){return"[object Date]"==ei.apply(e)}function T(e){return"[object Array]"==ei.apply(e)}function S(e){return"function"==typeof e}function w(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function k(e){return e&&e.$evalAsync&&e.$watch}function x(e){return"[object File]"===ei.apply(e)}function R(e){return _(e)?e.replace(/^\s*/,"").replace(/\s*$/,""):e}function P(e){return e&&(e.nodeName||e.bind&&e.find)}function O(e,t,n){var i=[];return r(e,function(e,r,s){i.push(t.call(n,e,r,s))}),i}function C(e,t){return-1!=A(e,t)}function A(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;e.length>n;n++)if(t===e[n])return n;return-1}function M(e,t){var n=A(e,t);return n>=0&&e.splice(n,1),t}function $(e,t){if(w(e)||k(e))throw Error("Can't copy Window or Scope");if(t){if(e===t)throw Error("Can't copy equivalent objects or arrays");if(T(e)){t.length=0;for(var n=0;e.length>n;n++)t.push($(e[n]))}else{var i=t.$$hashKey;r(t,function(e,n){delete t[n]});for(var s in e)t[s]=$(e[s]);u(t,i)}}else t=e,e&&(T(e)?t=$(e,[]):y(e)?t=new Date(e.getTime()):v(e)&&(t=$(e,{})));return t}function H(e,t){t=t||{};for(var n in e)e.hasOwnProperty(n)&&"$$"!==n.substr(0,2)&&(t[n]=e[n]);return t}function D(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r,s,a=typeof e,o=typeof t;if(a==o&&"object"==a){if(!T(e)){if(y(e))return y(t)&&e.getTime()==t.getTime();if(k(e)||k(t)||w(e)||w(t))return!1;s={};for(r in e)if("$"!==r.charAt(0)&&!S(e[r])){if(!D(e[r],t[r]))return!1;s[r]=!0}for(r in t)if(!s[r]&&"$"!==r.charAt(0)&&t[r]!==n&&!S(t[r]))return!1;return!0}if((i=e.length)==t.length){for(r=0;i>r;r++)if(!D(e[r],t[r]))return!1;return!0}}return!1}function N(e,t,n){return e.concat(Qn.call(t,n))}function I(e,t){return Qn.call(e,t||0)}function L(e,t){var n=arguments.length>2?I(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,n.concat(Qn.call(arguments,0))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function z(e,i){var r=i;return/^\$+/.test(e)?r=n:w(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":k(i)&&(r="$SCOPE"),r}function U(e,t){return JSON.stringify(e,z,t?"  ":null)}function F(e){return _(e)?JSON.parse(e):e}function B(e){if(e&&0!==e.length){var t=Gn(""+e);e=!("f"==t||"0"==t||"false"==t||"no"==t||"n"==t||"[]"==t)}else e=!1;return e}function G(e){e=Jn(e).clone();try{e.html("")}catch(t){}var n=3,i=Jn("<div>").append(e).html();try{return e[0].nodeType===n?Gn(i):i.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Gn(t)})}catch(t){return Gn(i)}}function j(e){var t,n,i={};return r((e||"").split("&"),function(e){e&&(t=e.split("="),n=decodeURIComponent(t[0]),i[n]=g(t[1])?decodeURIComponent(t[1]):!0)}),i}function V(e){var t=[];return r(e,function(e,n){t.push(J(n,!0)+(e===!0?"":"="+J(e,!0)))}),t.length?t.join("&"):""}function W(e){return J(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function J(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function Y(e,n){function i(e){e&&o.push(e)}var s,a,o=[e],l=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(l,function(n){l[n]=!0,i(t.getElementById(n)),n=n.replace(":","\\:"),e.querySelectorAll&&(r(e.querySelectorAll("."+n),i),r(e.querySelectorAll("."+n+"\\:"),i),r(e.querySelectorAll("["+n+"]"),i))}),r(o,function(e){if(!s){var t=" "+e.className+" ",n=u.exec(t);n?(s=e,a=(n[2]||"").replace(/\s+/g,",")):r(e.attributes,function(t){!s&&l[t.name]&&(s=e,a=t.value)})}}),s&&n(s,a?[a]:[])}function q(t,i){var s=function(){t=Jn(t),i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.unshift("ng");var e=wt(i);return e.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),e},a=/^NG_DEFER_BOOTSTRAP!/;return e&&!a.test(e.name)?s():(e.name=e.name.replace(a,""),ti.resumeBootstrap=function(e){r(e,function(e){i.push(e)}),s()},n)}function X(e,t){return t=t||"_",e.replace(ii,function(e,n){return(n?t:"")+e.toLowerCase()})}function K(){Yn=e.jQuery,Yn?(Jn=Yn,c(Yn.fn,{scope:hi.scope,controller:hi.controller,injector:hi.injector,inheritedData:hi.inheritedData}),rt("remove",!0),rt("empty"),rt("html")):Jn=st,ti.element=Jn}function Q(e,t,n){if(!e)throw Error("Argument '"+(t||"?")+"' is "+(n||"required"));return e}function Z(e,t,n){return n&&T(e)&&(e=e[e.length-1]),Q(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function et(e){function t(e,t,n){return e[t]||(e[t]=n())}return t(t(e,"angular",Object),"module",function(){var e={};return function(n,i,r){return i&&e.hasOwnProperty(n)&&(e[n]=null),t(e,n,function(){function e(e,n,i){return function(){return t[i||"push"]([e,n,arguments]),o}}if(!i)throw Error("No module: "+n);var t=[],s=[],a=e("$injector","invoke"),o={_invokeQueue:t,_runBlocks:s,requires:i,name:n,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:a,run:function(e){return s.push(e),this}};return r&&a(r),o})}})}function tt(t){c(t,{bootstrap:q,copy:$,extend:c,equals:D,element:Jn,forEach:r,injector:wt,noop:p,bind:L,toJson:U,fromJson:F,identity:d,isUndefined:b,isDefined:g,isString:_,isFunction:S,isObject:v,isNumber:E,isElement:P,isArray:T,version:ri,isDate:y,lowercase:Gn,uppercase:jn,callbacks:{counter:0}}),qn=et(e);try{qn("ngLocale")}catch(n){qn("ngLocale",[]).provider("$locale",gn)}qn("ng",["ngLocale"],["$provide",function(e){e.provider("$compile",Ct).directive({a:Ni,input:Wi,textarea:Wi,form:Ui,script:Pr,select:Cr,style:Mr,option:Ar,ngBind:rr,ngBindHtmlUnsafe:ar,ngBindTemplate:sr,ngClass:or,ngClassEven:ur,ngClassOdd:lr,ngCsp:hr,ngCloak:cr,ngController:fr,ngForm:Fi,ngHide:yr,ngInclude:mr,ngInit:br,ngNonBindable:gr,ngPluralize:vr,ngRepeat:_r,ngShow:Er,ngSubmit:dr,ngStyle:Tr,ngSwitch:Sr,ngSwitchWhen:wr,ngSwitchDefault:kr,ngOptions:Or,ngView:Rr,ngTransclude:xr,ngModel:Qi,ngList:tr,ngChange:Zi,required:er,ngRequired:er,ngValue:ir}).directive(Ii).directive(pr),e.provider({$anchorScroll:kt,$browser:Rt,$cacheFactory:Pt,$controller:Mt,$document:$t,$exceptionHandler:Ht,$filter:_n,$interpolate:Dt,$http:dn,$httpBackend:mn,$location:Jt,$log:Yt,$parse:tn,$route:sn,$routeParams:an,$rootScope:on,$q:nn,$sniffer:ln,$templateCache:Ot,$timeout:vn,$window:un})}])}function nt(){return++oi}function it(e){return e.replace(ci,function(e,t,n,i){return i?n.toUpperCase():n}).replace(fi,"Moz$1")}function rt(e,t){function n(){for(var e,n,r,s,a,o,l,u=[this],c=t;u.length;)for(e=u.shift(),n=0,r=e.length;r>n;n++)for(s=Jn(e[n]),c?s.triggerHandler("$destroy"):c=!c,a=0,o=(l=s.children()).length;o>a;a++)u.push(Yn(l[a]));return i.apply(this,arguments)}var i=Yn.fn[e];i=i.$original||i,n.$original=i,Yn.fn[e]=n}function st(e){if(e instanceof st)return e;if(!(this instanceof st)){if(_(e)&&"<"!=e.charAt(0))throw Error("selectors not implemented");return new st(e)}if(_(e)){var n=t.createElement("div");n.innerHTML="<div>&#160;</div>"+e,n.removeChild(n.firstChild),mt(this,n.childNodes),this.remove()}else mt(this,e)}function at(e){return e.cloneNode(!0)}function ot(e){ut(e);for(var t=0,n=e.childNodes||[];n.length>t;t++)ot(n[t])}function lt(e,t,n){var i=ct(e,"events"),s=ct(e,"handle");s&&(b(t)?r(i,function(t,n){ui(e,n,t),delete i[n]}):b(n)?(ui(e,t,i[t]),delete i[t]):M(i[t],n))}function ut(e){var t=e[ai],i=si[t];i&&(i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),lt(e)),delete si[t],e[ai]=n)}function ct(e,t,i){var r=e[ai],s=si[r||-1];return g(i)?(s||(e[ai]=r=nt(),s=si[r]={}),s[t]=i,n):s&&s[t]}function ft(e,t,n){var i=ct(e,"data"),r=g(n),s=!r&&g(t),a=s&&!v(t);if(i||a||ct(e,"data",i={}),r)i[t]=n;else{if(!s)return i;if(a)return i&&i[t];c(i,t)}}function ht(e,t){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function pt(e,t){t&&r(t.split(" "),function(t){e.className=R((" "+e.className+" ").replace(/[\n\t]/g," ").replace(" "+R(t)+" "," "))})}function dt(e,t){t&&r(t.split(" "),function(t){ht(e,t)||(e.className=R(e.className+" "+R(t)))})}function mt(e,t){if(t){t=t.nodeName||!g(t.length)||w(t)?[t]:t;for(var n=0;t.length>n;n++)e.push(t[n])}}function bt(e,t){return gt(e,"$"+(t||"ngController")+"Controller")}function gt(e,t,n){for(e=Jn(e),9==e[0].nodeType&&(e=e.find("html"));e.length;){if(n=e.data(t))return n;e=e.parent()}}function vt(e,t){var n=pi[t.toLowerCase()];return n&&di[e.nodeName]&&n}function _t(e,n){var i=function(i,s){if(i.preventDefault||(i.preventDefault=function(){i.returnValue=!1}),i.stopPropagation||(i.stopPropagation=function(){i.cancelBubble=!0}),i.target||(i.target=i.srcElement||t),b(i.defaultPrevented)){var a=i.preventDefault;i.preventDefault=function(){i.defaultPrevented=!0,a.call(i)},i.defaultPrevented=!1}i.isDefaultPrevented=function(){return i.defaultPrevented},r(n[s||i.type],function(t){t.call(e,i)}),8>=Kn?(i.preventDefault=null,i.stopPropagation=null,i.isDefaultPrevented=null):(delete i.preventDefault,delete i.stopPropagation,delete i.isDefaultPrevented)};return i.elem=e,i}function Et(e){var t,i=typeof e;return"object"==i&&null!==e?"function"==typeof(t=e.$$hashKey)?t=e.$$hashKey():t===n&&(t=e.$$hashKey=l()):t=e,i+":"+t}function yt(e){r(e,this.put,this)}function Tt(){}function St(e){var t,n,i,s;return"function"==typeof e?(t=e.$inject)||(t=[],n=(""+e).replace(_i,""),i=n.match(bi),r(i[1].split(gi),function(e){e.replace(vi,function(e,n,i){t.push(i)})}),e.$inject=t):T(e)?(s=e.length-1,Z(e[s],"fn"),t=e.slice(0,s)):Z(e,"fn",!0),t}function wt(e){function t(e){return function(t,i){return v(t)?(r(t,o(e)),n):e(t,i)}}function i(e,t){if((S(t)||T(t))&&(t=w.instantiate(t)),!t.$get)throw Error("Provider "+e+" must define $get factory method.");return y[e+b]=t}function s(e,t){return i(e,{$get:t})}function a(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function l(e,t){return s(e,m(t))}function u(e,t){y[e]=t,k[e]=t}function c(e,t){var n=w.get(e+b),i=n.$get;n.$get=function(){var e=x.invoke(i,n);return x.invoke(t,null,{$delegate:e})}}function f(e){var t=[];return r(e,function(e){if(!E.get(e))if(E.put(e,!0),_(e)){var n=qn(e);t=t.concat(f(n.requires)).concat(n._runBlocks);try{for(var i=n._invokeQueue,r=0,s=i.length;s>r;r++){var a=i[r],o="$injector"==a[0]?w:w.get(a[0]);o[a[1]].apply(o,a[2])}}catch(l){throw l.message&&(l.message+=" from "+e),l}}else if(S(e))try{t.push(w.invoke(e))}catch(l){throw l.message&&(l.message+=" from "+e),l}else if(T(e))try{t.push(w.invoke(e))}catch(l){throw l.message&&(l.message+=" from "+(e[e.length-1]+"")),l}else Z(e,"module")}),t}function h(e,t){function n(n){if("string"!=typeof n)throw Error("Service name expected");if(e.hasOwnProperty(n)){if(e[n]===d)throw Error("Circular dependency: "+g.join(" <- "));return e[n]}try{return g.unshift(n),e[n]=d,e[n]=t(n)}finally{g.shift()}}function i(e,t,i){var r,s,a,o=[],l=St(e);for(s=0,r=l.length;r>s;s++)a=l[s],o.push(i&&i.hasOwnProperty(a)?i[a]:n(a));switch(e.$inject||(e=e[r]),t?-1:o.length){case 0:return e();case 1:return e(o[0]);case 2:return e(o[0],o[1]);case 3:return e(o[0],o[1],o[2]);case 4:return e(o[0],o[1],o[2],o[3]);case 5:return e(o[0],o[1],o[2],o[3],o[4]);case 6:return e(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return e(o[0],o[1],o[2],o[3],o[4],o[5],o[6]);case 8:return e(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);case 9:return e(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8]);case 10:return e(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]);default:return e.apply(t,o)}}function r(e,t){var n,r,s=function(){};return s.prototype=(T(e)?e[e.length-1]:e).prototype,n=new s,r=i(e,n,t),v(r)?r:n}return{invoke:i,instantiate:r,get:n,annotate:St}}var d={},b="Provider",g=[],E=new yt,y={$provide:{provider:t(i),factory:t(s),service:t(a),value:t(l),constant:t(u),decorator:c}},w=h(y,function(){throw Error("Unknown provider: "+g.join(" <- "))}),k={},x=k.$injector=h(k,function(e){var t=w.get(e+b);return x.invoke(t.$get,t)});return r(f(e),function(e){x.invoke(e||p)}),x}function kt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function s(e){var t=null;return r(e,function(e){t||"a"!==Gn(e.nodeName)||(t=e)}),t}function a(){var e,i=n.hash();i?(e=o.getElementById(i))?e.scrollIntoView():(e=s(o.getElementsByName(i)))?e.scrollIntoView():"top"===i&&t.scrollTo(0,0):t.scrollTo(0,0)}var o=t.document;return e&&i.$watch(function(){return n.hash()},function(){i.$evalAsync(a)}),a}]}function xt(e,t,i,s){function a(e){try{e.apply(null,I(arguments,1))}finally{if(v--,0===v)for(;E.length;)try{E.pop()()}catch(t){i.error(t)}}}function o(e,t){(function n(){r(T,function(e){e()}),y=t(n,e)})()}function l(){S!=u.url()&&(S=u.url(),r(k,function(e){e(u.url())}))}var u=this,c=t[0],f=e.location,h=e.history,d=e.setTimeout,m=e.clearTimeout,g={};u.isMock=!1;var v=0,E=[];u.$$completeOutstandingRequest=a,u.$$incOutstandingRequestCount=function(){v++},u.notifyWhenNoOutstandingRequests=function(e){r(T,function(e){e()}),0===v?e():E.push(e)};var y,T=[];u.addPollFn=function(e){return b(y)&&o(100,d),T.push(e),e};var S=f.href,w=t.find("base");u.url=function(e,t){if(e){if(S==e)return;return S=e,s.history?t?h.replaceState(null,"",e):(h.pushState(null,"",e),w.attr("href",w.attr("href"))):t?f.replace(e):f.href=e,u}return f.href.replace(/%27/g,"'")};var k=[],x=!1;u.onUrlChange=function(t){return x||(s.history&&Jn(e).bind("popstate",l),s.hashchange?Jn(e).bind("hashchange",l):u.addPollFn(l),x=!0),k.push(t),t},u.baseHref=function(){var e=w.attr("href");return e?e.replace(/^https?\:\/\/[^\/]*/,""):""};var R={},P="",O=u.baseHref();u.cookies=function(e,t){var r,s,a,o,l;if(!e){if(c.cookie!==P)for(P=c.cookie,s=P.split("; "),R={},o=0;s.length>o;o++)if(a=s[o],l=a.indexOf("="),l>0){var e=unescape(a.substring(0,l));R[e]===n&&(R[e]=unescape(a.substring(l+1)))}return R}t===n?c.cookie=escape(e)+"=;path="+O+";expires=Thu, 01 Jan 1970 00:00:00 GMT":_(t)&&(r=(c.cookie=escape(e)+"="+escape(t)+";path="+O).length+1,r>4096&&i.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},u.defer=function(e,t){var n;return v++,n=d(function(){delete g[n],a(e)},t||0),g[n]=!0,n},u.defer.cancel=function(e){return g[e]?(delete g[e],m(e),a(p),!0):!1}}function Rt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new xt(e,i,t,n)}]}function Pt(){this.$get=function(){function e(e,n){function i(e){e!=f&&(h?h==e&&(h=e.n):h=e,r(e.n,e.p),r(e,f),f=e,f.n=null)}function r(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw Error("cacheId "+e+" taken");var s=0,a=c({},n,{id:e}),o={},l=n&&n.capacity||Number.MAX_VALUE,u={},f=null,h=null;return t[e]={put:function(e,t){var n=u[e]||(u[e]={key:e});i(n),b(t)||(e in o||s++,o[e]=t,s>l&&this.remove(h.key))},get:function(e){var t=u[e];if(t)return i(t),o[e]},remove:function(e){var t=u[e];t&&(t==f&&(f=t.p),t==h&&(h=t.n),r(t.n,t.p),delete u[e],delete o[e],s--)},removeAll:function(){o={},s=0,u={},f=h=null},destroy:function(){o=null,a=null,u=null,delete t[e]},info:function(){return c({},a,{size:s})}}}var t={};return e.info=function(){var e={};return r(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Ot(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Ct(e){var i={},s="Directive",a=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,l=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,u="Template must have exactly one root element. was: ",f=/^\s*(https?|ftp|mailto|file):/;this.directive=function h(t,n){return _(t)?(Q(n,"directive"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var s=[];return r(i[t],function(i){try{var r=e.invoke(i);S(r)?r={compile:m(r)}:!r.compile&&r.link&&(r.compile=m(r.link)),r.priority=r.priority||0,r.name=r.name||t,r.require=r.require||r.controller&&r.name,r.restrict=r.restrict||"A",s.push(r)}catch(a){n(a)}}),s}])),i[t].push(n)):r(t,o(h)),this},this.urlSanitizationWhitelist=function(e){return g(e)?(f=e,this):f},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(e,o,h,p,b,g,E,y,w){function k(e,t,n){e instanceof Jn||(e=Jn(e)),r(e,function(t,n){3==t.nodeType&&t.nodeValue.match(/\S+/)&&(e[n]=Jn(t).wrap("<span></span>").parent()[0])});var i=P(e,t,e,n);return function(t,n){Q(t,"scope");for(var r=n?hi.clone.call(e):e,s=0,a=r.length;a>s;s++){var o=r[s];(1==o.nodeType||9==o.nodeType)&&r.eq(s).data("$scope",t)}return x(r,"ng-scope"),n&&n(r,t),i&&i(t,r,r),r}}function x(e,t){try{e.addClass(t)}catch(n){}}function P(e,t,i,r){function s(e,i,r,s){var a,o,l,u,c,h,p,d,m=[];for(h=0,p=i.length;p>h;h++)m.push(i[h]);for(h=0,d=0,p=f.length;p>h;d++)l=m[d],a=f[h++],o=f[h++],a?(a.scope?(u=e.$new(v(a.scope)),Jn(l).data("$scope",u)):u=e,c=a.transclude,c||!s&&t?a(o,u,l,r,function(t){return function(n){var i=e.$new();return i.$$transcluded=!0,t(i,n).bind("$destroy",L(i,i.$destroy))}}(c||t)):a(o,u,l,n,s)):o&&o(e,l.childNodes,n,s)}for(var a,o,l,u,c,f=[],h=0;e.length>h;h++)u=new F,l=O(e[h],[],u,r),a=l.length?C(l,e[h],u,t,i):null,o=a&&a.terminal||!e[h].childNodes||!e[h].childNodes.length?null:P(e[h].childNodes,a?a.transclude:t),f.push(a),f.push(o),c=c||a||o;return c?s:null}function O(e,t,n,i){var r,s,o=e.nodeType,u=n.$attr;switch(o){case 1:A(t,At(Xn(e).toLowerCase()),"E",i);for(var c,f,h,p,d=e.attributes,m=0,b=d&&d.length;b>m;m++)c=d[m],c.specified&&(f=c.name,h=At(f.toLowerCase()),u[h]=f,n[h]=p=R(Kn&&"href"==f?decodeURIComponent(e.getAttribute(f,2)):c.value),vt(e,h)&&(n[h]=!0),z(e,t,p,h),A(t,h,"A",i));if(s=e.className,_(s)&&""!==s)for(;r=l.exec(s);)h=At(r[2]),A(t,h,"C",i)&&(n[h]=R(r[3])),s=s.substr(r.index+r[0].length);break;case 3:I(t,e.nodeValue);break;case 8:try{r=a.exec(e.nodeValue),r&&(h=At(r[1]),A(t,h,"M",i)&&(n[h]=R(r[2])))}catch(g){}}return t.sort(D),t}function C(e,i,s,a,o){function l(e,t){e&&(e.require=p.require,A.push(e)),t&&(t.require=p.require,D.push(t))}function c(e,t){var n,i="data",s=!1;if(_(e)){for(;"^"==(n=e.charAt(0))||"?"==n;)e=e.substr(1),"^"==n&&(i="inheritedData"),s=s||"?"==n;if(n=t[i]("$"+e+"Controller"),!n&&!s)throw Error("No controller: "+e);return n}return T(e)&&(n=[],r(e,function(e){n.push(c(e,t))})),n}function f(e,t,a,o,l){var u,f,p,d,m,b;if(u=i===a?s:H(s,new F(Jn(a),s.$attr)),f=u.$$element,L){var v=/^\s*([@=&])\s*(\w*)\s*$/,_=t.$parent||t;
r(L.scope,function(e,n){var i,r,s,a=e.match(v)||[],o=a[2]||n,l=a[1];switch(t.$$isolateBindings[n]=l+o,l){case"@":u.$observe(o,function(e){t[n]=e}),u.$$observers[o].$$scope=_;break;case"=":r=g(u[o]),s=r.assign||function(){throw i=t[n]=r(_),Error(Ei+u[o]+" (directive: "+L.name+")")},i=t[n]=r(_),t.$watch(function(){var e=r(_);return e!==t[n]&&(e!==i?i=t[n]=e:s(_,e=i=t[n])),e});break;case"&":r=g(u[o]),t[n]=function(e){return r(_,e)};break;default:throw Error("Invalid isolate scope definition for directive "+L.name+": "+e)}})}for(y&&r(y,function(e){var n={$scope:t,$element:f,$attrs:u,$transclude:l};b=e.controller,"@"==b&&(b=u[e.name]),f.data("$"+e.name+"Controller",E(b,n))}),p=0,d=A.length;d>p;p++)try{m=A[p],m(t,f,u,m.require&&c(m.require,f))}catch(T){h(T,G(f))}for(e&&e(t,a.childNodes,n,l),p=0,d=D.length;d>p;p++)try{m=D[p],m(t,f,u,m.require&&c(m.require,f))}catch(T){h(T,G(f))}}for(var p,d,m,b,y,w,P,C=-Number.MAX_VALUE,A=[],D=[],I=null,L=null,z=null,B=s.$$element=Jn(i),j=a,V=0,J=e.length;J>V&&(p=e[V],m=n,!(C>p.priority));V++){if((P=p.scope)&&(N("isolated scope",L,p,B),v(P)&&(x(B,"ng-isolate-scope"),L=p),x(B,"ng-scope"),I=I||p),d=p.name,(P=p.controller)&&(y=y||{},N("'"+d+"' controller",y[d],p,B),y[d]=p),(P=p.transclude)&&(N("transclusion",b,p,B),b=p,C=p.priority,"element"==P?(m=Jn(i),B=s.$$element=Jn(t.createComment(" "+d+": "+s[d]+" ")),i=B[0],U(o,Jn(m[0]),i),j=k(m,a,C)):(m=Jn(at(i)).contents(),B.html(""),j=k(m,a))),P=p.template)if(N("template",z,p,B),z=p,P=W(P),p.replace){if(m=Jn("<div>"+R(P)+"</div>").contents(),i=m[0],1!=m.length||1!==i.nodeType)throw Error(u+P);U(o,B,i);var Y={$attr:{}};e=e.concat(O(i,e.splice(V+1,e.length-(V+1)),Y)),M(s,Y),J=e.length}else B.html(P);if(p.templateUrl)N("template",z,p,B),z=p,f=$(e.splice(V,e.length-V),f,B,s,o,p.replace,j),J=e.length;else if(p.compile)try{w=p.compile(B,s,j),S(w)?l(null,w):w&&l(w.pre,w.post)}catch(q){h(q,G(B))}p.terminal&&(f.terminal=!0,C=Math.max(C,p.priority))}return f.scope=I&&I.scope,f.transclude=b&&j,f}function A(t,r,a,o){var l=!1;if(i.hasOwnProperty(r))for(var u,c=e.get(r+s),f=0,p=c.length;p>f;f++)try{u=c[f],(o===n||o>u.priority)&&-1!=u.restrict.indexOf(a)&&(t.push(u),l=!0)}catch(d){h(d)}return l}function M(e,t){var n=t.$attr,i=e.$attr,s=e.$$element;r(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),r(t,function(t,r){"class"==r?(x(s,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==r?s.attr("style",s.attr("style")+";"+t):"$"==r.charAt(0)||e.hasOwnProperty(r)||(e[r]=t,i[r]=n[r])})}function $(e,t,n,i,r,s,a){var o,l,f=[],h=n[0],d=e.shift(),m=c({},d,{controller:null,templateUrl:null,transclude:null,scope:null});return n.html(""),p.get(d.templateUrl,{cache:b}).success(function(c){var p,d,b;if(c=W(c),s){if(b=Jn("<div>"+R(c)+"</div>").contents(),p=b[0],1!=b.length||1!==p.nodeType)throw Error(u+c);d={$attr:{}},U(r,n,p),O(p,e,d),M(i,d)}else p=h,n.html(c);for(e.unshift(m),o=C(e,p,i,a),l=P(n[0].childNodes,a);f.length;){var g=f.pop(),v=f.pop(),_=f.pop(),E=f.pop(),y=p;_!==h&&(y=at(p),U(v,Jn(_),y)),o(function(){t(l,E,y,r,g)},E,y,r,g)}f=null}).error(function(e,t,n,i){throw Error("Failed to load template: "+i.url)}),function(e,n,i,r,s){f?(f.push(n),f.push(i),f.push(r),f.push(s)):o(function(){t(l,n,i,r,s)},n,i,r,s)}}function D(e,t){return t.priority-e.priority}function N(e,t,n,i){if(t)throw Error("Multiple directives ["+t.name+", "+n.name+"] asking for "+e+" on: "+G(i))}function I(e,t){var n=o(t,!0);n&&e.push({priority:0,compile:m(function(e,t){var i=t.parent(),r=i.data("$binding")||[];r.push(n),x(i.data("$binding",r),"ng-binding"),e.$watch(n,function(e){t[0].nodeValue=e})})})}function z(e,t,i,r){var s=o(i,!0);s&&t.push({priority:100,compile:m(function(e,t,i){var a=i.$$observers||(i.$$observers={});"class"===r&&(s=o(i[r],!0)),i[r]=n,(a[r]||(a[r]=[])).$$inter=!0,(i.$$observers&&i.$$observers[r].$$scope||e).$watch(s,function(e){i.$set(r,e)})})})}function U(e,t,n){var i,r,s=t[0],a=s.parentNode;if(e)for(i=0,r=e.length;r>i;i++)if(e[i]==s){e[i]=n;break}a&&a.replaceChild(n,s),n[Jn.expando]=s[Jn.expando],t[0]=n}var F=function(e,t){this.$$element=e,this.$attr=t||{}};F.prototype={$normalize:At,$set:function(e,t,i,s){var a,o=vt(this.$$element[0],e),l=this.$$observers;o&&(this.$$element.prop(e,t),s=o),this[e]=t,s?this.$attr[e]=s:(s=this.$attr[e],s||(this.$attr[e]=s=X(e,"-"))),"A"===Xn(this.$$element[0])&&"href"===e&&(B.setAttribute("href",t),a=B.href,a.match(f)||(this[e]=t="unsafe:"+a)),i!==!1&&(null===t||t===n?this.$$element.removeAttr(s):this.$$element.attr(s,t)),l&&r(l[e],function(e){try{e(t)}catch(n){h(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers={}),r=i[e]||(i[e]=[]);return r.push(t),y.$evalAsync(function(){r.$$inter||t(n[e])}),t}};var B=w[0].createElement("a"),j=o.startSymbol(),V=o.endSymbol(),W="{{"==j||"}}"==V?d:function W(e){return e.replace(/\{\{/g,j).replace(/}}/g,V)};return k}]}function At(e){return it(e.replace(yi,""))}function Mt(){var e={};this.register=function(t,n){v(t)?c(e,t):e[t]=n},this.$get=["$injector","$window",function(t,n){return function(i,r){if(_(i)){var s=i;i=e.hasOwnProperty(s)?e[s]:Qt(r.$scope,s,!0)||Qt(n,s,!0),Z(i,s,!0)}return t.instantiate(i,r)}}]}function $t(){this.$get=["$window",function(e){return Jn(e.document)}]}function Ht(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function Dt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse",function(i){function r(r,o){for(var l,u,c,f,h=0,p=[],d=r.length,m=!1,b=[];d>h;)-1!=(l=r.indexOf(e,h))&&-1!=(u=r.indexOf(t,l+s))?(h!=l&&p.push(r.substring(h,l)),p.push(c=i(f=r.substring(l+s,u))),c.exp=f,h=u+a,m=!0):(h!=d&&p.push(r.substring(h)),h=d);return(d=p.length)||(p.push(""),d=1),!o||m?(b.length=d,c=function(e){for(var t,i=0,r=d;r>i;i++)"function"==typeof(t=p[i])&&(t=t(e),null==t||t==n?t="":"string"!=typeof t&&(t=U(t))),b[i]=t;return b.join("")},c.exp=r,c.parts=p,c):n}var s=e.length,a=t.length;return r.startSymbol=function(){return e},r.endSymbol=function(){return t},r}]}function Nt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=W(t[n]);return t.join("/")}function It(e,t){var n=Ti.exec(e);return n={protocol:n[1],host:n[3],port:f(n[5])||ki[n[1]]||null,path:n[6]||"/",search:n[8],hash:n[10]},t&&(t.$$protocol=n.protocol,t.$$host=n.host,t.$$port=n.port),n}function Lt(e,t,n){return e+"://"+t+(n==ki[e]?"":":"+n)}function zt(e){return e.substr(0,e.lastIndexOf("/"))}function Ut(e,t,n){var i=It(e);return decodeURIComponent(i.path)!=t||b(i.hash)||0!==i.hash.indexOf(n)?e:Lt(i.protocol,i.host,i.port)+zt(t)+i.hash.substr(n.length)}function Ft(e,t,n){var i=It(e);if(decodeURIComponent(i.path)!=t||b(i.hash)||0!==i.hash.indexOf(n)){var r=i.search&&"?"+i.search||"",s=i.hash&&"#"+i.hash||"",a=zt(t),o=i.path.substr(a.length);if(0!==i.path.indexOf(a))throw Error('Invalid url "'+e+'", missing path prefix "'+a+'" !');return Lt(i.protocol,i.host,i.port)+t+"#"+n+o+r+s}return e}function Bt(e,t,i){t=t||"",this.$$parse=function(e){var n=It(e,this);if(0!==n.path.indexOf(t))throw Error('Invalid url "'+e+'", missing path prefix "'+t+'" !');this.$$path=decodeURIComponent(n.path.substr(t.length)),this.$$search=j(n.search),this.$$hash=n.hash&&decodeURIComponent(n.hash)||"",this.$$compose()},this.$$compose=function(){var e=V(this.$$search),n=this.$$hash?"#"+W(this.$$hash):"";this.$$url=Nt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=Lt(this.$$protocol,this.$$host,this.$$port)+t+this.$$url},this.$$rewriteAppUrl=function(e){return 0==e.indexOf(i)?e:n},this.$$parse(e)}function Gt(e,t,i){var r;this.$$parse=function(e){var n=It(e,this);if(n.hash&&0!==n.hash.indexOf(t))throw Error('Invalid url "'+e+'", missing hash prefix "'+t+'" !');r=n.path+(n.search?"?"+n.search:""),n=wi.exec((n.hash||"").substr(t.length)),this.$$path=n[1]?("/"==n[1].charAt(0)?"":"/")+decodeURIComponent(n[1]):"",this.$$search=j(n[3]),this.$$hash=n[5]&&decodeURIComponent(n[5])||"",this.$$compose()},this.$$compose=function(){var e=V(this.$$search),n=this.$$hash?"#"+W(this.$$hash):"";this.$$url=Nt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=Lt(this.$$protocol,this.$$host,this.$$port)+r+(this.$$url?"#"+t+this.$$url:"")},this.$$rewriteAppUrl=function(e){return 0==e.indexOf(i)?e:n},this.$$parse(e)}function jt(e,t,i,r){Gt.apply(this,arguments),this.$$rewriteAppUrl=function(e){return 0==e.indexOf(i)?i+r+"#"+t+e.substr(i.length):n}}function Vt(e){return function(){return this[e]}}function Wt(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Jt(){var t="",i=!1;this.hashPrefix=function(e){return g(e)?(t=e,this):t},this.html5Mode=function(e){return g(e)?(i=e,this):i},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(r,s,a,o){function l(e){r.$broadcast("$locationChangeSuccess",u.absUrl(),e)}var u,c,f,h,p=s.url(),d=It(p);i?(c=s.baseHref()||"/",f=zt(c),h=Lt(d.protocol,d.host,d.port)+f+"/",u=a.history?new Bt(Ut(p,c,t),f,h):new jt(Ft(p,c,t),t,h,c.substr(f.length+1))):(h=Lt(d.protocol,d.host,d.port)+(d.path||"")+(d.search?"?"+d.search:"")+"#"+t+"/",u=new Gt(p,t,h)),o.bind("click",function(t){if(!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var n=Jn(t.target);"a"!==Gn(n[0].nodeName);)if(n[0]===o[0]||!(n=n.parent())[0])return;var i=n.prop("href"),s=u.$$rewriteAppUrl(i);i&&!n.attr("target")&&s&&(u.$$parse(s),r.$apply(),t.preventDefault(),e.angular["ff-684208-preventDefault"]=!0)}}),u.absUrl()!=p&&s.url(u.absUrl(),!0),s.onUrlChange(function(e){if(u.absUrl()!=e){if(r.$broadcast("$locationChangeStart",e,u.absUrl()).defaultPrevented)return s.url(u.absUrl()),n;r.$evalAsync(function(){var t=u.absUrl();u.$$parse(e),l(t)}),r.$$phase||r.$digest()}});var m=0;return r.$watch(function(){var e=s.url(),t=u.$$replace;return m&&e==u.absUrl()||(m++,r.$evalAsync(function(){r.$broadcast("$locationChangeStart",u.absUrl(),e).defaultPrevented?u.$$parse(e):(s.url(u.absUrl(),t),l(e))})),u.$$replace=!1,m}),u}]}function Yt(){this.$get=["$window",function(e){function t(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function n(n){var i=e.console||{},s=i[n]||i.log||p;return s.apply?function(){var e=[];return r(arguments,function(n){e.push(t(n))}),s.apply(i,e)}:function(e,t){s(e,t)}}return{log:n("log"),warn:n("warn"),info:n("info"),error:n("error")}}]}function qt(e,t){function i(e){return-1!=e.indexOf(b)}function r(e){return-1!=e.indexOf(y)}function s(){return e.length>_+1?e.charAt(_+1):!1}function a(e){return e>="0"&&"9">=e}function o(e){return" "==e||"\r"==e||"	"==e||"\n"==e||""==e||""==e}function l(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"==e||"$"==e}function u(e){return"-"==e||"+"==e||a(e)}function f(t,n,i){throw i=i||_,Error("Lexer Error: "+t+" at column"+(g(n)?"s "+n+"-"+_+" ["+e.substring(n,i)+"]":" "+i)+" in expression ["+e+"].")}function h(){for(var t="",n=_;e.length>_;){var i=Gn(e.charAt(_));if("."==i||a(i))t+=i;else{var r=s();if("e"==i&&u(r))t+=i;else if(u(i)&&r&&a(r)&&"e"==t.charAt(t.length-1))t+=i;else{if(!u(i)||r&&a(r)||"e"!=t.charAt(t.length-1))break;f("Invalid exponent")}}_++}t=1*t,v.push({index:n,text:t,json:!0,fn:function(){return t}})}function p(){for(var n,i,r,s,u="",f=_;e.length>_&&(s=e.charAt(_),"."==s||l(s)||a(s));)"."==s&&(n=_),u+=s,_++;if(n)for(i=_;e.length>i;){if(s=e.charAt(i),"("==s){r=u.substr(n-f+1),u=u.substr(0,n-f),_=i;break}if(!o(s))break;i++}var h={index:f,text:u};if(xi.hasOwnProperty(u))h.fn=h.json=xi[u];else{var p=en(u,t);h.fn=c(function(e,t){return p(e,t)},{assign:function(e,t){return Kt(e,u,t)}})}v.push(h),r&&(v.push({index:n,text:".",json:!1}),v.push({index:n+1,text:r,json:!1}))}function d(t){var i=_;_++;for(var r="",s=t,a=!1;e.length>_;){var o=e.charAt(_);if(s+=o,a){if("u"==o){var l=e.substring(_+1,_+5);l.match(/[\da-f]{4}/i)||f("Invalid unicode escape [\\u"+l+"]"),_+=4,r+=String.fromCharCode(parseInt(l,16))}else{var u=Ri[o];r+=u?u:o}a=!1}else if("\\"==o)a=!0;else{if(o==t)return _++,v.push({index:i,text:s,string:r,json:!0,fn:function(){return r}}),n;r+=o}_++}f("Unterminated quote",i)}for(var m,b,v=[],_=0,E=[],y=":";e.length>_;){if(b=e.charAt(_),i("\"'"))d(b);else if(a(b)||i(".")&&a(s()))h();else if(l(b))p(),r("{,")&&"{"==E[0]&&(m=v[v.length-1])&&(m.json=-1==m.text.indexOf("."));else if(i("(){}[].,;:"))v.push({index:_,text:b,json:r(":[,")&&i("{[")||i("}]:,")}),i("{[")&&E.unshift(b),i("}]")&&E.shift(),_++;else{if(o(b)){_++;continue}var T=b+s(),S=xi[b],w=xi[T];w?(v.push({index:_,text:T,fn:w}),_+=2):S?(v.push({index:_,text:b,fn:S,json:r("[,:")&&i("+-")}),_+=1):f("Unexpected next character ",_,_+1)}y=b}return v}function Xt(e,t,i,r){function s(t,n){throw Error("Syntax Error: Token '"+n.text+"' "+t+" at column "+(n.index+1)+" of the expression ["+e+"] starting at ["+e.substring(n.index)+"].")}function a(){if(0===D.length)throw Error("Unexpected end of expression: "+e);return D[0]}function o(e,t,n,i){if(D.length>0){var r=D[0],s=r.text;if(s==e||s==t||s==n||s==i||!e&&!t&&!n&&!i)return r}return!1}function l(e,n,i,r){var a=o(e,n,i,r);return a?(t&&!a.json&&s("is not valid json",a),D.shift(),a):!1}function u(e){l(e)||s("is unexpected, expecting ["+e+"]",o())}function f(e,t){return function(n,i){return e(n,i,t)}}function h(e,t,n){return function(i,r){return t(i,r,e,n)}}function d(){for(var e=[];;)if(D.length>0&&!o("}",")",";","]")&&e.push(U()),!l(";"))return 1==e.length?e[0]:function(t,n){for(var i,r=0;e.length>r;r++){var s=e[r];s&&(i=s(t,n))}return i}}function b(){for(var e,t=v();;){if(!(e=l("|")))return t;t=h(t,e.fn,g())}}function g(){for(var e=l(),t=i(e.text),n=[];;){if(!(e=l(":"))){var r=function(e,i,r){for(var s=[r],a=0;n.length>a;a++)s.push(n[a](e,i));return t.apply(e,s)};return function(){return r}}n.push(v())}}function v(){return N()}function _(){var t,n,i=E();return(n=l("="))?(i.assign||s("implies assignment but ["+e.substring(0,n.index)+"] can not be assigned to",n),t=E(),function(e,n){return i.assign(e,t(e,n),n)}):i}function E(){for(var e,t=y();;){if(!(e=l("||")))return t;t=h(t,e.fn,y())}}function y(){var e,t=T();return(e=l("&&"))&&(t=h(t,e.fn,y())),t}function T(){var e,t=S();return(e=l("==","!="))&&(t=h(t,e.fn,T())),t}function S(){var e,t=w();return(e=l("<",">","<=",">="))&&(t=h(t,e.fn,S())),t}function w(){for(var e,t=k();e=l("+","-");)t=h(t,e.fn,k());return t}function k(){for(var e,t=x();e=l("*","/","%");)t=h(t,e.fn,x());return t}function x(){var e;return l("+")?R():(e=l("-"))?h(H,e.fn,x()):(e=l("!"))?f(e.fn,x()):R()}function R(){var e;if(l("("))e=U(),u(")");else if(l("["))e=A();else if(l("{"))e=M();else{var t=l();e=t.fn,e||s("not a primary expression",t)}for(var n,i;n=l("(","[",".");)"("===n.text?(e=I(e,i),i=null):"["===n.text?(i=e,e=z(e)):"."===n.text?(i=e,e=L(e)):s("IMPOSSIBLE");return e}function P(e){var t=l().text,n=en(t,r);return c(function(t,i,r){return n(r||e(t,i),i)},{assign:function(n,i,r){return Kt(e(n,r),t,i)}})}function O(e){var t=v();return u("]"),c(function(i,r){var s,a,o=e(i,r),l=t(i,r);return o?(s=o[l],s&&s.then&&(a=s,"$$v"in s||(a.$$v=n,a.then(function(e){a.$$v=e})),s=s.$$v),s):n},{assign:function(n,i,r){return e(n,r)[t(n,r)]=i}})}function C(e,t){var n=[];if(")"!=a().text)do n.push(v());while(l(","));return u(")"),function(i,r){for(var s=[],a=t?t(i,r):i,o=0;n.length>o;o++)s.push(n[o](i,r));var l=e(i,r,a)||p;return l.apply?l.apply(a,s):l(s[0],s[1],s[2],s[3],s[4])}}function A(){var e=[];if("]"!=a().text)do e.push(v());while(l(","));return u("]"),function(t,n){for(var i=[],r=0;e.length>r;r++)i.push(e[r](t,n));return i}}function M(){var e=[];if("}"!=a().text)do{var t=l(),n=t.string||t.text;u(":");var i=v();e.push({key:n,value:i})}while(l(","));return u("}"),function(t,n){for(var i={},r=0;e.length>r;r++){var s=e[r];i[s.key]=s.value(t,n)}return i}}var $,H=m(0),D=qt(e,r),N=_,I=C,L=P,z=O,U=b;return t?(N=E,I=L=z=U=function(){s("is not valid json",{text:e,index:0})},$=R()):$=d(),0!==D.length&&s("is an unexpected token",D[0]),$}function Kt(e,t,n){for(var i=t.split("."),r=0;i.length>1;r++){var s=i.shift(),a=e[s];a||(a={},e[s]=a),e=a}return e[i.shift()]=n,n}function Qt(e,t,n){if(!t)return e;for(var i,r=t.split("."),s=e,a=r.length,o=0;a>o;o++)i=r[o],e&&(e=(s=e)[i]);return!n&&S(e)?L(s,e):e}function Zt(e,t,i,r,s){return function(a,o){var l,u=o&&o.hasOwnProperty(e)?o:a;return null===u||u===n?u:(u=u[e],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(e){l.$$v=e})),u=u.$$v),t&&null!==u&&u!==n?(u=u[t],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(e){l.$$v=e})),u=u.$$v),i&&null!==u&&u!==n?(u=u[i],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(e){l.$$v=e})),u=u.$$v),r&&null!==u&&u!==n?(u=u[r],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(e){l.$$v=e})),u=u.$$v),s&&null!==u&&u!==n?(u=u[s],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(e){l.$$v=e})),u=u.$$v),u):u):u):u):u)}}function en(e,t){if(Pi.hasOwnProperty(e))return Pi[e];var i,s=e.split("."),a=s.length;if(t)i=6>a?Zt(s[0],s[1],s[2],s[3],s[4]):function(e,t){var i,r=0;do i=Zt(s[r++],s[r++],s[r++],s[r++],s[r++])(e,t),t=n,e=i;while(a>r);return i};else{var o="var l, fn, p;\n";r(s,function(e,t){o+="if(s === null || s === undefined) return s;\nl=s;\ns="+(t?"s":'((k&&k.hasOwnProperty("'+e+'"))?k:s)')+'["'+e+'"]'+";\n"+"if (s && s.then) {\n"+' if (!("$$v" in s)) {\n'+" p=s;\n"+" p.$$v = undefined;\n"+" p.then(function(v) {p.$$v=v;});\n"+"}\n"+" s=s.$$v\n"+"}\n"}),o+="return s;",i=Function("s","k",o),i.toString=function(){return o}}return Pi[e]=i}function tn(){var e={};this.$get=["$filter","$sniffer",function(t,n){return function(i){switch(typeof i){case"string":return e.hasOwnProperty(i)?e[i]:e[i]=Xt(i,!1,t,n.csp);case"function":return i;default:return p}}}]}function nn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return rn(function(t){e.$evalAsync(t)},t)}]}function rn(e,t){function i(e){return e}function s(e){return u(e)}function a(e){var t=o(),n=e.length,i=[];return n?r(e,function(e,r){l(e).then(function(e){r in i||(i[r]=e,--n||t.resolve(i))},function(e){r in i||t.reject(e)})}):t.resolve(i),t.promise}var o=function(){var r,a,c=[];return a={resolve:function(t){if(c){var i=c;c=n,r=l(t),i.length&&e(function(){for(var e,t=0,n=i.length;n>t;t++)e=i[t],r.then(e[0],e[1])})}},reject:function(e){a.resolve(u(e))},promise:{then:function(e,n){var a=o(),l=function(n){try{a.resolve((e||i)(n))}catch(r){t(r),a.reject(r)}},u=function(e){try{a.resolve((n||s)(e))}catch(i){t(i),a.reject(i)}};return c?c.push([l,u]):r.then(l,u),a.promise}}}},l=function(t){return t&&t.then?t:{then:function(n){var i=o();return e(function(){i.resolve(n(t))}),i.promise}}},u=function(t){return{then:function(n,i){var r=o();return e(function(){r.resolve((i||s)(t))}),r.promise}}},c=function(n,r,a){var c,f=o(),h=function(e){try{return(r||i)(e)}catch(n){return t(n),u(n)}},p=function(e){try{return(a||s)(e)}catch(n){return t(n),u(n)}};return e(function(){l(n).then(function(e){c||(c=!0,f.resolve(l(e).then(h,p)))},function(e){c||(c=!0,f.resolve(p(e)))})}),f.promise};return{defer:o,reject:u,when:c,all:a}}function sn(){var e={};this.when=function(t,n){if(e[t]=c({reloadOnSearch:!0},n),t){var i="/"==t[t.length-1]?t.substr(0,t.length-1):t+"/";e[i]={redirectTo:t}}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(t,n,i,s,a,o,l){function u(e,t){t="^"+t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"$";for(var n,i="",s=[],a={},o=/:(\w+)/g,l=0;null!==(n=o.exec(t));)i+=t.slice(l,n.index),i+="([^\\/]*)",s.push(n[1]),l=o.lastIndex;i+=t.substr(l);var u=e.match(RegExp(i));return u&&r(s,function(e,t){a[e]=u[t+1]}),u?a:null}function f(){var e=p(),u=b.current;e&&u&&e.$$route===u.$$route&&D(e.pathParams,u.pathParams)&&!e.reloadOnSearch&&!m?(u.params=e.params,$(u.params,i),t.$broadcast("$routeUpdate",u)):(e||u)&&(m=!1,t.$broadcast("$routeChangeStart",e,u),b.current=e,e&&e.redirectTo&&(_(e.redirectTo)?n.path(d(e.redirectTo,e.params)).search(e.params).replace():n.url(e.redirectTo(e.pathParams,n.path(),n.search())).replace()),s.when(e).then(function(){if(e){var t,n=[],i=[];return r(e.resolve||{},function(e,t){n.push(t),i.push(_(e)?a.get(e):a.invoke(e))}),g(t=e.template)||g(t=e.templateUrl)&&(t=o.get(t,{cache:l}).then(function(e){return e.data})),g(t)&&(n.push("$template"),i.push(t)),s.all(i).then(function(e){var t={};return r(e,function(e,i){t[n[i]]=e}),t})}}).then(function(n){e==b.current&&(e&&(e.locals=n,$(e.params,i)),t.$broadcast("$routeChangeSuccess",e,u))},function(n){e==b.current&&t.$broadcast("$routeChangeError",e,u,n)}))}function p(){var t,i;return r(e,function(e,r){!i&&(t=u(n.path(),r))&&(i=h(e,{params:c({},n.search(),t),pathParams:t}),i.$$route=e)}),i||e[null]&&h(e[null],{params:{},pathParams:{}})}function d(e,t){var n=[];return r((e||"").split(":"),function(e,i){if(0==i)n.push(e);else{var r=e.match(/(\w+)(.*)/),s=r[1];n.push(t[s]),n.push(r[2]||""),delete t[s]}}),n.join("")}var m=!1,b={routes:e,reload:function(){m=!0,t.$evalAsync(f)}};return t.$on("$locationChangeSuccess",f),b}]}function an(){this.$get=m({})}function on(){var e=10;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse",function(t,n,i){function r(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$listeners={},this.$$isolateBindings={}}function s(e){if(c.$$phase)throw Error(c.$$phase+" already in progress");c.$$phase=e}function a(){c.$$phase=null}function o(e,t){var n=i(e);return Z(n,t),n}function u(){}r.prototype={$new:function(e){var t,n;if(S(e))throw Error("API-CHANGE: Use $controller to instantiate controllers.");return e?(n=new r,n.$root=this.$root):(t=function(){},t.prototype=this,n=new t,n.$id=l()),n["this"]=n,n.$$listeners={},n.$parent=this,n.$$asyncQueue=[],n.$$watchers=n.$$nextSibling=n.$$childHead=n.$$childTail=null,n.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=n,this.$$childTail=n):this.$$childHead=this.$$childTail=n,n},$watch:function(e,t,n){var i=this,r=o(e,"watch"),s=i.$$watchers,a={fn:t,last:u,get:r,exp:e,eq:!!n};if(!S(t)){var l=o(t||p,"listener");a.fn=function(e,t,n){l(n)}}return s||(s=i.$$watchers=[]),s.unshift(a),function(){M(s,a)}},$digest:function(){var t,i,r,o,l,c,f,h,p,d,m,b=e,g=this,v=[];s("$digest");do{f=!1,p=g;do{for(l=p.$$asyncQueue;l.length;)try{p.$eval(l.shift())}catch(_){n(_)}if(o=p.$$watchers)for(c=o.length;c--;)try{t=o[c],(i=t.get(p))===(r=t.last)||(t.eq?D(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))||(f=!0,t.last=t.eq?$(i):i,t.fn(i,r===u?i:r,p),5>b&&(d=4-b,v[d]||(v[d]=[]),m=S(t.exp)?"fn: "+(t.exp.name||""+t.exp):t.exp,m+="; newVal: "+U(i)+"; oldVal: "+U(r),v[d].push(m)))}catch(_){n(_)}if(!(h=p.$$childHead||p!==g&&p.$$nextSibling))for(;p!==g&&!(h=p.$$nextSibling);)p=p.$parent}while(p=h);if(f&&!b--)throw a(),Error(e+" $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: "+U(v))}while(f||l.length);a()},$destroy:function(){if(c!=this&&!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(e,t){return i(e)(this,t)},$evalAsync:function(e){this.$$asyncQueue.push(e)},$apply:function(e){try{return s("$apply"),this.$eval(e)}catch(t){n(t)}finally{a();try{c.$digest()}catch(t){throw n(t),t}}},$on:function(e,t){var n=this.$$listeners[e];return n||(this.$$listeners[e]=n=[]),n.push(t),function(){n[A(n,t)]=null}},$emit:function(e){var t,i,r,s=[],a=this,o=!1,l={name:e,targetScope:a,stopPropagation:function(){o=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=N([l],arguments,1);do{for(t=a.$$listeners[e]||s,l.currentScope=a,i=0,r=t.length;r>i;i++)if(t[i])try{if(t[i].apply(null,u),o)return l}catch(c){n(c)}else t.splice(i,1),i--,r--;a=a.$parent}while(a);return l},$broadcast:function(e){var t,i,r,s=this,a=s,o=s,l={name:e,targetScope:s,preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=N([l],arguments,1);do{for(a=o,l.currentScope=a,t=a.$$listeners[e]||[],i=0,r=t.length;r>i;i++)if(t[i])try{t[i].apply(null,u)}catch(c){n(c)}else t.splice(i,1),i--,r--;if(!(o=a.$$childHead||a!==s&&a.$$nextSibling))for(;a!==s&&!(o=a.$$nextSibling);)a=a.$parent}while(a=o);return l}};var c=new r;return c}]}function ln(){this.$get=["$window",function(e){var t={},n=f((/android (\d+)/.exec(Gn(e.navigator.userAgent))||[])[1]);return{history:!(!e.history||!e.history.pushState||4>n),hashchange:"onhashchange"in e&&(!e.document.documentMode||e.document.documentMode>7),hasEvent:function(n){if("input"==n&&9==Kn)return!1;if(b(t[n])){var i=e.document.createElement("div");t[n]="on"+n in i}return t[n]},csp:!1}}]}function un(){this.$get=m(e)}function cn(e){var t,n,i,s={};return e?(r(e.split("\n"),function(e){i=e.indexOf(":"),t=Gn(R(e.substr(0,i))),n=R(e.substr(i+1)),t&&(s[t]?s[t]+=", "+n:s[t]=n)}),s):s}function fn(e){var t=v(e)?e:n;return function(n){return t||(t=cn(e)),n?t[Gn(n)]||null:t}}function hn(e,t,n){return S(n)?n(e,t):(r(n,function(n){e=n(e,t)}),e)}function pn(e){return e>=200&&300>e}function dn(){var e=/^\s*(\[|\{[^\{])/,t=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,s=this.defaults={transformResponse:[function(n){return _(n)&&(n=n.replace(i,""),e.test(n)&&t.test(n)&&(n=F(n,!0))),n}],transformRequest:[function(e){return v(e)&&!x(e)?U(e):e}],headers:{common:{Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},post:{"Content-Type":"application/json;charset=utf-8"},put:{"Content-Type":"application/json;charset=utf-8"}}},o=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,t,i,l,u,f){function h(e){function n(e){var t=c({},e,{data:hn(e.data,e.headers,o)});return pn(e.status)?t:u.reject(t)}e.method=jn(e.method);var i,a=e.transformRequest||s.transformRequest,o=e.transformResponse||s.transformResponse,l=s.headers,f=c({"X-XSRF-TOKEN":t.cookies()["XSRF-TOKEN"]},l.common,l[Gn(e.method)],e.headers),h=hn(e.data,fn(f),a);return b(e.data)&&delete f["Content-Type"],i=m(e,h,f),i=i.then(n,n),r(y,function(e){i=e(i)}),i.success=function(t){return i.then(function(n){t(n.data,n.status,n.headers,e)}),i},i.error=function(t){return i.then(null,function(n){t(n.data,n.status,n.headers,e)}),i},i}function p(){r(arguments,function(e){h[e]=function(t,n){return h(c(n||{},{method:e,url:t}))}})}function d(){r(arguments,function(e){h[e]=function(t,n,i){return h(c(i||{},{method:e,url:t,data:n}))}})}function m(t,n,i){function r(e,t,n){o&&(pn(e)?o.put(d,[e,t,cn(n)]):o.remove(d)),s(t,e,n),l.$apply()}function s(e,n,i){n=Math.max(n,0),(pn(n)?f.resolve:f.reject)({data:e,status:n,headers:fn(i),config:t})}function a(){var e=A(h.pendingRequests,t);-1!==e&&h.pendingRequests.splice(e,1)}var o,c,f=u.defer(),p=f.promise,d=g(t.url,t.params);if(h.pendingRequests.push(t),p.then(a,a),t.cache&&"GET"==t.method&&(o=v(t.cache)?t.cache:E),o)if(c=o.get(d)){if(c.then)return c.then(a,a),c;T(c)?s(c[1],c[0],$(c[2])):s(c,200,{})}else o.put(d,p);return c||e(t.method,d,n,r,i,t.timeout,t.withCredentials),p}function g(e,t){if(!t)return e;var i=[];return a(t,function(e,t){null!=e&&e!=n&&(v(e)&&(e=U(e)),i.push(encodeURIComponent(t)+"="+encodeURIComponent(e)))}),e+(-1==e.indexOf("?")?"?":"&")+i.join("&")}var E=i("$http"),y=[];return r(o,function(e){y.push(_(e)?f.get(e):f.invoke(e))}),h.pendingRequests=[],p("get","delete","head","jsonp"),d("post","put"),h.defaults=s,h}]}function mn(){this.$get=["$browser","$window","$document",function(e,t,n){return bn(e,Oi,e.defer,t.angular.callbacks,n[0],t.location.protocol.replace(":",""))}]}function bn(e,t,n,i,s,a){function o(e,t){var n=s.createElement("script"),i=function(){s.body.removeChild(n),t&&t()};n.type="text/javascript",n.src=e,Kn?n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&i()}:n.onload=n.onerror=i,s.body.appendChild(n)}return function(s,l,u,c,f,h,d){function m(t,n,i,r){var s=(l.match(Ti)||["",a])[1];n="file"==s?i?200:404:n,n=1223==n?204:n,t(n,i,r),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==Gn(s)){var b="_"+(i.counter++).toString(36);i[b]=function(e){i[b].data=e},o(l.replace("JSON_CALLBACK","angular.callbacks."+b),function(){i[b].data?m(c,200,i[b].data):m(c,-2),delete i[b]})}else{var g=new t;g.open(s,l,!0),r(f,function(e,t){e&&g.setRequestHeader(t,e)});var v;g.onreadystatechange=function(){if(4==g.readyState){var e=g.getAllResponseHeaders(),t=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];e||(e="",r(t,function(t){var n=g.getResponseHeader(t);n&&(e+=t+": "+n+"\n")})),m(c,v||g.status,g.responseText,e)}},d&&(g.withCredentials=!0),g.send(u||""),h>0&&n(function(){v=-1,g.abort()},h)}}}function gn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function vn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(e,t,n,i){function r(r,a,o){var l,u,c=n.defer(),f=c.promise,h=g(o)&&!o;return l=t.defer(function(){try{c.resolve(r())}catch(t){c.reject(t),i(t)}h||e.$apply()},a),u=function(){delete s[f.$$timeoutId]},f.$$timeoutId=l,s[l]=c,f.then(u,u),f}var s={};return r.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),t.defer.cancel(e.$$timeoutId)):!1},r}]}function _n(e){function t(t,i){return e.factory(t+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",yn),t("date",On),t("filter",En),t("json",Cn),t("limitTo",An),t("lowercase",Hi),t("number",Tn),t("orderBy",Mn),t("uppercase",Di)}function En(){return function(e,t){if(!T(e))return e;var n=[];n.check=function(e){for(var t=0;n.length>t;t++)if(!n[t](e))return!1;return!0};var i=function(e,t){if("!"===t.charAt(0))return!i(e,t.substr(1));switch(typeof e){case"boolean":case"number":case"string":return(""+e).toLowerCase().indexOf(t)>-1;case"object":for(var n in e)if("$"!==n.charAt(0)&&i(e[n],t))return!0;return!1;case"array":for(var r=0;e.length>r;r++)if(i(e[r],t))return!0;return!1;default:return!1}};switch(typeof t){case"boolean":case"number":case"string":t={$:t};case"object":for(var r in t)"$"==r?function(){var e=(""+t[r]).toLowerCase();e&&n.push(function(t){return i(t,e)})}():function(){var e=r,s=(""+t[r]).toLowerCase();s&&n.push(function(t){return i(Qt(t,e),s)})}();break;case"function":n.push(t);break;default:return e}for(var s=[],a=0;e.length>a;a++){var o=e[a];n.check(o)&&s.push(o)}return s}}function yn(e){var t=e.NUMBER_FORMATS;return function(e,n){return b(n)&&(n=t.CURRENCY_SYM),Sn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function Tn(e){var t=e.NUMBER_FORMATS;return function(e,n){return Sn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Sn(e,t,n,i,r){if(isNaN(e)||!isFinite(e))return"";var s=0>e;e=Math.abs(e);
var a=e+"",o="",l=[],u=!1;if(-1!==a.indexOf("e")){var c=a.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>r+1?a="0":(o=a,u=!0)}if(!u){var f=(a.split(Ci)[1]||"").length;b(r)&&(r=Math.min(Math.max(t.minFrac,f),t.maxFrac));var h=Math.pow(10,r);e=Math.round(e*h)/h;var p=(""+e).split(Ci),d=p[0];p=p[1]||"";var m=0,g=t.lgSize,v=t.gSize;if(d.length>=g+v){m=d.length-g;for(var _=0;m>_;_++)0===(m-_)%v&&0!==_&&(o+=n),o+=d.charAt(_)}for(_=m;d.length>_;_++)0===(d.length-_)%g&&0!==_&&(o+=n),o+=d.charAt(_);for(;r>p.length;)p+="0";r&&"0"!==r&&(o+=i+p.substr(0,r))}return l.push(s?t.negPre:t.posPre),l.push(o),l.push(s?t.negSuf:t.posSuf),l.join("")}function wn(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;t>e.length;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function kn(e,t,n,i){return n=n||0,function(r){var s=r["get"+e]();return(n>0||s>-n)&&(s+=n),0===s&&-12==n&&(s=12),wn(s,t,i)}}function xn(e,t){return function(n,i){var r=n["get"+e](),s=jn(t?"SHORT"+e:e);return i[s][r]}}function Rn(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=wn(Math[t>0?"floor":"ceil"](t/60),2)+wn(Math.abs(t%60),2)}function Pn(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]}function On(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,s=0;return t[9]&&(r=f(t[9]+t[10]),s=f(t[9]+t[11])),i.setUTCFullYear(f(t[1]),f(t[2])-1,f(t[3])),i.setUTCHours(f(t[4]||0)-r,f(t[5]||0)-s,f(t[6]||0),f(t[7]||0)),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i){var s,a,o="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,_(n)&&(n=$i.test(n)?f(n):t(n)),E(n)&&(n=new Date(n)),!y(n))return n;for(;i;)a=Mi.exec(i),a?(l=N(l,a,1),i=l.pop()):(l.push(i),i=null);return r(l,function(t){s=Ai[t],o+=s?s(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}}function Cn(){return function(e){return U(e,!0)}}function An(){return function(e,t){if(!(e instanceof Array))return e;t=f(t);var n,i,r=[];if(!(e&&e instanceof Array))return r;for(t>e.length?t=e.length:-e.length>t&&(t=-e.length),t>0?(n=0,i=t):(n=e.length+t,i=e.length);i>n;n++)r.push(e[n]);return r}}function Mn(e){return function(t,n,i){function r(e,t){for(var i=0;n.length>i;i++){var r=n[i](e,t);if(0!==r)return r}return 0}function s(e,t){return B(t)?function(t,n){return e(n,t)}:e}function a(e,t){var n=typeof e,i=typeof t;return n==i?("string"==n&&(e=e.toLowerCase()),"string"==n&&(t=t.toLowerCase()),e===t?0:t>e?-1:1):i>n?-1:1}if(!T(t))return t;if(!n)return t;n=T(n)?n:[n],n=O(n,function(t){var n=!1,i=t||d;return _(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),i=e(t)),s(function(e,t){return a(i(e),i(t))},n)});for(var o=[],l=0;t.length>l;l++)o.push(t[l]);return o.sort(s(r,i))}}function $n(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function Hn(e,t){function n(t,n){n=n?"-"+X(n,"-"):"",e.removeClass((t?Yi:Ji)+n).addClass((t?Ji:Yi)+n)}var i=this,s=e.parent().controller("form")||Li,a=0,o=i.$error={};i.$name=t.name,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,s.$addControl(i),e.addClass(qi),n(!0),i.$addControl=function(e){e.$name&&!i.hasOwnProperty(e.$name)&&(i[e.$name]=e)},i.$removeControl=function(e){e.$name&&i[e.$name]===e&&delete i[e.$name],r(o,function(t,n){i.$setValidity(n,!0,e)})},i.$setValidity=function(e,t,r){var l=o[e];if(t)l&&(M(l,r),l.length||(a--,a||(n(t),i.$valid=!0,i.$invalid=!1),o[e]=!1,n(!0,e),s.$setValidity(e,!0,i)));else{if(a||n(t),l){if(C(l,r))return}else o[e]=l=[],a++,n(!1,e),s.$setValidity(e,!1,i);l.push(r),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){e.removeClass(qi).addClass(Xi),i.$dirty=!0,i.$pristine=!1,s.$setDirty()}}function Dn(e){return b(e)||""===e||null===e||e!==e}function Nn(e,t,i,r,s,a){var o=function(){var n=R(t.val());r.$viewValue!==n&&e.$apply(function(){r.$setViewValue(n)})};if(s.hasEvent("input"))t.bind("input",o);else{var l,u=function(){l||(l=a.defer(function(){o(),l=null}))};t.bind("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u()}),t.bind("change",o),s.hasEvent("paste")&&t.bind("paste cut",u)}r.$render=function(){t.val(Dn(r.$viewValue)?"":r.$viewValue)};var c,h=i.ngPattern,p=function(e,t){return Dn(t)||e.test(t)?(r.$setValidity("pattern",!0),t):(r.$setValidity("pattern",!1),n)};if(h&&(h.match(/^\/(.*)\/$/)?(h=RegExp(h.substr(1,h.length-2)),c=function(e){return p(h,e)}):c=function(t){var n=e.$eval(h);if(!n||!n.test)throw Error("Expected "+h+" to be a RegExp but was "+n);return p(n,t)},r.$formatters.push(c),r.$parsers.push(c)),i.ngMinlength){var d=f(i.ngMinlength),m=function(e){return!Dn(e)&&d>e.length?(r.$setValidity("minlength",!1),n):(r.$setValidity("minlength",!0),e)};r.$parsers.push(m),r.$formatters.push(m)}if(i.ngMaxlength){var b=f(i.ngMaxlength),g=function(e){return!Dn(e)&&e.length>b?(r.$setValidity("maxlength",!1),n):(r.$setValidity("maxlength",!0),e)};r.$parsers.push(g),r.$formatters.push(g)}}function In(e,t,i,r,s,a){if(Nn(e,t,i,r,s,a),r.$parsers.push(function(e){var t=Dn(e);return t||ji.test(e)?(r.$setValidity("number",!0),""===e?null:t?e:parseFloat(e)):(r.$setValidity("number",!1),n)}),r.$formatters.push(function(e){return Dn(e)?"":""+e}),i.min){var o=parseFloat(i.min),l=function(e){return!Dn(e)&&o>e?(r.$setValidity("min",!1),n):(r.$setValidity("min",!0),e)};r.$parsers.push(l),r.$formatters.push(l)}if(i.max){var u=parseFloat(i.max),c=function(e){return!Dn(e)&&e>u?(r.$setValidity("max",!1),n):(r.$setValidity("max",!0),e)};r.$parsers.push(c),r.$formatters.push(c)}r.$formatters.push(function(e){return Dn(e)||E(e)?(r.$setValidity("number",!0),e):(r.$setValidity("number",!1),n)})}function Ln(e,t,i,r,s,a){Nn(e,t,i,r,s,a);var o=function(e){return Dn(e)||Bi.test(e)?(r.$setValidity("url",!0),e):(r.$setValidity("url",!1),n)};r.$formatters.push(o),r.$parsers.push(o)}function zn(e,t,i,r,s,a){Nn(e,t,i,r,s,a);var o=function(e){return Dn(e)||Gi.test(e)?(r.$setValidity("email",!0),e):(r.$setValidity("email",!1),n)};r.$formatters.push(o),r.$parsers.push(o)}function Un(e,t,n,i){b(n.name)&&t.attr("name",l()),t.bind("click",function(){t[0].checked&&e.$apply(function(){i.$setViewValue(n.value)})}),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function Fn(e,t,n,i){var r=n.ngTrueValue,s=n.ngFalseValue;_(r)||(r=!0),_(s)||(s=!1),t.bind("click",function(){e.$apply(function(){i.$setViewValue(t[0].checked)})}),i.$render=function(){t[0].checked=i.$viewValue},i.$formatters.push(function(e){return e===r}),i.$parsers.push(function(e){return e?r:s})}function Bn(e,t){return e="ngClass"+e,$n(function(i,r,s){function a(e){(t===!0||i.$index%2===t)&&(u&&!D(e,u)&&o(u),l(e)),u=$(e)}function o(e){v(e)&&!T(e)&&(e=O(e,function(e,t){return e?t:n})),r.removeClass(T(e)?e.join(" "):e)}function l(e){v(e)&&!T(e)&&(e=O(e,function(e,t){return e?t:n})),e&&r.addClass(T(e)?e.join(" "):e)}var u=n;i.$watch(s[e],a,!0),s.$observe("class",function(){var t=i.$eval(s[e]);a(t,t)}),"ngClass"!==e&&i.$watch("$index",function(n,r){var a=1&n;1&a!==r&&(a===t?l(i.$eval(s[e])):o(i.$eval(s[e])))})})}var Gn=function(e){return _(e)?e.toLowerCase():e},jn=function(e){return _(e)?e.toUpperCase():e},Vn=function(e){return _(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Wn=function(e){return _(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Gn=Vn,jn=Wn);var Jn,Yn,qn,Xn,Kn=f((/msie (\d+)/.exec(Gn(navigator.userAgent))||[])[1]),Qn=[].slice,Zn=[].push,ei=Object.prototype.toString,ti=e.angular||(e.angular={}),ni=["0","0","0"];p.$inject=[],d.$inject=[],Xn=9>Kn?function(e){return e=e.nodeName?e:e[0],e.scopeName&&"HTML"!=e.scopeName?jn(e.scopeName+":"+e.nodeName):e.nodeName}:function(e){return e.nodeName?e.nodeName:e[0].nodeName};var ii=/[A-Z]/g,ri={full:"1.0.7",major:1,minor:0,dot:7,codeName:"monochromatic-rainbow"},si=st.cache={},ai=st.expando="ng-"+(new Date).getTime(),oi=1,li=e.document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},ui=e.document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},ci=/([\:\-\_]+(.))/g,fi=/^moz([A-Z])/,hi=st.prototype={ready:function(t){function n(){i||(i=!0,t())}var i=!1;this.bind("DOMContentLoaded",n),st(e).bind("load",n)},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?Jn(this[e]):Jn(this[this.length+e])},length:0,push:Zn,sort:[].sort,splice:[].splice},pi={};r("multiple,selected,checked,disabled,readOnly,required".split(","),function(e){pi[Gn(e)]=e});var di={};r("input,select,option,textarea,button,form".split(","),function(e){di[jn(e)]=!0}),r({data:ft,inheritedData:gt,scope:function(e){return gt(e,"$scope")},controller:bt,injector:function(e){return gt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:ht,css:function(e,t,i){if(t=it(t),!g(i)){var r;return 8>=Kn&&(r=e.currentStyle&&e.currentStyle[t],""===r&&(r="auto")),r=r||e.style[t],8>=Kn&&(r=""===r?n:r),r}e.style[t]=i},attr:function(e,t,i){var r=Gn(t);if(pi[r]){if(!g(i))return e[t]||(e.attributes.getNamedItem(t)||p).specified?r:n;i?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if(g(i))e.setAttribute(t,i);else if(e.getAttribute){var s=e.getAttribute(t,2);return null===s?n:s}},prop:function(e,t,i){return g(i)?(e[t]=i,n):e[t]},text:c(9>Kn?function(e,t){if(1==e.nodeType){if(b(t))return e.innerText;e.innerText=t}else{if(b(t))return e.nodeValue;e.nodeValue=t}}:function(e,t){return b(t)?e.textContent:(e.textContent=t,n)},{$dv:""}),val:function(e,t){return b(t)?e.value:(e.value=t,n)},html:function(e,t){if(b(t))return e.innerHTML;for(var n=0,i=e.childNodes;i.length>n;n++)ot(i[n]);e.innerHTML=t}},function(e,t){st.prototype[t]=function(t,i){var r,s;if((2==e.length&&e!==ht&&e!==bt?t:i)!==n){for(r=0;this.length>r;r++)e(this[r],t,i);return this}if(v(t)){for(r=0;this.length>r;r++)if(e===ft)e(this[r],t);else for(s in t)e(this[r],s,t[s]);return this}return this.length?e(this[0],t,i):e.$dv}}),r({removeData:ut,dealoc:ot,bind:function mi(e,n,i){var s=ct(e,"events"),a=ct(e,"handle");s||ct(e,"events",s={}),a||ct(e,"handle",a=_t(e,s)),r(n.split(" "),function(n){var r=s[n];if(!r){if("mouseenter"==n||"mouseleave"==n){var o=t.body.contains||t.body.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};s[n]=[];var l={mouseleave:"mouseout",mouseenter:"mouseover"};mi(e,l[n],function(e){var t=this,i=e.relatedTarget;(!i||i!==t&&!o(t,i))&&a(e,n)})}else li(e,n,a),s[n]=[];r=s[n]}r.push(i)})},unbind:lt,replaceWith:function(e,t){var n,i=e.parentNode;ot(e),r(new st(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.childNodes||[]},append:function(e,t){r(new st(t),function(t){1===e.nodeType&&e.appendChild(t)})},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;r(new st(t),function(t){n?e.insertBefore(t,n):(e.appendChild(t),n=t)})}},wrap:function(e,t){t=Jn(t)[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:function(e){ot(e);var t=e.parentNode;t&&t.removeChild(e)},after:function(e,t){var n=e,i=e.parentNode;r(new st(t),function(e){i.insertBefore(e,n.nextSibling),n=e})},addClass:dt,removeClass:pt,toggleClass:function(e,t,n){b(n)&&(n=!ht(e,t)),(n?dt:pt)(e,t)},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return t},find:function(e,t){return e.getElementsByTagName(t)},clone:at,triggerHandler:function(e,t){var n=(ct(e,"events")||{})[t];r(n,function(t){t.call(e,null)})}},function(e,t){st.prototype[t]=function(t,i){for(var r,s=0;this.length>s;s++)r==n?(r=e(this[s],t,i),r!==n&&(r=Jn(r))):mt(r,e(this[s],t,i));return r==n?this:r}}),yt.prototype={put:function(e,t){this[Et(e)]=t},get:function(e){return this[Et(e)]},remove:function(e){var t=this[e=Et(e)];return delete this[e],t}},Tt.prototype={push:function(e,t){var n=this[e=Et(e)];n?n.push(t):this[e]=[t]},shift:function(e){var t=this[e=Et(e)];return t?1==t.length?(delete this[e],t[0]):t.shift():n},peek:function(e){var t=this[Et(e)];return t?t[0]:n}};var bi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,gi=/,/,vi=/^\s*(_?)(\S+?)\1\s*$/,_i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ei="Non-assignable model expression: ";Ct.$inject=["$provide"];var yi=/^(x[\:\-_]|data[\:\-_])/i,Ti=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,Si=/^([^\?#]*)?(\?([^#]*))?(#(.*))?$/,wi=Si,ki={http:80,https:443,ftp:21};Bt.prototype={$$replace:!1,absUrl:Vt("$$absUrl"),url:function(e,t){if(b(e))return this.$$url;var n=Si.exec(e);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",t),this},protocol:Vt("$$protocol"),host:Vt("$$host"),port:Vt("$$port"),path:Wt("$$path",function(e){return"/"==e.charAt(0)?e:"/"+e}),search:function(e,t){return b(e)?this.$$search:(g(t)?null===t?delete this.$$search[e]:this.$$search[e]=t:this.$$search=_(e)?j(e):e,this.$$compose(),this)},hash:Wt("$$hash",d),replace:function(){return this.$$replace=!0,this}},Gt.prototype=h(Bt.prototype),jt.prototype=h(Gt.prototype);var xi={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:p,"+":function(e,t,i,r){return i=i(e,t),r=r(e,t),g(i)?g(r)?i+r:i:g(r)?r:n},"-":function(e,t,n,i){return n=n(e,t),i=i(e,t),(g(n)?n:0)-(g(i)?i:0)},"*":function(e,t,n,i){return n(e,t)*i(e,t)},"/":function(e,t,n,i){return n(e,t)/i(e,t)},"%":function(e,t,n,i){return n(e,t)%i(e,t)},"^":function(e,t,n,i){return n(e,t)^i(e,t)},"=":p,"==":function(e,t,n,i){return n(e,t)==i(e,t)},"!=":function(e,t,n,i){return n(e,t)!=i(e,t)},"<":function(e,t,n,i){return n(e,t)<i(e,t)},">":function(e,t,n,i){return n(e,t)>i(e,t)},"<=":function(e,t,n,i){return n(e,t)<=i(e,t)},">=":function(e,t,n,i){return n(e,t)>=i(e,t)},"&&":function(e,t,n,i){return n(e,t)&&i(e,t)},"||":function(e,t,n,i){return n(e,t)||i(e,t)},"&":function(e,t,n,i){return n(e,t)&i(e,t)},"|":function(e,t,n,i){return i(e,t)(e,t,n(e,t))},"!":function(e,t,n){return!n(e,t)}},Ri={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Pi={},Oi=e.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw Error("This browser does not support XMLHttpRequest.")};_n.$inject=["$provide"],yn.$inject=["$locale"],Tn.$inject=["$locale"];var Ci=".",Ai={yyyy:kn("FullYear",4),yy:kn("FullYear",2,0,!0),y:kn("FullYear",1),MMMM:xn("Month"),MMM:xn("Month",!0),MM:kn("Month",2,1),M:kn("Month",1,1),dd:kn("Date",2),d:kn("Date",1),HH:kn("Hours",2),H:kn("Hours",1),hh:kn("Hours",2,-12),h:kn("Hours",1,-12),mm:kn("Minutes",2),m:kn("Minutes",1),ss:kn("Seconds",2),s:kn("Seconds",1),EEEE:xn("Day"),EEE:xn("Day",!0),a:Pn,Z:Rn},Mi=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,$i=/^\d+$/;On.$inject=["$locale"];var Hi=m(Gn),Di=m(jn);Mn.$inject=["$parse"];var Ni=m({restrict:"E",compile:function(e,n){return 8>=Kn&&(n.href||n.name||n.$set("href",""),e.append(t.createComment("IE fix"))),function(e,t){t.bind("click",function(e){t.attr("href")||e.preventDefault()})}}}),Ii={};r(pi,function(e,t){var n=At("ng-"+t);Ii[n]=function(){return{priority:100,compile:function(){return function(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}}}}}),r(["src","href"],function(e){var t=At("ng-"+e);Ii[t]=function(){return{priority:99,link:function(n,i,r){r.$observe(t,function(t){t&&(r.$set(e,t),Kn&&i.prop(e,r[e]))})}}}});var Li={$addControl:p,$removeControl:p,$setValidity:p,$setDirty:p};Hn.$inject=["$element","$attrs","$scope"];var zi=function(e){return["$timeout",function(t){var i={name:"form",restrict:"E",controller:Hn,compile:function(){return{pre:function(e,i,r,s){if(!r.action){var a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1};li(i[0],"submit",a),i.bind("$destroy",function(){t(function(){ui(i[0],"submit",a)},0,!1)})}var o=i.parent().controller("form"),l=r.name||r.ngForm;l&&(e[l]=s),o&&i.bind("$destroy",function(){o.$removeControl(s),l&&(e[l]=n),c(s,Li)})}}}};return e?c($(i),{restrict:"EAC"}):i}]},Ui=zi(),Fi=zi(!0),Bi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Gi=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,ji=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Vi={text:Nn,number:In,url:Ln,email:zn,radio:Un,checkbox:Fn,hidden:p,button:p,submit:p,reset:p},Wi=["$browser","$sniffer",function(e,t){return{restrict:"E",require:"?ngModel",link:function(n,i,r,s){s&&(Vi[Gn(r.type)]||Vi.text)(n,i,r,s,t,e)}}}],Ji="ng-valid",Yi="ng-invalid",qi="ng-pristine",Xi="ng-dirty",Ki=["$scope","$exceptionHandler","$attrs","$element","$parse",function(e,t,n,i,s){function a(e,t){t=t?"-"+X(t,"-"):"",i.removeClass((e?Yi:Ji)+t).addClass((e?Ji:Yi)+t)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var o=s(n.ngModel),l=o.assign;if(!l)throw Error(Ei+n.ngModel+" ("+G(i)+")");this.$render=p;var u=i.inheritedData("$formController")||Li,c=0,f=this.$error={};i.addClass(qi),a(!0),this.$setValidity=function(e,t){f[e]!==!t&&(t?(f[e]&&c--,c||(a(!0),this.$valid=!0,this.$invalid=!1)):(a(!1),this.$invalid=!0,this.$valid=!1,c++),f[e]=!t,a(t,e),u.$setValidity(e,t,this))},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,i.removeClass(qi).addClass(Xi),u.$setDirty()),r(this.$parsers,function(e){n=e(n)}),this.$modelValue!==n&&(this.$modelValue=n,l(e,n),r(this.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}}))};var h=this;e.$watch(function(){var t=o(e);if(h.$modelValue!==t){var n=h.$formatters,i=n.length;for(h.$modelValue=t;i--;)t=n[i](t);h.$viewValue!==t&&(h.$viewValue=t,h.$render())}})}],Qi=function(){return{require:["ngModel","^?form"],controller:Ki,link:function(e,t,n,i){var r=i[0],s=i[1]||Li;s.$addControl(r),t.bind("$destroy",function(){s.$removeControl(r)})}}},Zi=m({require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),er=function(){return{require:"?ngModel",link:function(e,t,i,r){if(r){i.required=!0;var s=function(e){return i.required&&(Dn(e)||e===!1)?(r.$setValidity("required",!1),n):(r.$setValidity("required",!0),e)};r.$formatters.push(s),r.$parsers.unshift(s),i.$observe("required",function(){s(r.$viewValue)})}}}},tr=function(){return{require:"ngModel",link:function(e,t,i,s){var a=/\/(.*)\//.exec(i.ngList),o=a&&RegExp(a[1])||i.ngList||",",l=function(e){var t=[];return e&&r(e.split(o),function(e){e&&t.push(R(e))}),t};s.$parsers.push(l),s.$formatters.push(function(e){return T(e)?e.join(", "):n})}}},nr=/^(true|false|\d+)$/,ir=function(){return{priority:100,compile:function(e,t){return nr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e,!1)})}}}},rr=$n(function(e,t,i){t.addClass("ng-binding").data("$binding",i.ngBind),e.$watch(i.ngBind,function(e){t.text(e==n?"":e)})}),sr=["$interpolate",function(e){return function(t,n,i){var r=e(n.attr(i.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",r),i.$observe("ngBindTemplate",function(e){n.text(e)})}}],ar=[function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.ngBindHtmlUnsafe),e.$watch(n.ngBindHtmlUnsafe,function(e){t.html(e||"")})}}],or=Bn("",!0),lr=Bn("Odd",0),ur=Bn("Even",1),cr=$n({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),fr=[function(){return{scope:!0,controller:"@"}}],hr=["$sniffer",function(e){return{priority:1e3,compile:function(){e.csp=!0}}}],pr={};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave".split(" "),function(e){var t=At("ng-"+e);pr[t]=["$parse",function(n){return function(i,r,s){var a=n(s[t]);r.bind(Gn(e),function(e){i.$apply(function(){a(i,{$event:e})})})}}]});var dr=$n(function(e,t,n){t.bind("submit",function(){e.$apply(n.ngSubmit)})}),mr=["$http","$templateCache","$anchorScroll","$compile",function(e,t,n,i){return{restrict:"ECA",terminal:!0,compile:function(r,s){var a=s.ngInclude||s.src,o=s.onload||"",l=s.autoscroll;return function(r,s){var u,c=0,f=function(){u&&(u.$destroy(),u=null),s.html("")};r.$watch(a,function(a){var h=++c;a?e.get(a,{cache:t}).success(function(e){h===c&&(u&&u.$destroy(),u=r.$new(),s.html(e),i(s.contents())(u),!g(l)||l&&!r.$eval(l)||n(),u.$emit("$includeContentLoaded"),r.$eval(o))}).error(function(){h===c&&f()}):f()})}}}}],br=$n({compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),gr=$n({terminal:!0,priority:1e3}),vr=["$locale","$interpolate",function(e,t){var n=/{}/g;return{restrict:"EA",link:function(i,s,a){var o=a.count,l=s.attr(a.$attr.when),u=a.offset||0,c=i.$eval(l),f={},h=t.startSymbol(),p=t.endSymbol();r(c,function(e,i){f[i]=t(e.replace(n,h+o+"-"+u+p))}),i.$watch(function(){var t=parseFloat(i.$eval(o));return isNaN(t)?"":(t in c||(t=e.pluralCat(t-u)),f[t](i,s,!0))},function(e){s.text(e)})}}}],_r=$n({transclude:"element",priority:1e3,terminal:!0,compile:function(e,t,n){return function(e,t,i){var r,s,a,o,l=i.ngRepeat,u=l.match(/^\s*(.+)\s+in\s+(.*)\s*$/);if(!u)throw Error("Expected ngRepeat in form of '_item_ in _collection_' but got '"+l+"'.");if(r=u[1],s=u[2],u=r.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!u)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+r+"'.");a=u[3]||u[1],o=u[2];var c=new Tt;e.$watch(function(e){var i,r,l,u,f,h,p,d,m=e.$eval(s),b=t,g=new Tt;if(T(m))p=m||[];else{p=[];for(f in m)m.hasOwnProperty(f)&&"$"!=f.charAt(0)&&p.push(f);p.sort()}for(l=p.length-1,i=0,r=p.length;r>i;i++)f=m===p?i:p[i],h=m[f],d=c.shift(h),d?(u=d.scope,g.push(h,d),i===d.index?b=d.element:(d.index=i,b.after(d.element),b=d.element)):u=e.$new(),u[a]=h,o&&(u[o]=f),u.$index=i,u.$first=0===i,u.$last=i===l,u.$middle=!(u.$first||u.$last),d||n(u,function(e){b.after(e),d={scope:u,element:b=e,index:i},g.push(h,d)});for(f in c)if(c.hasOwnProperty(f))for(p=c[f];p.length;)h=p.pop(),h.element.remove(),h.scope.$destroy();c=g})}}}),Er=$n(function(e,t,n){e.$watch(n.ngShow,function(e){t.css("display",B(e)?"":"none")})}),yr=$n(function(e,t,n){e.$watch(n.ngHide,function(e){t.css("display",B(e)?"none":"")})}),Tr=$n(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Sr=m({restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,i){var r,s,a,o=n.ngSwitch||n.on;e.$watch(o,function(o){s&&(a.$destroy(),s.remove(),s=a=null),(r=i.cases["!"+o]||i.cases["?"])&&(e.$eval(n.change),a=e.$new(),r(a,function(e){s=e,t.append(e)}))})}}),wr=$n({transclude:"element",priority:500,require:"^ngSwitch",compile:function(e,t,n){return function(e,i,r,s){s.cases["!"+t.ngSwitchWhen]=n}}}),kr=$n({transclude:"element",priority:500,require:"^ngSwitch",compile:function(e,t,n){return function(e,t,i,r){r.cases["?"]=n}}}),xr=$n({controller:["$transclude","$element",function(e,t){e(function(e){t.append(e)})}]}),Rr=["$http","$templateCache","$route","$anchorScroll","$compile","$controller",function(e,t,n,i,r,s){return{restrict:"ECA",terminal:!0,link:function(e,t,a){function o(){c&&(c.$destroy(),c=null)}function l(){t.html(""),o()}function u(){var a=n.current&&n.current.locals,u=a&&a.$template;if(u){t.html(u),o();var h,p=r(t.contents()),d=n.current;c=d.scope=e.$new(),d.controller&&(a.$scope=c,h=s(d.controller,a),t.children().data("$ngControllerController",h)),p(c),c.$emit("$viewContentLoaded"),c.$eval(f),i()}else l()}var c,f=a.onload||"";e.$on("$routeChangeSuccess",u),u()}}}],Pr=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],Or=m({terminal:!0}),Cr=["$compile","$parse",function(e,i){var a=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,o={$setViewValue:p};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var i,r,s=this,a={},l=o;s.databound=n.ngModel,s.init=function(e,t,n){l=e,i=t,r=n},s.addOption=function(t){a[t]=!0,l.$viewValue==t&&(e.val(t),r.parent()&&r.remove())},s.removeOption=function(e){this.hasOption(e)&&(delete a[e],l.$viewValue==e&&this.renderUnknownOption(e))},s.renderUnknownOption=function(t){var n="? "+Et(t)+" ?";r.val(n),e.prepend(r),e.val(n),r.prop("selected",!0)},s.hasOption=function(e){return a.hasOwnProperty(e)},t.$on("$destroy",function(){s.renderUnknownOption=p})}],link:function(o,l,u,c){function f(e,t,n,i){n.$render=function(){var e=n.$viewValue;i.hasOption(e)?(w.parent()&&w.remove(),t.val(e),""===e&&d.prop("selected",!0)):b(e)&&d?t.val(""):i.renderUnknownOption(e)},t.bind("change",function(){e.$apply(function(){w.parent()&&w.remove(),n.$setViewValue(t.val())})})}function h(e,t,n){var i;n.$render=function(){var e=new yt(n.$viewValue);r(t.find("option"),function(t){t.selected=g(e.get(t.value))})},e.$watch(function(){D(i,n.$viewValue)||(i=$(n.$viewValue),n.$render())}),t.bind("change",function(){e.$apply(function(){var e=[];r(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,r,o){function l(){var e,i,a,l,u,g,v,E,w,k,x,R,P,O,C={"":[]},A=[""],M=o.$modelValue,$=m(t)||[],H=h?s($):$,D={},N=!1;for(_&&(N=new yt(M)),k=0;E=H.length,E>k;k++)D[f]=$[h?D[h]=H[k]:k],e=p(t,D)||"",(i=C[e])||(i=C[e]=[],A.push(e)),_?x=N.remove(d(t,D))!=n:(x=M===d(t,D),N=N||x),O=c(t,D),O=O===n?"":O,i.push({id:h?H[k]:k,label:O,selected:x});for(_||(y||null===M?C[""].unshift({id:"",label:"",selected:!N}):N||C[""].unshift({id:"?",label:"",selected:!0})),w=0,v=A.length;v>w;w++){for(e=A[w],i=C[e],w>=b.length?(l={element:S.clone().attr("label",e),label:i.label},u=[l],b.push(u),r.append(l.element)):(u=b[w],l=u[0],l.label!=e&&l.element.attr("label",l.label=e)),R=null,k=0,E=i.length;E>k;k++)a=i[k],(g=u[k+1])?(R=g.element,g.label!==a.label&&R.text(g.label=a.label),g.id!==a.id&&R.val(g.id=a.id),R[0].selected!==a.selected&&R.prop("selected",g.selected=a.selected)):(""===a.id&&y?P=y:(P=T.clone()).val(a.id).attr("selected",a.selected).text(a.label),u.push(g={element:P,label:a.label,id:a.id,selected:a.selected}),R?R.after(P):l.element.append(P),R=P);for(k++;u.length>k;)u.pop().element.remove()}for(;b.length>w;)b.pop()[0].element.remove()}var u;if(!(u=E.match(a)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+E+"'.");var c=i(u[2]||u[1]),f=u[4]||u[6],h=u[5],p=i(u[3]||""),d=i(u[2]?u[1]:f),m=i(u[7]),b=[[{element:r,label:""}]];y&&(e(y)(t),y.removeClass("ng-scope"),y.remove()),r.html(""),r.bind("change",function(){t.$apply(function(){var e,i,s,a,l,u,c,p,g=m(t)||[],v={};if(_)for(s=[],u=0,p=b.length;p>u;u++)for(e=b[u],l=1,c=e.length;c>l;l++)(a=e[l].element)[0].selected&&(i=a.val(),h&&(v[h]=i),v[f]=g[i],s.push(d(t,v)));else i=r.val(),"?"==i?s=n:""==i?s=null:(v[f]=g[i],h&&(v[h]=i),s=d(t,v));o.$setViewValue(s)})}),o.$render=l,t.$watch(l)}if(c[1]){for(var d,m=c[0],v=c[1],_=u.multiple,E=u.ngOptions,y=!1,T=Jn(t.createElement("option")),S=Jn(t.createElement("optgroup")),w=T.clone(),k=0,x=l.children(),R=x.length;R>k;k++)if(""==x[k].value){d=y=x.eq(k);break}if(m.init(v,y,w),_&&(u.required||u.ngRequired)){var P=function(e){return v.$setValidity("required",!u.required||e&&e.length),e};v.$parsers.push(P),v.$formatters.unshift(P),u.$observe("required",function(){P(v.$viewValue)})}E?p(o,l,v):_?h(o,l,v):f(o,l,v,m)}}}}],Ar=["$interpolate",function(e){var t={addOption:p,removeOption:p};return{restrict:"E",priority:100,compile:function(n,i){if(b(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var s="$selectController",a=n.parent(),o=a.data(s)||a.parent().data(s);o&&o.databound?n.prop("selected",!1):o=t,r?e.$watch(r,function(e,t){i.$set("value",e),e!==t&&o.removeOption(t),o.addOption(e)}):o.addOption(i.value),n.bind("$destroy",function(){o.removeOption(i.value)})}}}}],Mr=m({restrict:"E",terminal:!0});K(),tt(ti),Jn(t).ready(function(){Y(t,q)})}(window,document),angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>'),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,a=i.push,o=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,f=i.forEach,h=i.map,p=i.reduce,d=i.reduceRight,m=i.filter,b=i.every,g=i.some,v=i.indexOf,_=i.lastIndexOf,E=Array.isArray,y=Object.keys,T=s.bind,S=function(e){return e instanceof S?e:this instanceof S?(this._wrapped=e,void 0):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.5.1";var w=S.each=S.forEach=function(e,t,i){if(null!=e)if(f&&e.forEach===f)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,s=e.length;s>r;r++)if(t.call(i,e[r],r,e)===n)return}else for(var a in e)if(S.has(e,a)&&t.call(i,e[a],a,e)===n)return};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(w(e,function(e,r,s){i.push(t.call(n,e,r,s))}),i)};var k="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=S.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(w(e,function(e,s,a){r?n=t.call(i,n,e,s,a):(n=e,r=!0)}),!r)throw new TypeError(k);return n},S.reduceRight=S.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return i&&(t=S.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var a=S.keys(e);s=a.length}if(w(e,function(o,l,u){l=a?a[--s]:--s,r?n=t.call(i,n,e[l],l,u):(n=e[l],r=!0)}),!r)throw new TypeError(k);return n},S.find=S.detect=function(e,t,n){var i;return x(e,function(e,r,s){return t.call(n,e,r,s)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(w(e,function(e,r,s){t.call(n,e,r,s)&&i.push(e)}),i)},S.reject=function(e,t,n){return S.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},S.every=S.all=function(e,t,i){t||(t=S.identity);var r=!0;return null==e?r:b&&e.every===b?e.every(t,i):(w(e,function(e,s,a){return(r=r&&t.call(i,e,s,a))?void 0:n}),!!r)};var x=S.some=S.any=function(e,t,i){t||(t=S.identity);var r=!1;return null==e?r:g&&e.some===g?e.some(t,i):(w(e,function(e,s,a){return r||(r=t.call(i,e,s,a))?n:void 0}),!!r)};S.contains=S.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):x(e,function(e){return e===t})},S.invoke=function(e,t){var n=o.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t,n){return S.isEmpty(t)?n?void 0:[]:S[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return w(e,function(e,r,s){var a=t?t.call(n,e,r,s):e;a>i.computed&&(i={value:e,computed:a})}),i.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);
if(!t&&S.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return w(e,function(e,r,s){var a=t?t.call(n,e,r,s):e;i.computed>a&&(i={value:e,computed:a})}),i.value},S.shuffle=function(e){var t,n=0,i=[];return w(e,function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e}),i};var R=function(e){return S.isFunction(e)?e:function(t){return t[e]}};S.sortBy=function(e,t,n){var i=R(t);return S.pluck(S.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var P=function(e,t,n,i){var r={},s=R(null==t?S.identity:t);return w(e,function(t,a){var o=s.call(n,t,a,e);i(r,o,t)}),r};S.groupBy=function(e,t,n){return P(e,t,n,function(e,t,n){(S.has(e,t)?e[t]:e[t]=[]).push(n)})},S.countBy=function(e,t,n){return P(e,t,n,function(e,t){S.has(e,t)||(e[t]=0),e[t]++})},S.sortedIndex=function(e,t,n,i){n=null==n?S.identity:R(n);for(var r=n.call(i,t),s=0,a=e.length;a>s;){var o=s+a>>>1;r>n.call(i,e[o])?s=o+1:a=o}return s},S.toArray=function(e){return e?S.isArray(e)?o.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:o.call(e,0,t)},S.initial=function(e,t,n){return o.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return o.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var O=function(e,t,n){return t&&S.every(e,S.isArray)?l.apply(n,e):(w(e,function(e){S.isArray(e)||S.isArguments(e)?t?a.apply(n,e):O(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return O(e,t,[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isFunction(t)&&(i=n,n=t,t=!1);var r=n?S.map(e,n,i):e,s=[],a=[];return w(r,function(n,i){(t?i&&a[a.length-1]===n:S.contains(a,n))||(a.push(n),s.push(e[i]))}),s},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=l.apply(i,o.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);return t},S.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},S.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,s=Array(i);i>r;)s[r++]=e,e+=n;return s};var C=function(){};S.bind=function(e,t){var n,i;if(T&&e.bind===T)return T.apply(e,o.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(o.call(arguments)));C.prototype=e.prototype;var r=new C;C.prototype=null;var s=e.apply(r,n.concat(o.call(arguments)));return Object(s)===s?s:r}},S.partial=function(e){var t=o.call(arguments,1);return function(){return e.apply(this,t.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw Error("bindAll must be passed function names");return w(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t,n){var i,r,s,a=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:new Date,a=null,s=e.apply(i,r)};return function(){var u=new Date;o||n.leading!==!1||(o=u);var c=t-(u-o);return i=this,r=arguments,0>=c?(clearTimeout(a),a=null,o=u,s=e.apply(i,r)):a||n.trailing===!1||(a=setTimeout(l,c)),s}},S.debounce=function(e,t,n){var i,r=null;return function(){var s=this,a=arguments,o=function(){r=null,n||(i=e.apply(s,a))},l=n&&!r;return clearTimeout(r),r=setTimeout(o,t),l&&(i=e.apply(s,a)),i}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},S.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push(e[n]);return t},S.pairs=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push([n,e[n]]);return t},S.invert=function(e){var t={};for(var n in e)S.has(e,n)&&(t[e[n]]=n);return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return w(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=l.apply(i,o.call(arguments,1));return w(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=l.apply(i,o.call(arguments,1));for(var r in e)S.contains(n,r)||(t[r]=e[r]);return t},S.defaults=function(e){return w(o.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;var a=e.constructor,o=t.constructor;if(a!==o&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(o)&&o instanceof o))return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==r){if(l=e.length,c=l==t.length)for(;l--&&(c=A(e[l],t[l],n,i)););}else{for(var f in e)if(S.has(e,f)&&(l++,!(c=S.has(t,f)&&A(e[f],t[f],n,i))))break;if(c){for(f in t)if(S.has(t,f)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};S.isEqual=function(e,t){return A(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=E||function(e){return"[object Array]"==u.call(e)},S.isObject=function(e){return e===Object(e)},w(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),S.isFunction=function(e){return"function"==typeof e},S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return c.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=S.invert(M.escape);var $={escape:RegExp("["+S.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+S.keys(M.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace($[e],function(t){return M[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){w(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),L.call(this,n.apply(S,e))}})};var H=0;S.uniqueId=function(e){var t=++H+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var i;n=S.defaults({},n,S.templateSettings);var r=RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(r,function(t,n,i,r,o){return a+=e.slice(s,o).replace(I,function(e){return"\\"+N[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return i(t,S);var l=function(e){return i.call(this,e,S)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},S.chain=function(e){return S(e).chain()};var L=function(e){return this._chain?S(e).chain():e};S.mixin(S),w(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],L.call(this,n)}}),w(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e,t){function n(e){return f.PF.compile(e||"nplurals=2; plural=(n != 1);")}function i(e,t){this._key=e,this._i18n=t}var r=Array.prototype,s=Object.prototype,a=r.slice,o=s.hasOwnProperty,l=r.forEach,u={},c={forEach:function(e,t,n){var i,r,s;if(null!==e)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(i=0,r=e.length;r>i;i++)if(i in e&&t.call(n,e[i],i,e)===u)return}else for(s in e)if(o.call(e,s)&&t.call(n,e[s],s,e)===u)return},extend:function(e){return this.forEach(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e}},f=function(e){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages"},this.options=c.extend({},this.defaults,e),this.textdomain(this.options.domain),e.domain&&!this.options.locale_data[this.options.domain])throw Error("Text domain set to non-existent domain: `"+e.domain+"`")};f.context_delimiter=String.fromCharCode(4),c.extend(i.prototype,{onDomain:function(e){return this._domain=e,this},withContext:function(e){return this._context=e,this},ifPlural:function(e,t){return this._val=e,this._pkey=t,this},fetch:function(e){return"[object Array]"!={}.toString.call(e)&&(e=[].slice.call(arguments)),(e&&e.length?f.sprintf:function(e){return e})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),e)}}),c.extend(f.prototype,{translate:function(e){return new i(e,this)},textdomain:function(e){return e?(this._textdomain=e,void 0):this._textdomain},gettext:function(e){return this.dcnpgettext.call(this,t,t,e)},dgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},dcgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},ngettext:function(e,n,i){return this.dcnpgettext.call(this,t,t,e,n,i)},dngettext:function(e,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},dcngettext:function(e,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},pgettext:function(e,n){return this.dcnpgettext.call(this,t,e,n)},dpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},dcpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},npgettext:function(e,n,i,r){return this.dcnpgettext.call(this,t,e,n,i,r)},dnpgettext:function(e,t,n,i,r){return this.dcnpgettext.call(this,e,t,n,i,r)},dcnpgettext:function(e,t,i,r,s){r=r||i,e=e||this._textdomain,s=s===void 0?1:s;var a;if(!this.options)return a=new f,a.dcnpgettext.call(a,void 0,void 0,i,r,s);if(!this.options.locale_data)throw Error("No locale data provided.");if(!this.options.locale_data[e])throw Error("Domain `"+e+"` was not found.");if(!this.options.locale_data[e][""])throw Error("No locale meta information provided.");if(!i)throw Error("No translation key found.");if("number"!=typeof s&&(s=parseInt(s,10),isNaN(s)))throw Error("The number that was passed in is not a number.");var o,l,u=t?t+f.context_delimiter+i:i,c=this.options.locale_data,h=c[e],p=h[""].plural_forms||(c.messages||this.defaults.locale_data.messages)[""].plural_forms,d=n(p)(s)+1;if(!h)throw Error("No domain named `"+e+"` could be found.");return o=h[u],!o||d>=o.length?(this.options.missing_key_callback&&this.options.missing_key_callback(u),l=[null,i,r],l[n(p)(s)+1]):(l=o[d],l?l:(l=[null,i,r],l[n(p)(s)+1]))}});var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var r,s,a,o,l,u,c,f=1,p=n.length,d="",m=[];for(s=0;p>s;s++)if(d=e(n[s]),"string"===d)m.push(n[s]);else if("array"===d){if(o=n[s],o[2])for(r=i[f],a=0;o[2].length>a;a++){if(!r.hasOwnProperty(o[2][a]))throw h('[sprintf] property "%s" does not exist',o[2][a]);r=r[o[2][a]]}else r=o[1]?i[o[1]]:i[f++];if(/[^s]/.test(o[8])&&"number"!=e(r))throw h("[sprintf] expecting number but found %s",e(r));switch((r===void 0||null===r)&&(r=""),o[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=o[7]?r.toExponential(o[7]):r.toExponential();break;case"f":r=o[7]?parseFloat(r).toFixed(o[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r+="")&&o[7]?r.substring(0,o[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(o[8])&&o[3]&&r>=0?"+"+r:r,u=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",c=o[6]-(r+"").length,l=o[6]?t(u,c):"",m.push(o[5]?r+l:l+r)}return m.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){r|=1;var s=[],a=n[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(s.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(a)))s.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";s.push(o[1])}n[2]=s}else r|=2;if(3===r)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i},n}(),p=function(e,t){return t.unshift(e),h.apply(null,t)};f.parse_plural=function(e,t){return e=e.replace(/n/g,t),f.parse_expression(e)},f.sprintf=function(e,t){return"[object Array]"=={}.toString.call(t)?p(e,[].slice.call(t)):h.apply(this,[].slice.call(arguments))},f.prototype.sprintf=function(){return f.sprintf.apply(this,arguments)},f.PF={},f.PF.parse=function(e){var t=f.PF.extractPluralExpr(e);return f.PF.parser.parse.call(f.PF.parser,t)},f.PF.compile=function(e){function t(e){return e===!0?1:e?e:0}var n=f.PF.parse(e);return function(e){return t(f.PF.interpreter(n)(e))}},f.PF.interpreter=function(e){return function(t){switch(e.type){case"GROUP":return f.PF.interpreter(e.expr)(t);case"TERNARY":return f.PF.interpreter(e.expr)(t)?f.PF.interpreter(e.truthy)(t):f.PF.interpreter(e.falsey)(t);case"OR":return f.PF.interpreter(e.left)(t)||f.PF.interpreter(e.right)(t);case"AND":return f.PF.interpreter(e.left)(t)&&f.PF.interpreter(e.right)(t);case"LT":return f.PF.interpreter(e.left)(t)<f.PF.interpreter(e.right)(t);case"GT":return f.PF.interpreter(e.left)(t)>f.PF.interpreter(e.right)(t);case"LTE":return f.PF.interpreter(e.left)(t)<=f.PF.interpreter(e.right)(t);case"GTE":return f.PF.interpreter(e.left)(t)>=f.PF.interpreter(e.right)(t);case"EQ":return f.PF.interpreter(e.left)(t)==f.PF.interpreter(e.right)(t);case"NEQ":return f.PF.interpreter(e.left)(t)!=f.PF.interpreter(e.right)(t);case"MOD":return f.PF.interpreter(e.left)(t)%f.PF.interpreter(e.right)(t);case"VAR":return t;case"NUM":return e.val;default:throw Error("Invalid Token found.")}}},f.PF.extractPluralExpr=function(e){e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";"));var t,n=/nplurals\=(\d+);/,i=/plural\=(.*);/,r=e.match(n),s={};if(!(r.length>1))throw Error("nplurals not found in plural_forms string: "+e);if(s.nplurals=r[1],e=e.replace(n,""),t=e.match(i),!(t&&t.length>1))throw Error("`plural` expression not found: "+e);return t[1]},f.PF.parser=function(){var e={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(e,t,n,i,r,s){var a=s.length-1;switch(r){case 1:return{type:"GROUP",expr:s[a-1]};case 2:this.$={type:"TERNARY",expr:s[a-4],truthy:s[a-2],falsey:s[a]};break;case 3:this.$={type:"OR",left:s[a-2],right:s[a]};break;case 4:this.$={type:"AND",left:s[a-2],right:s[a]};break;case 5:this.$={type:"LT",left:s[a-2],right:s[a]};break;case 6:this.$={type:"LTE",left:s[a-2],right:s[a]};break;case 7:this.$={type:"GT",left:s[a-2],right:s[a]};break;case 8:this.$={type:"GTE",left:s[a-2],right:s[a]};break;case 9:this.$={type:"NEQ",left:s[a-2],right:s[a]};break;case 10:this.$={type:"EQ",left:s[a-2],right:s[a]};break;case 11:this.$={type:"MOD",left:s[a-2],right:s[a]};break;case 12:this.$={type:"GROUP",expr:s[a-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(e)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(e){throw Error(e)},parse:function(e){function t(e){r.length=r.length-2*e,s.length=s.length-e,a.length=a.length-e}function n(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,r=[0],s=[null],a=[],o=this.table,l="",u=0,c=0,f=0,h=2,p=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var d=this.lexer.yylloc;a.push(d),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,b,g,v,_,E,y,T,S,w={};;){if(g=r[r.length-1],this.defaultActions[g]?v=this.defaultActions[g]:(null==m&&(m=n()),v=o[g]&&o[g][m]),v===void 0||!v.length||!v[0]){if(!f){S=[];for(E in o[g])this.terminals_[E]&&E>2&&S.push("'"+this.terminals_[E]+"'");var k="";k=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+this.terminals_[m]+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:d,expected:S})}if(3==f){if(m==p)throw Error(k||"Parsing halted.");c=this.lexer.yyleng,l=this.lexer.yytext,u=this.lexer.yylineno,d=this.lexer.yylloc,m=n()}for(;;){if(""+h in o[g])break;if(0==g)throw Error(k||"Parsing halted.");t(1),g=r[r.length-1]}b=m,m=h,g=r[r.length-1],v=o[g]&&o[g][h],f=3}if(v[0]instanceof Array&&v.length>1)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+m);switch(v[0]){case 1:r.push(m),s.push(this.lexer.yytext),a.push(this.lexer.yylloc),r.push(v[1]),m=null,b?(m=b,b=null):(c=this.lexer.yyleng,l=this.lexer.yytext,u=this.lexer.yylineno,d=this.lexer.yylloc,f>0&&f--);break;case 2:if(y=this.productions_[v[1]][1],w.$=s[s.length-y],w._$={first_line:a[a.length-(y||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(y||1)].first_column,last_column:a[a.length-1].last_column},_=this.performAction.call(w,l,c,u,this.yy,v[1],s,a),_!==void 0)return _;y&&(r=r.slice(0,2*-1*y),s=s.slice(0,-1*y),a=a.slice(0,-1*y)),r.push(this.productions_[v[1]][0]),s.push(w.$),a.push(w._$),T=o[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return 20>e.length&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),r=0;i.length>r;r++)if(t=this._input.match(this.rules[i[r]]))return n=t[0].match(/\n.*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),e?e:void 0;return""===this._input?this.EOF:(this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno}),void 0)},lex:function(){var e=this.next();return e!==void 0?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.performAction=function(e,t,n,i){switch(n){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},e.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],e.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},e}();return e.lexer=t,e}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.Jed=f):("function"==typeof define&&define.amd&&define("jed",function(){return f}),e.Jed=f)}(this),window.CodeMirror=function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i||{};for(var r in Wr)!i.hasOwnProperty(r)&&Wr.hasOwnProperty(r)&&(i[r]=Wr[r]);h(i);var s="string"==typeof i.value?0:i.value.first,a=this.display=t(n,s);a.wrapper.CodeMirror=this,u(this),i.autofocus&&!Pr&&ut(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Ui},o(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=i.value;"string"==typeof l&&(l=new rs(i.value,i.mode)),tt(this,li)(this,l),mr&&setTimeout(qi(lt,this,!0),20),ft(this);var c;try{c=document.activeElement==a.input}catch(f){}c||i.autofocus&&!Pr?setTimeout(qi(Rt,this),20):Pt(this),tt(this,function(){for(var e in Vr)Vr.propertyIsEnumerable(e)&&Vr[e](this,i[e],Jr);for(var t=0;Kr.length>t;++t)Kr[t](this)})()}function t(e,t){var n={},i=n.input=Qi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");vr?i.style.width="1000px":i.setAttribute("wrap","off"),Rr&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),n.inputDiv=Qi("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Qi("div",[Qi("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Qi("div",[Qi("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Qi("div",null,"CodeMirror-scrollbar-filler"),n.lineDiv=Qi("div"),n.selectionDiv=Qi("div",null,null,"position: relative; z-index: 1"),n.cursor=Qi("div","","CodeMirror-cursor"),n.otherCursor=Qi("div","","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=Qi("div",null,"CodeMirror-measure"),n.lineSpace=Qi("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=Qi("div",[Qi("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Qi("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Qi("div",null,null,"position: absolute; height: "+us+"px; width: 1px;"),n.gutters=Qi("div",null,"CodeMirror-gutters"),n.lineGutter=null;var r=Qi("div",[n.sizer,n.heightForcer,n.gutters],null,"position: relative; min-height: 100%");return n.scroller=Qi("div",[r],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Qi("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.scroller],"CodeMirror"),br&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),Rr&&(i.style.width="0px"),vr||(n.scroller.draggable=!0),Sr?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):br&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=t,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Ui,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,A(t,100),t.state.modeGen++,t.curOp&&rt(t)}function i(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),f(e)),s(e),rt(e),G(e),setTimeout(function(){p(e.display,e.doc.height)},100)}function r(e){var t=K(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Q(e.display)-3);return function(r){return In(e.doc,r)?0:n?(Math.ceil(r.text.length/i)||1)*t:t}}function s(e){var t=e.doc,n=r(e);t.iter(function(e){var t=n(e);t!=e.height&&hi(e,t)})}function a(e){var t=Zr[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function o(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),G(e)}function l(e){u(e),rt(e)}function u(e){var t=e.display.gutters,n=e.options.gutters;Zi(t);for(var i=0;n.length>i;++i){var r=n[i],s=t.appendChild(Qi("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none"}function c(e,t){if(0==t.height)return 0;for(var n,i=t.text.length,r=t;n=Hn(r);){var s=n.find();r=ui(e,s.from.line),i+=s.from.ch-s.to.ch}for(r=t;n=Dn(r);){var s=n.find();i-=r.text.length-s.from.ch,r=ui(e,s.to.line),i+=r.text.length-s.to.ch}return i}function f(e){var t=e.display,n=e.doc;t.maxLine=ui(n,n.first),t.maxLineLength=c(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var i=c(n,e);
i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function h(e){for(var t=!1,n=0;e.gutters.length>n;++n)"CodeMirror-linenumbers"==e.gutters[n]&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function p(e,t){var n=t+N(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px";var i=Math.max(n,e.scroller.scrollHeight),r=e.scroller.scrollWidth>e.scroller.clientWidth,s=i>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=r?ir(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=i-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",r?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?ir(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",r&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=ir(e.measure)+"px"):e.scrollbarFiller.style.display="",wr&&0===ir(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=kr?"18px":"12px")}function d(e,t,n){var i=e.scroller.scrollTop,r=e.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-D(e));var s=Math.ceil(i+r);return{from:di(t,i),to:di(t,s)}}function m(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=v(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,r=n+"px",s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var a=0,o=s.alignable;o.length>a;++a)o[a].style.left=r;e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function b(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=g(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(Qi("div",[Qi("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,a=r.offsetWidth-s;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(s,i.lineGutter.offsetWidth-a),i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function g(e,t){return e.lineNumberFormatter(t+e.firstLineNumber)+""}function v(e){return nr(e.scroller).left-nr(e.sizer).left}function _(e,t,n){for(var i,r=e.display.showingFrom,s=e.display.showingTo,a=d(e.display,e.doc,n);E(e,t,a)&&(i=!0,Ii(e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=s)&&Ii(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo),R(e),p(e.display,e.doc.height),n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof n?n:n.top)),a=d(e.display,e.doc,n),!(a.from>=e.display.showingFrom&&a.to<=e.display.showingTo));)t=[];return i}function E(e,t,n){var i=e.display,r=e.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=r.first,i.viewOffset=0,void 0;if(!(0==t.length&&n.from>i.showingFrom&&n.to<i.showingTo)){b(e)&&(t=[{from:r.first,to:r.first+r.size}]);var s=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?s:"0";var a=1/0;if(e.options.lineNumbers)for(var o=0;t.length>o;++o)if(t[o].diff){a=t[o].from;break}var l=r.first+r.size,u=Math.max(n.from-e.options.viewportMargin,r.first),c=Math.min(l,n.to+e.options.viewportMargin);if(u>i.showingFrom&&20>u-i.showingFrom&&(u=Math.max(r.first,i.showingFrom)),i.showingTo>c&&20>i.showingTo-c&&(c=Math.min(l,i.showingTo)),Lr)for(u=pi(Nn(r,ui(r,u)));l>c&&In(r,ui(r,c));)++c;var f=[{from:Math.max(i.showingFrom,r.first),to:Math.min(i.showingTo,l)}];if(f=f[0].from>=f[0].to?[]:T(f,t),Lr)for(var o=0;f.length>o;++o)for(var h,p=f[o];h=Dn(ui(r,p.to-1));){var d=h.find().from.line;if(!(d>p.from)){f.splice(o--,1);break}p.to=d}for(var m=0,o=0;f.length>o;++o){var p=f[o];u>p.from&&(p.from=u),p.to>c&&(p.to=c),p.from>=p.to?f.splice(o--,1):m+=p.to-p.from}if(m==c-u&&u==i.showingFrom&&c==i.showingTo)return y(e),void 0;f.sort(function(e,t){return e.from-t.from});try{var g=document.activeElement}catch(v){}.7*(c-u)>m&&(i.lineDiv.style.display="none"),w(e,u,c,f,a),i.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();var _=u!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;_&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=u,i.showingTo=c,A(e,100);for(var E,S=i.lineDiv.offsetTop,k=i.lineDiv.firstChild;k;k=k.nextSibling)if(k.lineObj){if(br){var x=k.offsetTop+k.offsetHeight;E=x-S,S=x}else{var R=nr(k);E=R.bottom-R.top}var P=k.lineObj.height-E;if(2>E&&(E=K(i)),P>.001||-.001>P){hi(k.lineObj,E);var O=k.lineObj.widgets;if(O)for(var o=0;O.length>o;++o)O[o].height=O[o].node.offsetHeight}}return y(e),!0}}function y(e){var t=e.display.viewOffset=mi(e,ui(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function T(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],s=[],a=r.diff||0,o=0,l=e.length;l>o;++o){var u=e[o];r.to<=u.from&&r.diff?s.push({from:u.from+a,to:u.to+a}):r.to<=u.from||r.from>=u.to?s.push(u):(r.from>u.from&&s.push({from:u.from,to:r.from}),r.to<u.to&&s.push({from:r.to+a,to:u.to+a}))}e=s}return e}function S(e){for(var t=e.display,n={},i={},r=t.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[e.options.gutters[s]]=r.offsetLeft,i[e.options.gutters[s]]=r.offsetWidth;return{fixedPos:v(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function w(e,t,n,i,r){function s(t){var n=t.nextSibling;return vr&&Or&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var a=S(e),o=e.display,l=e.options.lineNumbers;i.length||vr&&e.display.currentWheelTarget||Zi(o.lineDiv);var u=o.lineDiv,c=u.firstChild,f=i.shift(),h=t;for(e.doc.iter(t,n,function(t){if(f&&f.to==h&&(f=i.shift()),In(e.doc,t)){if(0!=t.height&&hi(t,0),t.widgets&&c.previousSibling)for(var n=0;t.widgets.length>n;++n)if(t.widgets[n].showIfHidden){var o=c.previousSibling;if(/pre/i.test(o.nodeName)){var p=Qi("div",null,null,"position: relative");o.parentNode.replaceChild(p,o),p.appendChild(o),o=p}var d=o.appendChild(Qi("div",[t.widgets[n].node],"CodeMirror-linewidget"));x(t.widgets[n],d,o,a)}}else if(f&&h>=f.from&&f.to>h){for(;c.lineObj!=t;)c=s(c);l&&h>=r&&c.lineNumber&&tr(c.lineNumber,g(e.options,h)),c=c.nextSibling}else{if(t.widgets)for(var m,b=0,v=c;v&&20>b;++b,v=v.nextSibling)if(v.lineObj==t&&/div/i.test(v.nodeName)){m=v;break}var _=k(e,t,h,a,m);if(_!=m)u.insertBefore(_,c);else{for(;c!=m;)c=s(c);c=c.nextSibling}_.lineObj=t}++h});c;)c=s(c)}function k(e,t,n,i,r){var s,a=Qn(e,t),o=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||o||t.bgClass||t.wrapClass||t.widgets))return a;if(r){r.alignable=null;for(var u,c=!0,f=0,h=r.firstChild;h;h=u)if(u=h.nextSibling,/\bCodeMirror-linewidget\b/.test(h.className)){for(var p=0,d=!0;t.widgets.length>p;++p){var m=t.widgets[p],b=!1;if(m.above||(b=d,d=!1),m.node==h.firstChild){x(m,h,r,i),++f,b&&r.insertBefore(a,h);break}}if(p==t.widgets.length){c=!1;break}}else r.removeChild(h);c&&f==t.widgets.length&&(s=r,r.className=t.wrapClass||"")}if(s||(s=Qi("div",null,t.wrapClass,"position: relative"),s.appendChild(a)),t.bgClass&&s.insertBefore(Qi("div",null,t.bgClass+" CodeMirror-linebackground"),s.firstChild),e.options.lineNumbers||o){var v=s.insertBefore(Qi("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),s.firstChild);if(e.options.fixedGutter&&(s.alignable||(s.alignable=[])).push(v),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(s.lineNumber=v.appendChild(Qi("div",g(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),o)for(var _=0;e.options.gutters.length>_;++_){var E=e.options.gutters[_],y=o.hasOwnProperty(E)&&o[E];y&&v.appendChild(Qi("div",[y],"CodeMirror-gutter-elt","left: "+i.gutterLeft[E]+"px; width: "+i.gutterWidth[E]+"px"))}}if(br&&(s.style.zIndex=2),t.widgets&&s!=r)for(var p=0,T=t.widgets;T.length>p;++p){var m=T[p],S=Qi("div",[m.node],"CodeMirror-linewidget");x(m,S,s,i),m.above?s.insertBefore(S,e.options.lineNumbers&&0!=t.height?v:a):s.appendChild(S),Ii(m,"redraw")}return s}function x(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function R(e){var t=e.display,n=Bt(e.doc.sel.from,e.doc.sel.to);if(n||e.options.showCursorWhenSelecting?P(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":O(e),e.options.moveInputWithCursor){var i=J(e,e.doc.sel.head,"div"),r=nr(t.wrapper),s=nr(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-r.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-r.left))+"px"}}function P(e){var t=e.display,n=J(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):t.otherCursor.style.display="none"}function O(e){function t(e,t,n,i){0>t&&(t=0),a.appendChild(Qi("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?o-e:n)+"px; height: "+(i-t)+"px"))}function n(n,i,s,a){function u(t){return W(e,Ft(n,t),"div",c)}var c=ui(r,n),f=c.text.length,h=a?1/0:-1/0;return sr(bi(c),i||0,null==s?f:s,function(e,n,r){var c,p,d,m=u(e);if(e==n)c=m,p=d=m.left;else{if(c=u(n-1),"rtl"==r){var b=m;m=c,c=b}p=m.left,d=c.right}c.top-m.top>3&&(t(p,m.top,null,m.bottom),p=l,m.bottom<c.top&&t(p,m.bottom,null,c.top)),null==s&&n==f&&(d=o),null==i&&0==e&&(p=l),h=a?Math.min(c.top,h):Math.max(c.bottom,h),l+1>p&&(p=l),t(p,c.top,d-p,c.bottom)}),h}var i=e.display,r=e.doc,s=e.doc.sel,a=document.createDocumentFragment(),o=i.lineSpace.offsetWidth,l=I(e.display);if(s.from.line==s.to.line)n(s.from.line,s.from.ch,s.to.ch);else{for(var u,c,f=ui(r,s.from.line),h=f,p=[s.from.line,s.from.ch];u=Dn(h);){var d=u.find();if(p.push(d.from.ch,d.to.line,d.to.ch),d.to.line==s.to.line){p.push(s.to.ch),c=!0;break}h=ui(r,d.to.line)}if(c)for(var m=0;p.length>m;m+=3)n(p[m],p[m+1],p[m+2]);else{var b,g,v=ui(r,s.to.line);b=s.from.ch?n(s.from.line,s.from.ch,null,!1):mi(e,f)-i.viewOffset,g=s.to.ch?n(s.to.line,Hn(v)?null:0,s.to.ch,!0):mi(e,v)-i.viewOffset,g>b&&t(l,b,null,g)}}er(i.selectionDiv,a),i.selectionDiv.style.display=""}function C(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}}function A(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,qi(M,e))}function M(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var n,i=+new Date+e.options.workTime,r=dn(t.mode,H(e,t.frontier)),s=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(a){if(t.frontier>=e.display.showingFrom){var o=a.styles;a.styles=Yn(e,a,r);for(var l=!o||o.length!=a.styles.length,u=0;!l&&o.length>u;++u)l=o[u]!=a.styles[u];l&&(n&&n.end==t.frontier?n.end++:s.push(n={start:t.frontier,end:t.frontier+1})),a.stateAfter=dn(t.mode,r)}else Xn(e,a,r),a.stateAfter=0==t.frontier%5?dn(t.mode,r):null;return++t.frontier,+new Date>i?(A(e,e.options.workDelay),!0):void 0}),s.length&&tt(e,function(){for(var e=0;s.length>e;++e)rt(this,s[e].start,s[e].end)})()}}function $(e,t){for(var n,i,r=e.doc,s=t,a=t-100;s>a;--s){if(r.first>=s)return r.first;var o=ui(r,s-1);if(o.stateAfter)return s;var l=Fi(o.text,null,e.options.tabSize);(null==i||n>l)&&(i=s-1,n=l)}return i}function H(e,t){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var r=$(e,t),s=r>n.first&&ui(n,r-1).stateAfter;return s=s?dn(n.mode,s):mn(n.mode),n.iter(r,t,function(a){Xn(e,a,s);var o=r==t-1||0==r%5||r>=i.showingFrom&&i.showingTo>r;a.stateAfter=o?dn(n.mode,s):null,++r}),s}function D(e){return e.lineSpace.offsetTop}function N(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function I(e){var t=er(e.measure,Qi("pre",null,null,"text-align: left")).appendChild(Qi("span","x"));return t.offsetLeft}function L(e,t,n,i){var r=-1;i=i||U(e,t);for(var s=n;;s+=r){var a=i[s];if(a)break;0>r&&0==s&&(r=1)}return{left:n>s?a.right:a.left,right:s>n?a.left:a.right,top:a.top,bottom:a.bottom}}function z(e,t){for(var n=e.display.measureLineCache,i=0;n.length>i;++i){var r=n[i];if(r.text==t.text&&r.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==r.width&&r.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return r.measure}}function U(e,t){var n=z(e,t);if(!n){n=F(e,t);var i=e.display.measureLineCache,r={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:n,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};16==i.length?i[++e.display.measureLineCachePos%16]=r:i.push(r)}return n}function F(e,t){var n=e.display,i=Yi(t.text.length),r=Qn(e,t,i);if(mr&&!br&&!e.options.lineWrapping&&r.childNodes.length>100){for(var s=document.createDocumentFragment(),a=10,o=r.childNodes.length,l=0,u=Math.ceil(o/a);u>l;++l){for(var c=Qi("div",null,null,"display: inline-block"),f=0;a>f&&o;++f)c.appendChild(r.firstChild),--o;s.appendChild(c)}r.appendChild(s)}er(n.measure,r);var h=nr(n.lineDiv),p=[],d=Yi(t.text.length),m=r.offsetHeight;gr&&n.measure.first!=r&&er(n.measure,r);for(var b,l=0;i.length>l;++l)if(b=i[l]){for(var g=nr(b),v=Math.max(0,g.top-h.top),_=Math.min(g.bottom-h.top,m),f=0;p.length>f;f+=2){var E=p[f],y=p[f+1];if(!(E>_||v>y)&&(v>=E&&y>=_||E>=v&&_>=y||Math.min(_,y)-Math.max(v,E)>=_-v>>1)){p[f]=Math.min(v,E),p[f+1]=Math.max(_,y);break}}f==p.length&&p.push(v,_);var T=g.right;b.measureRight&&(T=nr(b.measureRight).left),d[l]={left:g.left-h.left,right:T-h.left,top:f}}for(var b,l=0;d.length>l;++l)if(b=d[l]){var S=b.top;b.top=p[S],b.bottom=p[S+1]}return d}function B(e,t){var n=!1;if(t.markedSpans)for(var i=0;t.markedSpans>i;++i){var r=t.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=t.text.length||(n=!0)}var s=!n&&z(e,t);if(s)return L(e,t,t.text.length,s).right;var a=Qn(e,t),o=a.appendChild(rr(e.display.measure));return er(e.display.measure,a),nr(o).right-nr(e.display.lineDiv).left}function G(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function j(e,t,n,i){if(t.widgets)for(var r=0;t.widgets.length>r;++r)if(t.widgets[r].above){var s=Bn(t.widgets[r]);n.top+=s,n.bottom+=s}if("line"==i)return n;i||(i="local");var a=mi(e,t);if("local"!=i&&(a-=e.display.viewOffset),"page"==i){var o=nr(e.display.lineSpace);a+=o.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var l=o.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function V(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;"page"==n&&(i-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,r-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var s=nr(e.display.lineSpace);if(i-=s.left,r-=s.top,"local"==n||!n){var a=nr(e.display.wrapper);i+=a.left,r+=a.top}return{left:i,top:r}}function W(e,t,n,i){return i||(i=ui(e.doc,t.line)),j(e,i,L(e,i,t.ch),n)}function J(e,t,n,i,r){function s(t,s){var a=L(e,i,t,r);return s?a.left=a.right:a.right=a.left,j(e,i,a,n)}i=i||ui(e.doc,t.line),r||(r=U(e,i));var a=bi(i),o=t.ch;if(!a)return s(o);for(var l,u,c=a[0].level,f=0;a.length>f;++f){var h,p,d=a[f],m=d.level%2;if(o>d.from&&d.to>o)return s(o,m);var b=m?d.to:d.from,g=m?d.from:d.to;if(b==o)p=f&&d.level<(h=a[f-1]).level?s(h.level%2?h.from:h.to-1,!0):s(m&&d.from!=d.to?o-1:o),m==c?l=p:u=p;else if(g==o){var h=a.length-1>f&&a[f+1];if(!m&&h&&h.from==h.to)continue;p=h&&d.level<h.level?s(h.level%2?h.to-1:h.from):s(m?o:o-1,!0),m==c?l=p:u=p}}return c&&!o&&(u=s(a[0].to-1)),l?(u&&(l.other=u),l):u}function Y(e,t,n){var i=new Ft(e,t);return n&&(i.outside=!0),i}function q(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,0>n)return Y(i.first,0,!0);var r=di(i,n),s=i.first+i.size-1;if(r>s)return Y(i.first+i.size-1,ui(i,s).text.length,!0);for(0>t&&(t=0);;){var a=ui(i,r),o=X(e,a,r,t,n),l=Dn(a),u=l&&l.find();if(!(l&&o.ch>=u.from.ch))return o;r=u.to.line}}function X(e,t,n,i,r){function s(i){var r=J(e,Ft(n,i),"line",t,u);return o=!0,a>r.bottom?r.left-l:r.top>a?r.left+l:(o=!1,r.left)}var a=r-mi(e,t),o=!1,l=2*e.display.wrapper.clientWidth,u=U(e,t),c=bi(t),f=t.text.length,h=lr(t),p=ur(t),d=s(h),m=o,b=s(p),g=o;if(i>b)return Y(n,p,g);for(;;){if(c?p==h||p==hr(t,h,1):1>=p-h){for(var v=b-i>i-d,_=v?h:p;ps.test(t.text.charAt(_));)++_;var E=Y(n,_,v?m:g);return E.after=v,E}var y=Math.ceil(f/2),T=h+y;if(c){T=h;for(var S=0;y>S;++S)T=hr(t,T,1)}var w=s(T);w>i?(p=T,b=w,(g=o)&&(b+=1e3),f=y):(h=T,d=w,m=o,f-=y)}}function K(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Mr){Mr=Qi("pre");for(var t=0;49>t;++t)Mr.appendChild(document.createTextNode("x")),Mr.appendChild(Qi("br"));Mr.appendChild(document.createTextNode("x"))}er(e.measure,Mr);var n=Mr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Zi(e.measure),n||1}function Q(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Qi("span","x"),n=Qi("pre",[t]);er(e.measure,n);var i=t.offsetWidth;return i>2&&(e.cachedCharWidth=i),i||10}function Z(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++zr},ls++||(os=[])}function et(e){var t=e.curOp,n=e.doc,i=e.display;if(e.curOp=null,t.updateMaxLine&&f(e),i.maxLineChanged&&!e.options.lineWrapping&&i.maxLine){var r=B(e,i.maxLine);i.sizer.style.minWidth=Math.max(0,r+3+us)+"px",i.maxLineChanged=!1;var s=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);n.scrollLeft>s&&!t.updateScrollPos&&_t(e,Math.min(i.scroller.scrollLeft,s),!0)}var a,o;if(t.updateScrollPos)a=t.updateScrollPos;else if(t.selectionChanged&&i.scroller.clientHeight){var l=J(e,n.sel.head);a=rn(e,l.left,l.top,l.left,l.bottom)}(t.changes.length||a&&null!=a.scrollTop)&&(o=_(e,t.changes,a&&a.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!o&&t.selectionChanged&&R(e),t.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=a.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=a.scrollLeft,m(e),t.scrollToPos&&tn(e,Wt(e.doc,t.scrollToPos),t.scrollToPosMargin)):a&&en(e),t.selectionChanged&&C(e),e.state.focused&&t.updateInput&&lt(e,t.userSelChange);var u=t.maybeHiddenMarkers,c=t.maybeUnhiddenMarkers;if(u)for(var h=0;u.length>h;++h)u[h].lines.length||Ni(u[h],"hide");if(c)for(var h=0;c.length>h;++h)c[h].lines.length&&Ni(c[h],"unhide");var p;if(--ls||(p=os,os=null),t.textChanged&&Ni(e,"change",e,t.textChanged),t.cursorActivity&&Ni(e,"cursorActivity",e),p)for(var h=0;p.length>h;++h)p[h]()}function tt(e,t){return function(){var n=e||this,i=!n.curOp;i&&Z(n);try{var r=t.apply(n,arguments)}finally{i&&et(n)}return r}}function nt(e){return function(){var t,n=this.cm&&!this.cm.curOp;n&&Z(this.cm);try{t=e.apply(this,arguments)}finally{n&&et(this.cm)}return t}}function it(e,t){var n,i=!e.curOp;i&&Z(e);try{n=t()}finally{i&&et(e)}return n}function rt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:i})}function st(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){ot(e),e.state.focused&&st(e)})}function at(e){function t(){var i=ot(e);i||n?(e.display.pollingFast=!1,st(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function ot(e){var t=e.display.input,n=e.display.prevInput,i=e.doc,r=i.sel;if(!e.state.focused||_s(t)||ct(e))return!1;var s=t.value;if(s==n&&Bt(r.from,r.to))return!1;if(mr&&!gr&&e.display.inputHasSelection===s)return lt(e,!0),!1;var a=!e.curOp;a&&Z(e),r.shift=!1;for(var o=0,l=Math.min(n.length,s.length);l>o&&n.charCodeAt(o)==s.charCodeAt(o);)++o;var u=r.from,c=r.to;n.length>o?u=Ft(u.line,u.ch-(n.length-o)):e.state.overwrite&&Bt(u,c)&&!e.state.pasteIncoming&&(c=Ft(c.line,Math.min(ui(i,c.line).text.length,c.ch+(s.length-o))));var f=e.curOp.updateInput;return Ht(e.doc,{from:u,to:c,text:vs(s.slice(o)),origin:e.state.pasteIncoming?"paste":"+input"},"end"),e.curOp.updateInput=f,s.length>1e3||s.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=s,a&&et(e),e.state.pasteIncoming=!1,!0}function lt(e,t){var n,i,r=e.doc;if(Bt(r.sel.from,r.sel.to))t&&(e.display.prevInput=e.display.input.value="",mr&&!gr&&(e.display.inputHasSelection=null));else{e.display.prevInput="",n=Es&&(r.sel.to.line-r.sel.from.line>100||(i=e.getSelection()).length>1e3);var s=n?"-":i||e.getSelection();e.display.input.value=s,e.state.focused&&ji(e.display.input),mr&&!gr&&(e.display.inputHasSelection=s)}e.display.inaccurateSelection=n}function ut(e){"nocursor"==e.options.readOnly||Pr&&document.activeElement==e.display.input||e.display.input.focus()}function ct(e){return e.options.readOnly||e.doc.cantEdit}function ft(e){function t(){e.state.focused&&setTimeout(qi(ut,e),0)}function n(){a.cachedCharWidth=a.cachedTextHeight=null,G(e),it(e,qi(rt,e))}function i(){for(var e=a.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(i,5e3):Di(window,"resize",n)}function r(t){e.options.onDragEvent&&e.options.onDragEvent(e,Pi(t))||Ai(t)}function s(){a.inaccurateSelection&&(a.prevInput="",a.inaccurateSelection=!1,a.input.value=e.getSelection(),ji(a.input))}var a=e.display;Hi(a.scroller,"mousedown",tt(e,dt)),mr?Hi(a.scroller,"dblclick",tt(e,function(t){var n=pt(e,t);if(n&&!bt(e,t)&&!ht(e.display,t)){Oi(t);var i=fn(ui(e.doc,n.line).text,n);qt(e.doc,i.from,i.to)}})):Hi(a.scroller,"dblclick",Oi),Hi(a.lineSpace,"selectstart",function(e){ht(a,e)||Oi(e)}),Nr||Hi(a.scroller,"contextmenu",function(t){Ot(e,t)}),Hi(a.scroller,"scroll",function(){a.scroller.clientHeight&&(vt(e,a.scroller.scrollTop),_t(e,a.scroller.scrollLeft,!0),Ni(e,"scroll",e))}),Hi(a.scrollbarV,"scroll",function(){a.scroller.clientHeight&&vt(e,a.scrollbarV.scrollTop)}),Hi(a.scrollbarH,"scroll",function(){a.scroller.clientHeight&&_t(e,a.scrollbarH.scrollLeft)}),Hi(a.scroller,"mousewheel",function(t){Et(e,t)}),Hi(a.scroller,"DOMMouseScroll",function(t){Et(e,t)}),Hi(a.scrollbarH,"mousedown",t),Hi(a.scrollbarV,"mousedown",t),Hi(a.wrapper,"scroll",function(){a.wrapper.scrollTop=a.wrapper.scrollLeft=0}),Hi(window,"resize",n),setTimeout(i,5e3),Hi(a.input,"keyup",tt(e,function(t){e.options.onKeyEvent&&e.options.onKeyEvent(e,Pi(t))||16==t.keyCode&&(e.doc.sel.shift=!1)})),Hi(a.input,"input",qi(at,e)),Hi(a.input,"keydown",tt(e,kt)),Hi(a.input,"keypress",tt(e,xt)),Hi(a.input,"focus",qi(Rt,e)),Hi(a.input,"blur",qi(Pt,e)),e.options.dragDrop&&(Hi(a.scroller,"dragstart",function(t){gt(e,t)}),Hi(a.scroller,"dragenter",r),Hi(a.scroller,"dragover",r),Hi(a.scroller,"drop",tt(e,mt))),Hi(a.scroller,"paste",function(t){ht(a,t)||(ut(e),at(e))}),Hi(a.input,"paste",function(){e.state.pasteIncoming=!0,at(e)}),Hi(a.input,"cut",s),Hi(a.input,"copy",s),Sr&&Hi(a.sizer,"mouseup",function(){document.activeElement==a.input&&a.input.blur(),ut(e)})}function ht(e,t){for(var n=Mi(t);n!=e.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}}function pt(e,t,n){var i=e.display;if(!n){var r=Mi(t);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller)return null}var s,a,o=nr(i.lineSpace);try{s=t.clientX,a=t.clientY}catch(t){return null}return q(e,s-o.left,a-o.top)}function dt(e){function t(e){if(!Bt(g,e)){if(g=e,"single"==c)return qt(r.doc,Wt(a,l),e),void 0;if(m=Wt(a,m),b=Wt(a,b),"double"==c){var t=fn(ui(a,e.line).text,e);Gt(e,m)?qt(r.doc,t.from,b):qt(r.doc,m,t.to)}else"triple"==c&&(Gt(e,m)?qt(r.doc,b,Wt(a,Ft(e.line,0))):qt(r.doc,m,Wt(a,Ft(e.line+1,0))))}}function n(e){var i=++_,o=pt(r,e,!0);if(o)if(Bt(o,h)){var l=e.clientY<v.top?-20:e.clientY>v.bottom?20:0;l&&setTimeout(tt(r,function(){_==i&&(s.scroller.scrollTop+=l,n(e))}),50)}else{r.state.focused||Rt(r),h=o,t(o);var u=d(s,a);(o.line>=u.to||o.line<u.from)&&setTimeout(tt(r,function(){_==i&&n(e)}),150)}}function i(e){_=1/0;var n=pt(r,e);n&&t(n),Oi(e),ut(r),Di(document,"mousemove",E),Di(document,"mouseup",y)}var r=this,s=r.display,a=r.doc,o=a.sel;if(o.shift=e.shiftKey,ht(s,e))return vr||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100)),void 0;if(!bt(r,e)){var l=pt(r,e);switch($i(e)){case 3:return Nr&&Ot.call(r,r,e),void 0;case 2:return l&&qt(r.doc,l),setTimeout(qi(ut,r),20),Oi(e),void 0}if(!l)return Mi(e)==s.scroller&&Oi(e),void 0;r.state.focused||Rt(r);var u=+new Date,c="single";if(Hr&&Hr.time>u-400&&Bt(Hr.pos,l))c="triple",Oi(e),setTimeout(qi(ut,r),20),hn(r,l.line);else if($r&&$r.time>u-400&&Bt($r.pos,l)){c="double",Hr={time:u,pos:l},Oi(e);var f=fn(ui(a,l.line).text,l);qt(r.doc,f.from,f.to)}else $r={time:u,pos:l};var h=l;if(r.options.dragDrop&&ds&&!ct(r)&&!Bt(o.from,o.to)&&!Gt(l,o.from)&&!Gt(o.to,l)&&"single"==c){var p=tt(r,function(t){vr&&(s.scroller.draggable=!1),r.state.draggingText=!1,Di(document,"mouseup",p),Di(s.scroller,"drop",p),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(Oi(t),qt(r.doc,l),ut(r))});return vr&&(s.scroller.draggable=!0),r.state.draggingText=p,s.scroller.dragDrop&&s.scroller.dragDrop(),Hi(document,"mouseup",p),Hi(s.scroller,"drop",p),void 0}Oi(e),"single"==c&&qt(r.doc,Wt(a,l));var m=o.from,b=o.to,g=l,v=nr(s.wrapper),_=0,E=tt(r,function(e){mr||$i(e)?n(e):i(e)}),y=tt(r,i);Hi(document,"mousemove",E),Hi(document,"mouseup",y)}}function mt(e){var t=this;if(!(ht(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Pi(e)))){Oi(e);var n=pt(t,e,!0),i=e.dataTransfer.files;if(n&&!ct(t))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,s=Array(r),a=0,o=function(e,i){var o=new FileReader;o.onload=function(){s[i]=o.result,++a==r&&(n=Wt(t.doc,n),Ht(t.doc,{from:n,to:n,text:vs(s.join("\n")),origin:"paste"},"around"))},o.readAsText(e)},l=0;r>l;++l)o(i[l],l);else{if(t.state.draggingText&&!Gt(n,t.doc.sel.from)&&!Gt(t.doc.sel.to,n))return t.state.draggingText(e),setTimeout(qi(ut,t),20),void 0;try{var s=e.dataTransfer.getData("Text");if(s){var u=t.doc.sel.from,c=t.doc.sel.to;Kt(t.doc,n,n),t.state.draggingText&&Ut(t.doc,"",u,c,"paste"),t.replaceSelection(s,null,"paste"),ut(t),Rt(t)}}catch(e){}}}}function bt(e,t){var n=e.display;try{var i=t.clientX,r=t.clientY}catch(t){return!1}if(i>=Math.floor(nr(n.gutters).right))return!1;if(Oi(t),!zi(e,"gutterClick"))return!0;var s=nr(n.lineDiv);if(r>s.bottom)return!0;r-=s.top-n.viewOffset;for(var a=0;e.options.gutters.length>a;++a){var o=n.gutters.childNodes[a];if(o&&nr(o).right>=i){var l=di(e.doc,r),u=e.options.gutters[a];Ii(e,"gutterClick",e,l,u,t);break}}return!0}function gt(e,t){if(mr&&!e.state.draggingText)return Ai(t),void 0;if(!ht(e.display,t)){var n=e.getSelection();if(t.dataTransfer.setData("Text",n),t.dataTransfer.setDragImage){var i=Qi("img",null,null,"position: fixed; left: 0; top: 0;");yr&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),Tr&&(e.display.dragImg?i=e.display.dragImg:(e.display.dragImg=i,i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.display.wrapper.appendChild(i))),t.dataTransfer.setDragImage(i,0,0),yr&&i.parentNode.removeChild(i)}}}function vt(e,t){2>Math.abs(e.doc.scrollTop-t)||(e.doc.scrollTop=t,dr||_(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),dr&&_(e,[]))}function _t(e,t,n){(n?t==e.doc.scrollLeft:2>Math.abs(e.doc.scrollLeft-t))||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,m(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Et(e,t){var n=t.wheelDeltaX,i=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==i&&t.detail&&t.axis==t.VERTICAL_AXIS?i=t.detail:null==i&&(i=t.wheelDelta);var r=e.display,s=r.scroller;if(n&&s.scrollWidth>s.clientWidth||i&&s.scrollHeight>s.clientHeight){if(i&&Or&&vr)for(var a=t.target;a!=s;a=a.parentNode)if(a.lineObj){e.display.currentWheelTarget=a;break}if(n&&!dr&&!yr&&null!=Fr)return i&&vt(e,Math.max(0,Math.min(s.scrollTop+i*Fr,s.scrollHeight-s.clientHeight))),_t(e,Math.max(0,Math.min(s.scrollLeft+n*Fr,s.scrollWidth-s.clientWidth))),Oi(t),r.wheelStartX=null,void 0;if(i&&null!=Fr){var o=i*Fr,l=e.doc.scrollTop,u=l+r.wrapper.clientHeight;0>o?l=Math.max(0,l+o-50):u=Math.min(e.doc.height,u+o+50),_(e,[],{top:l,bottom:u})}20>Ur&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var e=s.scrollLeft-r.wheelStartX,t=s.scrollTop-r.wheelStartY,n=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Fr=(Fr*Ur+n)/(Ur+1),++Ur)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function yt(e,t,n){if("string"==typeof t&&(t=Qr[t],!t))return!1;e.display.pollingFast&&ot(e)&&(e.display.pollingFast=!1);var i=e.doc,r=i.sel.shift,s=!1;try{ct(e)&&(e.state.suppressEdits=!0),n&&(i.sel.shift=!1),s=t(e)!=cs}finally{i.sel.shift=r,e.state.suppressEdits=!1}return s}function Tt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function St(e,t){var n=bn(e.options.keyMap),i=n.auto;clearTimeout(Br),i&&!vn(t)&&(Br=setTimeout(function(){bn(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var r=_n(t,!0),s=!1;if(!r)return!1;var a=Tt(e);return s=t.shiftKey?gn("Shift-"+r,a,function(t){return yt(e,t,!0)})||gn(r,a,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?yt(e,t):void 0}):gn(r,a,function(t){return yt(e,t)}),"stop"==s&&(s=!1),s&&(Oi(t),C(e),gr&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),s}function wt(e,t,n){var i=gn("'"+n+"'",Tt(e),function(t){return yt(e,t,!0)});return i&&(Oi(t),C(e)),i}function kt(e){var t=this;if(t.state.focused||Rt(t),mr&&27==e.keyCode&&(e.returnValue=!1),!t.options.onKeyEvent||!t.options.onKeyEvent(t,Pi(e))){var n=e.keyCode;t.doc.sel.shift=16==n||e.shiftKey;var i=St(t,e);yr&&(jr=i?n:null,!i&&88==n&&!Es&&(Or?e.metaKey:e.ctrlKey)&&t.replaceSelection(""))}}function xt(e){var t=this;if(!t.options.onKeyEvent||!t.options.onKeyEvent(t,Pi(e))){var n=e.keyCode,i=e.charCode;if(yr&&n==jr)return jr=null,Oi(e),void 0;if(!(yr&&(!e.which||10>e.which)||Sr)||!St(t,e)){var r=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ct(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(tt(t,function(){on(t,t.doc.sel.to.line,"smart")}),75),wt(t,e,r)||(mr&&!gr&&(t.display.inputHasSelection=null),at(t))}}}function Rt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Ni(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),lt(e,!0)),st(e),C(e))}function Pt(e){e.state.focused&&(Ni(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function Ot(e,t){function n(){if(i.inputDiv.style.position="relative",i.input.style.cssText=o,gr&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),st(e),null!=i.input.selectionStart&&(!mr||gr)){clearTimeout(Gr);
var t=i.input.value=" "+(Bt(r.from,r.to)?"":i.input.value),n=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=t.length;var s=function(){" "==i.prevInput&&0==i.input.selectionStart?tt(e,Qr.selectAll)(e):10>n++?Gr=setTimeout(s,500):lt(e)};Gr=setTimeout(s,200)}}var i=e.display,r=e.doc.sel;if(!ht(i,t)){var s=pt(e,t),a=i.scroller.scrollTop;if(s&&!yr){(Bt(r.from,r.to)||Gt(s,r.from)||!Gt(s,r.to))&&tt(e,Kt)(e.doc,s,s);var o=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ut(e),lt(e,!0),Bt(r.from,r.to)&&(i.input.value=i.prevInput=" "),Nr){Ai(t);var l=function(){Di(window,"mouseup",l),setTimeout(n,20)};Hi(window,"mouseup",l)}else setTimeout(n,50)}}}function Ct(e){return e.text?Ft(e.from.line+e.text.length-1,Gi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function At(e,t,n){if(!Gt(t.from,n))return Wt(e,n);var i=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+i){var r=n.line-i,s=e.first+e.size-1;return r>s?Ft(s,ui(e,s).text.length):Jt(n,ui(e,r).text.length)}if(n.line==t.to.line+i)return Jt(n,Gi(t.text).length+(1==t.text.length?t.from.ch:0)+ui(e,t.to.line).text.length-t.to.ch);var a=n.line-t.from.line;return Jt(n,t.text[a].length+(a?0:t.from.ch))}function Mt(e,t,n){if(n&&"object"==typeof n)return{anchor:At(e,t,n.anchor),head:At(e,t,n.head)};if("start"==n)return{anchor:t.from,head:t.from};var i=Ct(t);if("around"==n)return{anchor:t.from,head:i};if("end"==n)return{anchor:i,head:i};var r=function(e){if(Gt(e,t.from))return e;if(!Gt(t.to,e))return i;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=i.ch-t.to.ch),Ft(n,r)};return{anchor:r(e.sel.anchor),head:r(e.sel.head)}}function $t(e,t){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,update:function(t,n,i,r){t&&(this.from=Wt(e,t)),n&&(this.to=Wt(e,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)},cancel:function(){this.canceled=!0}};return Ni(e,"beforeChange",e,n),e.cm&&Ni(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ht(e,t,n,i){if(e.cm){if(!e.cm.curOp)return tt(e.cm,Ht)(e,t,n,i);if(e.cm.state.suppressEdits)return}if(!(zi(e,"beforeChange")||e.cm&&zi(e.cm,"beforeChange"))||(t=$t(e,t))){var r=Ir&&!i&&Mn(e,t.from,t.to);if(r){for(var s=r.length-1;s>=1;--s)Dt(e,{from:r[s].from,to:r[s].to,text:[""]});r.length&&Dt(e,{from:r[0].from,to:r[0].to,text:t.text},n)}else Dt(e,t,n)}}function Dt(e,t,n){var i=Mt(e,t,n);Ei(e,t,i,e.cm?e.cm.curOp.id:0/0),Lt(e,t,i,Cn(e,t));var r=[];oi(e,function(e,n){n||-1!=Vi(r,e.history)||(xi(e.history,t),r.push(e.history)),Lt(e,t,null,Cn(e,t))})}function Nt(e,t){if(!e.cm||!e.cm.state.suppressEdits){var n=e.history,i=("undo"==t?n.done:n.undone).pop();if(i){n.dirtyCounter+="undo"==t?-1:1;var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore};("undo"==t?n.undone:n.done).push(r);for(var s=i.changes.length-1;s>=0;--s){var a=i.changes[s];a.origin=t,r.changes.push(_i(e,a));var o=s?Mt(e,a,null):{anchor:i.anchorBefore,head:i.headBefore};Lt(e,a,o,An(e,a));var l=[];oi(e,function(e,t){t||-1!=Vi(l,e.history)||(xi(e.history,a),l.push(e.history)),Lt(e,a,null,An(e,a))})}}}}function It(e,t){function n(e){return Ft(e.line+t,e.ch)}e.first+=t,e.cm&&rt(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function Lt(e,t,n,i){if(e.cm&&!e.cm.curOp)return tt(e.cm,Lt)(e,t,n,i);if(t.to.line<e.first)return It(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);It(e,r),t={from:Ft(e.first,0),to:Ft(t.to.line+r,t.to.ch),text:[Gi(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:Ft(s,ui(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ci(e,t.from,t.to),n||(n=Mt(e,t,null)),e.cm?zt(e.cm,t,i,n):ri(e,t,i,n)}}function zt(e,t,n,i){var s=e.doc,a=e.display,o=t.from,l=t.to,u=!1,f=o.line;e.options.lineWrapping||(f=pi(Nn(s,ui(s,o.line))),s.iter(f,l.line+1,function(e){return e==a.maxLine?(u=!0,!0):void 0})),Gt(s.sel.head,t.from)||Gt(t.to,s.sel.head)||(e.curOp.cursorActivity=!0),ri(s,t,n,i,r(e)),e.options.lineWrapping||(s.iter(f,o.line+t.text.length,function(e){var t=c(s,e);t>a.maxLineLength&&(a.maxLine=e,a.maxLineLength=t,a.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),s.frontier=Math.min(s.frontier,o.line),A(e,400);var h=t.text.length-(l.line-o.line)-1;if(rt(e,o.line,l.line+1,h),zi(e,"change")){var p={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var d=e.curOp.textChanged;d.next;d=d.next);d.next=p}else e.curOp.textChanged=p}}function Ut(e,t,n,i,r){if(i||(i=n),Gt(i,n)){var s=i;i=n,n=s}"string"==typeof t&&(t=vs(t)),Ht(e,{from:n,to:i,text:t,origin:r},null)}function Ft(e,t){return this instanceof Ft?(this.line=e,this.ch=t,void 0):new Ft(e,t)}function Bt(e,t){return e.line==t.line&&e.ch==t.ch}function Gt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function jt(e){return Ft(e.line,e.ch)}function Vt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Wt(e,t){if(t.line<e.first)return Ft(e.first,0);var n=e.first+e.size-1;return t.line>n?Ft(n,ui(e,n).text.length):Jt(t,ui(e,t.line).text.length)}function Jt(e,t){var n=e.ch;return null==n||n>t?Ft(e.line,t):0>n?Ft(e.line,0):e}function Yt(e,t){return t>=e.first&&e.first+e.size>t}function qt(e,t,n,i){if(e.sel.shift||e.sel.extend){var r=e.sel.anchor;if(n){var s=Gt(t,r);s!=Gt(n,r)?(r=t,t=n):s!=Gt(t,n)&&(t=n)}Kt(e,r,t,i)}else Kt(e,t,n||t,i);e.cm&&(e.cm.curOp.userSelChange=!0)}function Xt(e,t,n){var i={anchor:t,head:n};return Ni(e,"beforeSelectionChange",e,i),e.cm&&Ni(e.cm,"beforeSelectionChange",e.cm,i),i.anchor=Wt(e,i.anchor),i.head=Wt(e,i.head),i}function Kt(e,t,n,i,r){if(!r&&zi(e,"beforeSelectionChange")||e.cm&&zi(e.cm,"beforeSelectionChange")){var s=Xt(e,t,n);n=s.head,t=s.anchor}var a=e.sel;if(a.goalColumn=null,(r||!Bt(t,a.anchor))&&(t=Zt(e,t,i,"push"!=r)),(r||!Bt(n,a.head))&&(n=Zt(e,n,i,"push"!=r)),!Bt(a.anchor,t)||!Bt(a.head,n)){a.anchor=t,a.head=n;var o=Gt(n,t);a.from=o?n:t,a.to=o?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),Ii(e,"cursorActivity",e)}}function Qt(e){Kt(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function Zt(e,t,n,i){var r=!1,s=t,a=n||1;e.cantEdit=!1;e:for(;;){var o=ui(e,s.line);if(o.markedSpans)for(var l=0;o.markedSpans.length>l;++l){var u=o.markedSpans[l],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=s.ch:u.from<s.ch))&&(null==u.to||(c.inclusiveRight?u.to>=s.ch:u.to>s.ch))){if(i&&(Ni(c,"beforeCursorEnter"),c.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!c.atomic)continue;var f=c.find()[0>a?"from":"to"];if(Bt(f,s)&&(f.ch+=a,0>f.ch?f=f.line>e.first?Wt(e,Ft(f.line-1)):null:f.ch>o.text.length&&(f=f.line<e.first+e.size-1?Ft(f.line+1,0):null),!f)){if(r)return i?(e.cantEdit=!0,Ft(e.first,0)):Zt(e,t,n,!0);r=!0,f=t,a=-a}s=f;continue e}}return s}}function en(e){var t=tn(e,e.doc.sel.head);if(e.state.focused){var n=e.display,i=nr(n.sizer),r=null,s=D(e.display);if(0>t.top+s+i.top?r=!0:t.bottom+s+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!xr){var a="none"==n.cursor.style.display;a&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),a&&(n.cursor.style.display="none")}}}function tn(e,t,n){for(null==n&&(n=0);;){var i=!1,r=J(e,t),s=rn(e,r.left,r.top-n,r.left,r.bottom+n),a=e.doc.scrollTop,o=e.doc.scrollLeft;if(null!=s.scrollTop&&(vt(e,s.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),null!=s.scrollLeft&&(_t(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-o)>1&&(i=!0)),!i)return r}}function nn(e,t,n,i,r){var s=rn(e,t,n,i,r);null!=s.scrollTop&&vt(e,s.scrollTop),null!=s.scrollLeft&&_t(e,s.scrollLeft)}function rn(e,t,n,i,r){var s=e.display,a=D(s);n+=a,r+=a,0>n&&(n=0);var o=s.scroller.clientHeight-us,l=s.scroller.scrollTop,u={},c=e.doc.height+N(s),f=a+10>n,h=r+a>c-10;if(l>n)u.scrollTop=f?0:n;else if(r>l+o){var p=Math.min(n,(h?c:r)-o);p!=l&&(u.scrollTop=p)}var d=s.scroller.clientWidth-us,m=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,i+=s.gutters.offsetWidth;var b=s.gutters.offsetWidth,g=b+10>t;return m+b>t||g?(g&&(t=0),u.scrollLeft=Math.max(0,t-10-b)):i>d+m-3&&(u.scrollLeft=i+10-d),u}function sn(e,t,n){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==n?e.doc.scrollTop:n}}function an(e,t,n){var i=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),r=e.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+t))}function on(e,t,n,i){var r=e.doc;if(n||(n="add"),"smart"==n)if(e.doc.mode.indent)var s=H(e,t);else n="prev";var a,o=e.options.tabSize,l=ui(r,t),u=Fi(l.text,null,o),c=l.text.match(/^\s*/)[0];if("smart"==n&&(a=e.doc.mode.indent(s,l.text.slice(c.length),l.text),a==cs)){if(!i)return;n="prev"}"prev"==n?a=t>r.first?Fi(ui(r,t-1).text,null,o):0:"add"==n?a=u+e.options.indentUnit:"subtract"==n&&(a=u-e.options.indentUnit),a=Math.max(0,a);var f="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(a/o);p;--p)h+=o,f+="	";a>h&&(f+=Bi(a-h)),f!=c&&Ut(e.doc,f,Ft(t,0),Ft(t,c.length),"+input"),l.stateAfter=null}function ln(e,t,n){var i=t,r=t,s=e.doc;return"number"==typeof t?r=ui(s,Vt(s,t)):i=pi(t),null==i?null:n(r,i)?(rt(e,i,i+1),r):null}function un(e,t,n,i,r){function s(){var t=o+n;return e.first>t||t>=e.first+e.size?c=!1:(o=t,u=ui(e,t))}function a(e){var t=(r?hr:pr)(u,l,n,!0);if(null==t){if(e||!s())return c=!1;l=r?(0>n?ur:lr)(u):0>n?u.text.length:0}else l=t;return!0}var o=t.line,l=t.ch,u=ui(e,o),c=!0;if("char"==i)a();else if("column"==i)a(!0);else if("word"==i||"group"==i)for(var f=null,h="group"==i,p=!0;!(0>n)||a(!p);p=!1){var d=u.text.charAt(l)||"\n",m=Xi(d)?"w":h?/\s/.test(d)?null:"p":null;if(f&&f!=m){0>n&&(n=1,a());break}if(m&&(f=m),n>0&&!a(!p))break}var b=Zt(e,Ft(o,l),n,!0);return c||(b.hitSide=!0),b}function cn(e,t,n,i){var r,s=e.doc,a=t.left;if("page"==i){var o=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+n*(o-(0>n?1.5:.5)*K(e.display))}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;;){var l=q(e,a,r);if(!l.outside)break;if(0>n?0>=r:r>=s.height){l.hitSide=!0;break}r+=5*n}return l}function fn(e,t){var n=t.ch,i=t.ch;if(e){t.after===!1||i==e.length?--n:++i;for(var r=e.charAt(n),s=Xi(r)?Xi:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Xi(e)};n>0&&s(e.charAt(n-1));)--n;for(;e.length>i&&s(e.charAt(i));)++i}return{from:Ft(t.line,n),to:Ft(t.line,i)}}function hn(e,t){qt(e.doc,Ft(t,0),Wt(e.doc,Ft(t+1,0)))}function pn(t,n,i,r){e.defaults[t]=n,i&&(Vr[t]=r?function(e,t,n){n!=Jr&&i(e,t,n)}:i)}function dn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function mn(e,t,n){return e.startState?e.startState(t,n):!0}function bn(e){return"string"==typeof e?Zr[e]:e}function gn(e,t,n){function i(t){t=bn(t);var r=t[e];if(r===!1)return"stop";if(null!=r&&n(r))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(null==s)return!1;if("[object Array]"!=Object.prototype.toString.call(s))return i(s);for(var a=0,o=s.length;o>a;++a){var l=i(s[a]);if(l)return l}return!1}for(var r=0;t.length>r;++r){var s=i(t[r]);if(s)return s}}function vn(e){var t=ys[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function _n(e,t){if(yr&&34==e.keyCode&&e["char"])return!1;var n=ys[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(Dr?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(Dr?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)}function En(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function yn(e,t){this.lines=[],this.type=t,this.doc=e}function Tn(e,t,n,i,r){if(i&&i.shared)return wn(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return tt(e.cm,Tn)(e,t,n,i,r);var s=new yn(e,r);if("range"==r&&!Gt(t,n))return s;i&&Ji(i,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=Qi("span",[s.replacedWith],"CodeMirror-widget")),s.collapsed&&(Lr=!0),s.addToHistory&&Ei(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},0/0);var a,o,l,u=t.line,c=0,f=e.cm;if(e.iter(u,n.line+1,function(i){f&&s.collapsed&&!f.options.lineWrapping&&Nn(e,i)==f.display.maxLine&&(l=!0);var r={from:null,to:null,marker:s};c+=i.text.length,u==t.line&&(r.from=t.ch,c-=t.ch),u==n.line&&(r.to=n.ch,c-=i.text.length-n.ch),s.collapsed&&(u==n.line&&(o=$n(i,n.ch)),u==t.line?a=$n(i,t.ch):hi(i,0)),Rn(i,r),++u}),s.collapsed&&e.iter(t.line,n.line+1,function(t){In(e,t)&&hi(t,0)}),s.clearOnEnter&&Hi(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(Ir=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed){if(a!=o)throw Error("Inserting collapsed marker overlapping an existing one");s.size=c,s.atomic=!0}return f&&(l&&(f.curOp.updateMaxLine=!0),(s.className||s.startStyle||s.endStyle||s.collapsed)&&rt(f,t.line,n.line+1),s.atomic&&Qt(f)),s}function Sn(e,t){this.markers=e,this.primary=t;for(var n=0,i=this;e.length>n;++n)e[n].parent=this,Hi(e[n],"clear",function(){i.clear()})}function wn(e,t,n,i,r){i=Ji(i),i.shared=!1;var s=[Tn(e,t,n,i,r)],a=s[0],o=i.replacedWith;return oi(e,function(e){o&&(i.replacedWith=o.cloneNode(!0)),s.push(Tn(e,Wt(e,t),Wt(e,n),i,r));for(var l=0;e.linked.length>l;++l)if(e.linked[l].isParent)return;a=Gi(s)}),new Sn(s,a)}function kn(e,t){if(e)for(var n=0;e.length>n;++n){var i=e[n];if(i.marker==t)return i}}function xn(e,t){for(var n,i=0;e.length>i;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Rn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Pn(e,t,n){if(e)for(var i,r=0;e.length>r;++r){var s=e[r],a=s.marker,o=null==s.from||(a.inclusiveLeft?t>=s.from:t>s.from);if(o||"bookmark"==a.type&&s.from==t&&(!n||!s.marker.insertLeft)){var l=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:l?null:s.to,marker:a})}}return i}function On(e,t,n){if(e)for(var i,r=0;e.length>r;++r){var s=e[r],a=s.marker,o=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);if(o||"bookmark"==a.type&&s.from==t&&(!n||s.marker.insertLeft)){var l=null==s.from||(a.inclusiveLeft?t>=s.from:t>s.from);(i||(i=[])).push({from:l?null:s.from-t,to:null==s.to?null:s.to-t,marker:a})}}return i}function Cn(e,t){var n=Yt(e,t.from.line)&&ui(e,t.from.line).markedSpans,i=Yt(e,t.to.line)&&ui(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,s=t.to.ch,a=Bt(t.from,t.to),o=Pn(n,r,a),l=On(i,s,a),u=1==t.text.length,c=Gi(t.text).length+(u?r:0);if(o)for(var f=0;o.length>f;++f){var h=o[f];if(null==h.to){var p=kn(l,h.marker);p?u&&(h.to=null==p.to?null:p.to+c):h.to=r}}if(l)for(var f=0;l.length>f;++f){var h=l[f];if(null!=h.to&&(h.to+=c),null==h.from){var p=kn(o,h.marker);p||(h.from=c,u&&(o||(o=[])).push(h))}else h.from+=c,u&&(o||(o=[])).push(h)}var d=[o];if(!u){var m,b=t.text.length-2;if(b>0&&o)for(var f=0;o.length>f;++f)null==o[f].to&&(m||(m=[])).push({from:null,to:null,marker:o[f].marker});for(var f=0;b>f;++f)d.push(m);d.push(l)}return d}function An(e,t){var n=Ti(e,t),i=Cn(e,t);if(!n)return i;if(!i)return n;for(var r=0;n.length>r;++r){var s=n[r],a=i[r];if(s&&a)e:for(var o=0;a.length>o;++o){for(var l=a[o],u=0;s.length>u;++u)if(s[u].marker==l.marker)continue e;s.push(l)}else a&&(n[r]=a)}return n}function Mn(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;e.markedSpans.length>t;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Vi(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],s=0;i.length>s;++s)for(var a=i[s],o=a.find(),l=0;r.length>l;++l){var u=r[l];if(!Gt(u.to,o.from)&&!Gt(o.to,u.from)){var c=[l,1];(Gt(u.from,o.from)||!a.inclusiveLeft&&Bt(u.from,o.from))&&c.push({from:u.from,to:o.from}),(Gt(o.to,u.to)||!a.inclusiveRight&&Bt(u.to,o.to))&&c.push({from:o.to,to:u.to}),r.splice.apply(r,c),l+=c.length-1}}return r}function $n(e,t){var n,i=Lr&&e.markedSpans;if(i)for(var r,s=0;i.length>s;++s)r=i[s],r.marker.collapsed&&(null==r.from||t>r.from)&&(null==r.to||r.to>t)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function Hn(e){return $n(e,-1)}function Dn(e){return $n(e,e.text.length+1)}function Nn(e,t){for(var n;n=Hn(t);)t=ui(e,n.find().from.line);return t}function In(e,t){var n=Lr&&t.markedSpans;if(n)for(var i,r=0;n.length>r;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(0==i.from&&i.marker.inclusiveLeft&&Ln(e,t,i))return!0}}function Ln(e,t,n){if(null==n.to){var i=n.marker.find().to,r=ui(e,i.line);return Ln(e,r,kn(r.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var s,a=0;t.markedSpans.length>a;++a)if(s=t.markedSpans[a],s.marker.collapsed&&s.from==n.to&&(s.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ln(e,t,s))return!0}function zn(e){var t=e.markedSpans;if(t){for(var n=0;t.length>n;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Un(e,t){if(t){for(var n=0;t.length>n;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Fn(e){return function(){var t=!this.cm.curOp;t&&Z(this.cm);try{var n=e.apply(this,arguments)}finally{t&&et(this.cm)}return n}}function Bn(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||er(e.cm.display.measure,Qi("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Gn(e,t,n,i){var r=new es(e,n,i);return r.noHScroll&&(e.display.alignWidgets=!0),ln(e,t,function(t){if((t.widgets||(t.widgets=[])).push(r),r.line=t,!In(e.doc,t)||r.showIfHidden){var n=mi(e,t)<e.display.scroller.scrollTop;hi(t,t.height+Bn(r)),n&&an(e,0,r.height)}return!0}),r}function jn(e,t,n){var i={text:e};return Un(i,t),i.height=n?n(i):1,i}function Vn(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),zn(e),Un(e,n);var r=i?i(e):1;r!=e.height&&hi(e,r)}function Wn(e){e.parent=null,zn(e)}function Jn(e,t,n,i,r){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,o="",l=null,u=new En(t,e.options.tabSize);for(""==t&&n.blankLine&&n.blankLine(i);!u.eol();){u.pos>e.options.maxHighlightLength?(s=!1,u.pos=Math.min(t.length,u.start+5e4),a=null):a=n.token(u,i);var c=u.current();u.start=u.pos,s&&l==a?o+=c:(o&&r(o,l),o=c,l=a)}o&&r(o,l)}function Yn(e,t,n){var i=[e.state.modeGen];Jn(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)});for(var r=0;e.state.overlays.length>r;++r){var s=e.state.overlays[r],a=1;Jn(e,t.text,s.mode,!0,function(e,t){for(var n=a,r=e.length;r;){var o=i[a],l=o.length;r>=l?r-=l:(i.splice(a,1,o.slice(0,r),i[a+1],o.slice(r)),r=0),a+=2}if(t)if(s.opaque)i.splice(n,a-n,e,t),a=n+2;else for(;a>n;n+=2){var o=i[n+1];i[n+1]=o?o+" "+t:t}})}return i}function qn(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Yn(e,t,t.stateAfter=H(e,pi(t)))),t.styles}function Xn(e,t,n){var i=e.doc.mode,r=new En(t.text,e.options.tabSize);for(""==t.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=e.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}function Kn(e){return e?ts[e]||(ts[e]="cm-"+e.replace(/ +/g," cm-")):null}function Qn(e,t,n){for(var i,r,s,a=t,o=!0;i=Hn(a);)o=!1,a=ui(e.doc,i.find().from.line),r||(r=a);var l={pre:Qi("pre"),col:0,pos:0,display:!n,measure:null,addedOne:!1,cm:e};a.textClass&&(l.pre.className=a.textClass);do{l.measure=a==t&&n,l.pos=0,l.addToken=l.measure?ei:Zn,(mr||vr)&&e.getOption("lineWrapping")&&(l.addToken=ti(l.addToken)),n&&s&&a!=t&&!l.addedOne&&(n[0]=l.pre.appendChild(rr(e.display.measure)),l.addedOne=!0);var u=ii(a,l,qn(e,a));s=a==r,u&&(a=ui(e.doc,u.to.line),o=!1)}while(u);n&&!l.addedOne&&(n[0]=l.pre.appendChild(o?Qi("span",""):rr(e.display.measure))),l.pre.firstChild||In(e.doc,t)||l.pre.appendChild(document.createTextNode(""));var c;if(n&&mr&&(c=bi(a))){var f=c.length-1;c[f].from==c[f].to&&--f;var h=c[f],p=c[f-1];if(h.from+1==h.to&&p&&h.level<p.level){var d=n[l.pos-1];d&&d.parentNode.insertBefore(d.measureRight=rr(e.display.measure),d.nextSibling)}}return Ni(e,"renderLine",e,t,l.pre),l.pre}function Zn(e,t,n,i,r){if(t){if(ns.test(t))for(var s=document.createDocumentFragment(),a=0;;){ns.lastIndex=a;var o=ns.exec(t),l=o?o.index-a:t.length-a;if(l&&(s.appendChild(document.createTextNode(t.slice(a,a+l))),e.col+=l),!o)break;if(a+=l+1,"	"==o[0]){var u=e.cm.options.tabSize,c=u-e.col%u;s.appendChild(Qi("span",Bi(c),"cm-tab")),e.col+=c}else{var f=Qi("span","","cm-invalidchar");f.title="\\u"+o[0].charCodeAt(0).toString(16),s.appendChild(f),e.col+=1}}else{e.col+=t.length;var s=document.createTextNode(t)}if(n||i||r||e.measure){var h=n||"";return i&&(h+=i),r&&(h+=r),e.pre.appendChild(Qi("span",[s],h))}e.pre.appendChild(s)}}function ei(e,t,n,i,r){for(var s=e.cm.options.lineWrapping,a=0;t.length>a;++a){var o=t.charAt(a),l=0==a;o>=""&&"">o&&t.length-1>a?(o=t.slice(a,a+2),++a):a&&s&&ms.test(t.slice(a-1,a+1))&&e.pre.appendChild(Qi("wbr"));var u=e.measure[e.pos]=Zn(e,o,n,l&&i,a==t.length-1&&r);mr&&s&&" "==o&&a&&!/\s/.test(t.charAt(a-1))&&t.length-1>a&&!/\s/.test(t.charAt(a+1))&&(u.style.whiteSpace="normal"),e.pos+=o.length}t.length&&(e.addedOne=!0)}function ti(e){function t(e){for(var t=" ",n=0;e.length-2>n;++n)t+=n%2?" ":"";return t+=" "}return function(n,i,r,s,a){return e(n,i.replace(/ {3,}/,t),r,s,a)}}function ni(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function ii(e,t,n){var i=e.markedSpans;if(i)for(var r,s,a,o,l,u=e.text,c=u.length,f=0,h=1,p="",d=0;;){if(d==f){s=a=o="",l=null,d=1/0;for(var m=null,b=0;i.length>b;++b){var g=i[b],v=g.marker;f>=g.from&&(null==g.to||g.to>f)?(null!=g.to&&d>g.to&&(d=g.to,a=""),v.className&&(s+=" "+v.className),v.startStyle&&g.from==f&&(o+=" "+v.startStyle),v.endStyle&&g.to==d&&(a+=" "+v.endStyle),v.collapsed&&(!l||l.marker.width<v.width)&&(l=g)):g.from>f&&d>g.from&&(d=g.from),"bookmark"==v.type&&g.from==f&&v.replacedWith&&(m=v.replacedWith)}if(l&&(l.from||0)==f&&(ni(t,(null==l.to?c:l.to)-f,null!=l.from&&l.marker.replacedWith),null==l.to))return l.marker.find();m&&!l&&ni(t,0,m)}if(f>=c)break;for(var _=Math.min(c,d);;){if(p){var E=f+p.length;if(!l){var y=E>_?p.slice(0,_-f):p;t.addToken(t,y,r?r+s:s,o,f+y.length==d?a:"")}if(E>=_){p=p.slice(_-f),f=_;break}f=E,o=""}p=n[h++],r=Kn(n[h++])}}else for(var h=1;n.length>h;h+=2)t.addToken(t,n[h],Kn(n[h+1]))}function ri(e,t,n,i,r){function s(e){return n?n[e]:null}function a(e,n,i){Vn(e,n,i,r),Ii(e,"change",e,t)}var o=t.from,l=t.to,u=t.text,c=ui(e,o.line),f=ui(e,l.line),h=Gi(u),p=s(u.length-1),d=l.line-o.line;if(0==o.ch&&0==l.ch&&""==h){for(var m=0,b=u.length-1,g=[];b>m;++m)g.push(jn(u[m],s(m),r));a(f,f.text,p),d&&e.remove(o.line,d),g.length&&e.insert(o.line,g)}else if(c==f)if(1==u.length)a(c,c.text.slice(0,o.ch)+h+c.text.slice(l.ch),p);else{for(var g=[],m=1,b=u.length-1;b>m;++m)g.push(jn(u[m],s(m),r));g.push(jn(h+c.text.slice(l.ch),p,r)),a(c,c.text.slice(0,o.ch)+u[0],s(0)),e.insert(o.line+1,g)}else if(1==u.length)a(c,c.text.slice(0,o.ch)+u[0]+f.text.slice(l.ch),s(0)),e.remove(o.line+1,d);else{a(c,c.text.slice(0,o.ch)+u[0],s(0)),a(f,h+f.text.slice(l.ch),p);for(var m=1,b=u.length-1,g=[];b>m;++m)g.push(jn(u[m],s(m),r));d>1&&e.remove(o.line+1,d-1),e.insert(o.line+1,g)}Ii(e,"change",e,t),Kt(e,i.anchor,i.head,null,!0)}function si(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function ai(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var s=e[i];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function oi(e,t,n){function i(e,r,s){if(e.linked)for(var a=0;e.linked.length>a;++a){var o=e.linked[a];if(o.doc!=r){var l=s&&o.sharedHist;(!n||l)&&(t(o.doc,l),i(o.doc,e,l))}}}i(e,null,!0)}function li(e,t){if(t.cm)throw Error("This document is already in use.");e.doc=t,t.cm=e,s(e),n(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,rt(e)}function ui(e,t){for(t-=e.first;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function ci(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;r==n.line&&(s=s.slice(0,n.ch)),r==t.line&&(s=s.slice(t.ch)),i.push(s),++r}),i}function fi(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function hi(e,t){for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function pi(e){if(null==e.parent)return null;for(var t=e.parent,n=Vi(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function di(e,t){var n=e.first;e:do{for(var i=0,r=e.children.length;r>i;++i){var s=e.children[i],a=s.height;if(a>t){e=s;continue e}t-=a,n+=s.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var o=e.lines[i],l=o.height;if(l>t)break;t-=l}return n+i}function mi(e,t){t=Nn(e.doc,t);for(var n=0,i=t.parent,r=0;i.lines.length>r;++r){var s=i.lines[r];if(s==t)break;n+=s.height}for(var a=i.parent;a;i=a,a=i.parent)for(var r=0;a.children.length>r;++r){var o=a.children[r];if(o==i)break;n+=o.height}return n}function bi(e){var t=e.order;return null==t&&(t=e.order=Ts(e.text)),t}function gi(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function vi(e,t,n,i){var r=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function _i(e,t){var n={from:t.from,to:Ct(t),text:ci(e,t.from,t.to)};return vi(e,n,t.from.line,t.to.line+1),oi(e,function(e){vi(e,n,t.from.line,t.to.line+1)},!0),n}function Ei(e,t,n,i){var r=e.history;r.undone.length=0;var s=+new Date,a=Gi(r.done);if(a&&(r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var o=Gi(a.changes);Bt(t.from,t.to)&&Bt(t.from,o.to)?o.to=Ct(t):a.changes.push(_i(e,t)),a.anchorAfter=n.anchor,a.headAfter=n.head}else{for(a={changes:[_i(e,t)],anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift();0>r.dirtyCounter?r.dirtyCounter=0/0:r.dirtyCounter++}r.lastTime=s,r.lastOp=i,r.lastOrigin=t.origin}function yi(e){if(!e)return null;for(var t,n=0;e.length>n;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ti(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,r=[];t.text.length>i;++i)r.push(yi(n[i]));return r}function Si(e,t){for(var n=0,i=[];e.length>n;++n){var r=e[n],s=r.changes,a=[];i.push({changes:a,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var o=0;s.length>o;++o){var l,u=s[o];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var c in u)(l=c.match(/^spans_(\d+)$/))&&Vi(t,Number(l[1]))>-1&&(Gi(a)[c]=u[c],delete u[c])}}return i}function wi(e,t,n,i){e.line>n?e.line+=i:e.line>t&&(e.line=t,e.ch=0)}function ki(e,t,n,i){for(var r=0;e.length>r;++r){for(var s=e[r],a=!0,o=0;s.changes.length>o;++o){var l=s.changes[o];if(s.copied||(l.from=jt(l.from),l.to=jt(l.to)),l.from.line>n)l.from.line+=i,l.to.line+=i;else if(l.to.line>=t){a=!1;break}}s.copied||(s.anchorBefore=jt(s.anchorBefore),s.headBefore=jt(s.headBefore),s.anchorAfter=jt(s.anchorAfter),s.readAfter=jt(s.headAfter),s.copied=!0),a?(wi(s.anchorBefore),wi(s.headBefore),wi(s.anchorAfter),wi(s.headAfter)):(e.splice(0,r+1),r=0)}}function xi(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;ki(e.done,n,i,r),ki(e.undone,n,i,r)}function Ri(){Ai(this)}function Pi(e){return e.stop||(e.stop=Ri),e}function Oi(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ci(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ai(e){Oi(e),Ci(e)}function Mi(e){return e.target||e.srcElement}function $i(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Or&&e.ctrlKey&&1==t&&(t=3),t}function Hi(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={}),r=i[t]||(i[t]=[]);r.push(n)}}function Di(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers&&e._handlers[t];if(!i)return;for(var r=0;i.length>r;++r)if(i[r]==n){i.splice(r,1);break}}}function Ni(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;n.length>r;++r)n[r].apply(null,i)}function Ii(e,t){function n(e){return function(){e.apply(null,r)}}var i=e._handlers&&e._handlers[t];if(i){var r=Array.prototype.slice.call(arguments,2);os||(++ls,os=[],setTimeout(Li,0));for(var s=0;i.length>s;++s)os.push(n(i[s]))}}function Li(){--ls;var e=os;os=null;for(var t=0;e.length>t;++t)e[t]()}function zi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Ui(){this.id=null}function Fi(e,t,n,i,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var s=i||0,a=r||0;t>s;++s)"	"==e.charAt(s)?a+=n-a%n:++a;return a}function Bi(e){for(;e>=fs.length;)fs.push(Gi(fs)+" ");return fs[e]}function Gi(e){return e[e.length-1]}function ji(e){Rr?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function Vi(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function Wi(e,t){function n(){}n.prototype=e;var i=new n;return t&&Ji(t,i),i}function Ji(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Yi(e){for(var t=[],n=0;e>n;++n)t.push(void 0);return t}function qi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Xi(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||hs.test(e))}function Ki(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Qi(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)tr(r,t);else if(t)for(var s=0;t.length>s;++s)r.appendChild(t[s]);return r}function Zi(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function er(e,t){return Zi(e).appendChild(t)}function tr(e,t){gr?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function nr(e){return e.getBoundingClientRect()}function ir(e){if(null!=bs)return bs;var t=Qi("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return er(e,t),t.offsetWidth&&(bs=t.offsetHeight-t.clientHeight),bs||0}function rr(e){if(null==gs){var t=Qi("span","");er(e,Qi("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(gs=1>=t.offsetWidth&&t.offsetHeight>2&&!br)}return gs?Qi("span",""):Qi("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function sr(e,t,n,i){if(!e)return i(t,n,"ltr");for(var r=0;e.length>r;++r){var s=e[r];(n>s.from&&s.to>t||t==n&&s.to==t)&&i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr")}}function ar(e){return e.level%2?e.to:e.from}function or(e){return e.level%2?e.from:e.to}function lr(e){var t=bi(e);return t?ar(t[0]):0}function ur(e){var t=bi(e);return t?or(Gi(t)):e.text.length}function cr(e,t){var n=ui(e.doc,t),i=Nn(e.doc,n);i!=n&&(t=pi(i));var r=bi(i),s=r?r[0].level%2?ur(i):lr(i):0;return Ft(t,s)}function fr(e,t){for(var n,i;n=Dn(i=ui(e.doc,t));)t=n.find().to.line;var r=bi(i),s=r?r[0].level%2?lr(i):ur(i):i.text.length;return Ft(t,s)}function hr(e,t,n,i){var r=bi(e);if(!r)return pr(e,t,n,i);for(var s=i?function(t,n){do t+=n;while(t>0&&ps.test(e.text.charAt(t)));
return t}:function(e,t){return e+t},a=r[0].level,o=0;r.length>o;++o){var l=r[o],u=l.level%2==a;if(t>l.from&&l.to>t||u&&(l.from==t||l.to==t))break}for(var c=s(t,l.level%2?-n:n);null!=c;)if(l.level%2==a){if(!(l.from>c||c>l.to))break;l=r[o+=n],c=l&&(n>0==l.level%2?s(l.to,-1):s(l.from,1))}else if(c==ar(l))l=r[--o],c=l&&or(l);else{if(c!=or(l))break;l=r[++o],c=l&&ar(l)}return 0>c||c>e.text.length?null:c}function pr(e,t,n,i){var r=t+n;if(i)for(;r>0&&ps.test(e.text.charAt(r));)r+=n;return 0>r||r>e.text.length?null:r}var dr=/gecko\/\d/i.test(navigator.userAgent),mr=/MSIE \d/.test(navigator.userAgent),br=mr&&(null==document.documentMode||8>document.documentMode),gr=mr&&(null==document.documentMode||9>document.documentMode),vr=/WebKit\//.test(navigator.userAgent),_r=vr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Er=/Chrome\//.test(navigator.userAgent),yr=/Opera\//.test(navigator.userAgent),Tr=/Apple Computer/.test(navigator.vendor),Sr=/KHTML\//.test(navigator.userAgent),wr=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),kr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),xr=/PhantomJS/.test(navigator.userAgent),Rr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Pr=Rr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Or=Rr||/Mac/.test(navigator.platform),Cr=/windows/i.test(navigator.platform),Ar=yr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ar&&(Ar=Number(Ar[1]));var Mr,$r,Hr,Dr=Or&&(_r||yr&&(null==Ar||12.11>Ar)),Nr=dr||mr&&!gr,Ir=!1,Lr=!1,zr=0,Ur=0,Fr=null;mr?Fr=-.53:dr?Fr=15:Er?Fr=-.7:Tr&&(Fr=-1/3);var Br,Gr,jr=null;e.Pos=Ft,e.prototype={focus:function(){window.focus(),ut(this),Rt(this),at(this)},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,Vr.hasOwnProperty(e)&&tt(this,Vr[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;t.length>n;++n)if(("string"==typeof e?t[n].name:t[n])==e)return t.splice(n,1),!0},addOverlay:tt(null,function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,rt(this)}),removeOverlay:tt(null,function(e){for(var t=this.state.overlays,n=0;t.length>n;++n)if(t[n].modeSpec==e)return t.splice(n,1),this.state.modeGen++,rt(this),void 0}),indentLine:tt(null,function(e,t,n){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Yt(this.doc,e)&&on(this,e,t,n)}),indentSelection:tt(null,function(e){var t=this.doc.sel;if(Bt(t.from,t.to))return on(this,t.from.line,e);for(var n=t.to.line-(t.to.ch?0:1),i=t.from.line;n>=i;++i)on(this,i,e)}),getTokenAt:function(e){var t=this.doc;e=Wt(t,e);for(var n=H(this,e.line),i=this.doc.mode,r=ui(t,e.line),s=new En(r.text,this.options.tabSize);s.pos<e.ch&&!s.eol();){s.start=s.pos;var a=i.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:a||null,type:a||null,state:n}},getStateAfter:function(e){var t=this.doc;return e=Vt(t,null==e?t.first+t.size-1:e),H(this,e+1)},cursorCoords:function(e,t){var n,i=this.doc.sel;return n=null==e?i.head:"object"==typeof e?Wt(this.doc,e):e?i.from:i.to,J(this,n,t||"page")},charCoords:function(e,t){return W(this,Wt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=V(this,e,t||"page"),q(this,e.left,e.top)},defaultTextHeight:function(){return K(this.display)},defaultCharWidth:function(){return Q(this.display)},setGutterMarker:tt(null,function(e,t,n){return ln(this,e,function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&Ki(i)&&(e.gutterMarkers=null),!0})}),clearGutter:tt(null,function(e){var t=this,n=t.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,rt(t,i,i+1),Ki(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineClass:tt(null,function(e,t,n){return ln(this,e,function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[i]){if(RegExp("\\b"+n+"\\b").test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:tt(null,function(e,t,n){return ln(this,e,function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var s=r.replace(RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(s==r)return!1;e[i]=s||null}return!0})}),addLineWidget:tt(null,function(e,t,n){return Gn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Yt(this.doc,e))return null;var t=e;if(e=ui(this.doc,e),!e)return null}else{var t=pi(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,i,r){var s=this.display;e=J(this,Wt(this.doc,e));var a=e.bottom,o=e.left;if(t.style.position="absolute",s.sizer.appendChild(t),"over"==i)a=e.top;else if("above"==i||"near"==i){var l=Math.max(s.wrapper.clientHeight,this.doc.height),u=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:l>=e.bottom+t.offsetHeight&&(a=e.bottom),o+t.offsetWidth>u&&(o=u-t.offsetWidth)}t.style.top=a+D(s)+"px",t.style.left=t.style.right="","right"==r?(o=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?o=0:"middle"==r&&(o=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=o+"px"),n&&nn(this,o,a,o+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:tt(null,kt),execCommand:function(e){return Qr[e](this)},findPosH:function(e,t,n,i){var r=1;0>t&&(r=-1,t=-t);for(var s=0,a=Wt(this.doc,e);t>s&&(a=un(this.doc,a,r,n,i),!a.hitSide);++s);return a},moveH:tt(null,function(e,t){var n,i=this.doc.sel;n=i.shift||i.extend||Bt(i.from,i.to)?un(this.doc,i.head,e,t,this.options.rtlMoveVisually):0>e?i.from:i.to,qt(this.doc,n,n,e)}),deleteH:tt(null,function(e,t){var n=this.doc.sel;Bt(n.from,n.to)?Ut(this.doc,"",n.from,un(this.doc,n.head,e,t,!1),"+delete"):Ut(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,i){var r=1,s=i;0>t&&(r=-1,t=-t);for(var a=0,o=Wt(this.doc,e);t>a;++a){var l=J(this,o,"div");if(null==s?s=l.left:l.left=s,o=cn(this,l,r,n),o.hitSide)break}return o},moveV:tt(null,function(e,t){var n=this.doc.sel,i=J(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=cn(this,i,e,t);"page"==t&&an(this,0,W(this,r,"div").top-i.top),qt(this.doc,r,r,e),n.goalColumn=i.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:tt(null,function(e,t){sn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=us;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:tt(null,function(e,t){"number"==typeof e&&(e=Ft(e,0)),t||(t=0);var n=e;e&&null==e.line||(this.curOp.scrollToPos=e?Wt(this.doc,e):this.doc.sel.head,this.curOp.scrollToPosMargin=t,n=J(this,this.curOp.scrollToPos));var i=rn(this,n.left,n.top-t,n.right,n.bottom+t);sn(this,i.scrollLeft,i.scrollTop)}),setSize:function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(e+"")?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){Hi(this,e,t)},off:function(e,t){Di(this,e,t)},operation:function(e){return it(this,e)},refresh:tt(null,function(){G(this),sn(this,this.doc.scrollLeft,this.doc.scrollTop),rt(this)}),swapDoc:tt(null,function(e){var t=this.doc;return t.cm=null,li(this,e),G(this),lt(this,!0),sn(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Vr=e.optionHandlers={},Wr=e.defaults={},Jr=e.Init={toString:function(){return"CodeMirror.Init"}};pn("value","",function(e,t){e.setValue(t)},!0),pn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),pn("indentUnit",2,n,!0),pn("indentWithTabs",!1),pn("smartIndent",!0),pn("tabSize",4,function(e){n(e),G(e),rt(e)},!0),pn("electricChars",!0),pn("rtlMoveVisually",!Cr),pn("theme","default",function(e){o(e),l(e)},!0),pn("keyMap","default",a),pn("extraKeys",null),pn("onKeyEvent",null),pn("onDragEvent",null),pn("lineWrapping",!1,i,!0),pn("gutters",[],function(e){h(e.options),l(e)},!0),pn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?v(e.display)+"px":"0",e.refresh()},!0),pn("lineNumbers",!1,function(e){h(e.options),l(e)},!0),pn("firstLineNumber",1,l,!0),pn("lineNumberFormatter",function(e){return e},l,!0),pn("showCursorWhenSelecting",!1,R,!0),pn("readOnly",!1,function(e,t){"nocursor"==t?(Pt(e),e.display.input.blur()):t||lt(e,!0)}),pn("dragDrop",!0),pn("cursorBlinkRate",530),pn("cursorHeight",1),pn("workTime",100),pn("workDelay",100),pn("flattenSpans",!0),pn("pollInterval",100),pn("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),pn("historyEventDelay",500),pn("viewportMargin",10,function(e){e.refresh()},!0),pn("maxHighlightLength",1e4,function(e){n(e),e.refresh()},!0),pn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),pn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),pn("autofocus",null);var Yr=e.modes={},qr=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var i=2;arguments.length>i;++i)n.dependencies.push(arguments[i])}Yr[t]=n},e.defineMIME=function(e,t){qr[e]=t},e.resolveMode=function(t){if("string"==typeof t&&qr.hasOwnProperty(t))t=qr[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var i=Yr[n.name];if(!i)return e.getMode(t,"text/plain");var r=i(t,n);if(Xr.hasOwnProperty(n.name)){var s=Xr[n.name];for(var a in s)s.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=s[a])}return r.name=n.name,r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Xr=e.modeExtensions={};e.extendMode=function(e,t){var n=Xr.hasOwnProperty(e)?Xr[e]:Xr[e]={};Ji(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){rs.prototype[e]=t},e.defineOption=pn;var Kr=[];e.defineInitHook=function(e){Kr.push(e)},e.copyState=dn,e.startState=mn,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var Qr=e.commands={selectAll:function(e){e.setSelection(Ft(e.firstLine(),0),Ft(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!Bt(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:Ft(t.line),"+delete"):e.replaceRange("",t,Ft(t.line+1,0),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Ft(t,0),Ft(t),"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Ft(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ft(e.lastLine()))},goLineStart:function(e){e.extendSelection(cr(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=cr(e,t.line),i=e.getLineHandle(n.line),r=bi(i);if(r&&0!=r[0].level)e.extendSelection(n);else{var s=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&s>=t.ch&&t.ch;e.extendSelection(Ft(n.line,a?0:s))}},goLineEnd:function(e){e.extendSelection(fr(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Ft(t.line,t.ch-1),Ft(t.line,t.ch+1))},newlineAndIndent:function(e){tt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},Zr=e.keyMap={};Zr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Zr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Zr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Zr["default"]=Or?Zr.macDefault:Zr.pcDefault,Zr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.lookupKey=gn,e.isModifierKey=vn,e.keyName=_n,e.fromTextArea=function(t,n){function i(){t.value=u.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(s){}n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(Hi(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var l=a.submit=function(){i(),a.submit=o,a.submit(),a.submit=l}}catch(s){}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return u.save=i,u.getTextArea=function(){return t},u.toTextArea=function(){i(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(Di(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=o))},u},En.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Fi(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e},s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=En,e.TextMarker=yn,yn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;t&&Z(e);for(var n=null,i=null,r=0;this.lines.length>r;++r){var s=this.lines[r],a=kn(s.markedSpans,this);null!=a.to&&(i=pi(s)),s.markedSpans=xn(s.markedSpans,a),null!=a.from?n=pi(s):this.collapsed&&!In(this.doc,s)&&e&&hi(s,K(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var r=0;this.lines.length>r;++r){var o=Nn(e.doc,this.lines[r]),l=c(e.doc,o);l>e.display.maxLineLength&&(e.display.maxLine=o,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=n&&e&&rt(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Qt(e)),t&&et(e),Ii(this,"clear")}},yn.prototype.find=function(){for(var e,t,n=0;this.lines.length>n;++n){var i=this.lines[n],r=kn(i.markedSpans,this);if(null!=r.from||null!=r.to){var s=pi(i);null!=r.from&&(e=Ft(s,r.from)),null!=r.to&&(t=Ft(s,r.to))}}return"bookmark"==this.type?e:e&&{from:e,to:t}},yn.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},yn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Vi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},yn.prototype.detachLine=function(e){if(this.lines.splice(Vi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=Sn,Sn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;this.markers.length>e;++e)this.markers[e].clear();Ii(this,"clear")}},Sn.prototype.find=function(){return this.primary.find()},Sn.prototype.getOptions=function(e){var t=this.primary.getOptions(e);return t.shared=!0,t};var es=e.LineWidget=function(e,t,n){for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=e,this.node=t};es.prototype.clear=Fn(function(){var e=this.line.widgets,t=pi(this.line);if(null!=t&&e){for(var n=0;e.length>n;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null),hi(this.line,Math.max(0,this.line.height-Bn(this))),rt(this.cm,t,t+1)}}),es.prototype.changed=Fn(function(){var e=this.height;this.height=null;var t=Bn(this)-e;if(t){hi(this.line,this.line.height+t);var n=pi(this.line);rt(this.cm,n,n+1)}});var ts={},ns=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;si.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var r=this.lines[n];this.height-=r.height,Wn(r),Ii(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},ai.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;this.children.length>n;++n){var i=this.children[n],r=i.chunkSize();if(r>e){var s=Math.min(t,r-e),a=i.height;if(i.removeInner(e,s),this.height-=a-i.height,r==s&&(this.children.splice(n--,1),i.parent=null),0==(t-=s))break;e=0}else e-=r}if(25>this.size-t){var o=[];this.collapse(o),this.children=[new si(o)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var s=this.children[i],a=s.chunkSize();if(a>=e){if(s.insertInner(e,t,n),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var o=s.lines.splice(s.lines.length-25,25),l=new si(o);s.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new ai(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=Vi(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new ai(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var s=this.children[i],a=s.chunkSize();if(a>e){var o=Math.min(t,a-e);if(s.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var is=0,rs=e.Doc=function(e,t,n){if(!(this instanceof rs))return new rs(e,t,n);null==n&&(n=0),ai.call(this,[new si([jn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=gi(),this.frontier=n;var i=Ft(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++is,this.modeOption=t,"string"==typeof e&&(e=vs(e)),ri(this,{from:i,to:i,text:e},null,{head:i,anchor:i})};rs.prototype=Wi(ai.prototype,{iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=fi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Ft(this.first,0),n=this.first+this.size-1;Ht(this,{from:t,to:Ft(n,ui(this,n).text.length),text:vs(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,i){t=Wt(this,t),n=n?Wt(this,n):t,Ut(this,e,t,n,i)},getRange:function(e,t,n){var i=ci(this,Wt(this,e),Wt(this,t));return n===!1?i:i.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Yt(this,e)&&Ut(this,t,Ft(e,0),Wt(this,Ft(e)))},removeLine:function(e){e?Ut(this,"",Wt(this,Ft(e-1)),Wt(this,Ft(e))):Ut(this,"",Ft(0,0),Wt(this,Ft(1,0)))},getLineHandle:function(e){return Yt(this,e)?ui(this,e):void 0},getLineNumber:function(e){return pi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Wt(this,e)},getCursor:function(e){var t,n=this.sel;return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||e===!1?n.to:n.from,jt(t)},somethingSelected:function(){return!Bt(this.sel.head,this.sel.anchor)},setCursor:nt(function(e,t,n){var i=Wt(this,"number"==typeof e?Ft(e,t||0):e);n?qt(this,i):Kt(this,i,i)}),setSelection:nt(function(e,t){Kt(this,Wt(this,e),Wt(this,t||e))}),extendSelection:nt(function(e,t){qt(this,Wt(this,e),t&&Wt(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){Ht(this,{from:this.sel.from,to:this.sel.to,text:vs(e),origin:n},t||"around")},undo:nt(function(){Nt(this,"undo")}),redo:nt(function(){Nt(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=gi()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:Si(this.history.done),undone:Si(this.history.undone)}},setHistory:function(e){var t=this.history=gi();t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return Tn(this,Wt(this,e),Wt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft};return e=Wt(this,e),Tn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Wt(this,e);var t=[],n=ui(this,e.line).markedSpans;if(n)for(var i=0;n.length>i;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;n.length>i;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),Wt(this,Ft(n,t))},indexFromPos:function(e){e=Wt(this,e);var t=e.ch;return e.line<this.first||0>e.ch?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new rs(fi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&n>e.to&&(n=e.to);var i=new rs(fi(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;this.linked.length>n;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this);break}}if(t.history==this.history){var r=[t.id];oi(t,function(e){r.push(e.id)},!0),t.history=gi(),t.history.done=Si(this.history.done,r),t.history.undone=Si(this.history.undone,r)}},iterLinkedDocs:function(e){oi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),rs.prototype.eachLine=rs.prototype.iter;var ss="iter insert remove copy getEditor".split(" ");for(var as in rs.prototype)rs.prototype.hasOwnProperty(as)&&0>Vi(ss,as)&&(e.prototype[as]=function(e){return function(){return e.apply(this.doc,arguments)}}(rs.prototype[as]));e.e_stop=Ai,e.e_preventDefault=Oi,e.e_stopPropagation=Ci;var os,ls=0;e.on=Hi,e.off=Di,e.signal=Ni;var us=30,cs=e.Pass={toString:function(){return"CodeMirror.Pass"}};Ui.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=Fi;var fs=[""],hs=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,ps=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;e.replaceGetRect=function(e){nr=e};var ds=function(){if(gr)return!1;var e=Qi("div");return"draggable"in e||"dragDrop"in e}(),ms=/^$/;dr?ms=/$'/:Tr&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ms=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:vr&&(ms=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var bs,gs,vs=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var s=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=s.indexOf("\r");-1!=a?(n.push(s.slice(0,a)),t+=a+1):(n.push(s),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=vs;var _s=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Es=function(){var e=Qi("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ys={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=ys,function(){for(var e=0;10>e;e++)ys[e+48]=e+"";for(var e=65;90>=e;e++)ys[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)ys[e+111]=ys[e+63235]="F"+e}();var Ts=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?n.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,o=/[1n]/,l="L";return function(t){if(!i.test(t))return!1;for(var n,u=t.length,c=[],f=0;u>f;++f)c.push(n=e(t.charCodeAt(f)));for(var f=0,h=l;u>f;++f){var n=c[f];"m"==n?c[f]=h:h=n}for(var f=0,p=l;u>f;++f){var n=c[f];"1"==n&&"r"==p?c[f]="n":s.test(n)&&(p=n,"r"==n&&(c[f]="R"))}for(var f=1,h=c[0];u-1>f;++f){var n=c[f];"+"==n&&"1"==h&&"1"==c[f+1]?c[f]="1":","!=n||h!=c[f+1]||"1"!=h&&"n"!=h||(c[f]=h),h=n}for(var f=0;u>f;++f){var n=c[f];if(","==n)c[f]="N";else if("%"==n){for(var d=f+1;u>d&&"%"==c[d];++d);for(var m=f&&"!"==c[f-1]||u-1>d&&"1"==c[d]?"1":"N",b=f;d>b;++b)c[b]=m;f=d-1}}for(var f=0,p=l;u>f;++f){var n=c[f];"L"==p&&"1"==n?c[f]="L":s.test(n)&&(p=n)}for(var f=0;u>f;++f)if(r.test(c[f])){for(var d=f+1;u>d&&r.test(c[d]);++d);for(var g="L"==(f?c[f-1]:l),v="L"==(u-1>d?c[d]:l),m=g||v?"L":"R",b=f;d>b;++b)c[b]=m;f=d-1}for(var _,E=[],f=0;u>f;)if(a.test(c[f])){var y=f;for(++f;u>f&&a.test(c[f]);++f);E.push({from:y,to:f,level:0})}else{var T=f,S=E.length;
for(++f;u>f&&"L"!=c[f];++f);for(var b=T;f>b;)if(o.test(c[b])){b>T&&E.splice(S,0,{from:T,to:b,level:1});var w=b;for(++b;f>b&&o.test(c[b]);++b);E.splice(S,0,{from:w,to:b,level:2}),T=b}else++b;f>T&&E.splice(S,0,{from:T,to:f,level:1})}return 1==E[0].level&&(_=t.match(/^\s+/))&&(E[0].from=_[0].length,E.unshift({from:0,to:_[0].length,level:0})),1==Gi(E).level&&(_=t.match(/\s+$/))&&(Gi(E).to-=_[0].length,E.push({from:u-_[0].length,to:u,level:0})),E[0].level!=Gi(E).level&&E.push({from:u,to:u,level:E[0].level}),E}}();return e.version="3.11 +",e}(),CodeMirror.defineMode("python",function(e,t){function n(e){return RegExp("^(("+e.join(")|(")+"))\\b")}function i(e,t){if(e.sol()){var n=t.scopes[0].offset;if(e.eatSpace()){var i=e.indentation();return i>n?S="indent":n>i&&(S="dedent"),null}n>0&&a(e,t)}if(e.eatSpace())return null;var s=e.peek();if("#"===s)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var o=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(o=!0),e.match(/^\d+\.\d*/)&&(o=!0),e.match(/^\.\d+/)&&(o=!0),o)return e.eat(/J/i),"number";var b=!1;if(e.match(/^0x[0-9a-f]+/i)&&(b=!0),e.match(/^0b[01]+/i)&&(b=!0),e.match(/^0o[0-7]+/i)&&(b=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),b=!0),e.match(/^0(?![\dx])/i)&&(b=!0),b)return e.eat(/L/i),"number"}return e.match(E)?(t.tokenize=r(e.current()),t.tokenize(e,t)):e.match(p)||e.match(h)?null:e.match(f)||e.match(u)||e.match(m)?"operator":e.match(c)?null:e.match(y)?"keyword":e.match(T)?"builtin":e.match(d)?"variable":(e.next(),l)}function r(e){function n(n,a){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),r&&n.eol())return s}else{if(n.match(e))return a.tokenize=i,s;n.eat(/['"]/)}if(r){if(t.singleLineStringErrors)return l;a.tokenize=i}return s}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var r=1==e.length,s="string";return n.isString=!0,n}function s(t,n,i){i=i||"py";var r=0;if("py"===i){if("py"!==n.scopes[0].type)return n.scopes[0].offset=t.indentation(),void 0;for(var s=0;n.scopes.length>s;++s)if("py"===n.scopes[s].type){r=n.scopes[s].offset+e.indentUnit;break}}else r=t.column()+t.current().length;n.scopes.unshift({offset:r,type:i})}function a(e,t,n){if(n=n||"py",1!=t.scopes.length){if("py"===t.scopes[0].type){for(var i=e.indentation(),r=-1,s=0;t.scopes.length>s;++s)if(i===t.scopes[s].offset){r=s;break}if(-1===r)return!0;for(;t.scopes[0].offset!==i;)t.scopes.shift();return!1}return"py"===n?(t.scopes[0].offset=e.indentation(),!1):t.scopes[0].type!=n?!0:(t.scopes.shift(),!1)}}function o(e,t){S=null;var n=t.tokenize(e,t),i=e.current();if("."===i)return n=e.match(d,!1)?null:l,null===n&&"meta"===t.lastToken&&(n="meta"),n;if("@"===i)return e.match(d,!1)?"meta":l;"variable"!==n&&"builtin"!==n||"meta"!==t.lastToken||(n="meta"),("pass"===i||"return"===i)&&(t.dedent+=1),"lambda"===i&&(t.lambda=!0),(":"===i&&!t.lambda&&"py"==t.scopes[0].type||"indent"===S)&&s(e,t);var r="[({".indexOf(i);return-1!==r&&s(e,t,"])}".slice(r,r+1)),"dedent"===S&&a(e,t)?l:(r="])}".indexOf(i),-1!==r&&a(e,t,i)?l:(t.dedent>0&&e.eol()&&"py"==t.scopes[0].type&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),n))}var l="error",u=t.singleOperators||RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),c=t.singleDelimiters||RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),f=t.doubleOperators||RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),h=t.doubleDelimiters||RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),p=t.tripleDelimiters||RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),d=t.identifiers||RegExp("^[_A-Za-z][_A-Za-z0-9]*"),m=n(["and","or","not","is","in"]),b=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],g=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],v={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},_={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(t.version&&3===parseInt(t.version,10)){b=b.concat(_.keywords),g=g.concat(_.builtins);var E=RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{b=b.concat(v.keywords),g=g.concat(v.builtins);var E=RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var y=n(b),T=n(g),S=null,w={startState:function(e){return{tokenize:i,scopes:[{offset:e||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=o(e,t);return t.lastToken=n,e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=i?e.tokenize.isString?CodeMirror.Pass:0:e.scopes[0].offset}};return w}),CodeMirror.defineMIME("text/x-python","python"),this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.removeEventListener=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent},t._listeners=null,t.initialize=function(){},t.addEventListener=function(e,t){var n=this._listeners;n?this.removeEventListener(e,t):n=this._listeners={};var i=n[e];return i||(i=n[e]=[]),i.push(t),t},t.removeEventListener=function(e,t){var n=this._listeners;if(n){var i=n[e];if(i)for(var r=0,s=i.length;s>r;r++)if(i[r]==t){1==s?delete n[e]:i.splice(r,1);break}}},t.removeAllEventListeners=function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null},t.dispatchEvent=function(e,t){var n=!1,i=this._listeners;if(e&&i){if("string"==typeof e&&(e={type:e}),i=i[e.type],!i)return n;e.target=t||this;for(var i=i.slice(),r=0,s=i.length;s>r;r++)var a=i[r],n=a.handleEvent?n||a.handleEvent(e):n||a(e)}return!!n},t.hasEventListener=function(e){var t=this._listeners;return!(!t||!t[e])},t.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.useRAF=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._listeners=null,e._pauseable=null,e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._rafActive=!1,e._timeoutID=null,e.addListener=function(t,n){null!=t&&(e.removeListener(t),e._pauseable[e._listeners.length]=null==n?!0:n,e._listeners.push(t))},e.init=function(){e._inited=!0,e._times=[],e._tickTimes=[],e._pauseable=[],e._listeners=[],e._times.push(e._lastTime=e._startTime=e._getTime()),e.setInterval(e._interval)},e.removeListener=function(t){var n=e._listeners;n&&(t=n.indexOf(t),-1!=t&&(n.splice(t,1),e._pauseable.splice(t,1)))},e.removeAllListeners=function(){e._listeners=[],e._pauseable=[]},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredFPS=function(t){return 2>e._times.length?-1:(null==t&&(t=0|e.getFPS()),t=Math.min(e._times.length-1,t),1e3/((e._times[0]-e._times[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleAF=function(){e._rafActive=!1,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleTimeout=function(){e.timeoutID=null,e._setupTick(),e._tick()},e._setupTick=function(){if(!e._rafActive&&null==e.timeoutID){if(e.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e._handleAF),e._rafActive=!0,void 0}e.timeoutID=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime();e._ticks++;var n=t-e._lastTime,i=e._paused;i&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t;for(var r=e._pauseable,s=e._listeners.slice(),a=s?s.length:0,o=0;a>o;o++){var l=s[o];null==l||i&&r[o]||(l.tick?l.tick(n,i):l instanceof Function&&l(n,i))}for(e.dispatchEvent({type:"tick",paused:i,delta:n,time:t,runTime:t-e._pausedTime}),e._tickTimes.unshift(e._getTime()-t);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(t);e._times.length>100;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},e.init(),createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i,r,s,a,o,l){this.initialize(e,t,n,i,r,s,a,o,l)},t=e.prototype;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.type=null,t.nativeEvent=null,t.onMouseMove=null,t.onMouseUp=null,t.target=null,t.pointerID=0,t.primary=!1,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.initialize=function(e,t,n,i,r,s,a,o,l){this.type=e,this.stageX=t,this.stageY=n,this.target=i,this.nativeEvent=r,this.pointerID=s,this.primary=a,this.rawX=null==o?t:o,this.rawY=null==l?n:l},t.clone=function(){return new e(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i,r,s){this.initialize(e,t,n,i,r,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,i,r,s){return null!=e&&(this.a=e),this.b=t||0,this.c=n||0,null!=i&&(this.d=i),this.tx=r||0,this.ty=s||0,this},t.prepend=function(e,t,n,i,r,s){var a=this.tx;if(1!=e||0!=t||0!=n||1!=i){var o=this.a,l=this.c;this.a=o*e+this.b*n,this.b=o*t+this.b*i,this.c=l*e+this.d*n,this.d=l*t+this.d*i}return this.tx=a*e+this.ty*n+r,this.ty=a*t+this.ty*i+s,this},t.append=function(e,t,n,i,r,s){var a=this.a,o=this.b,l=this.c,u=this.d;return this.a=e*a+t*l,this.b=e*o+t*u,this.c=n*a+i*l,this.d=n*o+i*u,this.tx=r*a+s*l+this.tx,this.ty=r*o+s*u+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,i,r,s,a,o,l,u){if(s%360){var c=s*e.DEG_TO_RAD;s=Math.cos(c),c=Math.sin(c)}else s=1,c=0;return(l||u)&&(this.tx-=l,this.ty-=u),a||o?(a*=e.DEG_TO_RAD,o*=e.DEG_TO_RAD,this.prepend(s*i,c*i,-c*r,s*r,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,n)):this.prepend(s*i,c*i,-c*r,s*r,t,n),this},t.appendTransform=function(t,n,i,r,s,a,o,l,u){if(s%360){var c=s*e.DEG_TO_RAD;s=Math.cos(c),c=Math.sin(c)}else s=1,c=0;return a||o?(a*=e.DEG_TO_RAD,o*=e.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,n),this.append(s*i,c*i,-c*r,s*r,0,0)):this.append(s*i,c*i,-c*r,s*r,t,n),(l||u)&&(this.tx-=l*this.a+u*this.c,this.ty-=l*this.b+u*this.d),this},t.rotate=function(e){var t=Math.cos(e);e=Math.sin(e);var n=this.a,i=this.c,r=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=i*t-this.d*e,this.d=i*e+this.d*t,this.tx=r*t-this.ty*e,this.ty=r*e+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.tx,s=e*i-t*n;return this.a=i/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-i*r)/s,this.ty=-(e*this.ty-t*r)/s,this},t.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return n==i?(t.rotation=i/e.DEG_TO_RAD,0>this.a&&this.d>=0&&(t.rotation+=0>=t.rotation?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=i/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,i,r,s,a,o,l){return this.initialize(e,t,n,i,r,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=l,this},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){var t=new e(this.a,this.b,this.c,this.d,this.tx,this.ty);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e(1,0,0,1,0,0),createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){this.x=null==e?0:e,this.y=null==t?0:t},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i){this.initialize(e,t,n,i)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,i){this.x=null==e?0:e,this.y=null==t?0:t,this.width=null==n?0:n,this.height=null==i?0:i},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i,r,s,a){this.initialize(e,t,n,i,r,s,a)},t=e.prototype;t.target=null,t.overLabel=null,t.outLabel=null,t.downLabel=null,t.play=!1,t._isPressed=!1,t._isOver=!1,t.initialize=function(e,t,n,i,r,s,a){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==i?"down":i,this.play=r,this.setEnabled(!0),this.handleEvent({}),s&&(a&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(a)),e.hitArea=s))},t.setEnabled=function(e){var t=this.target;e?(t.addEventListener("mouseover",this),t.addEventListener("mouseout",this),t.addEventListener("mousedown",this)):(t.removeEventListener("mouseover",this),t.removeEventListener("mouseout",this),t.removeEventListener("mousedown",this))},t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t=this.target,n=e.type;"mousedown"==n?(e.addEventListener("mouseup",this),this._isPressed=!0,e=this.downLabel):"mouseup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"mouseover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?t.gotoAndPlay&&t.gotoAndPlay(e):t.gotoAndStop&&t.gotoAndStop(e)},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i){this.initialize(e,t,n,i)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,i){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=i},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype;t.complete=!0,t.onComplete=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,i;if(null!=e){if(e.images&&(n=e.images.length)>0)for(i=this._images=[],t=0;n>t;t++){var r=e.images[t];if("string"==typeof r){var s=r,r=new Image;r.src=s}i.push(r),!r.getContext&&!r.complete&&(this._loadCount++,this.complete=!1,function(e){r.onload=function(){e._handleImageLoad()}}(this))}if(null!=e.frames)if(e.frames instanceof Array)for(this._frames=[],i=e.frames,t=0,n=i.length;n>t;t++)s=i[t],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0});else n=e.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(null!=(n=e.animations)){this._animations=[],this._data={};for(var a in n){if(e={name:a},s=n[a],"number"==typeof s)i=e.frames=[s];else if(s instanceof Array)if(1==s.length)e.frames=[s[0]];else for(e.frequency=s[3],e.next=s[2],i=e.frames=[],t=s[0];s[1]>=t;t++)i.push(t);else e.frequency=s.frequency,e.next=s.next,t=s.frames,i=e.frames="number"==typeof t?[t]:t.slice(0);e.next=2>i.length||!1==e.next?null:null==e.next||!0==e.next?a:e.next,e.frequency||(e.frequency=1),this._animations.push(a),this._data[a]=e}}}},t.getNumFrames=function(e){return null==e?this._frames?this._frames.length:this._numFrames:(e=this._data[e],null==e?0:e.frames.length)},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this.complete&&this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e){return(e=this.getFrame(e))?new createjs.Rectangle(-e.regX,-e.regY,e.rect.width,e.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,i=0,r=this._images;r.length>i;i++){for(var s=r[i],a=0|(s.width+1)/t,o=0|(s.height+1)/n,o=this._numFrames>0?Math.min(this._numFrames-e,a*o):a*o,l=0;o>l;l++)this._frames.push({image:s,rect:new createjs.Rectangle(l%a*t,(0|l/a)*n,t,n),regX:this._regX,regY:this._regY});e+=o}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,i){return null!=e&&null==n&&(i=t,n=255&e,t=255&e>>8,e=255&e>>16),null==i?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+i+")"},t.getHSL=function(e,t,n,i){return null==i?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+i+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"],t._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.beginCmd=new e(t._ctx.beginPath,[],!1),t.fillCmd=new e(t._ctx.fill,[],!1),t.strokeCmd=new e(t._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._ignoreScaleStroke=!1,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,i=t.length;i>n;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,i=0,r=n.length;r>i;i++)((t=n[i]).path||0==i)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,i,r,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,i,r,s])),this},n.arc=function(t,n,i,r,s,a){return this._dirty=this._active=!0,null==a&&(a=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,i,r,s,a])),this},n.quadraticCurveTo=function(t,n,i,r){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,i,r])),this},n.bezierCurveTo=function(t,n,i,r,s,a){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,i,r,s,a])),this},n.rect=function(t,n,i,r){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,i,r])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(n){return this._active&&this._newPath(),this._fillInstructions=n?[new e(this._setProp,["fillStyle",n],!1),t.fillCmd]:null,this},n.beginLinearGradientFill=function(n,i,r,s,a,o){for(this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,s,a,o),s=0,a=n.length;a>s;s++)r.addColorStop(i[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1),t.fillCmd],this},n.beginRadialGradientFill=function(n,i,r,s,a,o,l,u){for(this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,s,a,o,l,u),s=0,a=n.length;a>s;s++)r.addColorStop(i[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1),t.fillCmd],this},n.beginBitmapFill=function(n,i,r){return this._active&&this._newPath(),n=this._ctx.createPattern(n,i||""),n=new e(this._setProp,["fillStyle",n],!1),this._fillInstructions=r?[n,new e(this._ctx.save,[],!1),new e(this._ctx.transform,[r.a,r.b,r.c,r.d,r.tx,r.ty],!1),t.fillCmd,new e(this._ctx.restore,[],!1)]:[n,t.fillCmd],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,i,r,s,a){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==n?"1":n],!1),new e(this._setProp,["lineCap",null==i?"butt":isNaN(i)?i:t.STROKE_CAPS_MAP[i]],!1),new e(this._setProp,["lineJoin",null==r?"miter":isNaN(r)?r:t.STROKE_JOINTS_MAP[r]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._ignoreScaleStroke=a,this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,i,r,s,a){for(this._active&&this._newPath(),i=this._ctx.createLinearGradient(i,r,s,a),r=0,s=t.length;s>r;r++)i.addColorStop(n[r],t[r]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",i],!1)],this},n.beginRadialGradientStroke=function(t,n,i,r,s,a,o,l){for(this._active&&this._newPath(),i=this._ctx.createRadialGradient(i,r,s,a,o,l),r=0,s=t.length;s>r;r++)i.addColorStop(n[r],t[r]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",i],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath();var i=this._ctx.createPattern(t,n||"");return this._strokeInstructions=[new e(this._setProp,["strokeStyle",i],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,i,r){return this.drawRoundRectComplex(e,t,n,i,r,r,r,r),this},n.drawRoundRectComplex=function(t,n,i,r,s,a,o,l){var u=(r>i?i:r)/2,c=0,f=0,h=0,p=0;0>s&&(s*=c=-1),s>u&&(s=u),0>a&&(a*=f=-1),a>u&&(a=u),0>o&&(o*=h=-1),o>u&&(o=u),0>l&&(l*=p=-1),l>u&&(l=u),this._dirty=this._active=!0;var u=this._ctx.arcTo,d=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+i-a,n]),new e(u,[t+i+a*f,n-a*f,t+i,n+a,a]),new e(d,[t+i,n+r-o]),new e(u,[t+i+o*h,n+r+o*h,t+i-o,n+r,o]),new e(d,[t+l,n+r]),new e(u,[t-l*p,n+r+l*p,t,n+r-l,l]),new e(d,[t,n+s]),new e(u,[t-s*c,n-s*c,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},n.drawEllipse=function(t,n,i,r){this._dirty=this._active=!0;var s=.5522848*(i/2),a=.5522848*(r/2),o=t+i,l=n+r;return i=t+i/2,r=n+r/2,this._activeInstructions.push(new e(this._ctx.moveTo,[t,r]),new e(this._ctx.bezierCurveTo,[t,r-a,i-s,n,i,n]),new e(this._ctx.bezierCurveTo,[i+s,n,o,r-a,o,r]),new e(this._ctx.bezierCurveTo,[o,r+a,i+s,l,i,l]),new e(this._ctx.bezierCurveTo,[i-s,l,t,r+a,t,r])),this},n.drawPolyStar=function(t,n,i,r,s,a){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,a=null==a?0:a/(180/Math.PI);var o=Math.PI/r;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(a)*i,n+Math.sin(a)*i]));for(var l=0;r>l;l++)a+=o,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(a)*i*s,n+Math.sin(a)*i*s])),a+=o,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(a)*i,n+Math.sin(a)*i]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],i=[2,2,4,6,0],r=0,s=e.length,a=[],o=0,l=0,u=t.BASE_64;s>r;){var c=e.charAt(r),f=u[c],h=f>>3,p=n[h];if(!p||3&f)throw"bad path data (@"+r+"): "+c;for(c=i[h],h||(o=l=0),a.length=0,r++,f=(1&f>>2)+2,h=0;c>h;h++){var d=u[e.charAt(r)],m=d>>5?-1:1,d=(31&d)<<6|u[e.charAt(r+1)];3==f&&(d=d<<6|u[e.charAt(r+2)]),d=m*d/10,h%2?o=d+=o:l=d+=l,a[h]=d,r+=f}p.apply(this,a)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.setTransform,[1,0,0,1,0,0],!1),t.strokeCmd,new e(this._ctx.restore,[],!1)):this._instructions.push(t.strokeCmd))},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.suppressCrossDomainErrors=!1,e._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._hitTestCanvas.width=e._hitTestCanvas.height=1,e._hitTestContext=e._hitTestCanvas.getContext("2d"),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.onPress=null,t.onClick=null,t.onDoubleClick=null,t.onMouseOver=null,t.onMouseOut=null,t.onTick=null,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t.cursor=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var i=this._cacheScale;return e.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/i,n.height/i),!0},t.updateContext=function(e){var t,n=this.mask;n&&n.graphics&&!n.graphics.isEmpty()&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e.transform(t.a,t.b,t.c,t.d,0|t.tx+.5,0|t.ty+.5):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.alpha,this.compositeOperation&&(e.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(e,this.shadow)},t.cache=function(e,t,n,i,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*r),this.cacheCanvas.height=Math.ceil(i*r),this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=r||1,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas,i=this._cacheScale,r=this._cacheOffsetX*i,s=this._cacheOffsetY*i;if(!n)throw"cache() must be called before updateCache()";var a=n.getContext("2d");
a.save(),t||a.clearRect(0,0,n.width+1,n.height+1),a.globalCompositeOperation=t,a.setTransform(i,0,0,i,-r,-s),this.draw(a,!0),this._applyFilters(),a.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){return e=this.localToGlobal(e,t),n.globalToLocal(e.x,e.y)},t.setTransform=function(e,t,n,i,r,s,a,o,l){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==i?1:i,this.rotation=r||0,this.skewX=s||0,this.skewY=a||0,this.regX=o||0,this.regY=l||0,this},t.getMatrix=function(e){return(e?e.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;null!=t;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var i=e._hitTestContext;i.setTransform(1,0,0,1,-t,-n),this.draw(i);var r=this._testHit(i);return i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),r},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation,this.cacheCanvas&&(e.cacheCanvas=this.cacheCanvas.cloneNode(!0),e.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){this.onTick&&this.onTick.apply(this,e);var t=this._listeners;t&&t.tick&&this.dispatchEvent({type:"tick",params:e})},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(i){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,i=this.cacheCanvas.height,r=0;e>r;r++)this.filters[r].applyFilter(t,0,0,n,i)},t._hasMouseHandler=function(e){var t=this._listeners;return!!(1&e&&(this.onPress||this.onClick||this.onDoubleClick||t&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||2&e&&(this.onMouseOver||this.onMouseOut||this.cursor||t&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),i=0,r=n.length;r>i;i++){var s=n[i];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,i=arguments[n-1];if(0>i||i>this.children.length)return arguments[n-2];if(n>2){for(var r=0;n-1>r;r++)this.addChildAt(arguments[r],i+r);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,i=0;t>i;i++)n=n&&this.removeChild(arguments[i]);return n}return this.removeChildAt(this.children.indexOf(e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],i=0;t>i;i++)n[i]=arguments[i];n.sort(function(e,t){return t-e});for(var r=!0,i=0;t>i;i++)r=r&&this.removeChildAt(n[i]);return r}return 0>e||e>this.children.length-1?!1:((t=this.children[e])&&(t.parent=null),this.children.splice(e,1),!0)},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,i=t.length;i>n;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return this.children.indexOf(e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,i=n[e],r=n[t];i&&r&&(n[e]=r,n[t]=i)},t.swapChildren=function(e,t){for(var n,i,r=this.children,s=0,a=r.length;a>s&&(r[s]==e&&(n=s),r[s]==t&&(i=s),!(null!=n&&null!=i));s++);s!=a&&(r[n]=t,r[i]=e)},t.setChildIndex=function(e,t){var n=this.children,i=n.length;if(!(e.parent!=this||0>t||t>=i)){for(var r=0;i>r&&n[r]!=e;r++);r==i||r==t||(n.splice(r,1),r>t&&t--,n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t){var n=[],i=this.localToGlobal(e,t);return this._getObjectsUnderPoint(i.x,i.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.clone=function(t){var n=new e;if(this.cloneProps(n),t)for(var i=n.children=[],r=0,s=this.children.length;s>r;r++){var a=this.children[r].clone(t);a.parent=n,i.push(a)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,i,r){var s=createjs.DisplayObject._hitTestContext,a=this._matrix,o=this._hasMouseHandler(r);if(!this.hitArea&&this.cacheCanvas&&o&&(this.getConcatenatedMatrix(a),s.setTransform(a.a,a.b,a.c,a.d,a.tx-t,a.ty-n),s.globalAlpha=a.alpha,this.draw(s),this._testHit(s)))return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),this;for(var l=this.children.length-1;l>=0;l--){var u=this.children[l],c=u.hitArea;if(u.visible&&(c||u.isVisible())&&(!r||u.mouseEnabled)){var f=r&&u._hasMouseHandler(r);if(!(u instanceof e)||c&&f){if((!r||o||f)&&(u.getConcatenatedMatrix(a),c&&(a.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY),a.alpha=c.alpha),s.globalAlpha=a.alpha,s.setTransform(a.a,a.b,a.c,a.d,a.tx-t,a.ty-n),(c||u).draw(s),this._testHit(s))){if(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),o)return this;if(!i)return u;i.push(u)}}else if(o){if(u=u._getObjectsUnderPoint(t,n))return this}else if(u=u._getObjectsUnderPoint(t,n,i,r),!i&&u)return u}}return null},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.onMouseMove=null,t.onMouseUp=null,t.onMouseDown=null,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},t.update=function(){if(this.canvas){this.autoClear&&this.clear(),e._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore()}},t.tick=t.update,t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){t||(t="image/png");var n,i=this.canvas.getContext("2d"),r=this.canvas.width,s=this.canvas.height;if(e){n=i.getImageData(0,0,r,s);var a=i.globalCompositeOperation;i.globalCompositeOperation="destination-over",i.fillStyle=e,i.fillRect(0,0,r,s)}var o=this.canvas.toDataURL(t);return e&&(i.clearRect(0,0,r+1,s+1),i.putImageData(n,0,0),i.globalCompositeOperation=a),o},t.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n=this._eventListeners;if(!e&&n){for(t in n)e=n[t],e.t.removeEventListener(t,e.f);this._eventListeners=null}else if(e&&!n&&this.canvas){e=window.addEventListener?window:document;var i=this,n=this._eventListeners={};n.mouseup={t:e,f:function(e){i._handleMouseUp(e)}},n.mousemove={t:e,f:function(e){i._handleMouseMove(e)}},n.dblclick={t:e,f:function(e){i._handleDoubleClick(e)}},n.mousedown={t:this.canvas,f:function(e){i._handleMouseDown(e)}};for(t in n)e=n[t],e.t.addEventListener(t,e.f)}},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0},null!=this._primaryPointerID&&-1!=this._primaryPointerID)||(this._primaryPointerID=e),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,i){if(this.canvas){var r=this._getPointerData(e),s=r.inBounds;this._updatePointerPosition(e,n,i),(s||r.inBounds||this.mouseMoveOutside)&&((this.onMouseMove||this.hasEventListener("stagemousemove"))&&(n=new createjs.MouseEvent("stagemousemove",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY),this.onMouseMove&&this.onMouseMove(n),this.dispatchEvent(n)),(i=r.event)&&(i.onMouseMove||i.hasEventListener("mousemove"))&&(n=new createjs.MouseEvent("mousemove",r.x,r.y,i.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY),i.onMouseMove&&i.onMouseMove(n),i.dispatchEvent(n,i.target)))}},t._updatePointerPosition=function(e,t,n){var i=this._getElementRect(this.canvas);t-=i.left,n-=i.top;var r=this.canvas.width,s=this.canvas.height;t/=(i.right-i.left)/r,n/=(i.bottom-i.top)/s,i=this._getPointerData(e),(i.inBounds=t>=0&&n>=0&&r-1>=t&&s-1>=n)?(i.x=t,i.y=n):this.mouseMoveOutside&&(i.x=0>t?0:t>r-1?r-1:t,i.y=0>n?0:n>s-1?s-1:n),i.rawX=t,i.rawY=n,e==this._primaryPointerID&&(this.mouseX=i.x,this.mouseY=i.y,this.mouseInBounds=i.inBounds)},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle;e=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth);var a=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),o=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),s=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+i+e,right:t.right+i-o,top:t.top+r+a,bottom:t.bottom+r-s}},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var i,r=this._getPointerData(e);(this.onMouseMove||this.hasEventListener("stagemouseup"))&&(i=new createjs.MouseEvent("stagemouseup",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY),this.onMouseUp&&this.onMouseUp(i),this.dispatchEvent(i));var s=r.event;s&&(s.onMouseUp||s.hasEventListener("mouseup"))&&(i=new createjs.MouseEvent("mouseup",r.x,r.y,s.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onMouseUp&&s.onMouseUp(i),s.dispatchEvent(i,s.target)),(s=r.target)&&(s.onClick||s.hasEventListener("click"))&&this._getObjectsUnderPoint(r.x,r.y,null,!0,this._mouseOverIntervalID?3:1)==s&&(i=new createjs.MouseEvent("click",r.x,r.y,s,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onClick&&s.onClick(i),s.dispatchEvent(i)),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,!1)},t._handlePointerDown=function(e,t,n,i){var r=this._getPointerData(e);null!=i&&this._updatePointerPosition(e,n,i),(this.onMouseDown||this.hasEventListener("stagemousedown"))&&(n=new createjs.MouseEvent("stagemousedown",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY),this.onMouseDown&&this.onMouseDown(n),this.dispatchEvent(n)),(i=this._getObjectsUnderPoint(r.x,r.y,null,this._mouseOverIntervalID?3:1))&&(r.target=i,(i.onPress||i.hasEventListener("mousedown"))&&(n=new createjs.MouseEvent("mousedown",r.x,r.y,i,t,e,e==this._primaryPointerID,r.rawX,r.rawY),i.onPress&&i.onPress(n),i.dispatchEvent(n),(n.onMouseMove||n.onMouseUp||n.hasEventListener("mousemove")||n.hasEventListener("mouseup"))&&(r.event=n)))},t._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e=null;this.mouseInBounds&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var t=this._mouseOverTarget;if(t!=e){var n=this._getPointerData(-1);if(t&&(t.onMouseOut||t.hasEventListener("mouseout"))){var i=new createjs.MouseEvent("mouseout",n.x,n.y,t,null,-1,n.rawX,n.rawY);t.onMouseOut&&t.onMouseOut(i),t.dispatchEvent(i)}t&&(this.canvas.style.cursor=""),e&&(e.onMouseOver||e.hasEventListener("mouseover"))&&(i=new createjs.MouseEvent("mouseover",n.x,n.y,e,null,-1,n.rawX,n.rawY),e.onMouseOver&&e.onMouseOver(i),e.dispatchEvent(i)),e&&(this.canvas.style.cursor=e.cursor||""),this._mouseOverTarget=e}}},t._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,this._mouseOverIntervalID?3:1);n&&(n.onDoubleClick||n.hasEventListener("dblclick"))&&(evt=new createjs.MouseEvent("dblclick",t.x,t.y,n,e,-1,!0,t.rawX,t.rawY),n.onDoubleClick&&n.onDoubleClick(evt),n.dispatchEvent(evt))},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.onAnimationEnd=null,t.currentFrame=-1,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._advanceCount=0,t._animation=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.spriteSheet=e},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete&&this.currentFrame>=0;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n){var i=n.rect;return e.drawImage(n.image,i.x,i.y,i.width,i.height,-n.regX,-n.regY,i.width,i.height),!0}},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},t.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%t&&this.advance(),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e,t=this._animation,n=this.currentFrame,i=this.paused;if(t)if(e=t.frames.length,this.currentAnimationFrame>=e){var r=t.next;this._dispatchAnimationEnd(t,n,i,r,e-1)||(r?this._goto(r):(this.paused=!0,this.currentAnimationFrame=t.frames.length-1,this.currentFrame=t.frames[this.currentAnimationFrame]))}else this.currentFrame=t.frames[this.currentAnimationFrame];else e=this.spriteSheet.getNumFrames(),n>=e&&!this._dispatchAnimationEnd(t,n,i,e-1)&&(this.currentFrame=0)},t._dispatchAnimationEnd=function(e,t,n,i,r){var s=e?e.name:null;return this.onAnimationEnd&&this.onAnimationEnd(this,s,i),this.dispatchEvent({type:"animationend",name:s,next:i}),!n&&this.paused&&(this.currentAnimationFrame=r),this.paused!=n||this._animation!=e||this.currentFrame!=t},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.onAnimationEnd=this.onAnimationEnd,e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.offset=this.offset,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame},t._goto=function(e){if(isNaN(e)){var t=this.spriteSheet.getAnimation(e);t&&(this.currentAnimationFrame=0,this._animation=t,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=e},createjs.BitmapAnimation=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){return t=new e(t&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(t),t},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject;e._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.text="",t.font=null,t.color="#000",t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=!1,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n?n:"#000"},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.outline?e.strokeStyle=this.color:e.fillStyle=this.color,e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",this._drawText(e),!0)},t.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},t.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},t.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._getWorkingContext=function(){var t=e._workingContext;return t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",t},t._drawText=function(e){var t=!!e;t||(e=this._getWorkingContext());for(var n=(this.text+"").split(/(?:\r\n|\r|\n)/),i=this.lineHeight||this.getMeasuredLineHeight(),r=0,s=0,a=n.length;a>s;s++){var o=e.measureText(n[s]).width;if(null==this.lineWidth||this.lineWidth>o)t&&this._drawTextLine(e,n[s],r*i);else{for(var o=n[s].split(/(\s)/),l=o[0],u=1,c=o.length;c>u;u+=2)e.measureText(l+o[u]+o[u+1]).width>this.lineWidth?(t&&this._drawTextLine(e,l,r*i),r++,l=o[u+1]):l+=o[u]+o[u+1];t&&this._drawTextLine(e,l,r*i)}r++}return r},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"};e._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._workingContext=e._workingCanvas.getContext("2d"),e.addFlippedFrames=function(t,n,i,r){if(n||i||r){var s=0;n&&e._flip(t,++s,!0,!1),i&&e._flip(t,++s,!1,!0),r&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var i=t.getFrame(n);if(!i)return null;var r=i.rect,s=e._workingCanvas;return s.width=r.width,s.height=r.height,e._workingContext.drawImage(i.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i=new Image,i.src=s.toDataURL("image/png"),i},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var i=n.getContext("2d");return i.save(),i.drawImage(e,0,0),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),i.restore(),n},e._flip=function(t,n,i,r){for(var s=t._images,a=e._workingCanvas,o=e._workingContext,l=s.length/n,u=0;l>u;u++){var c=s[u];c.__tmp=u,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.width+1,a.height+1),a.width=c.width,a.height=c.height,o.setTransform(i?-1:1,0,0,r?-1:1,i?c.width:0,r?c.height:0),o.drawImage(c,0,0);var f=new Image;f.src=a.toDataURL("image/png"),f.width=c.width,f.height=c.height,s.push(f)}for(o=t._frames,a=o.length/n,u=0;a>u;u++){var c=o[u],h=c.rect.clone(),f=s[c.image.__tmp+l*n],p={image:f,rect:h,regX:c.regX,regY:c.regY};i&&(h.x=f.width-h.x-h.width,p.regX=h.width-c.regX),r&&(h.y=f.height-h.y-h.height,p.regY=h.height-c.regY),o.push(p)}for(i="_"+(i?"h":"")+(r?"v":""),r=t._animations,t=t._data,s=r.length/n,u=0;s>u;u++){for(o=r[u],c=t[o],l={name:o+i,frequency:c.frequency,next:c.next,frames:[]},c.next&&(l.next+=i),o=c.frames,c=0,f=o.length;f>c;c++)l.frames.push(o[c]+a*n);t[l.name]=l,r.push(l.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t.timeSlice=.3,t.progress=-1,t.onComplete=null,t.onProgress=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,i,r,s,a){if(this._data)throw e.ERR_RUNNING;return n=n||t.bounds||t.nominalBounds,!n&&t.getBounds&&(n=t.getBounds()),n?(i=i||1,this._frames.push({source:t,sourceRect:n,scale:i,funct:r,params:s,scope:a,index:this._frames.length,height:n.height*i})-1):null},t.addAnimation=function(t,n,i,r){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:i,frequency:r}},t.addMovieClip=function(t,n,i){if(this._data)throw e.ERR_RUNNING;var r=t.frameBounds,s=n||t.bounds||t.nominalBounds;if(!s&&t.getBounds&&(s=t.getBounds()),!s&&!r)return null;n=this._frames.length;for(var a=t.timeline.duration,o=0;a>o;o++)this.addFrame(t,r&&r[o]?r[o]:s,i,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[o],t);o=t.timeline._labels,t=[];for(var l in o)t.push({index:o[l],label:l});if(t.length)for(t.sort(function(e,t){return e.index-t.index}),o=0,l=t.length;l>o;o++){i=t[o].label;for(var r=n+(o==l-1?a:t[o+1].index),s=[],u=n+t[o].index;r>u;u++)s.push(u);this.addAnimation(i,s,!0)}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var i=this._frames.slice();if(i.sort(function(e,t){return e.height<=t.height?-1:1}),i[i.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var r=0,s=0,a=0;i.length;){var o=this._fillRow(i,r,a,n,t);if(o.w>s&&(s=o.w),r+=o.h,!o.h||!i.length){var l=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.width=this._getSize(s,this.maxWidth),l.height=this._getSize(r,this.maxHeight),this._data.images[a]=l,o.h||(s=r=0,a++)}}},t._getSize=function(e,t){for(var n=4;e>Math.pow(2,++n););return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,i,r,s){var a=this.maxWidth,o=this.maxHeight;n+=s;for(var o=o-n,l=s,u=0,c=t.length-1;c>=0;c--){var f=t[c],h=this._scale*f.scale,p=f.sourceRect,d=f.source,m=Math.floor(h*p.x-s),b=Math.floor(h*p.y-s),g=Math.ceil(h*p.height+2*s),p=Math.ceil(h*p.width+2*s);if(p>a)throw e.ERR_DIMENSIONS;g>o||l+p>a||(f.img=i,f.rect=new createjs.Rectangle(l,n,p,g),u=u||g,t.splice(c,1),r[f.index]=[l,n,p,g,i,Math.round(-m+h*d.regX-s),Math.round(-b+h*d.regY-s)],l+=p)}return{w:l,h:u}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.onComplete&&this.onComplete(this),this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var i=this;this._timerID=setTimeout(function(){i._run()},50-e)}e=this.progress=this._index/this._frames.length,this.onProgress&&this.onProgress(this,e),this.dispatchEvent({type:"progress",progress:e})},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,i=e.sourceRect,r=this._data.images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),r.save(),r.beginPath(),r.rect(n.x,n.y,n.width,n.height),r.clip(),r.translate(Math.ceil(n.x-i.x*t),Math.ceil(n.y-i.y*t)),r.scale(t,t),e.source.draw(r),r.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._oldMtx=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e,e=e.style,e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){if(null!=this.htmlElement){var e=this.getConcatenatedMatrix(this._matrix),t=this.htmlElement.style;if(!this.visible)return!0;t.visibility="visible";var n=this._oldMtx||{};return n.alpha!=e.alpha&&(t.opacity=""+e.alpha,n.alpha=e.alpha),(n.tx!=e.tx||n.ty!=e.ty||n.a!=e.a||n.b!=e.b||n.c!=e.c||n.d!=e.d)&&(t.transform=t.WebkitTransform=t.OTransform=t.msTransform=["matrix("+e.a,e.b,e.c,e.d,0|e.tx+.5,(0|e.ty+.5)+")"].join(),t.MozTransform=["matrix("+e.a,e.b,e.c,e.d,(0|e.tx+.5)+"px",(0|e.ty+.5)+"px)"].join(),this._oldMtx=e.clone()),!0}},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){this.htmlElement.style.visibility="hidden",this.DisplayObject__tick(e)},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},e.enable=function(t,n,i){return t&&t.canvas&&e.isSupported()?(t.__touch={pointers:{},multitouch:!n,preventDefault:!i,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,i=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",i,!1),n.addEventListener("touchmove",i,!1),n.addEventListener("touchend",i,!1),n.addEventListener("touchcancel",i,!1)
},e._IOS_disable=function(e){var t=e.canvas;t&&(e=e.__touch.f,t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1))},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,i=t.type,r=0,s=n.length;s>r;r++){var a=n[r],o=a.identifier;a.target==e.canvas&&("touchstart"==i?this._handleStart(e,o,t,a.pageX,a.pageY):"touchmove"==i?this._handleMove(e,o,t,a.pageX,a.pageY):("touchend"==i||"touchcancel"==i)&&this._handleEnd(e,o,t))}}},e._IE_enable=function(t){var n=t.canvas,i=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,i=t.pointerId,r=e.__touch.activeIDs;"MSPointerDown"==n?t.srcElement==e.canvas&&(r[i]=!0,this._handleStart(e,i,t,t.pageX,t.pageY)):r[i]&&("MSPointerMove"==n?this._handleMove(e,i,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n)&&(delete r[i],this._handleEnd(e,i,t)))}},e._handleStart=function(e,t,n,i,r){var s=e.__touch;if(s.multitouch||!s.count){var a=s.pointers;a[t]||(a[t]=!0,s.count++,e._handlePointerDown(t,n,i,r))}},e._handleMove=function(e,t,n,i,r){e.__touch.pointers[t]&&e._handlePointerMove(t,n,i,r)},e._handleEnd=function(e,t,n){var i=e.__touch,r=i.pointers;r[t]&&(i.count--,e._handlePointerUp(t,n,!0),delete r[t])},createjs.Touch=e}(),function(){var e=this.createjs=this.createjs||{},e=e.EaselJS=e.EaselJS||{};e.version="0.6.1",e.buildDate="Tue, 14 May 2013 21:43:02 GMT"}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.removeEventListener=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent},t._listeners=null,t.initialize=function(){},t.addEventListener=function(e,t){var n=this._listeners;n?this.removeEventListener(e,t):n=this._listeners={};var i=n[e];return i||(i=n[e]=[]),i.push(t),t},t.removeEventListener=function(e,t){var n=this._listeners;if(n){var i=n[e];if(i)for(var r=0,s=i.length;s>r;r++)if(i[r]==t){1==s?delete n[e]:i.splice(r,1);break}}},t.removeAllEventListeners=function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null},t.dispatchEvent=function(e,t){var n=!1,i=this._listeners;if(e&&i){if("string"==typeof e&&(e={type:e}),i=i[e.type],!i)return n;e.target=t||this;for(var i=i.slice(),r=0,s=i.length;s>r;r++)var a=i[r],n=a.handleEvent?n||a.handleEvent(e):n||a(e)}return!!n},t.hasEventListener=function(e){var t=this._listeners;return!(!t||!t[e])},t.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,i,r){return r&&e.removeTweens(t),new e(t,n,i)},e.tick=function(t,n){for(var i=e._tweens.slice(),r=i.length-1;r>=0;r--){var s=i[r];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},createjs.Ticker&&createjs.Ticker.addListener(e,!1),e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,i=n.length-1;i>=0;i--)n[i]._target==t&&(n[i]._paused=!0,n.splice(i,1));t.tweenjs_count=0}},e.removeAllTweens=function(){for(var t=e._tweens,n=0,i=t.length;i>n;n++){var r=t[n];r.paused=!0,r.target.tweenjs_count=0}t.length=0},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&e._tweens.length},e.installPlugin=function(t,n){var i=t.priority;null==i&&(t.priority=i=0);for(var r=0,s=n.length,a=e._plugins;s>r;r++){var o=n[r];if(a[o]){for(var l=a[o],u=0,c=l.length;c>u&&!(l[u].priority>i);u++);a[o].splice(u,0,t)}else a[o]=[t]}},e._register=function(t,n){var i=t._target;n?(i&&(i.tweenjs_count=i.tweenjs_count?i.tweenjs_count+1:1),e._tweens.push(t)):(i&&i.tweenjs_count--,i=e._tweens.indexOf(t),-1!=i&&e._tweens.splice(i,1))},t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.ignoreGlobalPause=!1,t.loop=!1,t.duration=0,t.pluginData=null,t.onChange=null,t.change=null,t.target=null,t.position=null,t._paused=!1,t._curQueueProps=null,t._initQueueProps=null,t._steps=null,t._actions=null,t._prevPosition=0,t._stepPosition=0,t._prevPos=-1,t._target=null,t._useTicks=!1,t.initialize=function(t,n,i){this.target=this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,this.onChange=n.onChange,n.override&&e.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this._paused=!0:e._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,e.NONE)},t.wait=function(e){if(null==e||0>=e)return this;var t=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:t,e:this._linearEase,p1:t})},t.to=function(e,t,n){return(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){0>e&&(e=0),null==t&&(t=1);var n=e,i=!1;if(n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,i=!0)),n==this._prevPos)return i;var r=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=e,this._target)if(i)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>n);s++);s=this._steps[s-1],this._updateTargetProps(s,(this._stepPosition=n-s.t)/s.d)}return 0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):1==t&&r>n?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,n,!0)):this._runActions(r,n)),i&&this.setPaused(!0),this.onChange&&this.onChange(this),this.dispatchEvent("change"),i},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused=!!t,e._register(this,!t),this},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,i){var r,s,a,o;t||1!=i?(t.e&&(i=t.e(i,0,1,1)),r=t.p0,s=t.p1):r=s=this._curQueueProps;for(n in this._initQueueProps){null==(a=r[n])&&(r[n]=a=this._initQueueProps[n]),null==(o=s[n])&&(s[n]=o=a),a=a==o||0==i||1==i||"number"!=typeof a?1==i?o:a:a+(o-a)*i;var l=!1;if(o=e._plugins[n])for(var u=0,c=o.length;c>u;u++){var f=o[u].tween(this,n,a,r,s,i,!!t&&r==s,!t);f==e.IGNORE?l=!0:a=f}l||(this._target[n]=a)}},t._runActions=function(e,t,n){var i=e,r=t,s=-1,a=this._actions.length,o=1;for(e>t&&(i=t,r=e,s=a,a=o=-1);(s+=o)!=a;){t=this._actions[s];var l=t.t;(l==r||l>i&&r>l||n&&l==e)&&t.f.apply(t.o,t.p)}},t._appendQueueProps=function(t){var n,i,r,s,a,o;for(o in t){if(void 0===this._initQueueProps[o]){if(i=this._target[o],n=e._plugins[o])for(r=0,s=n.length;s>r;r++)i=n[r].init(this,o,i);this._initQueueProps[o]=void 0===i?null:i}else i=this._curQueueProps[o];if(n=e._plugins[o])for(a=a||{},r=0,s=n.length;s>r;r++)n[r].step&&n[r].step(this,o,i,t[o],a);this._curQueueProps[o]=t[o]}return a&&this._appendQueueProps(a),this._curQueueProps},t._cloneProps=function(e){var t,n={};for(t in e)n[t]=e[t];return n},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var n in e)t[n]=e[n]},createjs.Tween=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.ignoreGlobalPause=!1,t.duration=0,t.loop=!1,t.onChange=null,t.position=null,t._paused=!1,t._tweens=null,t._labels=null,t._prevPosition=0,t._prevPos=-1,t._useTicks=!1,t.initialize=function(e,t,n){this._tweens=[],n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,this.onChange=n.onChange),e&&this.addTween.apply(this,e),this.setLabels(t),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,createjs.Tween.NONE)},t.addTween=function(e){var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addTween(arguments[n]);return arguments[0]}return 0==t?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,i=0;t>i;i++)n=n&&this.removeTween(arguments[i]);return n}return 0==t?!1:(t=this._tweens.indexOf(e),-1!=t?(this._tweens.splice(t,1),e.duration>=this.duration&&this.updateDuration(),!0):!1)},t.addLabel=function(e,t){this._labels[e]=t},t.setLabels=function(e){this._labels=e?e:{}},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){0>e&&(e=0);var n=this.loop?e%this.duration:e,i=!this.loop&&e>=this.duration;if(n==this._prevPos)return i;this._prevPosition=e,this.position=this._prevPos=n;for(var r=0,s=this._tweens.length;s>r;r++)if(this._tweens[r].setPosition(n,t),n!=this._prevPos)return!1;return i&&this.setPaused(!0),this.onChange&&this.onChange(this),i},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){for(var e=this.duration=0,t=this._tweens.length;t>e;e++){var n=this._tweens[e];n.duration>this.duration&&(this.duration=n.duration)}},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=parseFloat(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){e=this.resolve(e),null!=e&&this.setPosition(e)},createjs.Timeline=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ease cannot be instantiated."};e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return 1>(t*=2)?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return 1>(t*=2)?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(e,t){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var r=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(i-=1))*Math.sin((i-r)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var r=t/n*Math.asin(1/e);return e*Math.pow(2,-10*i)*Math.sin((i-r)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=2*Math.PI;return function(i){var r=t/n*Math.asin(1/e);return 1>(i*=2)?-.5*e*Math.pow(2,10*(i-=1))*Math.sin((i-r)*n/t):.5*e*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*n/t)+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"MotionGuidePlugin cannot be instantiated."};e.priority=0,e.install=function(){return createjs.Tween.installPlugin(e,["guide","x","y","rotation"]),createjs.Tween.IGNORE},e.init=function(e,t,n){return e=e.target,e.hasOwnProperty("x")||(e.x=0),e.hasOwnProperty("y")||(e.y=0),e.hasOwnProperty("rotation")||(e.rotation=0),"guide"==t?null:n},e.step=function(t,n,i,r,s){if("guide"!=n)return r;var a;if(r.hasOwnProperty("path")||(r.path=[]),t=r.path,r.hasOwnProperty("end")||(r.end=1),r.hasOwnProperty("start")||(r.start=i&&i.hasOwnProperty("end")&&i.path===t?i.end:0),r.hasOwnProperty("_segments")&&r._length)return r;if(i=t.length,!(i>=6&&0==(i-2)%4))throw"invalid 'path' data, please see documentation for valid paths";for(r._segments=[],r._length=0,n=2;i>n;n+=4){for(var o,l,u=t[n-2],c=t[n-1],f=t[n+0],h=t[n+1],p=t[n+2],d=t[n+3],m=u,b=c,g=0,v=[],_=1;10>=_;_++){l=_/10;var E=1-l;o=E*E*u+2*E*l*f+l*l*p,l=E*E*c+2*E*l*h+l*l*d,g+=v[v.push(Math.sqrt((a=o-m)*a+(a=l-b)*a))-1],m=o,b=l}r._segments.push(g),r._segments.push(v),r._length+=g}return a=r.orient,r.orient=!1,e.calc(r,r.end,s),r.orient=a,r},e.tween=function(t,n,i,r,s,a,o){return s=s.guide,void 0==s||s===r.guide?i:(s.lastRatio!=a&&(e.calc(s,(s.end-s.start)*(o?s.end:a)+s.start,t.target),s.orient&&(t.target.rotation+=r.rotation||0),s.lastRatio=a),s.orient||"rotation"!=n?t.target[n]:i)},e.calc=function(t,n,i){void 0==t._segments&&e.validate(t),void 0==i&&(i={x:0,y:0,rotation:0});var r=t._segments,s=t.path,a=t._length*n,o=r.length-2;for(n=0;a>r[n]&&o>n;)a-=r[n],n+=2;for(var r=r[n+1],l=0,o=r.length-1;a>r[l]&&o>l;)a-=r[l],l++;return a=l/++o+a/(o*r[l]),n=2*n+2,o=1-a,i.x=o*o*s[n-2]+2*o*a*s[n+0]+a*a*s[n+2],i.y=o*o*s[n-1]+2*o*a*s[n+1]+a*a*s[n+3],t.orient&&(i.rotation=57.2957795*Math.atan2((s[n+1]-s[n-1])*o+(s[n+3]-s[n+1])*a,(s[n+0]-s[n-2])*o+(s[n+2]-s[n+0])*a)),i},createjs.MotionGuidePlugin=e}(),function(){var e=this.createjs=this.createjs||{},e=e.TweenJS=e.TweenJS||{};e.version="0.4.0",e.buildDate="Tue, 12 Feb 2013 21:08:16 GMT"}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,i){this.initialize(e,t,n,i)},t=e.prototype=new createjs.Container;e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",t.startPosition=0,t.loop=!0,t.currentFrame=0,t.timeline=null,t.paused=!1,t.actionsEnabled=!0,t.autoReset=!0,t._synchOffset=0,t._prevPos=-1,t._prevPosition=0,t.Container_initialize=t.initialize,t.initialize=function(t,n,i,r){this.mode=t||e.INDEPENDENT,this.startPosition=n||0,this.loop=i,props={paused:!0,position:n,useTicks:!0},this.Container_initialize(),this.timeline=new createjs.Timeline(null,r,props),this._managed={}},t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.Container_draw=t.draw,t.draw=function(e,t,n){return this.DisplayObject_draw(e,t)?!0:(this._updateTimeline(),this.Container_draw(e,t,n),void 0)},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.clone=function(){throw"MovieClip cannot be cloned."},t.toString=function(){return"[MovieClip (name="+this.name+")]"},t.Container__tick=t._tick,t._tick=function(t){!this.paused&&this.mode==e.INDEPENDENT&&(this._prevPosition=0>this._prevPos?0:this._prevPosition+1),this.Container__tick(t)},t._goto=function(e){e=this.timeline.resolve(e),null!=e&&(-1==this._prevPos&&(this._prevPos=0/0),this._prevPosition=e,this._updateTimeline())},t._reset=function(){this._prevPos=-1,this.currentFrame=0},t._updateTimeline=function(){var t=this.timeline,n=t._tweens,i=this.children,r=this.mode!=e.INDEPENDENT;if(t.loop=null==this.loop?!0:this.loop,r?t.setPosition(this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):t.setPosition(0>this._prevPos?0:this._prevPosition,this.actionsEnabled?null:createjs.Tween.NONE),this._prevPosition=t._prevPosition,this._prevPos!=t._prevPos){this.currentFrame=this._prevPos=t._prevPos;for(var s in this._managed)this._managed[s]=1;for(t=n.length-1;t>=0;t--)s=n[t],r=s._target,r!=this&&(s=s._stepPosition,r instanceof createjs.DisplayObject?this._addManagedChild(r,s):this._setState(r.state,s));for(t=i.length-1;t>=0;t--)n=i[t].id,1==this._managed[n]&&(this.removeChildAt(t),delete this._managed[n])}},t._setState=function(e,t){if(e)for(var n=0,i=e.length;i>n;n++){var r,s=e[n],a=s.t,s=s.p;for(r in s)a[r]=s[r];this._addManagedChild(a,t)}},t._addManagedChild=function(t,n){t._off||(this.addChild(t),t instanceof e&&(t._synchOffset=n,t.mode==e.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},createjs.MovieClip=e;var n=function(){throw"MovieClipPlugin cannot be instantiated."};n.priority=100,n.install=function(){createjs.Tween.installPlugin(n,["startPosition"])},n.init=function(e,t,n){return n},n.step=function(){},n.tween=function(t,n,i,r,s,a){return t.target instanceof e?1==a?s[n]:r[n]:i},n.install()}();var THREE=THREE||{REVISION:"59"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},THREE.extend=function(e,t){if(Object.keys)for(var n=Object.keys(t),i=0,r=n.length;r>i;i++){var s=n[i];Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}else{var a={}.hasOwnProperty;for(var s in t)a.call(t,s)&&(e[s]=t[s])}return e},function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;t.length>n&&!self.requestAnimationFrame;++n)self.requestAnimationFrame=self[t[n]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[t[n]+"CancelAnimationFrame"]||self[t[n]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(t){var n=Date.now(),i=Math.max(0,16-(n-e)),r=self.setTimeout(function(){t(n+i)},i);return e=n+i,r}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(e){self.clearTimeout(e)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(e){return void 0!==e&&this.set(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var i=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e},r=.5>=n?n*(1+t):n+t-n*t,s=2*n-r;this.r=i(s,r,e+1/3),this.g=i(s,r,e),this.b=i(s,r,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(e)){var t=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(){var e={h:0,s:0,l:0};return function(){var t,n,i=this.r,r=this.g,s=this.b,a=Math.max(i,r,s),o=Math.min(i,r,s),l=(o+a)/2;if(o===a)t=0,n=0;else{var u=a-o;switch(n=.5>=l?u/(a+o):u/(2-a-o),a){case i:t=(r-s)/u+(s>r?6:0);break;case r:t=(s-i)/u+2;break;case s:t=(i-r)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e}}(),getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(e){this._x=e,this._updateEuler()},get y(){return this._y},set y(e){this._y=e,this._updateEuler()},get z(){return this._z},set z(e){this._z=e,this._updateEuler()},get w(){return this._w},set w(e){this._w=e,this._updateEuler()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._updateEuler(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._w=e._w,this._updateEuler(),this},setFromEuler:function(e,t){void 0===typeof e.order&&console.error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var n=Math.cos(e._x/2),i=Math.cos(e._y/2),r=Math.cos(e._z/2),s=Math.sin(e._x/2),a=Math.sin(e._y/2),o=Math.sin(e._z/2);return void 0===e.order||"XYZ"===e.order?(this._x=s*i*r+n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r-s*a*o):"YXZ"===e.order?(this._x=s*i*r+n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r+s*a*o):"ZXY"===e.order?(this._x=s*i*r-n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r-s*a*o):"ZYX"===e.order?(this._x=s*i*r-n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r+s*a*o):"YZX"===e.order?(this._x=s*i*r+n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r-s*a*o):"XZY"===e.order&&(this._x=s*i*r-n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r+s*a*o),t!==!1&&this._updateEuler(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._updateEuler(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],s=n[8],a=n[1],o=n[5],l=n[9],u=n[2],c=n[6],f=n[10],h=i+o+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(s-u)*t,this._z=(a-r)*t):i>o&&i>f?(t=2*Math.sqrt(1+i-o-f),this._w=(c-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(s+u)/t):o>f?(t=2*Math.sqrt(1+o-i-f),this._w=(s-u)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+f-i-o),this._w=(a-r)/t,this._x=(s+u)/t,this._y=(l+c)/t,this._z=.25*t),this._updateEuler(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+s*a+i*l-r*o,this._y=i*u+s*o+r*a-n*l,this._z=r*u+s*l+n*o-i*a,this._w=s*u-n*a-i*o-r*l,this._updateEuler(),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){var n=this._x,i=this._y,r=this._z,s=this._w,a=s*e._w+n*e._x+i*e._y+r*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var o=Math.acos(a),l=Math.sqrt(1-a*a);if(.001>Math.abs(l))return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var u=Math.sin((1-t)*o)/l,c=Math.sin(t*o)/l;return this._w=s*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=r*u+this._z*c,this._updateEuler(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this._updateEuler(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,n,i){return n.copy(e).slerp(t,i)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this
},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i+r[12],this.y=r[1]*t+r[5]*n+r[9]*i+r[13],this.z=r[2]*t+r[6]*n+r[10]*i+r[14],this},applyProjection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,u=o*n+a*t-r*i,c=o*i+r*n-s*t,f=-r*t-s*n-a*i;return this.x=l*o+f*-r+u*-a-c*-s,this.y=u*o+f*-s+c*-r-l*-a,this.z=c*o+f*-a+l*-s-u*-r,this},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,i=this.y,r=this.z;return this.x=i*e.z-r*e.y,this.y=r*e.x-n*e.z,this.z=n*e.y-i*e.x,this},crossVectors:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},getScaleFromMatrix:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),i=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=n,this.z=i,this},getColumnFromMatrix:function(e,t){var n=4*e,i=t.elements;return this.x=i[n],this.y=i[n+1],this.z=i[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var e=new THREE.Quaternion;return function(t){void 0===typeof t.order&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var n=e.setFromEuler(t);return this.applyQuaternion(n),this}}(),applyAxisAngle:function(){var e=new THREE.Quaternion;return function(t,n){var i=e.setFromAxisAngle(t,n);return this.applyQuaternion(i),this}}(),projectOnVector:function(){var e=new THREE.Vector3;return function(t){e.copy(t).normalize();var n=this.dot(e);return this.copy(e).multiplyScalar(n)}}(),projectOnPlane:function(){var e=new THREE.Vector3;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new THREE.Vector3;return function(t){return e.copy(this).projectOnVector(t).multiplyScalar(2),this.subVectors(e,this)}}()}),THREE.Vector4=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,s=.01,a=.1,o=e.elements,l=o[0],u=o[4],c=o[8],f=o[1],h=o[5],p=o[9],d=o[2],m=o[6],b=o[10];if(s>Math.abs(u-f)&&s>Math.abs(c-d)&&s>Math.abs(p-m)){if(a>Math.abs(u+f)&&a>Math.abs(c+d)&&a>Math.abs(p+m)&&a>Math.abs(l+h+b-3))return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,v=(h+1)/2,_=(b+1)/2,E=(u+f)/4,y=(c+d)/4,T=(p+m)/4;return g>v&&g>_?s>g?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=E/n,r=y/n):v>_?s>v?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(v),n=E/i,r=T/i):s>_?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=y/r,i=T/r),this.set(n,i,r,t),this}var S=Math.sqrt((m-p)*(m-p)+(c-d)*(c-d)+(f-u)*(f-u));return.001>Math.abs(S)&&(S=1),this.x=(m-p)/S,this.y=(c-d)/S,this.z=(f-u)/S,this.w=Math.acos((l+h+b-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(e){this._x=e,this._updateQuaternion()},get y(){return this._y},set y(e){this._y=e,this._updateQuaternion()},get z(){return this._z},set z(e){this._z=e,this._updateQuaternion()},get order(){return this._order},set order(e){this._order=e,this._updateQuaternion()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._updateQuaternion(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._updateQuaternion(),this},setFromRotationMatrix:function(e,t){function n(e){return Math.min(Math.max(e,-1),1)}var i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],u=i[9],c=i[2],f=i[6],h=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(a)),.99999>Math.abs(a)?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u)),.99999>Math.abs(u)?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(f)),.99999>Math.abs(f)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r))):"ZYX"===t?(this._y=Math.asin(-n(c)),.99999>Math.abs(c)?(this._x=Math.atan2(f,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(n(o)),.99999>Math.abs(o)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(a,h))):"XZY"===t?(this._z=Math.asin(-n(s)),.99999>Math.abs(s)?(this._x=Math.atan2(f,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,h),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+t),this._order=t,this._updateQuaternion(),this},setFromQuaternion:function(e,t,n){function i(e){return Math.min(Math.max(e,-1),1)}var r=e.x*e.x,s=e.y*e.y,a=e.z*e.z,o=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),o-r-s+a),this._y=Math.asin(i(2*(e.x*e.z+e.y*e.w))),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),o+r-s-a)):"YXZ"===t?(this._x=Math.asin(i(2*(e.x*e.w-e.y*e.z))),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),o-r-s+a),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),o-r+s-a)):"ZXY"===t?(this._x=Math.asin(i(2*(e.x*e.w+e.y*e.z))),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),o-r-s+a),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),o-r+s-a)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),o-r-s+a),this._y=Math.asin(i(2*(e.y*e.w-e.x*e.z))),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),o+r-s-a)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),o-r+s-a),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),o+r-s-a),this._z=Math.asin(i(2*(e.x*e.y+e.z*e.w)))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),o-r+s-a),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),o+r-s-a),this._z=Math.asin(i(2*(e.z*e.w-e.x*e.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+t),this._order=t,n!==!1&&this._updateQuaternion(),this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._updateQuaternion(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),s=t.dot(e),a=s/r;return i&&(a=THREE.Math.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t),r=n||new THREE.Vector3;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){if(e.length>0){var t=e[0];this.min.copy(t),this.max.copy(t);for(var n=1,i=e.length;i>n;n++)t=e[n],t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e){return new THREE.Vector2((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var n=t||new THREE.Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){if(e.length>0){var t=e[0];this.min.copy(t),this.max.copy(t);for(var n=1,i=e.length;i>n;n++)t=e[n],t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y),t.z<this.min.z?this.min.z=t.z:t.z>this.max.z&&(this.max.z=t.z)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){if(void 0!==t.geometry&&void 0!==t.geometry.vertices)for(var i=t.geometry.vertices,r=0,s=i.length;s>r;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e){return new THREE.Vector3((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var n=t||new THREE.Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var n=t||new THREE.Sphere;return n.center=this.center(),n.radius=.5*this.size(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(e,t,n,i,r,s,a,o,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,n||0,i||0,void 0!==r?r:1,s||0,a||0,o||0,void 0!==l?l:1)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,i,r,s,a,o,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=i,u[4]=r,u[7]=s,u[2]=a,u[5]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;return function(t){for(var n=0,i=t.length;i>n;n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix3(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-n*r*u+n*a*o+i*r*l-i*s*o},getInverse:function(e,t){var n=e.elements,i=this.elements;i[0]=n[10]*n[5]-n[6]*n[9],i[1]=-n[10]*n[1]+n[2]*n[9],i[2]=n[6]*n[1]-n[2]*n[5],i[3]=-n[10]*n[4]+n[6]*n[8],i[4]=n[10]*n[0]-n[2]*n[8],i[5]=-n[6]*n[0]+n[2]*n[4],i[6]=n[9]*n[4]-n[5]*n[8],i[7]=-n[9]*n[0]+n[1]*n[8],i[8]=n[5]*n[0]-n[1]*n[4];var r=n[0]*i[0]+n[1]*i[3]+n[2]*i[6];if(0===r){var s="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw Error(s);return console.warn(s),this.identity(),this}return this.multiplyScalar(1/r),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},clone:function(){var e=this.elements;return new THREE.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},THREE.Matrix4=function(e,t,n,i,r,s,a,o,l,u,c,f,h,p,d,m){this.elements=new Float32Array(16);var b=this.elements;b[0]=void 0!==e?e:1,b[4]=t||0,b[8]=n||0,b[12]=i||0,b[1]=r||0,b[5]=void 0!==s?s:1,b[9]=a||0,b[13]=o||0,b[2]=l||0,b[6]=u||0,b[10]=void 0!==c?c:1,b[14]=f||0,b[3]=h||0,b[7]=p||0,b[11]=d||0,b[15]=void 0!==m?m:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,i,r,s,a,o,l,u,c,f,h,p,d,m){var b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=i,b[1]=r,b[5]=s,b[9]=a,b[13]=o,b[2]=l,b[6]=u,b[10]=c,b[14]=f,b[3]=h,b[7]=p,b[11]=d,b[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var n=this.elements,i=t.elements,r=1/e.set(i[0],i[1],i[2]).length(),s=1/e.set(i[4],i[5],i[6]).length(),a=1/e.set(i[8],i[9],i[10]).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this}}(),makeRotationFromEuler:function(e){void 0===typeof e.order&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if(void 0===e.order||"XYZ"===e.order){var f=s*u,h=s*c,p=a*u,d=a*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=h+p*l,t[5]=f-d*l,t[9]=-a*o,t[2]=d-f*l,t[6]=p+h*l,t[10]=s*o}else if("YXZ"===e.order){var m=o*u,b=o*c,g=l*u,v=l*c;t[0]=m+v*a,t[4]=g*a-b,t[8]=s*l,t[1]=s*c,t[5]=s*u,t[9]=-a,t[2]=b*a-g,t[6]=v+m*a,t[10]=s*o}else if("ZXY"===e.order){var m=o*u,b=o*c,g=l*u,v=l*c;t[0]=m-v*a,t[4]=-s*c,t[8]=g+b*a,t[1]=b+g*a,t[5]=s*u,t[9]=v-m*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){var f=s*u,h=s*c,p=a*u,d=a*c;t[0]=o*u,t[4]=p*l-h,t[8]=f*l+d,t[1]=o*c,t[5]=d*l+f,t[9]=h*l-p,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){var _=s*o,E=s*l,y=a*o,T=a*l;t[0]=o*u,t[4]=T-_*c,t[8]=y*c+E,t[1]=c,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=E*c+y,t[10]=_-T*c}else if("XZY"===e.order){var _=s*o,E=s*l,y=a*o,T=a*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=_*c+T,t[5]=s*u,t[9]=E*c-y,t[2]=y*c-E,t[6]=a*u,t[10]=T*c+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,s=e.w,a=n+n,o=i+i,l=r+r,u=n*a,c=n*o,f=n*l,h=i*o,p=i*l,d=r*l,m=s*a,b=s*o,g=s*l;return t[0]=1-(h+d),t[4]=c-g,t[8]=f+b,t[1]=c+g,t[5]=1-(u+d),t[9]=p-m,t[2]=f-b,t[6]=p+m,t[10]=1-(u+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,s){var a=this.elements;return n.subVectors(i,r).normalize(),0===n.length()&&(n.z=1),e.crossVectors(s,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(s,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],u=n[1],c=n[5],f=n[9],h=n[13],p=n[2],d=n[6],m=n[10],b=n[14],g=n[3],v=n[7],_=n[11],E=n[15],y=i[0],T=i[4],S=i[8],w=i[12],k=i[1],x=i[5],R=i[9],P=i[13],O=i[2],C=i[6],A=i[10],M=i[14],$=i[3],H=i[7],D=i[11],N=i[15];return r[0]=s*y+a*k+o*O+l*$,r[4]=s*T+a*x+o*C+l*H,r[8]=s*S+a*R+o*A+l*D,r[12]=s*w+a*P+o*M+l*N,r[1]=u*y+c*k+f*O+h*$,r[5]=u*T+c*x+f*C+h*H,r[9]=u*S+c*R+f*A+h*D,r[13]=u*w+c*P+f*M+h*N,r[2]=p*y+d*k+m*O+b*$,r[6]=p*T+d*x+m*C+b*H,r[10]=p*S+d*R+m*A+b*D,r[14]=p*w+d*P+m*M+b*N,r[3]=g*y+v*k+_*O+E*$,r[7]=g*T+v*x+_*C+E*H,r[11]=g*S+v*R+_*A+E*D,r[15]=g*w+v*P+_*M+E*N,this},multiplyToArray:function(e,t,n){var i=this.elements;return this.multiplyMatrices(e,t),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;
return function(t){for(var n=0,i=t.length;i>n;n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyProjection(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14],p=e[3],d=e[7],m=e[11],b=e[15];return p*(+r*o*c-i*l*c-r*a*f+n*l*f+i*a*h-n*o*h)+d*(+t*o*h-t*l*f+r*s*f-i*s*h+i*l*u-r*o*u)+m*(+t*l*c-t*a*h-r*s*c+n*s*h+r*a*u-n*l*u)+b*(-i*a*u-t*o*c+t*a*f+i*s*c-n*s*f+n*o*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],s=i[4],a=i[8],o=i[12],l=i[1],u=i[5],c=i[9],f=i[13],h=i[2],p=i[6],d=i[10],m=i[14],b=i[3],g=i[7],v=i[11],_=i[15];n[0]=c*m*g-f*d*g+f*p*v-u*m*v-c*p*_+u*d*_,n[4]=o*d*g-a*m*g-o*p*v+s*m*v+a*p*_-s*d*_,n[8]=a*f*g-o*c*g+o*u*v-s*f*v-a*u*_+s*c*_,n[12]=o*c*p-a*f*p-o*u*d+s*f*d+a*u*m-s*c*m,n[1]=f*d*b-c*m*b-f*h*v+l*m*v+c*h*_-l*d*_,n[5]=a*m*b-o*d*b+o*h*v-r*m*v-a*h*_+r*d*_,n[9]=o*c*b-a*f*b-o*l*v+r*f*v+a*l*_-r*c*_,n[13]=a*f*h-o*c*h+o*l*d-r*f*d-a*l*m+r*c*m,n[2]=u*m*b-f*p*b+f*h*g-l*m*g-u*h*_+l*p*_,n[6]=o*p*b-s*m*b-o*h*g+r*m*g+s*h*_-r*p*_,n[10]=s*f*b-o*u*b+o*l*g-r*f*g-s*l*_+r*u*_,n[14]=o*u*h-s*f*h-o*l*p+r*f*p+s*l*m-r*u*m,n[3]=c*p*b-u*d*b-c*h*g+l*d*g+u*h*v-l*p*v,n[7]=s*d*b-a*p*b+a*h*g-r*d*g-s*h*v+r*p*v,n[11]=a*u*b-s*c*b-a*l*g+r*c*g+s*l*v-r*u*v,n[15]=s*c*h-a*u*h+a*l*p-r*c*p-s*l*d+r*u*d;var E=r*n[0]+l*n[4]+h*n[8]+b*n[12];if(0==E){var y="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw Error(y);return console.warn(y),this.identity(),this}return this.multiplyScalar(1/E),this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,i)))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,u=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,u*a+n,u*o-i*s,0,l*o-i*a,u*o+i*s,r*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(n,i,r){var s=this.elements,a=e.set(s[0],s[1],s[2]).length(),o=e.set(s[4],s[5],s[6]).length(),l=e.set(s[8],s[9],s[10]).length();n.x=s[12],n.y=s[13],n.z=s[14],t.elements.set(this.elements);var u=1/a,c=1/o,f=1/l;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=f,t.elements[9]*=f,t.elements[10]*=f,i.setFromRotationMatrix(t),r.x=a,r.y=o,r.z=l,this}}(),makeFrustum:function(e,t,n,i,r,s){var a=this.elements,o=2*r/(t-e),l=2*r/(i-n),u=(t+e)/(t-e),c=(i+n)/(i-n),f=-(s+r)/(s-r),h=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,i){var r=n*Math.tan(THREE.Math.degToRad(.5*e)),s=-r,a=s*t,o=r*t;return this.makeFrustum(a,o,s,r,n,i)},makeOrthographic:function(e,t,n,i,r,s){var a=this.elements,o=t-e,l=n-i,u=s-r,c=(t+e)/o,f=(n+i)/l,h=(s+r)/u;return a[0]=2/o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2/u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new THREE.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var i=n.dot(this.direction);return 0>i?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,n,i){var r,s,a,o,l=e.clone().add(t).multiplyScalar(.5),u=t.clone().sub(e).normalize(),c=.5*e.distanceTo(t),f=this.origin.clone().sub(l),h=-this.direction.dot(u),p=f.dot(this.direction),d=-f.dot(u),m=f.lengthSq(),b=Math.abs(1-h*h);if(b>=0)if(r=h*d-p,s=h*p-d,o=c*b,r>=0)if(s>=-o)if(o>=s){var g=1/b;r*=g,s*=g,a=r*(r+h*s+2*p)+s*(h*r+s+2*d)+m}else s=c,r=Math.max(0,-(h*s+p)),a=-r*r+s*(s+2*d)+m;else s=-c,r=Math.max(0,-(h*s+p)),a=-r*r+s*(s+2*d)+m;else-o>=s?(r=Math.max(0,-(-h*c+p)),s=r>0?-c:Math.min(Math.max(-c,-d),c),a=-r*r+s*(s+2*d)+m):o>=s?(r=0,s=Math.min(Math.max(-c,-d),c),a=s*(s+2*d)+m):(r=Math.max(0,-(h*c+p)),s=r>0?c:Math.min(Math.max(-c,-d),c),a=-r*r+s*(s+2*d)+m);else s=h>0?-c:c,r=Math.max(0,-(h*s+p)),a=-r*r+s*(s+2*d)+m;return n&&n.copy(this.direction.clone().multiplyScalar(r).add(this.origin)),i&&i.copy(u.clone().multiplyScalar(s).add(l)),a},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return 0>n*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e){for(var t,n=0,i=0,r=e.length;r>i;i++)t=e[i].lengthSq(),n=Math.max(n,t);return this.center.set(0,0,0),this.radius=Math.sqrt(n),this},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return t*t>=e.center.distanceToSquared(this.center)},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),i=t||new THREE.Vector3;return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,n,i,r,s){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==s?s:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,i,r,s){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=n[9],p=n[10],d=n[11],m=n[12],b=n[13],g=n[14],v=n[15];return t[0].setComponents(a-i,c-o,d-f,v-m).normalize(),t[1].setComponents(a+i,c+o,d+f,v+m).normalize(),t[2].setComponents(a+r,c+l,d+h,v+b).normalize(),t[3].setComponents(a-r,c-l,d-h,v-b).normalize(),t[4].setComponents(a-s,c-u,d-p,v-g).normalize(),t[5].setComponents(a+s,c+u,d+p,v+g).normalize(),this},intersectsObject:function(){var e=new THREE.Vector3;return function(t){var n=t.geometry,i=t.matrixWorld;null===n.boundingSphere&&n.computeBoundingSphere();var r=-n.boundingSphere.radius*i.getMaxScaleOnAxis();e.getPositionFromMatrix(i);for(var s=this.planes,a=0;6>a;a++){var o=s[a].distanceToPoint(e);if(r>o)return!1}return!0}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;6>r;r++){var s=t[r].distanceToPoint(n);if(i>s)return!1}return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){for(var i=this.planes,r=0;6>r;r++){var s=i[r];e.x=s.normal.x>0?n.min.x:n.max.x,t.x=s.normal.x>0?n.max.x:n.min.x,e.y=s.normal.y>0?n.min.y:n.max.y,t.y=s.normal.y>0?n.max.y:n.min.y,e.z=s.normal.z>0?n.min.z:n.max.z,t.z=s.normal.z>0?n.max.z:n.min.z;var a=s.distanceToPoint(e),o=s.distanceToPoint(t);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i,r){var s=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),i=t||new THREE.Vector3;return i.copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return 0>t&&n>0||0>n&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var i=n||new THREE.Vector3,r=t.delta(e),s=this.normal.dot(r);if(0==s)return 0==this.distanceToPoint(t.start)?i.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/s;return 0>a||a>1?void 0:i.copy(r).multiplyScalar(a).add(t.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i){i=i||(new THREE.Matrix3).getNormalMatrix(n);var r=e.copy(this.normal).applyMatrix3(i),s=this.coplanarPoint(t);return s.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(r,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={PI2:2*Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),i=0;return function(){for(var r=0;36>r;r++)8==r||13==r||18==r||23==r?n[r]="-":14==r?n[r]="4":(2>=i&&(i=0|33554432+16777216*Math.random()),e=15&i,i>>=4,n[r]=t[19==r?8|3&e:e]);return n.join("")}}(),clamp:function(e,t,n){return t>e?t:e>n?n:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},smoothstep:function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return t>=e?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return 0>e?-1:e>0?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}()},THREE.Spline=function(e){function t(e,t,n,i,r,s,a){var o=.5*(n-e),l=.5*(i-t);return(2*(t-n)+o+l)*a+(-3*(t-n)-2*o-l)*s+o*r+t}this.points=e;var n,i,r,s,a,o,l,u,c,f=[],h={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;e.length>t;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,i=Math.floor(n),r=n-i,f[0]=0===i?i:i-1,f[1]=i,f[2]=i>this.points.length-2?this.points.length-1:i+1,f[3]=i>this.points.length-3?this.points.length-1:i+2,o=this.points[f[0]],l=this.points[f[1]],u=this.points[f[2]],c=this.points[f[3]],s=r*r,a=r*s,h.x=t(o.x,l.x,u.x,c.x,r,s,a),h.y=t(o.y,l.y,u.y,c.y,r,s,a),h.z=t(o.z,l.z,u.z,c.z,r,s,a),h},this.getControlPointsArray=function(){var e,t,n=this.points.length,i=[];for(e=0;n>e;e++)t=this.points[e],i[e]=[t.x,t.y,t.z];return i},this.getLength=function(e){var t,n,i,r,s=0,a=0,o=0,l=new THREE.Vector3,u=new THREE.Vector3,c=[],f=0;for(c[0]=0,e||(e=100),i=this.points.length*e,l.copy(this.points[0]),t=1;i>t;t++)n=t/i,r=this.getPoint(n),u.copy(r),f+=u.distanceTo(l),l.copy(r),s=(this.points.length-1)*n,a=Math.floor(s),a!=o&&(c[a]=f,o=a);return c[c.length]=f,{chunks:c,total:f}},this.reparametrizeByArcLength=function(e){var t,n,i,r,s,a,o,l,u=[],c=new THREE.Vector3,f=this.getLength();for(u.push(c.copy(this.points[0]).clone()),t=1;this.points.length>t;t++){for(a=f.chunks[t]-f.chunks[t-1],o=Math.ceil(e*a/f.total),r=(t-1)/(this.points.length-1),s=t/(this.points.length-1),n=1;o-1>n;n++)i=r+n*(1/o)*(s-r),l=this.getPoint(i),u.push(c.copy(l).clone());u.push(c.copy(this.points[t]).clone())}this.points=u}},THREE.Triangle=function(e,t,n){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==n?n:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,i,r){var s=r||new THREE.Vector3;s.subVectors(i,n),e.subVectors(t,n),s.cross(e);var a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,s,a,o){e.subVectors(a,r),t.subVectors(s,r),n.subVectors(i,r);var l=e.dot(e),u=e.dot(t),c=e.dot(n),f=t.dot(t),h=t.dot(n),p=l*f-u*u,d=o||new THREE.Vector3;if(0==p)return d.set(-2,-1,-1);var m=1/p,b=(f*c-u*h)*m,g=(l*h-u*c)*m;return d.set(1-b-g,g,b)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,i,r){var s=THREE.Triangle.barycoordFromPoint(t,n,i,r,e);return s.x>=0&&s.y>=0&&1>=s.x+s.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Vertex=function(e){return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),e},THREE.UV=function(e,t){return console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead."),new THREE.Vector2(e,t)},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var i=0,r=n.length;r>i;i++)n[i].call(this,e)}}}},function(e){e.Raycaster=function(t,n,i,r){this.ray=new e.Ray(t,n),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=i||0,this.far=r||1/0};var t=new e.Sphere,n=new e.Ray,i=new e.Plane,r=new e.Vector3,s=new e.Vector3,a=new e.Matrix4,o=function(e,t){return e.distance-t.distance},l=function(o,u,c){if(o instanceof e.Particle){s.getPositionFromMatrix(o.matrixWorld);var f=u.ray.distanceToPoint(s);if(f>o.scale.x)return c;c.push({distance:f,point:o.position,face:null,object:o})}else if(o instanceof e.LOD){s.getPositionFromMatrix(o.matrixWorld);var f=u.ray.origin.distanceTo(s);l(o.getObjectForDistance(f),u,c)}else if(o instanceof e.Mesh){var h=o.geometry;if(s.getPositionFromMatrix(o.matrixWorld),null===h.boundingSphere&&h.computeBoundingSphere(),t.set(s,h.boundingSphere.radius*o.matrixWorld.getMaxScaleOnAxis()),u.ray.isIntersectionSphere(t)===!1)return c;var p=h.vertices;if(h instanceof e.BufferGeometry){var d=o.material;if(void 0===d)return c;if(h.dynamic===!1)return c;var m,b,g,v=o.material instanceof e.MeshFaceMaterial,_=v===!0?o.material.materials:null,E=o.material.side,y=u.precision;a.getInverse(o.matrixWorld),n.copy(u.ray).applyMatrix4(a);var T,S=!1;h.attributes.index?(S=!0,T=h.attributes.index.numItems/3):T=h.attributes.position.numItems/9;var w=new e.Vector3,k=new e.Vector3,x=new e.Vector3;new e.Vector3,new e.Vector3;for(var R=0;h.offsets.length>R;++R)for(var P=h.offsets[R].start,O=h.offsets[R].count,C=h.offsets[R].index,A=P,M=P+O;M>A;A+=3){S?(m=C+h.attributes.index.array[A],b=C+h.attributes.index.array[A+1],g=C+h.attributes.index.array[A+2]):(m=C,b=C+1,g=C+2),w.set(h.attributes.position.array[3*m],h.attributes.position.array[3*m+1],h.attributes.position.array[3*m+2]),k.set(h.attributes.position.array[3*b],h.attributes.position.array[3*b+1],h.attributes.position.array[3*b+2]),x.set(h.attributes.position.array[3*g],h.attributes.position.array[3*g+1],h.attributes.position.array[3*g+2]),i.setFromCoplanarPoints(w,k,x);var $=n.distanceToPlane(i);if(!(y>$)&&null!==$){if(E=d.side,E!==e.DoubleSide){var H=n.direction.dot(i.normal);if(!(E===e.FrontSide?0>H:H>0))continue}u.near>$||$>u.far||(r=n.at($,r),e.Triangle.containsPoint(r,w,k,x)!==!1&&c.push({distance:$,point:u.ray.at($),face:null,faceIndex:null,object:o}))}}}else if(h instanceof e.Geometry){var m,b,g,D,v=o.material instanceof e.MeshFaceMaterial,_=v===!0?o.material.materials:null,E=o.material.side,y=u.precision;a.getInverse(o.matrixWorld),n.copy(u.ray).applyMatrix4(a);for(var N=0,T=h.faces.length;T>N;N++){var I=h.faces[N],d=v===!0?_[I.materialIndex]:o.material;if(void 0!==d){i.setFromNormalAndCoplanarPoint(I.normal,p[I.a]);var $=n.distanceToPlane(i);if(!(y>$)&&null!==$){if(E=d.side,E!==e.DoubleSide){var H=n.direction.dot(i.normal);if(!(E===e.FrontSide?0>H:H>0))continue}if(!(u.near>$||$>u.far)){if(r=n.at($,r),I instanceof e.Face3){if(m=p[I.a],b=p[I.b],g=p[I.c],e.Triangle.containsPoint(r,m,b,g)===!1)continue}else{if(!(I instanceof e.Face4))throw Error("face type not supported");if(m=p[I.a],b=p[I.b],g=p[I.c],D=p[I.d],e.Triangle.containsPoint(r,m,b,D)===!1&&e.Triangle.containsPoint(r,b,g,D)===!1)continue}c.push({distance:$,point:u.ray.at($),face:I,faceIndex:N,object:o})}}}}}}else if(o instanceof e.Line){var y=u.linePrecision,L=y*y,h=o.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),s.getPositionFromMatrix(o.matrixWorld),t.set(s,h.boundingSphere.radius*o.matrixWorld.getMaxScaleOnAxis()),u.ray.isIntersectionSphere(t)===!1)return c;a.getInverse(o.matrixWorld),n.copy(u.ray).applyMatrix4(a),n.direction.normalize();for(var p=h.vertices,z=p.length,U=new e.Vector3,F=new e.Vector3,B=o.type===e.LineStrip?1:2,A=0;z-1>A;A+=B){var G=n.distanceSqToSegment(p[A],p[A+1],F,U);if(L>=G){var f=n.origin.distanceTo(F);f>=u.near&&u.far>=f&&c.push({distance:f,point:U.clone().applyMatrix4(o.matrixWorld),face:null,faceIndex:null,object:o})}}}},u=function(e,t,n){for(var i=e.getDescendants(),r=0,s=i.length;s>r;r++)l(i[r],t,n)};e.Raycaster.prototype.precision=1e-4,e.Raycaster.prototype.linePrecision=1,e.Raycaster.prototype.set=function(e,t){this.ray.set(e,t),this.ray.direction.length()>0&&this.ray.direction.normalize()},e.Raycaster.prototype.intersectObject=function(e,t){var n=[];return t===!0&&u(e,this,n),l(e,this,n),n.sort(o),n},e.Raycaster.prototype.intersectObjects=function(e,t){for(var n=[],i=0,r=e.length;r>i;i++)l(e[i],this,n),t===!0&&u(e[i],this,n);return n.sort(o),n}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Euler,this.quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this.rotation._quaternion=this.quaternion,this.quaternion._euler=this.rotation,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(){var e=new THREE.Matrix4;return function(t){this.matrix.multiplyMatrices(t,this.matrix),this.position.getPositionFromMatrix(this.matrix),this.scale.getScaleFromMatrix(this.matrix),e.extractRotation(this.matrix),this.quaternion.setFromRotationMatrix(e)}}(),setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){return e.copy(t),e.applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(e===this)return console.warn("THREE.Object3D.add: An object can't be added as a child of itself."),void 0;if(e instanceof THREE.Object3D){void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1);for(var n=this;void 0!==n.parent;)n=n.parent;void 0!==n&&n instanceof THREE.Scene&&n.__removeObject(e)}},traverse:function(e){e(this);for(var t=0,n=this.children.length;n>t;t++)this.children[t].traverse(e)},getObjectById:function(e,t){for(var n=0,i=this.children.length;i>n;n++){var r=this.children[n];if(r.id===e)return r;if(t===!0&&(r=r.getObjectById(e,t),void 0!==r))return r}return void 0},getObjectByName:function(e,t){for(var n=0,i=this.children.length;i>n;n++){var r=this.children[n];if(r.name===e)return r;if(t===!0&&(r=r.getObjectByName(e,t),void 0!==r))return r}return void 0},getChildByName:function(e,t){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getDescendants:function(e){void 0===e&&(e=[]),Array.prototype.push.apply(e,this.children);for(var t=0,n=this.children.length;n>t;t++)this.children[t].getDescendants(e);return e},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;n>t;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var n=0;this.children.length>n;n++){var i=this.children[n];e.add(i.clone())}return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function e(){if(u===y){var e=new THREE.RenderableObject;return E.push(e),y++,u++,e}return E[u++]}function t(){if(f===S){var e=new THREE.RenderableVertex;return T.push(e),S++,f++,e}return T[f++]}function n(){if(p===k){var e=new THREE.RenderableFace3;return w.push(e),k++,p++,e}return w[p++]}function i(){if(d===R){var e=new THREE.RenderableFace4;return x.push(e),R++,d++,e}return x[d++]}function r(){if(b===O){var e=new THREE.RenderableLine;return P.push(e),O++,b++,e
}return P[b++]}function s(){if(v===A){var e=new THREE.RenderableParticle;return C.push(e),A++,v++,e}return C[v++]}function a(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function o(e,t){var n=0,i=1,r=e.z+e.w,s=t.z+t.w,a=-e.z+e.w,o=-t.z+t.w;return r>=0&&s>=0&&a>=0&&o>=0?!0:0>r&&0>s||0>a&&0>o?!1:(0>r?n=Math.max(n,r/(r-s)):0>s&&(i=Math.min(i,r/(r-s))),0>a?n=Math.max(n,a/(a-o)):0>o&&(i=Math.min(i,a/(a-o))),n>i?!1:(e.lerp(t,n),t.lerp(e,1-i),!0))}var l,u,c,f,h,p,d,m,b,g,v,_,E=[],y=0,T=[],S=0,w=[],k=0,x=[],R=0,P=[],O=0,C=[],A=0,M={objects:[],sprites:[],lights:[],elements:[]},$=new THREE.Vector3,H=new THREE.Vector4,D=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),N=new THREE.Box3,I=Array(3),L=Array(4),z=new THREE.Matrix4,U=new THREE.Matrix4,F=new THREE.Matrix4,B=new THREE.Matrix3,G=new THREE.Matrix3,j=new THREE.Vector3,V=new THREE.Frustum,W=new THREE.Vector4,J=new THREE.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection(U)},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),U.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),e.applyProjection(U)},this.pickingRay=function(e,t){e.z=-1;var n=new THREE.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(n,t),n.sub(e).normalize(),new THREE.Raycaster(e,n)};var Y=function(t){return l=e(),l.id=t.id,l.object=t,null!==t.renderDepth?l.z=t.renderDepth:($.getPositionFromMatrix(t.matrixWorld),$.applyProjection(U),l.z=$.z),l},q=function(e){if(e.visible!==!1){e instanceof THREE.Light?M.lights.push(e):e instanceof THREE.Mesh||e instanceof THREE.Line?(e.frustumCulled===!1||V.intersectsObject(e)===!0)&&M.objects.push(Y(e)):(e instanceof THREE.Sprite||e instanceof THREE.Particle)&&M.sprites.push(Y(e));for(var t=0,n=e.children.length;n>t;t++)q(e.children[t])}},X=function(e,t){u=0,M.objects.length=0,M.sprites.length=0,M.lights.length=0,q(e),t===!0&&M.objects.sort(a)};this.projectScene=function(e,l,u,E){var y,S,w,k,x,R,P,O,C,A,$,Y,q,K,Q,Z,et,tt,nt,it,rt,st,at,ot,lt,ut,ct=!1;for(p=0,d=0,b=0,v=0,M.elements.length=0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===l.parent&&l.updateMatrixWorld(),z.copy(l.matrixWorldInverse.getInverse(l.matrixWorld)),U.multiplyMatrices(l.projectionMatrix,z),G.getNormalMatrix(z),V.setFromMatrix(U),X(e,u),y=0,S=M.objects.length;S>y;y++)if(q=M.objects[y].object,_=q.matrixWorld,f=0,q instanceof THREE.Mesh){for(K=q.geometry,Q=K.vertices,Z=K.faces,nt=K.faceVertexUvs,B.getNormalMatrix(_),lt=q.material instanceof THREE.MeshFaceMaterial,ut=lt===!0?q.material:null,w=0,k=Q.length;k>w;w++){c=t(),c.positionWorld.copy(Q[w]).applyMatrix4(_),c.positionScreen.copy(c.positionWorld).applyMatrix4(U);var ft=1/c.positionScreen.w;c.positionScreen.x*=ft,c.positionScreen.y*=ft,c.positionScreen.z*=ft,c.visible=!(-1>c.positionScreen.x||c.positionScreen.x>1||-1>c.positionScreen.y||c.positionScreen.y>1||-1>c.positionScreen.z||c.positionScreen.z>1)}for(x=0,R=Z.length;R>x;x++){et=Z[x];var ht=lt===!0?ut.materials[et.materialIndex]:q.material;if(void 0!==ht){var pt=ht.side;if(et instanceof THREE.Face3){if(rt=T[et.a],st=T[et.b],at=T[et.c],I[0]=rt.positionScreen,I[1]=st.positionScreen,I[2]=at.positionScreen,rt.visible!==!0&&st.visible!==!0&&at.visible!==!0&&!D.isIntersectionBox(N.setFromPoints(I)))continue;if(ct=0>(at.positionScreen.x-rt.positionScreen.x)*(st.positionScreen.y-rt.positionScreen.y)-(at.positionScreen.y-rt.positionScreen.y)*(st.positionScreen.x-rt.positionScreen.x),pt!==THREE.DoubleSide&&ct!==(pt===THREE.FrontSide))continue;h=n(),h.id=q.id,h.v1.copy(rt),h.v2.copy(st),h.v3.copy(at)}else if(et instanceof THREE.Face4){if(rt=T[et.a],st=T[et.b],at=T[et.c],ot=T[et.d],L[0]=rt.positionScreen,L[1]=st.positionScreen,L[2]=at.positionScreen,L[3]=ot.positionScreen,rt.visible!==!0&&st.visible!==!0&&at.visible!==!0&&ot.visible!==!0&&!D.isIntersectionBox(N.setFromPoints(L)))continue;if(ct=0>(ot.positionScreen.x-rt.positionScreen.x)*(st.positionScreen.y-rt.positionScreen.y)-(ot.positionScreen.y-rt.positionScreen.y)*(st.positionScreen.x-rt.positionScreen.x)||0>(st.positionScreen.x-at.positionScreen.x)*(ot.positionScreen.y-at.positionScreen.y)-(st.positionScreen.y-at.positionScreen.y)*(ot.positionScreen.x-at.positionScreen.x),pt!==THREE.DoubleSide&&ct!==(pt===THREE.FrontSide))continue;h=i(),h.id=q.id,h.v1.copy(rt),h.v2.copy(st),h.v3.copy(at),h.v4.copy(ot)}for(h.normalModel.copy(et.normal),ct!==!1||pt!==THREE.BackSide&&pt!==THREE.DoubleSide||h.normalModel.negate(),h.normalModel.applyMatrix3(B).normalize(),h.normalModelView.copy(h.normalModel).applyMatrix3(G),h.centroidModel.copy(et.centroid).applyMatrix4(_),tt=et.vertexNormals,P=0,O=tt.length;O>P;P++){var dt=h.vertexNormalsModel[P];dt.copy(tt[P]),ct!==!1||pt!==THREE.BackSide&&pt!==THREE.DoubleSide||dt.negate(),dt.applyMatrix3(B).normalize();var mt=h.vertexNormalsModelView[P];mt.copy(dt).applyMatrix3(G)}for(h.vertexNormalsLength=tt.length,C=0,A=nt.length;A>C;C++)if(it=nt[C][x],void 0!==it)for($=0,Y=it.length;Y>$;$++)h.uvs[C][$]=it[$];h.color=et.color,h.material=ht,j.copy(h.centroidModel).applyProjection(U),h.z=j.z,M.elements.push(h)}}}else if(q instanceof THREE.Line){F.multiplyMatrices(U,_),Q=q.geometry.vertices,rt=t(),rt.positionScreen.copy(Q[0]).applyMatrix4(F);var bt=q.type===THREE.LinePieces?2:1;for(w=1,k=Q.length;k>w;w++)rt=t(),rt.positionScreen.copy(Q[w]).applyMatrix4(F),(w+1)%bt>0||(st=T[f-2],W.copy(rt.positionScreen),J.copy(st.positionScreen),o(W,J)===!0&&(W.multiplyScalar(1/W.w),J.multiplyScalar(1/J.w),m=r(),m.id=q.id,m.v1.positionScreen.copy(W),m.v2.positionScreen.copy(J),m.z=Math.max(W.z,J.z),m.material=q.material,q.material.vertexColors===THREE.VertexColors&&(m.vertexColors[0].copy(q.geometry.colors[w]),m.vertexColors[1].copy(q.geometry.colors[w-1])),M.elements.push(m)))}for(y=0,S=M.sprites.length;S>y;y++)if(q=M.sprites[y].object,_=q.matrixWorld,q instanceof THREE.Particle){H.set(_.elements[12],_.elements[13],_.elements[14],1),H.applyMatrix4(U);var ft=1/H.w;H.z*=ft,H.z>0&&1>H.z&&(g=s(),g.id=q.id,g.x=H.x*ft,g.y=H.y*ft,g.z=H.z,g.object=q,g.rotation=q.rotation.z,g.scale.x=q.scale.x*Math.abs(g.x-(H.x+l.projectionMatrix.elements[0])/(H.w+l.projectionMatrix.elements[12])),g.scale.y=q.scale.y*Math.abs(g.y-(H.y+l.projectionMatrix.elements[5])/(H.w+l.projectionMatrix.elements[13])),g.material=q.material,M.elements.push(g))}return E===!0&&M.elements.sort(a),M}},THREE.Face3=function(e,t,n,i,r,s){this.a=e,this.b=t,this.c=n,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=r instanceof THREE.Color?r:new THREE.Color,this.vertexColors=r instanceof Array?r:[],this.vertexTangents=[],this.materialIndex=void 0!==s?s:0,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.centroid.copy(this.centroid),e.materialIndex=this.materialIndex;var t,n;for(t=0,n=this.vertexNormals.length;n>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,n=this.vertexColors.length;n>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,n=this.vertexTangents.length;n>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,n,i,r,s,a){this.a=e,this.b=t,this.c=n,this.d=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=s instanceof THREE.Color?s:new THREE.Color,this.vertexColors=s instanceof Array?s:[],this.vertexTangents=[],this.materialIndex=void 0!==a?a:0,this.centroid=new THREE.Vector3},THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var e=new THREE.Face4(this.a,this.b,this.c,this.d);e.normal.copy(this.normal),e.color.copy(this.color),e.centroid.copy(this.centroid),e.materialIndex=this.materialIndex;var t,n;for(t=0,n=this.vertexNormals.length;n>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,n=this.vertexColors.length;n>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,n=this.vertexTangents.length;n>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.normals=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),n=0,i=this.vertices.length;i>n;n++){var r=this.vertices[n];r.applyMatrix4(e)}for(var n=0,i=this.faces.length;i>n;n++){var s=this.faces[n];s.normal.applyMatrix3(t).normalize();for(var a=0,o=s.vertexNormals.length;o>a;a++)s.vertexNormals[a].applyMatrix3(t).normalize();s.centroid.applyMatrix4(e)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var e,t,n;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n.centroid.set(0,0,0),n instanceof THREE.Face3?(n.centroid.add(this.vertices[n.a]),n.centroid.add(this.vertices[n.b]),n.centroid.add(this.vertices[n.c]),n.centroid.divideScalar(3)):n instanceof THREE.Face4&&(n.centroid.add(this.vertices[n.a]),n.centroid.add(this.vertices[n.b]),n.centroid.add(this.vertices[n.c]),n.centroid.add(this.vertices[n.d]),n.centroid.divideScalar(4))},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,n=0,i=this.faces.length;i>n;n++){var r=this.faces[n],s=this.vertices[r.a],a=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,s,a;if(void 0===this.__tmpVertices){for(this.__tmpVertices=Array(this.vertices.length),a=this.__tmpVertices,t=0,n=this.vertices.length;n>t;t++)a[t]=new THREE.Vector3;for(i=0,r=this.faces.length;r>i;i++)s=this.faces[i],s instanceof THREE.Face3?s.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:s instanceof THREE.Face4&&(s.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(a=this.__tmpVertices,t=0,n=this.vertices.length;n>t;t++)a[t].set(0,0,0);if(e){var o,l,u,c,f=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3,m=new THREE.Vector3;for(i=0,r=this.faces.length;r>i;i++)s=this.faces[i],s instanceof THREE.Face3?(o=this.vertices[s.a],l=this.vertices[s.b],u=this.vertices[s.c],f.subVectors(u,l),h.subVectors(o,l),f.cross(h),a[s.a].add(f),a[s.b].add(f),a[s.c].add(f)):s instanceof THREE.Face4&&(o=this.vertices[s.a],l=this.vertices[s.b],u=this.vertices[s.c],c=this.vertices[s.d],p.subVectors(c,l),h.subVectors(o,l),p.cross(h),a[s.a].add(p),a[s.b].add(p),a[s.d].add(p),d.subVectors(c,u),m.subVectors(l,u),d.cross(m),a[s.b].add(d),a[s.c].add(d),a[s.d].add(d))}else for(i=0,r=this.faces.length;r>i;i++)s=this.faces[i],s instanceof THREE.Face3?(a[s.a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal)):s instanceof THREE.Face4&&(a[s.a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal),a[s.d].add(s.normal));for(t=0,n=this.vertices.length;n>t;t++)a[t].normalize();for(i=0,r=this.faces.length;r>i;i++)s=this.faces[i],s instanceof THREE.Face3?(s.vertexNormals[0].copy(a[s.a]),s.vertexNormals[1].copy(a[s.b]),s.vertexNormals[2].copy(a[s.c])):s instanceof THREE.Face4&&(s.vertexNormals[0].copy(a[s.a]),s.vertexNormals[1].copy(a[s.b]),s.vertexNormals[2].copy(a[s.c]),s.vertexNormals[3].copy(a[s.d]))},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;i>n;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;t>e;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var s=new THREE.Geometry;for(s.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,o,l=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;i>n;n++)r=this.faces[n],a=new THREE.Vector3,o=r instanceof THREE.Face3?{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3}:{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3,d:new THREE.Vector3},l.push(a),u.push(o)}var c=this.morphNormals[e];s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals();var a,o;for(n=0,i=this.faces.length;i>n;n++)r=this.faces[n],a=c.faceNormals[n],o=c.vertexNormals[n],a.copy(r.normal),r instanceof THREE.Face3?(o.a.copy(r.vertexNormals[0]),o.b.copy(r.vertexNormals[1]),o.c.copy(r.vertexNormals[2])):(o.a.copy(r.vertexNormals[0]),o.b.copy(r.vertexNormals[1]),o.c.copy(r.vertexNormals[2]),o.d.copy(r.vertexNormals[3]))}for(n=0,i=this.faces.length;i>n;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeTangents:function(){function e(e,t,n,i,r,s,a){u=e.vertices[t],c=e.vertices[n],f=e.vertices[i],h=l[r],p=l[s],d=l[a],m=c.x-u.x,b=f.x-u.x,g=c.y-u.y,v=f.y-u.y,_=c.z-u.z,E=f.z-u.z,y=p.x-h.x,T=d.x-h.x,S=p.y-h.y,w=d.y-h.y,k=1/(y*w-T*S),A.set((w*m-S*b)*k,(w*g-S*v)*k,(w*_-S*E)*k),M.set((y*b-T*m)*k,(y*v-T*g)*k,(y*E-T*_)*k),O[t].add(A),O[n].add(A),O[i].add(A),C[t].add(M),C[n].add(M),C[i].add(M)}var t,n,i,r,s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w,k,x,R,P,O=[],C=[],A=new THREE.Vector3,M=new THREE.Vector3,$=new THREE.Vector3,H=new THREE.Vector3,D=new THREE.Vector3;for(i=0,r=this.vertices.length;r>i;i++)O[i]=new THREE.Vector3,C[i]=new THREE.Vector3;for(t=0,n=this.faces.length;n>t;t++)o=this.faces[t],l=this.faceVertexUvs[0][t],o instanceof THREE.Face3?e(this,o.a,o.b,o.c,0,1,2):o instanceof THREE.Face4&&(e(this,o.a,o.b,o.d,0,1,3),e(this,o.b,o.c,o.d,1,2,3));var N=["a","b","c","d"];for(t=0,n=this.faces.length;n>t;t++)for(o=this.faces[t],s=0;o.vertexNormals.length>s;s++)D.copy(o.vertexNormals[s]),a=o[N[s]],x=O[a],$.copy(x),$.sub(D.multiplyScalar(D.dot(x))).normalize(),H.crossVectors(o.vertexNormals[s],x),R=H.dot(C[a]),P=0>R?-1:1,o.vertexTangents[s]=new THREE.Vector4($.x,$.y,$.z,P);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,i=t.length;i>n;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var e,t,n,i,r,s,a,o,l,u={},c=[],f=[],h=4,p=Math.pow(10,h);for(this.__tmpVertices=void 0,n=0,i=this.vertices.length;i>n;n++)e=this.vertices[n],t=Math.round(e.x*p)+"_"+Math.round(e.y*p)+"_"+Math.round(e.z*p),void 0===u[t]?(u[t]=n,c.push(this.vertices[n]),f[n]=c.length-1):f[n]=f[u[t]];var d=[];for(n=0,i=this.faces.length;i>n;n++)if(r=this.faces[n],r instanceof THREE.Face3){r.a=f[r.a],r.b=f[r.b],r.c=f[r.c],s=[r.a,r.b,r.c];for(var m=-1,b=0;3>b;b++)if(s[b]==s[(b+1)%3]){m=b,d.push(n);break}}else if(r instanceof THREE.Face4){r.a=f[r.a],r.b=f[r.b],r.c=f[r.c],r.d=f[r.d],s=[r.a,r.b,r.c,r.d];for(var m=-1,b=0;4>b;b++)s[b]==s[(b+1)%4]&&(m>=0&&d.push(n),m=b);if(m>=0){s.splice(m,1);var g=new THREE.Face3(s[0],s[1],s[2],r.normal,r.color,r.materialIndex);for(a=0,o=this.faceVertexUvs.length;o>a;a++)l=this.faceVertexUvs[a][n],l&&l.splice(m,1);r.vertexNormals&&r.vertexNormals.length>0&&(g.vertexNormals=r.vertexNormals,g.vertexNormals.splice(m,1)),r.vertexColors&&r.vertexColors.length>0&&(g.vertexColors=r.vertexColors,g.vertexColors.splice(m,1)),this.faces[n]=g}}for(n=d.length-1;n>=0;n--)for(this.faces.splice(n,1),a=0,o=this.faceVertexUvs.length;o>a;a++)this.faceVertexUvs[a].splice(n,1);var v=this.vertices.length-c.length;return this.vertices=c,v},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,n=0,i=t.length;i>n;n++)e.vertices.push(t[n].clone());for(var r=this.faces,n=0,i=r.length;i>n;n++)e.faces.push(r[n].clone());for(var s=this.faceVertexUvs[0],n=0,i=s.length;i>n;n++){for(var a=s[n],o=[],l=0,u=a.length;u>l;l++)o.push(new THREE.Vector2(a[l].x,a[l].y));e.faceVertexUvs[0].push(o)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.attributes={},this.dynamic=!1,this.offsets=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,applyMatrix:function(e){var t,n;if(this.attributes.position&&(t=this.attributes.position.array),this.attributes.normal&&(n=this.attributes.normal.array),void 0!==t&&(e.multiplyVector3Array(t),this.verticesNeedUpdate=!0),void 0!==n){var i=(new THREE.Matrix3).getNormalMatrix(e);i.multiplyVector3Array(n),this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var t,n,i,r=this.boundingBox;e.length>=3&&(r.min.x=r.max.x=e[0],r.min.y=r.max.y=e[1],r.min.z=r.max.z=e[2]);for(var s=3,a=e.length;a>s;s+=3)t=e[s],n=e[s+1],i=e[s+2],r.min.x>t?r.min.x=t:t>r.max.x&&(r.max.x=t),r.min.y>n?r.min.y=n:n>r.max.y&&(r.max.y=n),r.min.z>i?r.min.z=i:i>r.max.z&&(r.max.z=i)}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array;if(e){for(var t,n,i,r,s=0,a=0,o=e.length;o>a;a+=3)n=e[a],i=e[a+1],r=e[a+2],t=n*n+i*i+r*r,t>s&&(s=t);this.boundingSphere.radius=Math.sqrt(s)}},computeVertexNormals:function(){if(this.attributes.position){var e,t,n,i,r=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(r)};else for(e=0,t=this.attributes.normal.array.length;t>e;e++)this.attributes.normal.array[e]=0;var s,a,o,l,u,c,f=this.attributes.position.array,h=this.attributes.normal.array,p=new THREE.Vector3,d=new THREE.Vector3,m=new THREE.Vector3,b=new THREE.Vector3,g=new THREE.Vector3;if(this.attributes.index){var v=this.attributes.index.array,_=this.offsets;for(n=0,i=_.length;i>n;++n){var E=_[n].start,y=_[n].count,T=_[n].index;for(e=E,t=E+y;t>e;e+=3)s=T+v[e],a=T+v[e+1],o=T+v[e+2],l=f[3*s],u=f[3*s+1],c=f[3*s+2],p.set(l,u,c),l=f[3*a],u=f[3*a+1],c=f[3*a+2],d.set(l,u,c),l=f[3*o],u=f[3*o+1],c=f[3*o+2],m.set(l,u,c),b.subVectors(m,d),g.subVectors(p,d),b.cross(g),h[3*s]+=b.x,h[3*s+1]+=b.y,h[3*s+2]+=b.z,h[3*a]+=b.x,h[3*a+1]+=b.y,h[3*a+2]+=b.z,h[3*o]+=b.x,h[3*o+1]+=b.y,h[3*o+2]+=b.z}}else for(e=0,t=f.length;t>e;e+=9)l=f[e],u=f[e+1],c=f[e+2],p.set(l,u,c),l=f[e+3],u=f[e+4],c=f[e+5],d.set(l,u,c),l=f[e+6],u=f[e+7],c=f[e+8],m.set(l,u,c),b.subVectors(m,d),g.subVectors(p,d),b.cross(g),h[e]=b.x,h[e+1]=b.y,h[e+2]=b.z,h[e+3]=b.x,h[e+4]=b.y,h[e+5]=b.z,h[e+6]=b.x,h[e+7]=b.y,h[e+8]=b.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var e,t,n,i,r=this.attributes.normal.array,s=0,a=r.length;a>s;s+=3)e=r[s],t=r[s+1],n=r[s+2],i=1/Math.sqrt(e*e+t*t+n*n),r[s]*=i,r[s+1]*=i,r[s+2]*=i},computeTangents:function(){function e(e,t,n){h=i[3*e],p=i[3*e+1],d=i[3*e+2],m=i[3*t],b=i[3*t+1],g=i[3*t+2],v=i[3*n],_=i[3*n+1],E=i[3*n+2],y=s[2*e],T=s[2*e+1],S=s[2*t],w=s[2*t+1],k=s[2*n],x=s[2*n+1],R=m-h,P=v-h,O=b-p,C=_-p,A=g-d,M=E-d,$=S-y,H=k-y,D=w-T,N=x-T,I=1/($*N-H*D),V.set((N*R-D*P)*I,(N*O-D*C)*I,(N*A-D*M)*I),W.set(($*P-H*R)*I,($*C-H*O)*I,($*M-H*A)*I),u[e].add(V),u[t].add(V),u[n].add(V),c[e].add(W),c[t].add(W),c[n].add(W)}function t(e){nt.x=r[3*e],nt.y=r[3*e+1],nt.z=r[3*e+2],it.copy(nt),Q=u[e],et.copy(Q),et.sub(nt.multiplyScalar(nt.dot(Q))).normalize(),tt.crossVectors(it,Q),Z=tt.dot(c[e]),K=0>Z?-1:1,l[4*e]=et.x,l[4*e+1]=et.y,l[4*e+2]=et.z,l[4*e+3]=K}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()"),void 0;var n=this.attributes.index.array,i=this.attributes.position.array,r=this.attributes.normal.array,s=this.attributes.uv.array,a=i.length/3;if(void 0===this.attributes.tangent){var o=4*a;this.attributes.tangent={itemSize:4,array:new Float32Array(o)}}for(var l=this.attributes.tangent.array,u=[],c=[],f=0;a>f;f++)u[f]=new THREE.Vector3,c[f]=new THREE.Vector3;var h,p,d,m,b,g,v,_,E,y,T,S,w,k,x,R,P,O,C,A,M,$,H,D,N,I,L,z,U,F,B,G,j,V=new THREE.Vector3,W=new THREE.Vector3,J=this.offsets;for(U=0,F=J.length;F>U;++U){var Y=J[U].start,q=J[U].count,X=J[U].index;for(L=Y,z=Y+q;z>L;L+=3)B=X+n[L],G=X+n[L+1],j=X+n[L+2],e(B,G,j)}var K,Q,Z,et=new THREE.Vector3,tt=new THREE.Vector3,nt=new THREE.Vector3,it=new THREE.Vector3;for(U=0,F=J.length;F>U;++U){var Y=J[U].start,q=J[U].count,X=J[U].index;for(L=Y,z=Y+q;z>L;L+=3)B=X+n[L],G=X+n[L+1],j=X+n[L+2],t(B),t(G),t(j)}this.hasTangents=!0,this.tangentsNeedUpdate=!0},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,this.projectionMatrixInverse=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.OrthographicCamera=function(e,t,n,i,r,s){THREE.Camera.call(this),this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.PerspectiveCamera=function(e,t,n,i){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,i,r,s){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=i,this.width=r,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,n=-t,i=e*n,r=e*t,s=Math.abs(r-i),a=Math.abs(t-n);this.projectionMatrix.makeFrustum(i+this.x*s/this.fullWidth,i+(this.x+this.width)*s/this.fullWidth,t-(this.y+this.height)*a/this.fullHeight,t-this.y*a/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==n?n:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,n){THREE.Light.call(this,e),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,n,i,r){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.exponent=void 0!==r?r:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1e3).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return t.pop(),(1>t.length?".":t.join("/"))+"/"},initMaterials:function(e,t){for(var n=[],i=0;e.length>i;++i)n[i]=THREE.Loader.prototype.createMaterial(e[i],t);return n},needsTangents:function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];if(i instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function n(e){var t=Math.log(e)/Math.LN2;return Math.floor(t)==t}function i(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function r(e,t){var r=new Image;r.onload=function(){if(n(this.width)&&n(this.height))e.image=this;else{var t=i(this.width),r=i(this.height);e.image.width=t,e.image.height=r,e.image.getContext("2d").drawImage(this,0,0,t,r)}e.needsUpdate=!0},r.crossOrigin=o.crossOrigin,r.src=t}function s(e,n,i,s,a,o,l){var u=/\.dds$/i.test(i),c=t+"/"+i;if(u){var f=THREE.ImageUtils.loadCompressedTexture(c);e[n]=f}else{var f=document.createElement("canvas");e[n]=new THREE.Texture(f)}if(e[n].sourceFile=i,s&&(e[n].repeat.set(s[0],s[1]),1!==s[0]&&(e[n].wrapS=THREE.RepeatWrapping),1!==s[1]&&(e[n].wrapT=THREE.RepeatWrapping)),a&&e[n].offset.set(a[0],a[1]),o){var h={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==h[o[0]]&&(e[n].wrapS=h[o[0]]),void 0!==h[o[1]]&&(e[n].wrapT=h[o[1]])}l&&(e[n].anisotropy=l),u||r(e[n],c)}function a(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var o=this,l="MeshLambertMaterial",u={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var c=e.shading.toLowerCase();"phong"===c?l="MeshPhongMaterial":"basic"===c&&(l="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==THREE[e.blending]&&(u.blending=THREE[e.blending]),(void 0!==e.transparent||1>e.opacity)&&(u.transparent=e.transparent),void 0!==e.depthTest&&(u.depthTest=e.depthTest),void 0!==e.depthWrite&&(u.depthWrite=e.depthWrite),void 0!==e.visible&&(u.visible=e.visible),void 0!==e.flipSided&&(u.side=THREE.BackSide),void 0!==e.doubleSided&&(u.side=THREE.DoubleSide),void 0!==e.wireframe&&(u.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?u.vertexColors=THREE.FaceColors:e.vertexColors&&(u.vertexColors=THREE.VertexColors)),e.colorDiffuse?u.color=a(e.colorDiffuse):e.DbgColor&&(u.color=e.DbgColor),e.colorSpecular&&(u.specular=a(e.colorSpecular)),e.colorAmbient&&(u.ambient=a(e.colorAmbient)),e.transparency&&(u.opacity=e.transparency),e.specularCoef&&(u.shininess=e.specularCoef),e.mapDiffuse&&t&&s(u,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&s(u,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&s(u,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&s(u,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&s(u,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapBumpScale&&(u.bumpScale=e.mapBumpScale),e.mapNormal){var f=THREE.ShaderLib.normalmap,h=THREE.UniformsUtils.clone(f.uniforms);h.tNormal.value=u.normalMap,e.mapNormalFactor&&h.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),u.map&&(h.tDiffuse.value=u.map,h.enableDiffuse.value=!0),u.specularMap&&(h.tSpecular.value=u.specularMap,h.enableSpecular.value=!0),u.lightMap&&(h.tAO.value=u.lightMap,h.enableAO.value=!0),h.uDiffuseColor.value.setHex(u.color),h.uSpecularColor.value.setHex(u.specular),h.uAmbientColor.value.setHex(u.ambient),h.uShininess.value=u.shininess,void 0!==u.opacity&&(h.uOpacity.value=u.opacity);
var p={fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h,lights:!0,fog:!0},d=new THREE.ShaderMaterial(p);u.transparent&&(d.transparent=!0)}else var d=new THREE[l](u);return void 0!==e.DbgName&&(d.name=e.DbgName),d}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,i){var r=this,s=new XMLHttpRequest;void 0!==t&&s.addEventListener("load",function(n){r.manager.itemEnd(e),t(n.target.responseText)},!1),void 0!==n&&s.addEventListener("progress",function(e){n(e)},!1),void 0!==i&&s.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.open("GET",e,!0),s.send(null),r.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,i){var r=this,s=document.createElement("img");void 0!==t&&s.addEventListener("load",function(){r.manager.itemEnd(e),t(this)},!1),void 0!==n&&s.addEventListener("progress",function(e){n(e)},!1),void 0!==i&&s.addEventListener("error",function(e){i(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.src=e,r.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,i,r){var s=new XMLHttpRequest,a=0;s.onreadystatechange=function(){if(s.readyState===s.DONE)if(200===s.status||0===s.status){if(s.responseText){var o=JSON.parse(s.responseText),l=e.parse(o,i);n(l.geometry,l.materials)}else console.warn("THREE.JSONLoader: ["+t+"] seems to be unreachable or file there is empty");e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+t+"] ["+s.status+"]");else s.readyState===s.LOADING?r&&(0===a&&(a=s.getResponseHeader("Content-Length")),r({total:a,loaded:s.responseText.length})):s.readyState===s.HEADERS_RECEIVED&&void 0!==r&&(a=s.getResponseHeader("Content-Length"))},s.open("GET",t,!0),s.withCredentials=this.withCredentials,s.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){function n(t){function n(e,t){return e&1<<t}var i,r,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w,k,x,R,P,O,C,A=e.faces,M=e.vertices,$=e.normals,H=e.colors,D=0;if(void 0!==e.uvs){for(i=0;e.uvs.length>i;i++)e.uvs[i].length&&D++;for(i=0;D>i;i++)s.faceUvs[i]=[],s.faceVertexUvs[i]=[]}for(o=0,l=M.length;l>o;)S=new THREE.Vector3,S.x=M[o++]*t,S.y=M[o++]*t,S.z=M[o++]*t,s.vertices.push(S);for(o=0,l=A.length;l>o;){if(d=A[o++],m=n(d,0),b=n(d,1),g=n(d,2),v=n(d,3),_=n(d,4),E=n(d,5),y=n(d,6),T=n(d,7),m?(w=new THREE.Face4,w.a=A[o++],w.b=A[o++],w.c=A[o++],w.d=A[o++],u=4):(w=new THREE.Face3,w.a=A[o++],w.b=A[o++],w.c=A[o++],u=3),b&&(p=A[o++],w.materialIndex=p),a=s.faces.length,g)for(i=0;D>i;i++)R=e.uvs[i],h=A[o++],O=R[2*h],C=R[2*h+1],s.faceUvs[i][a]=new THREE.Vector2(O,C);if(v)for(i=0;D>i;i++){for(R=e.uvs[i],P=[],r=0;u>r;r++)h=A[o++],O=R[2*h],C=R[2*h+1],P[r]=new THREE.Vector2(O,C);s.faceVertexUvs[i][a]=P}if(_&&(f=3*A[o++],x=new THREE.Vector3,x.x=$[f++],x.y=$[f++],x.z=$[f],w.normal=x),E)for(i=0;u>i;i++)f=3*A[o++],x=new THREE.Vector3,x.x=$[f++],x.y=$[f++],x.z=$[f],w.vertexNormals.push(x);if(y&&(c=A[o++],k=new THREE.Color(H[c]),w.color=k),T)for(i=0;u>i;i++)c=A[o++],k=new THREE.Color(H[c]),w.vertexColors.push(k);s.faces.push(w)}}function i(){var t,n,i,r,a,o,l,u,c,f;if(e.skinWeights)for(t=0,n=e.skinWeights.length;n>t;t+=2)i=e.skinWeights[t],r=e.skinWeights[t+1],a=0,o=0,s.skinWeights.push(new THREE.Vector4(i,r,a,o));if(e.skinIndices)for(t=0,n=e.skinIndices.length;n>t;t+=2)l=e.skinIndices[t],u=e.skinIndices[t+1],c=0,f=0,s.skinIndices.push(new THREE.Vector4(l,u,c,f));s.bones=e.bones,s.animation=e.animation}function r(t){if(void 0!==e.morphTargets){var n,i,r,a,o,l;for(n=0,i=e.morphTargets.length;i>n;n++)for(s.morphTargets[n]={},s.morphTargets[n].name=e.morphTargets[n].name,s.morphTargets[n].vertices=[],o=s.morphTargets[n].vertices,l=e.morphTargets[n].vertices,r=0,a=l.length;a>r;r+=3){var u=new THREE.Vector3;u.x=l[r]*t,u.y=l[r+1]*t,u.z=l[r+2]*t,o.push(u)}}if(void 0!==e.morphColors){var n,i,c,f,h,p,d;for(n=0,i=e.morphColors.length;i>n;n++)for(s.morphColors[n]={},s.morphColors[n].name=e.morphColors[n].name,s.morphColors[n].colors=[],h=s.morphColors[n].colors,p=e.morphColors[n].colors,c=0,f=p.length;f>c;c+=3)d=new THREE.Color(16755200),d.setRGB(p[c],p[c+1],p[c+2]),h.push(d)}}var s=new THREE.Geometry,a=void 0!==e.scale?1/e.scale:1;if(n(a),i(),r(a),s.computeCentroids(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials)return{geometry:s};var o=this.initMaterials(e.materials,t);return this.needsTangents(o)&&s.computeTangents(),{geometry:s,materials:o}},THREE.LoadingManager=function(e,t,n){var i=this,r=0,s=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(){s++},this.itemEnd=function(e){r++,void 0!==i.onProgress&&i.onProgress(e,r,s),r===s&&void 0!==i.onLoad&&i.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.GeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,load:function(e,t){var n=this,i=new THREE.XHRLoader;i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(){}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t){var n=this,i=new THREE.XHRLoader;i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t;switch(e.type){case"MeshBasicMaterial":t=new THREE.MeshBasicMaterial({color:e.color,opacity:e.opacity,transparent:e.transparent,wireframe:e.wireframe});break;case"MeshLambertMaterial":t=new THREE.MeshLambertMaterial({color:e.color,ambient:e.ambient,emissive:e.emissive,opacity:e.opacity,transparent:e.transparent,wireframe:e.wireframe});break;case"MeshPhongMaterial":t=new THREE.MeshPhongMaterial({color:e.color,ambient:e.ambient,emissive:e.emissive,specular:e.specular,shininess:e.shininess,opacity:e.opacity,transparent:e.transparent,wireframe:e.wireframe});break;case"MeshNormalMaterial":t=new THREE.MeshNormalMaterial({opacity:e.opacity,transparent:e.transparent,wireframe:e.wireframe});break;case"MeshDepthMaterial":t=new THREE.MeshDepthMaterial({opacity:e.opacity,transparent:e.transparent,wireframe:e.wireframe})}return void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t){var n=this,i=new THREE.XHRLoader(n.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){t(n.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),n=this.parseMaterials(e.materials),i=this.parseObject(e.object,t,n);return i},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new THREE.JSONLoader,i=0,r=e.length;r>i;i++){var s,a=e[i];switch(a.type){case"PlaneGeometry":s=new THREE.PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments);break;case"CubeGeometry":s=new THREE.CubeGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CylinderGeometry":s=new THREE.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radiusSegments,a.heightSegments,a.openEnded);break;case"SphereGeometry":s=new THREE.SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"IcosahedronGeometry":s=new THREE.IcosahedronGeometry(a.radius,a.detail);break;case"TorusGeometry":s=new THREE.TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":s=new THREE.TorusKnotGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.p,a.q,a.heightScale);break;case"Geometry":s=n.parse(a.data).geometry}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),t[a.uuid]=s}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var n=new THREE.MaterialLoader,i=0,r=e.length;r>i;i++){var s=e[i],a=n.parse(s);a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,i){var r;switch(t.type){case"Scene":r=new THREE.Scene;break;case"PerspectiveCamera":r=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":r=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":r=new THREE.AmbientLight(t.color);break;case"DirectionalLight":r=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":r=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":r=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":r=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=n[t.geometry],a=i[t.material];void 0===s&&console.error("THREE.ObjectLoader: Undefined geometry "+t.geometry),void 0===a&&console.error("THREE.ObjectLoader: Undefined material "+t.material),r=new THREE.Mesh(s,a);break;default:r=new THREE.Object3D}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.children)for(var o in t.children)r.add(this.parseObject(t.children[o],n,i));return r}}()},THREE.SceneLoader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){},this.callbackSync=function(){},this.callbackProgress=function(){},this.geometryHandlers={},this.hierarchyHandlers={},this.addGeometryHandler("ascii",THREE.JSONLoader)},THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(e,t){var n=this,i=new THREE.XHRLoader(n.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(i){n.parse(JSON.parse(i),t,e)})},setCrossOrigin:function(e){this.crossOrigin=e},addGeometryHandler:function(e,t){this.geometryHandlers[e]={loaderClass:t}},addHierarchyHandler:function(e,t){this.hierarchyHandlers[e]={loaderClass:t}},parse:function(e,t,n){function i(e,t){return"relativeToHTML"==t?e:O+"/"+e}function r(){s(R.scene,A.objects)}function s(e,t){var n,r,a,o,l,c;for(var f in t){var h=R.objects[f],p=t[f];if(void 0===h){if(p.type&&p.type in P.hierarchyHandlers){if(void 0===p.loading){var g={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1},v={};for(var _ in p)_ in g||(v[_]=p[_]);m=R.materials[p.material],p.loading=!0;var S=P.hierarchyHandlers[p.type].loaderObject;S.options?S.load(i(p.url,A.urlBaseType),u(f,e,m,p)):S.load(i(p.url,A.urlBaseType),u(f,e,m,p),v)}}else if(void 0!==p.geometry){if(d=R.geometries[p.geometry]){var w=!1;if(m=R.materials[p.material],w=m instanceof THREE.ShaderMaterial,a=p.position,o=p.rotation,l=p.scale,n=p.matrix,c=p.quaternion,p.material||(m=new THREE.MeshFaceMaterial(R.face_materials[p.geometry])),m instanceof THREE.MeshFaceMaterial&&0===m.materials.length&&(m=new THREE.MeshFaceMaterial(R.face_materials[p.geometry])),m instanceof THREE.MeshFaceMaterial)for(var k=0;m.materials.length>k;k++)w=w||m.materials[k]instanceof THREE.ShaderMaterial;w&&d.computeTangents(),p.skin?h=new THREE.SkinnedMesh(d,m):p.morph?(h=new THREE.MorphAnimMesh(d,m),void 0!==p.duration&&(h.duration=p.duration),void 0!==p.time&&(h.time=p.time),void 0!==p.mirroredLoop&&(h.mirroredLoop=p.mirroredLoop),m.morphNormals&&d.computeMorphNormals()):h=new THREE.Mesh(d,m),h.name=f,n?(h.matrixAutoUpdate=!1,h.matrix.set(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])):(h.position.fromArray(a),c?h.quaternion.fromArray(c):h.rotation.fromArray(o),h.scale.fromArray(l)),h.visible=p.visible,h.castShadow=p.castShadow,h.receiveShadow=p.receiveShadow,e.add(h),R.objects[f]=h}}else"DirectionalLight"===p.type||"PointLight"===p.type||"AmbientLight"===p.type?(y=void 0!==p.color?p.color:16777215,T=void 0!==p.intensity?p.intensity:1,"DirectionalLight"===p.type?(a=p.direction,E=new THREE.DirectionalLight(y,T),E.position.fromArray(a),p.target&&(C.push({object:E,targetName:p.target}),E.target=null)):"PointLight"===p.type?(a=p.position,r=p.distance,E=new THREE.PointLight(y,T,r),E.position.fromArray(a)):"AmbientLight"===p.type&&(E=new THREE.AmbientLight(y)),e.add(E),E.name=f,R.lights[f]=E,R.objects[f]=E):"PerspectiveCamera"===p.type||"OrthographicCamera"===p.type?(a=p.position,o=p.rotation,c=p.quaternion,"PerspectiveCamera"===p.type?b=new THREE.PerspectiveCamera(p.fov,p.aspect,p.near,p.far):"OrthographicCamera"===p.type&&(b=new THREE.OrthographicCamera(p.left,p.right,p.top,p.bottom,p.near,p.far)),b.name=f,b.position.fromArray(a),void 0!==c?b.quaternion.fromArray(c):void 0!==o&&b.rotation.fromArray(o),e.add(b),R.cameras[f]=b,R.objects[f]=b):(a=p.position,o=p.rotation,l=p.scale,c=p.quaternion,h=new THREE.Object3D,h.name=f,h.position.fromArray(a),c?h.quaternion.fromArray(c):h.rotation.fromArray(o),h.scale.fromArray(l),h.visible=void 0!==p.visible?p.visible:!1,e.add(h),R.objects[f]=h,R.empties[f]=h);if(h){if(void 0!==p.userData)for(var x in p.userData){var O=p.userData[x];h.userData[x]=O}if(void 0!==p.groups)for(var k=0;p.groups.length>k;k++){var M=p.groups[k];void 0===R.groups[M]&&(R.groups[M]=[]),R.groups[M].push(f)}}}void 0!==h&&void 0!==p.children&&s(h,p.children)}}function a(e,t,n){R.geometries[n]=e,R.face_materials[n]=t,r()}function o(e,t,n,i,s){var a=s.position,o=s.rotation,l=s.quaternion,u=s.scale;e.position.fromArray(a),l?e.quaternion.fromArray(l):e.rotation.fromArray(o),e.scale.fromArray(u),i&&e.traverse(function(e){e.material=i});var c=void 0!==s.visible?s.visible:!0;e.traverse(function(e){e.visible=c}),n.add(e),e.name=t,R.objects[t]=e,r()}function l(e){return function(t,n){t.name=e,a(t,n,e),S-=1,P.onLoadComplete(),f()}}function u(e,t,n,i){return function(r){var s;s=r.content?r.content:r.dae?r.scene:r,o(s,e,t,n,i),S-=1,P.onLoadComplete(),f()}}function c(e){return function(t,n){t.name=e,R.geometries[e]=t,R.face_materials[e]=n}}function f(){var e={totalModels:k,totalTextures:x,loadedModels:k-S,loadedTextures:x-w};P.callbackProgress(e,R),P.onLoadProgress(),0===S&&0===w&&(h(),t(R))}function h(){for(var e=0;C.length>e;e++){var t=C[e],n=R.objects[t.targetName];n?t.object.target=n:(t.object.target=new THREE.Object3D,R.scene.add(t.object.target)),t.object.target.userData.targetInverse=t.object}}function p(e,t){if(t(e),void 0!==e.children)for(var n in e.children)p(e.children[n],t)}var d,m,b,g,v,_,E,y,T,S,w,k,x,R,P=this,O=THREE.Loader.prototype.extractUrlBase(n),C=[],A=e;for(var M in this.geometryHandlers){var $=this.geometryHandlers[M].loaderClass;this.geometryHandlers[M].loaderObject=new $}for(var M in this.hierarchyHandlers){var $=this.hierarchyHandlers[M].loaderClass;this.hierarchyHandlers[M].loaderObject=new $}if(S=0,w=0,R={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}},A.transform){var H=A.transform.position,D=A.transform.rotation,N=A.transform.scale;H&&R.scene.position.fromArray(H),D&&R.scene.rotation.fromArray(D),N&&R.scene.scale.fromArray(N),(H||D||N)&&(R.scene.updateMatrix(),R.scene.updateMatrixWorld())}var I,L,z=function(e){w-=e,f(),P.onLoadComplete()},U=function(e){return function(){z(e)}};for(I in A.fogs)L=A.fogs[I],"linear"===L.type?g=new THREE.Fog(0,L.near,L.far):"exp2"===L.type&&(g=new THREE.FogExp2(0,L.density)),_=L.color,g.color.setRGB(_[0],_[1],_[2]),R.fogs[I]=g;var F,B;for(F in A.geometries)B=A.geometries[F],B.type in this.geometryHandlers&&(S+=1,P.onLoadStart());for(var G in A.objects)p(A.objects[G],function(e){e.type&&e.type in P.hierarchyHandlers&&(S+=1,P.onLoadStart())});k=S;for(F in A.geometries)if(B=A.geometries[F],"cube"===B.type)d=new THREE.CubeGeometry(B.width,B.height,B.depth,B.widthSegments,B.heightSegments,B.depthSegments),d.name=F,R.geometries[F]=d;else if("plane"===B.type)d=new THREE.PlaneGeometry(B.width,B.height,B.widthSegments,B.heightSegments),d.name=F,R.geometries[F]=d;else if("sphere"===B.type)d=new THREE.SphereGeometry(B.radius,B.widthSegments,B.heightSegments),d.name=F,R.geometries[F]=d;else if("cylinder"===B.type)d=new THREE.CylinderGeometry(B.topRad,B.botRad,B.height,B.radSegs,B.heightSegs),d.name=F,R.geometries[F]=d;else if("torus"===B.type)d=new THREE.TorusGeometry(B.radius,B.tube,B.segmentsR,B.segmentsT),d.name=F,R.geometries[F]=d;else if("icosahedron"===B.type)d=new THREE.IcosahedronGeometry(B.radius,B.subdivisions),d.name=F,R.geometries[F]=d;else if(B.type in this.geometryHandlers){var j={};for(var V in B)"type"!==V&&"url"!==V&&(j[V]=B[V]);var W=this.geometryHandlers[B.type].loaderObject;W.load(i(B.url,A.urlBaseType),l(F),j)}else if("embedded"===B.type){var J=A.embeds[B.id],Y="";if(J.metadata=A.metadata,J){var q=this.geometryHandlers.ascii.loaderObject,X=q.parse(J,Y);c(F)(X.geometry,X.materials)}}var K,Q;for(K in A.textures)if(Q=A.textures[K],Q.url instanceof Array){w+=Q.url.length;for(var Z=0;Q.url.length>Z;Z++)P.onLoadStart()}else w+=1,P.onLoadStart();x=w;for(K in A.textures){if(Q=A.textures[K],void 0!==Q.mapping&&void 0!==THREE[Q.mapping]&&(Q.mapping=new THREE[Q.mapping]),Q.url instanceof Array){for(var et=Q.url.length,tt=[],nt=0;et>nt;nt++)tt[nt]=i(Q.url[nt],A.urlBaseType);var it=/\.dds$/i.test(tt[0]);v=it?THREE.ImageUtils.loadCompressedTextureCube(tt,Q.mapping,U(et)):THREE.ImageUtils.loadTextureCube(tt,Q.mapping,U(et))}else{var it=/\.dds$/i.test(Q.url),rt=i(Q.url,A.urlBaseType),st=U(1);if(v=it?THREE.ImageUtils.loadCompressedTexture(rt,Q.mapping,st):THREE.ImageUtils.loadTexture(rt,Q.mapping,st),void 0!==THREE[Q.minFilter]&&(v.minFilter=THREE[Q.minFilter]),void 0!==THREE[Q.magFilter]&&(v.magFilter=THREE[Q.magFilter]),Q.anisotropy&&(v.anisotropy=Q.anisotropy),Q.repeat&&(v.repeat.set(Q.repeat[0],Q.repeat[1]),1!==Q.repeat[0]&&(v.wrapS=THREE.RepeatWrapping),1!==Q.repeat[1]&&(v.wrapT=THREE.RepeatWrapping)),Q.offset&&v.offset.set(Q.offset[0],Q.offset[1]),Q.wrap){var at={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==at[Q.wrap[0]]&&(v.wrapS=at[Q.wrap[0]]),void 0!==at[Q.wrap[1]]&&(v.wrapT=at[Q.wrap[1]])}}R.textures[K]=v}var ot,lt,ut;for(ot in A.materials){lt=A.materials[ot];for(ut in lt.parameters)if("envMap"===ut||"map"===ut||"lightMap"===ut||"bumpMap"===ut)lt.parameters[ut]=R.textures[lt.parameters[ut]];else if("shading"===ut)lt.parameters[ut]="flat"===lt.parameters[ut]?THREE.FlatShading:THREE.SmoothShading;else if("side"===ut)lt.parameters[ut]="double"==lt.parameters[ut]?THREE.DoubleSide:"back"==lt.parameters[ut]?THREE.BackSide:THREE.FrontSide;else if("blending"===ut)lt.parameters[ut]=lt.parameters[ut]in THREE?THREE[lt.parameters[ut]]:THREE.NormalBlending;else if("combine"===ut)lt.parameters[ut]=lt.parameters[ut]in THREE?THREE[lt.parameters[ut]]:THREE.MultiplyOperation;else if("vertexColors"===ut)"face"==lt.parameters[ut]?lt.parameters[ut]=THREE.FaceColors:lt.parameters[ut]&&(lt.parameters[ut]=THREE.VertexColors);else if("wrapRGB"===ut){var ct=lt.parameters[ut];lt.parameters[ut]=new THREE.Vector3(ct[0],ct[1],ct[2])}if(void 0!==lt.parameters.opacity&&1>lt.parameters.opacity&&(lt.parameters.transparent=!0),lt.parameters.normalMap){var ft=THREE.ShaderLib.normalmap,ht=THREE.UniformsUtils.clone(ft.uniforms),pt=lt.parameters.color,dt=lt.parameters.specular,mt=lt.parameters.ambient,bt=lt.parameters.shininess;ht.tNormal.value=R.textures[lt.parameters.normalMap],lt.parameters.normalScale&&ht.uNormalScale.value.set(lt.parameters.normalScale[0],lt.parameters.normalScale[1]),lt.parameters.map&&(ht.tDiffuse.value=lt.parameters.map,ht.enableDiffuse.value=!0),lt.parameters.envMap&&(ht.tCube.value=lt.parameters.envMap,ht.enableReflection.value=!0,ht.uReflectivity.value=lt.parameters.reflectivity),lt.parameters.lightMap&&(ht.tAO.value=lt.parameters.lightMap,ht.enableAO.value=!0),lt.parameters.specularMap&&(ht.tSpecular.value=R.textures[lt.parameters.specularMap],ht.enableSpecular.value=!0),lt.parameters.displacementMap&&(ht.tDisplacement.value=R.textures[lt.parameters.displacementMap],ht.enableDisplacement.value=!0,ht.uDisplacementBias.value=lt.parameters.displacementBias,ht.uDisplacementScale.value=lt.parameters.displacementScale),ht.uDiffuseColor.value.setHex(pt),ht.uSpecularColor.value.setHex(dt),ht.uAmbientColor.value.setHex(mt),ht.uShininess.value=bt,lt.parameters.opacity&&(ht.uOpacity.value=lt.parameters.opacity);var gt={fragmentShader:ft.fragmentShader,vertexShader:ft.vertexShader,uniforms:ht,lights:!0,fog:!0};m=new THREE.ShaderMaterial(gt)}else m=new THREE[lt.type](lt.parameters);m.name=ot,R.materials[ot]=m}for(ot in A.materials)if(lt=A.materials[ot],lt.parameters.materials){for(var vt=[],nt=0;lt.parameters.materials.length>nt;nt++){var _t=lt.parameters.materials[nt];vt.push(R.materials[_t])}R.materials[ot].materials=vt}r(),R.cameras&&A.defaults.camera&&(R.currentCamera=R.cameras[A.defaults.camera]),R.fogs&&A.defaults.fog&&(R.scene.fog=R.fogs[A.defaults.fog]),P.callbackSync(R),f()}},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t){var n=this,i=new THREE.ImageLoader(n.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){var n=new THREE.Texture(e);n.needsUpdate=!0,void 0!==t&&t(n)})},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){if(t in this){var i=this[t];i instanceof THREE.Color?i.set(n):i instanceof THREE.Vector3&&n instanceof THREE.Vector3?i.copy(n):this[t]="overdraw"==t?Number(n):n}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.perPixel=!0,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.perPixel=this.perPixel,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial(this.materials.slice(0))},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleBasicMaterial.prototype.clone=function(){var e=new THREE.ParticleBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleCanvasMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.ParticleCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleCanvasMaterial.prototype.clone=function(){var e=new THREE.ParticleCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.fragmentShader="void main() {}",this.vertexShader="void main() {}",this.uniforms={},this.defines={},this.attributes=null,this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;
return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=new THREE.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewport=!this.sizeAttenuation,this.alignment=THREE.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1),this.setValues(e),e=e||{},void 0===e.depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewport&&(this.scaleByViewport=!this.sizeAttenuation)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=this.useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewport,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e.uvScale.copy(this.uvScale),e.fog=this.fog,e},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1),THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0),THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1),THREE.Texture=function(e,t,n,i,r,s,a,o,l){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i?i:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==r?r:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==o?o:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CompressedTexture=function(e,t,n,i,r,s,a,o,l,u,c){THREE.Texture.call(this,null,s,a,o,l,u,i,r,c),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,n,i,r,s,a,o,l,u,c){THREE.Texture.call(this,null,s,a,o,l,u,i,r,c),this.image={data:e,width:t,height:n}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.Particle=function(e){THREE.Object3D.call(this),this.material=e},THREE.Particle.prototype=Object.create(THREE.Object3D.prototype),THREE.Particle.prototype.clone=function(e){return void 0===e&&(e=new THREE.Particle(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.ParticleBasicMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.frustumCulled=!1},THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone=function(e){return void 0===e&&(e=new THREE.ParticleSystem(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==n?n:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiplyMatrices(e,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);var n,i=this.children.length;for(n=0;i>n;n++)this.children[n].update(this.skinMatrix,t)},THREE.SkinnedMesh=function(e,t,n){THREE.Mesh.call(this,e,t),this.useVertexTexture=void 0!==n?n:!0,this.identityMatrix=new THREE.Matrix4,this.bones=[],this.boneMatrices=[];var i,r,s,a,o,l;if(this.geometry&&void 0!==this.geometry.bones){for(i=0;this.geometry.bones.length>i;i++)s=this.geometry.bones[i],a=s.pos,o=s.rotq,l=s.scl,r=this.addBone(),r.name=s.name,r.position.set(a[0],a[1],a[2]),r.quaternion.set(o[0],o[1],o[2],o[3]),void 0!==l?r.scale.set(l[0],l[1],l[2]):r.scale.set(1,1,1);for(i=0;this.bones.length>i;i++)s=this.geometry.bones[i],r=this.bones[i],-1===s.parent?this.add(r):this.bones[s.parent].add(r);var u=this.bones.length;if(this.useVertexTexture){var c;c=u>256?64:u>64?32:u>16?16:8,this.boneTextureWidth=c,this.boneTextureHeight=c,this.boneMatrices=new Float32Array(4*this.boneTextureWidth*this.boneTextureHeight),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*u);this.pose()}},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone=function(e){return void 0===e&&(e=new THREE.Bone(this)),this.bones.push(e),e},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var e=new THREE.Matrix4;return function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var n=0,i=this.children.length;i>n;n++){var r=this.children[n];r instanceof THREE.Bone?r.update(this.identityMatrix,!1):r.updateMatrixWorld(!0)}if(void 0==this.boneInverses){this.boneInverses=[];for(var s=0,a=this.bones.length;a>s;s++){var o=new THREE.Matrix4;o.getInverse(this.bones[s].skinMatrix),this.boneInverses.push(o)}}for(var s=0,a=this.bones.length;a>s;s++)e.multiplyMatrices(this.bones[s].skinMatrix,this.boneInverses[s]),e.flattenToArrayOffset(this.boneMatrices,16*s);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0),this.normalizeSkinWeights()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;this.geometry.skinIndices.length>e;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();1/0!==n?t.multiplyScalar(n):t.set(1)}},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,i=/([a-z]+)(\d+)/,r=0,s=e.morphTargets.length;s>r;r++){var a=e.morphTargets[r],o=a.name.match(i);if(o&&o.length>1){var l=o[1];o[2],n[l]||(n[l]={start:1/0,end:-1/0});var u=n[l];u.start>r&&(u.start=r),r>u.end&&(u.end=r),t||(t=l)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=1e3*((n.end-n.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,0>this.time&&(this.time+=this.duration));var n=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);n!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[n]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=n);var i=this.time%t/t;this.directionBackwards&&(i=1-i),this.morphTargetInfluences[this.currentKeyframe]=i,this.morphTargetInfluences[this.lastKeyframe]=1-i},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.Ribbon=function(e,t){THREE.Object3D.call(this),this.geometry=e,this.material=t},THREE.Ribbon.prototype=Object.create(THREE.Object3D.prototype),THREE.Ribbon.prototype.clone=function(e){return void 0===e&&(e=new THREE.Ribbon(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;this.objects.length>n&&!(this.objects[n].distance>t);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;n>t&&!(this.objects[t].distance>e);t++);return this.objects[t-1].object},THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){if(this.objects.length>1){e.getPositionFromMatrix(n.matrixWorld),t.getPositionFromMatrix(this.matrixWorld);var i=e.distanceTo(t);this.objects[0].object.visible=!0;for(var r=1,s=this.objects.length;s>r&&i>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;s>r;r++)this.objects[r].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(){},THREE.Sprite=function(e){THREE.Object3D.call(this),this.material=void 0!==e?e:new THREE.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.rotation3d.set(0,0,this.rotation,this.rotation3d.order),this.quaternion.setFromEuler(this.rotation3d),this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(e){if(e instanceof THREE.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)&&-1===this.__objects.indexOf(e)){this.__objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(var n=0;e.children.length>n;n++)this.__addObject(e.children[n])},THREE.Scene.prototype.__removeObject=function(e){if(e instanceof THREE.Light){var t=this.__lights.indexOf(e);-1!==t&&this.__lights.splice(t,1)}else if(!(e instanceof THREE.Camera)){var t=this.__objects.indexOf(e);if(-1!==t){this.__objects.splice(t,1),this.__objectsRemoved.push(e);var n=this.__objectsAdded.indexOf(e);-1!==n&&this.__objectsAdded.splice(n,1)}}for(var i=0;e.children.length>i;i++)this.__removeObject(e.children[i])},THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,n){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(e){function t(){Ut.setRGB(0,0,0),Ft.setRGB(0,0,0),Bt.setRGB(0,0,0);for(var e=0,t=x.length;t>e;e++){var n=x[e],i=n.color;n instanceof THREE.AmbientLight?Ut.add(i):n instanceof THREE.DirectionalLight?Ft.add(i):n instanceof THREE.PointLight&&Bt.add(i)}}function n(e,t,n){for(var i=0,r=x.length;r>i;i++){var s=x[i];if(Ht.copy(s.color),s instanceof THREE.DirectionalLight){var a=Gt.getPositionFromMatrix(s.matrixWorld).normalize(),o=t.dot(a);if(0>=o)continue;o*=s.intensity,n.add(Ht.multiplyScalar(o))}else if(s instanceof THREE.PointLight){var a=Gt.getPositionFromMatrix(s.matrixWorld),o=t.dot(Gt.subVectors(a,e).normalize());if(0>=o)continue;if(o*=0==s.distance?1:1-Math.min(e.distanceTo(a)/s.distance,1),0==o)continue;o*=s.intensity,n.add(Ht.multiplyScalar(o))}}}function i(e,t,n){m(n.opacity),b(n.blending);var i,r,s,a,o,l,u;if(n instanceof THREE.ParticleBasicMaterial)if(null===n.map){if(s=t.object.scale.x,a=t.object.scale.y,s*=t.scale.x*O,a*=t.scale.y*C,zt.min.set(e.x-s,e.y-a),zt.max.set(e.x+s,e.y+a),It.isIntersectionBox(zt)===!1)return zt.makeEmpty(),void 0;y(n.color.getStyle()),pt.save(),pt.translate(e.x,e.y),pt.rotate(-t.rotation),pt.scale(s,a),pt.fillRect(-1,-1,2,2),pt.restore()}else{if(o=n.map.image,l=o.width>>1,u=o.height>>1,s=t.scale.x*O,a=t.scale.y*C,i=s*l,r=a*u,zt.min.set(e.x-i,e.y-r),zt.max.set(e.x+i,e.y+r),It.isIntersectionBox(zt)===!1)return zt.makeEmpty(),void 0;pt.save(),pt.translate(e.x,e.y),pt.rotate(-t.rotation),pt.scale(s,-a),pt.translate(-l,-u),pt.drawImage(o,0,0),pt.restore()}else if(n instanceof THREE.ParticleCanvasMaterial){if(i=t.scale.x*O,r=t.scale.y*C,zt.min.set(e.x-i,e.y-r),zt.max.set(e.x+i,e.y+r),It.isIntersectionBox(zt)===!1)return zt.makeEmpty(),void 0;E(n.color.getStyle()),y(n.color.getStyle()),pt.save(),pt.translate(e.x,e.y),pt.rotate(-t.rotation),pt.scale(i,r),n.program(pt),pt.restore()}}function r(e,t,n,i){if(m(i.opacity),b(i.blending),pt.beginPath(),pt.moveTo(e.positionScreen.x,e.positionScreen.y),pt.lineTo(t.positionScreen.x,t.positionScreen.y),i instanceof THREE.LineBasicMaterial){if(g(i.linewidth),v(i.linecap),_(i.linejoin),i.vertexColors!==THREE.VertexColors)E(i.color.getStyle());else{var r=n.vertexColors[0].getStyle(),s=n.vertexColors[1].getStyle();if(r===s)E(r);else{try{var a=pt.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,r),a.addColorStop(1,s)}catch(o){a=r}E(a)}}pt.stroke(),zt.expandByScalar(2*i.linewidth)}else i instanceof THREE.LineDashedMaterial&&(g(i.linewidth),v(i.linecap),_(i.linejoin),E(i.color.getStyle()),T(i.dashSize,i.gapSize),pt.stroke(),zt.expandByScalar(2*i.linewidth),T(null,null))}function s(e,t,i,r,s,a,l,d){if(ct.info.render.vertices+=3,ct.info.render.faces++,m(d.opacity),b(d.blending),N=e.positionScreen.x,I=e.positionScreen.y,L=t.positionScreen.x,z=t.positionScreen.y,U=i.positionScreen.x,F=i.positionScreen.y,o(N,I,L,z,U,F),(d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial)&&null===d.map)Mt.copy(d.color),$t.copy(d.emissive),d.vertexColors===THREE.FaceColors&&Mt.multiply(l.color),d.wireframe===!1&&d.shading==THREE.SmoothShading&&3==l.vertexNormalsLength?(Pt.copy(Ut),Ot.copy(Ut),Ct.copy(Ut),n(l.v1.positionWorld,l.vertexNormalsModel[0],Pt),n(l.v2.positionWorld,l.vertexNormalsModel[1],Ot),n(l.v3.positionWorld,l.vertexNormalsModel[2],Ct),Pt.multiply(Mt).add($t),Ot.multiply(Mt).add($t),Ct.multiply(Mt).add($t),At.addColors(Ot,Ct).multiplyScalar(.5),X=p(Pt,Ot,Ct,At),h(N,I,L,z,U,F,0,0,1,0,0,1,X)):(Rt.copy(Ut),n(l.centroidModel,l.normalModel,Rt),Rt.multiply(Mt).add($t),d.wireframe===!0?u(Rt,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):c(Rt));else if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial)null!==d.map?d.map.mapping instanceof THREE.UVMapping&&(K=l.uvs[0],f(N,I,L,z,U,F,K[r].x,K[r].y,K[s].x,K[s].y,K[a].x,K[a].y,d.map)):null!==d.envMap?d.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(Gt.copy(l.vertexNormalsModelView[r]),Q=.5*Gt.x+.5,Z=.5*Gt.y+.5,Gt.copy(l.vertexNormalsModelView[s]),et=.5*Gt.x+.5,tt=.5*Gt.y+.5,Gt.copy(l.vertexNormalsModelView[a]),nt=.5*Gt.x+.5,it=.5*Gt.y+.5,f(N,I,L,z,U,F,Q,Z,et,tt,nt,it,d.envMap)):(Rt.copy(d.color),d.vertexColors===THREE.FaceColors&&Rt.multiply(l.color),d.wireframe===!0?u(Rt,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):c(Rt));else if(d instanceof THREE.MeshDepthMaterial)Y=A.near,q=A.far,Pt.r=Pt.g=Pt.b=1-S(e.positionScreen.z*e.positionScreen.w,Y,q),Ot.r=Ot.g=Ot.b=1-S(t.positionScreen.z*t.positionScreen.w,Y,q),Ct.r=Ct.g=Ct.b=1-S(i.positionScreen.z*i.positionScreen.w,Y,q),At.addColors(Ot,Ct).multiplyScalar(.5),X=p(Pt,Ot,Ct,At),h(N,I,L,z,U,F,0,0,1,0,0,1,X);else if(d instanceof THREE.MeshNormalMaterial){var g;d.shading==THREE.FlatShading?(g=l.normalModelView,Rt.setRGB(g.x,g.y,g.z).multiplyScalar(.5).addScalar(.5),d.wireframe===!0?u(Rt,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):c(Rt)):d.shading==THREE.SmoothShading&&(g=l.vertexNormalsModelView[r],Pt.setRGB(g.x,g.y,g.z).multiplyScalar(.5).addScalar(.5),g=l.vertexNormalsModelView[s],Ot.setRGB(g.x,g.y,g.z).multiplyScalar(.5).addScalar(.5),g=l.vertexNormalsModelView[a],Ct.setRGB(g.x,g.y,g.z).multiplyScalar(.5).addScalar(.5),At.addColors(Ot,Ct).multiplyScalar(.5),X=p(Pt,Ot,Ct,At),h(N,I,L,z,U,F,0,0,1,0,0,1,X))}}function a(e,t,i,r,a,f,d,g){if(ct.info.render.vertices+=4,ct.info.render.faces++,m(g.opacity),b(g.blending),void 0!==g.map&&null!==g.map||void 0!==g.envMap&&null!==g.envMap)return s(e,t,r,0,1,3,d,g),s(a,i,f,1,2,3,d,g),void 0;if(N=e.positionScreen.x,I=e.positionScreen.y,L=t.positionScreen.x,z=t.positionScreen.y,U=i.positionScreen.x,F=i.positionScreen.y,B=r.positionScreen.x,G=r.positionScreen.y,j=a.positionScreen.x,V=a.positionScreen.y,W=f.positionScreen.x,J=f.positionScreen.y,g instanceof THREE.MeshLambertMaterial||g instanceof THREE.MeshPhongMaterial)Mt.copy(g.color),$t.copy(g.emissive),g.vertexColors===THREE.FaceColors&&Mt.multiply(d.color),g.wireframe===!1&&g.shading==THREE.SmoothShading&&4==d.vertexNormalsLength?(Pt.copy(Ut),Ot.copy(Ut),Ct.copy(Ut),At.copy(Ut),n(d.v1.positionWorld,d.vertexNormalsModel[0],Pt),n(d.v2.positionWorld,d.vertexNormalsModel[1],Ot),n(d.v4.positionWorld,d.vertexNormalsModel[3],Ct),n(d.v3.positionWorld,d.vertexNormalsModel[2],At),Pt.multiply(Mt).add($t),Ot.multiply(Mt).add($t),Ct.multiply(Mt).add($t),At.multiply(Mt).add($t),X=p(Pt,Ot,Ct,At),o(N,I,L,z,B,G),h(N,I,L,z,B,G,0,0,1,0,0,1,X),o(j,V,U,F,W,J),h(j,V,U,F,W,J,1,0,1,1,0,1,X)):(Rt.copy(Ut),n(d.centroidModel,d.normalModel,Rt),Rt.multiply(Mt).add($t),l(N,I,L,z,U,F,B,G),g.wireframe===!0?u(Rt,g.wireframeLinewidth,g.wireframeLinecap,g.wireframeLinejoin):c(Rt));else if(g instanceof THREE.MeshBasicMaterial)Rt.copy(g.color),g.vertexColors===THREE.FaceColors&&Rt.multiply(d.color),l(N,I,L,z,U,F,B,G),g.wireframe===!0?u(Rt,g.wireframeLinewidth,g.wireframeLinecap,g.wireframeLinejoin):c(Rt);else if(g instanceof THREE.MeshNormalMaterial){var v;g.shading==THREE.FlatShading?(v=d.normalModelView,Rt.setRGB(v.x,v.y,v.z).multiplyScalar(.5).addScalar(.5),l(N,I,L,z,U,F,B,G),g.wireframe===!0?u(Rt,g.wireframeLinewidth,g.wireframeLinecap,g.wireframeLinejoin):c(Rt)):g.shading==THREE.SmoothShading&&(v=d.vertexNormalsModelView[0],Pt.setRGB(v.x,v.y,v.z).multiplyScalar(.5).addScalar(.5),v=d.vertexNormalsModelView[1],Ot.setRGB(v.x,v.y,v.z).multiplyScalar(.5).addScalar(.5),v=d.vertexNormalsModelView[3],Ct.setRGB(v.x,v.y,v.z).multiplyScalar(.5).addScalar(.5),v=d.vertexNormalsModelView[2],At.setRGB(v.x,v.y,v.z).multiplyScalar(.5).addScalar(.5),X=p(Pt,Ot,Ct,At),o(N,I,L,z,B,G),h(N,I,L,z,B,G,0,0,1,0,0,1,X),o(j,V,U,F,W,J),h(j,V,U,F,W,J,1,0,1,1,0,1,X))}else g instanceof THREE.MeshDepthMaterial&&(Y=A.near,q=A.far,Pt.r=Pt.g=Pt.b=1-S(e.positionScreen.z*e.positionScreen.w,Y,q),Ot.r=Ot.g=Ot.b=1-S(t.positionScreen.z*t.positionScreen.w,Y,q),Ct.r=Ct.g=Ct.b=1-S(r.positionScreen.z*r.positionScreen.w,Y,q),At.r=At.g=At.b=1-S(i.positionScreen.z*i.positionScreen.w,Y,q),X=p(Pt,Ot,Ct,At),o(N,I,L,z,B,G),h(N,I,L,z,B,G,0,0,1,0,0,1,X),o(j,V,U,F,W,J),h(j,V,U,F,W,J,1,0,1,1,0,1,X))}function o(e,t,n,i,r,s){pt.beginPath(),pt.moveTo(e,t),pt.lineTo(n,i),pt.lineTo(r,s),pt.closePath()}function l(e,t,n,i,r,s,a,o){pt.beginPath(),pt.moveTo(e,t),pt.lineTo(n,i),pt.lineTo(r,s),pt.lineTo(a,o),pt.closePath()}function u(e,t,n,i){g(t),v(n),_(i),E(e.getStyle()),pt.stroke(),zt.expandByScalar(2*t)}function c(e){y(e.getStyle()),pt.fill()}function f(e,t,n,i,r,s,a,o,l,u,f,h,p){if(!(p instanceof THREE.DataTexture||void 0===p.image||0==p.image.width)){if(p.needsUpdate===!0){var d=p.wrapS==THREE.RepeatWrapping,m=p.wrapT==THREE.RepeatWrapping;Dt[p.id]=pt.createPattern(p.image,d===!0&&m===!0?"repeat":d===!0&&m===!1?"repeat-x":d===!1&&m===!0?"repeat-y":"no-repeat"),p.needsUpdate=!1}void 0===Dt[p.id]?y("rgba(0,0,0,1)"):y(Dt[p.id]);var b,g,v,_,E,T,S,w,k=p.offset.x/p.repeat.x,x=p.offset.y/p.repeat.y,R=p.image.width*p.repeat.x,P=p.image.height*p.repeat.y;if(a=(a+k)*R,o=(1-o+x)*P,l=(l+k)*R,u=(1-u+x)*P,f=(f+k)*R,h=(1-h+x)*P,n-=e,i-=t,r-=e,s-=t,l-=a,u-=o,f-=a,h-=o,S=l*h-f*u,0===S){if(void 0===Nt[p.id]){var O=document.createElement("canvas");O.width=p.image.width,O.height=p.image.height;var C=O.getContext("2d");C.drawImage(p.image,0,0),Nt[p.id]=C.getImageData(0,0,p.image.width,p.image.height).data}var A=Nt[p.id],M=4*(Math.floor(a)+Math.floor(o)*p.image.width);return Rt.setRGB(A[M]/255,A[M+1]/255,A[M+2]/255),c(Rt),void 0}w=1/S,b=(h*n-u*r)*w,g=(h*i-u*s)*w,v=(l*r-f*n)*w,_=(l*s-f*i)*w,E=e-b*a-v*o,T=t-g*a-_*o,pt.save(),pt.transform(b,g,v,_,E,T),pt.fill(),pt.restore()}}function h(e,t,n,i,r,s,a,o,l,u,c,f,h){var p,d,m,b,g,v,_,E,y=h.width-1,T=h.height-1;a*=y,o*=T,l*=y,u*=T,c*=y,f*=T,n-=e,i-=t,r-=e,s-=t,l-=a,u-=o,c-=a,f-=o,_=l*f-c*u,E=1/_,p=(f*n-u*r)*E,d=(f*i-u*s)*E,m=(l*r-c*n)*E,b=(l*s-c*i)*E,g=e-p*a-m*o,v=t-d*a-b*o,pt.save(),pt.transform(p,d,m,b,g,v),pt.clip(),pt.drawImage(h,0,0),pt.restore()}function p(e,t,n,i){return ot[0]=0|255*e.r,ot[1]=0|255*e.g,ot[2]=0|255*e.b,ot[4]=0|255*t.r,ot[5]=0|255*t.g,ot[6]=0|255*t.b,ot[8]=0|255*n.r,ot[9]=0|255*n.g,ot[10]=0|255*n.b,ot[12]=0|255*i.r,ot[13]=0|255*i.g,ot[14]=0|255*i.b,st.putImageData(at,0,0),ut.drawImage(rt,0,0),lt}function d(e,t,n){var i,r=t.x-e.x,s=t.y-e.y,a=r*r+s*s;0!==a&&(i=n/Math.sqrt(a),r*=i,s*=i,t.x+=r,t.y+=s,e.x-=r,e.y-=s)}function m(e){bt!==e&&(pt.globalAlpha=e,bt=e)}function b(e){gt!==e&&(e===THREE.NormalBlending?pt.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?pt.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending&&(pt.globalCompositeOperation="darker"),gt=e)}function g(e){Et!==e&&(pt.lineWidth=e,Et=e)}function v(e){yt!==e&&(pt.lineCap=e,yt=e)}function _(e){Tt!==e&&(pt.lineJoin=e,Tt=e)}function E(e){vt!==e&&(pt.strokeStyle=e,vt=e)}function y(e){_t!==e&&(pt.fillStyle=e,_t=e)}function T(e,t){(St!==e||wt!==t)&&(pt.setLineDash([e,t]),St=e,wt=t)}console.log("THREE.CanvasRenderer",THREE.REVISION);var S=THREE.Math.smoothstep;e=e||{};var w,k,x,R,P,O,C,A,M,$,H,D,N,I,L,z,U,F,B,G,j,V,W,J,Y,q,X,K,Q,Z,et,tt,nt,it,rt,st,at,ot,lt,ut,ct=this,ft=new THREE.Projector,ht=void 0!==e.canvas?e.canvas:document.createElement("canvas"),pt=ht.getContext("2d"),dt=new THREE.Color(0),mt=0,bt=1,gt=0,vt=null,_t=null,Et=null,yt=null,Tt=null,St=null,wt=0,kt=new THREE.RenderableVertex,xt=new THREE.RenderableVertex,Rt=new THREE.Color,Pt=new THREE.Color,Ot=new THREE.Color,Ct=new THREE.Color,At=new THREE.Color,Mt=new THREE.Color,$t=new THREE.Color,Ht=new THREE.Color,Dt={},Nt={},It=new THREE.Box2,Lt=new THREE.Box2,zt=new THREE.Box2,Ut=new THREE.Color,Ft=new THREE.Color,Bt=new THREE.Color,Gt=new THREE.Vector3,jt=16;rt=document.createElement("canvas"),rt.width=rt.height=2,st=rt.getContext("2d"),st.fillStyle="rgba(0,0,0,1)",st.fillRect(0,0,2,2),at=st.getImageData(0,0,2,2),ot=at.data,lt=document.createElement("canvas"),lt.width=lt.height=jt,ut=lt.getContext("2d"),ut.translate(-jt/2,-jt/2),ut.scale(jt,jt),jt--,void 0===pt.setLineDash&&(pt.setLineDash=void 0!==pt.mozDash?function(e){pt.mozDash=null!==e[0]?e:null}:function(){}),this.domElement=ht,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==window.devicePixelRatio?window.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,n){R=e*this.devicePixelRatio,P=t*this.devicePixelRatio,O=Math.floor(R/2),C=Math.floor(P/2),ht.width=R,ht.height=P,1!==this.devicePixelRatio&&n!==!1&&(ht.style.width=e+"px",ht.style.height=t+"px"),It.set(new THREE.Vector2(-O,-C),new THREE.Vector2(O,C)),Lt.set(new THREE.Vector2(-O,-C),new THREE.Vector2(O,C)),bt=1,gt=0,vt=null,_t=null,Et=null,yt=null,Tt=null},this.setClearColor=function(e,t){dt.set(e),mt=void 0!==t?t:1,Lt.set(new THREE.Vector2(-O,-C),new THREE.Vector2(O,C))},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){pt.setTransform(1,0,0,-1,O,C),Lt.empty()===!1&&(Lt.intersect(It),Lt.expandByScalar(2),1>mt&&pt.clearRect(0|Lt.min.x,0|Lt.min.y,0|Lt.max.x-Lt.min.x,0|Lt.max.y-Lt.min.y),mt>0&&(b(THREE.NormalBlending),m(1),y("rgba("+Math.floor(255*dt.r)+","+Math.floor(255*dt.g)+","+Math.floor(255*dt.b)+","+mt+")"),pt.fillRect(0|Lt.min.x,0|Lt.min.y,0|Lt.max.x-Lt.min.x,0|Lt.max.y-Lt.min.y)),Lt.makeEmpty())},this.render=function(e,n){if(n instanceof THREE.Camera==!1)return console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera."),void 0;this.autoClear===!0&&this.clear(),pt.setTransform(1,0,0,-1,O,C),ct.info.render.vertices=0,ct.info.render.faces=0,w=ft.projectScene(e,n,this.sortObjects,this.sortElements),k=w.elements,x=w.lights,A=n,t();for(var o=0,l=k.length;l>o;o++){var u=k[o],c=u.material;if(void 0!==c&&c.visible!==!1){if(zt.makeEmpty(),u instanceof THREE.RenderableParticle)M=u,M.x*=O,M.y*=C,i(M,u,c);else if(u instanceof THREE.RenderableLine)M=u.v1,$=u.v2,M.positionScreen.x*=O,M.positionScreen.y*=C,$.positionScreen.x*=O,$.positionScreen.y*=C,zt.setFromPoints([M.positionScreen,$.positionScreen]),It.isIntersectionBox(zt)===!0&&r(M,$,u,c);else if(u instanceof THREE.RenderableFace3){if(M=u.v1,$=u.v2,H=u.v3,-1>M.positionScreen.z||M.positionScreen.z>1)continue;if(-1>$.positionScreen.z||$.positionScreen.z>1)continue;if(-1>H.positionScreen.z||H.positionScreen.z>1)continue;M.positionScreen.x*=O,M.positionScreen.y*=C,$.positionScreen.x*=O,$.positionScreen.y*=C,H.positionScreen.x*=O,H.positionScreen.y*=C,c.overdraw>0&&(d(M.positionScreen,$.positionScreen,c.overdraw),d($.positionScreen,H.positionScreen,c.overdraw),d(H.positionScreen,M.positionScreen,c.overdraw)),zt.setFromPoints([M.positionScreen,$.positionScreen,H.positionScreen]),It.isIntersectionBox(zt)===!0&&s(M,$,H,0,1,2,u,c)}else if(u instanceof THREE.RenderableFace4){if(M=u.v1,$=u.v2,H=u.v3,D=u.v4,-1>M.positionScreen.z||M.positionScreen.z>1)continue;if(-1>$.positionScreen.z||$.positionScreen.z>1)continue;if(-1>H.positionScreen.z||H.positionScreen.z>1)continue;if(-1>D.positionScreen.z||D.positionScreen.z>1)continue;M.positionScreen.x*=O,M.positionScreen.y*=C,$.positionScreen.x*=O,$.positionScreen.y*=C,H.positionScreen.x*=O,H.positionScreen.y*=C,D.positionScreen.x*=O,D.positionScreen.y*=C,kt.positionScreen.copy($.positionScreen),xt.positionScreen.copy(D.positionScreen),c.overdraw>0&&(d(M.positionScreen,$.positionScreen,c.overdraw),d($.positionScreen,D.positionScreen,c.overdraw),d(D.positionScreen,M.positionScreen,c.overdraw),d(H.positionScreen,kt.positionScreen,c.overdraw),d(H.positionScreen,xt.positionScreen,c.overdraw)),zt.setFromPoints([M.positionScreen,$.positionScreen,H.positionScreen,D.positionScreen]),It.isIntersectionBox(zt)===!0&&a(M,$,H,D,kt,xt,u,c)
}Lt.union(zt)}}pt.setTransform(1,0,0,1,0,0)}},THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","uniform vec3 fogColor;","#ifdef FOG_EXP2","uniform float fogDensity;","#else","uniform float fogNear;","uniform float fogFar;","#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","float depth = gl_FragCoord.z / gl_FragCoord.w;","#ifdef FOG_EXP2","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","#else","float fogFactor = smoothstep( fogNear, fogFar, depth );","#endif","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","uniform bool useRefract;","uniform float refractionRatio;","#else","varying vec3 vReflect;","#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","vec3 reflectVec;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );","}","#else","reflectVec = vReflect;","#endif","#ifdef DOUBLE_SIDED","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#else","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#endif","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","} else if ( combine == 2 ) {","gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","} else {","gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","varying vec3 vReflect;","uniform float refractionRatio;","uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","#ifdef USE_SKINNING","vec4 worldPosition = modelMatrix * skinned;","#endif","#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","#endif","#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","worldNormal = normalize( worldNormal );","vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, worldNormal );","}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","#endif","#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","vec4 texelColor = texture2D( map, vUv );","#ifdef GAMMA_INPUT","texelColor.xyz *= texelColor.xyz;","#endif","gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );","}","vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );","}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );","}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","#else","specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","#ifdef DOUBLE_SIDED","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","#ifdef DOUBLE_SIDED","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","#ifdef DOUBLE_SIDED","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_HEMI_LIGHTS > 0","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","#ifdef DOUBLE_SIDED","vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","#endif","}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),lights_phong_pars_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","vPointLight[ i ] = vec4( lVector, lDistance );","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","vSpotLight[ i ] = vec4( lVector, lDistance );","}","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#else","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#else","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vPointLight[ i ].xyz );","float lDistance = vPointLight[ i ].w;","#endif","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dotProduct, 0.0 );","#endif","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","#else","pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vSpotLight[ i ].xyz );","float lDistance = vSpotLight[ i ].w;","#endif","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dotProduct, 0.0 );","#endif","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","#else","spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, dirVector );","#ifdef WRAP_AROUND","float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dotProduct, 0.0 );","#endif","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","gl_FragColor = gl_FragColor * vec4( vColor, opacity );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","#ifdef GAMMA_INPUT","vColor = color * color;","#else","vColor = color;","#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;","mat4 getBoneMatrix( const in float i ) {","float j = i * 4.0;","float x = mod( j, N_BONE_PIXEL_X );","float y = floor( j / N_BONE_PIXEL_X );","const float dx = 1.0 / N_BONE_PIXEL_X;","const float dy = 1.0 / N_BONE_PIXEL_Y;","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );","return bone;","}","#else","uniform mat4 boneGlobalMatrices[ MAX_BONES ];","mat4 getBoneMatrix( const in float i ) {","mat4 bone = boneGlobalMatrices[ int(i) ];","return bone;","}","#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","#ifdef USE_MORPHTARGETS","vec4 skinVertex = vec4( morphed, 1.0 );","#else","vec4 skinVertex = vec4( position, 1.0 );","#endif","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","#ifndef USE_MORPHNORMALS","uniform float morphTargetInfluences[ 8 ];","#else","uniform float morphTargetInfluences[ 4 ];","#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","#ifndef USE_MORPHNORMALS","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","#endif","morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix 	+= skinWeight.y * boneMatY;","#ifdef USE_MORPHNORMALS","vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","#else","vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;","#endif","#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];","varying vec4 vShadowCoord[ MAX_SHADOWS ];","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","#ifdef SHADOWMAP_DEBUG","vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","#endif","#ifdef SHADOWMAP_CASCADE","int inFrustumCount = 0;","#endif","float fDepth;","vec3 shadowColor = vec3( 1.0 );","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );","#ifdef SHADOWMAP_CASCADE","inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","#else","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","#endif","bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#if defined( SHADOWMAP_TYPE_PCF )","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","float shadow = 0.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.0 * xPixelOffset;","float dy0 = -1.0 * yPixelOffset;","float dx1 = 1.0 * xPixelOffset;","float dy1 = 1.0 * yPixelOffset;","mat3 shadowKernel;","mat3 depthKernel;","depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","vec3 shadowZ = vec3( shadowCoord.z );","shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","shadowKernel[0] *= vec3(0.25);","shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","shadowKernel[1] *= vec3(0.25);","shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","shadowKernel[2] *= vec3(0.25);","vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","vec4 shadowValues;","shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","shadow = dot( shadowValues, vec4( 1.0 ) );","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#else","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","#endif","}","#ifdef SHADOWMAP_DEBUG","#ifdef SHADOWMAP_CASCADE","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","#else","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","#endif","#endif","}","#ifdef GAMMA_OUTPUT","shadowColor *= shadowColor;","#endif","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","varying vec4 vShadowCoord[ MAX_SHADOWS ];","uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n")},THREE.UniformsUtils={merge:function(e){var t,n,i,r={};
for(t=0;e.length>t;t++){i=this.clone(e[t]);for(n in i)r[n]=i[n]}return r},clone:function(e){var t,n,i,r={};for(t in e){r[t]={};for(n in e[t])i=e[t][n],r[t][n]=i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture?i.clone():i instanceof Array?i.slice():i}return r}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED","if ( gl_FrontFacing )","gl_FragColor.xyz *= vLightFront;","else","gl_FragColor.xyz *= vLightBack;","#else","gl_FragColor.xyz *= vLightFront;","#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;","#endif","gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {","gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","if ( mod( vLineDistance, totalSize ) > dashSize ) {","discard;","}","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;","void main() {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;","void main() {","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );","}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:.98},uReflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;","uniform vec3 uDiffuseColor;","uniform vec3 uSpecularColor;","uniform float uShininess;","uniform float uOpacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float uRefractionRatio;","uniform float uReflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","gl_FragColor = vec4( vec3( 1.0 ), uOpacity );","vec3 specularTex = vec3( 1.0 );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse ) {","#ifdef GAMMA_INPUT","vec4 texelColor = texture2D( tDiffuse, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;","#else","gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","#endif","}","if( enableAO ) {","#ifdef GAMMA_INPUT","vec4 aoColor = texture2D( tAO, vUv );","aoColor.xyz *= aoColor.xyz;","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","#else","gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","#endif","}","if( enableSpecular )","specularTex = texture2D( tSpecular, vUv ).xyz;","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","vec3 finalNormal = tsb * normalTex;","#ifdef FLIP_SIDED","finalNormal = -finalNormal;","#endif","vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","float pointDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","pointVector = normalize( pointVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","#endif","pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;","vec3 pointHalfVector = normalize( pointVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","#else","pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","float spotDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","spotVector = normalize( spotVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","#endif","spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;","vec3 spotHalfVector = normalize( spotVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","#else","spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","#ifdef WRAP_AROUND","float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","#endif","dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += uDiffuseColor * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;","#endif","if ( enableReflection ) {","vec3 vReflect;","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, normal, uRefractionRatio );","} else {","vReflect = reflect( cameraToVertex, normal );","}","vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );","}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING","vNormal = normalize( normalMatrix * skinnedNormal.xyz );","vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","vTangent = normalize( normalMatrix * skinnedTangent.xyz );","#else","vNormal = normalize( normalMatrix * normal );","vTangent = normalize( normalMatrix * tangent.xyz );","#endif","vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","vUv = uv * uRepeat + uOffset;","vec3 displacedPosition;","#ifdef VERTEX_TEXTURES","if ( enableDisplacement ) {","vec3 dv = texture2D( tDisplacement, uv ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","displacedPosition = position + normalize( normal ) * df;","} else {","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","}","#else","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","#endif","vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","gl_Position = projectionMatrix * mvPosition;","vWorldPosition = worldPosition.xyz;","vViewPosition = -mvPosition.xyz;","#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;","void main() {","gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );","}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;","}","void main() {","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=Lt.createBuffer(),e.__webglColorBuffer=Lt.createBuffer(),jt.info.memory.geometries++}function n(e){e.__webglVertexBuffer=Lt.createBuffer(),e.__webglColorBuffer=Lt.createBuffer(),e.__webglLineDistanceBuffer=Lt.createBuffer(),jt.info.memory.geometries++}function i(e){e.__webglVertexBuffer=Lt.createBuffer(),e.__webglColorBuffer=Lt.createBuffer(),e.__webglNormalBuffer=Lt.createBuffer(),jt.info.memory.geometries++}function r(e){e.__webglVertexBuffer=Lt.createBuffer(),e.__webglNormalBuffer=Lt.createBuffer(),e.__webglTangentBuffer=Lt.createBuffer(),e.__webglColorBuffer=Lt.createBuffer(),e.__webglUVBuffer=Lt.createBuffer(),e.__webglUV2Buffer=Lt.createBuffer(),e.__webglSkinIndicesBuffer=Lt.createBuffer(),e.__webglSkinWeightsBuffer=Lt.createBuffer(),e.__webglFaceBuffer=Lt.createBuffer(),e.__webglLineBuffer=Lt.createBuffer();var t,n;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,n=e.numMorphTargets;n>t;t++)e.__webglMorphTargetsBuffers.push(Lt.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,n=e.numMorphNormals;n>t;t++)e.__webglMorphNormalsBuffers.push(Lt.createBuffer());jt.info.memory.geometries++}function s(e){if(e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)Lt.deleteBuffer(e.__webglCustomAttributesList[t].buffer)}function a(e,t){var n=e.vertices.length,i=t.material;if(i.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var r in i.attributes){var s=i.attributes[r];if(!s.__webglInitialized||s.createUniqueBuffers){s.__webglInitialized=!0;var a=1;"v2"===s.type?a=2:"v3"===s.type?a=3:"v4"===s.type?a=4:"c"===s.type&&(a=3),s.size=a,s.array=new Float32Array(n*a),s.buffer=Lt.createBuffer(),s.buffer.belongsToAttribute=r,s.needsUpdate=!0}e.__webglCustomAttributesList.push(s)}}}function o(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__sortArray=[],e.__webglParticleCount=n,a(e,t)}function l(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__lineDistanceArray=new Float32Array(1*n),e.__webglLineCount=n,a(e,t)}function u(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(3*n),e.__colorArray=new Float32Array(3*n),e.__normalArray=new Float32Array(3*n),e.__webglVertexCount=n,a(e,t)}function c(e,t){var n=t.geometry,i=e.faces3,r=e.faces4,s=3*i.length+4*r.length,a=1*i.length+2*r.length,o=3*i.length+4*r.length,l=f(t,e),u=m(l),c=p(l),h=d(l);e.__vertexArray=new Float32Array(3*s),c&&(e.__normalArray=new Float32Array(3*s)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*s)),h&&(e.__colorArray=new Float32Array(3*s)),u&&((n.faceUvs.length>0||n.faceVertexUvs.length>0)&&(e.__uvArray=new Float32Array(2*s)),(n.faceUvs.length>1||n.faceVertexUvs.length>1)&&(e.__uv2Array=new Float32Array(2*s))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*s),e.__skinWeightArray=new Float32Array(4*s)),e.__faceArray=new Uint16Array(3*a),e.__lineArray=new Uint16Array(2*o);var b,g;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],b=0,g=e.numMorphTargets;g>b;b++)e.__morphTargetsArrays.push(new Float32Array(3*s));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],b=0,g=e.numMorphNormals;g>b;b++)e.__morphNormalsArrays.push(new Float32Array(3*s));if(e.__webglFaceCount=3*a,e.__webglLineCount=2*o,l.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var v in l.attributes){var _=l.attributes[v],E={};for(var y in _)E[y]=_[y];if(!E.__webglInitialized||E.createUniqueBuffers){E.__webglInitialized=!0;var T=1;"v2"===E.type?T=2:"v3"===E.type?T=3:"v4"===E.type?T=4:"c"===E.type&&(T=3),E.size=T,E.array=new Float32Array(s*T),E.buffer=Lt.createBuffer(),E.buffer.belongsToAttribute=v,_.needsUpdate=!0,E.__original=_}e.__webglCustomAttributesList.push(E)}}e.__inittedArrays=!0}function f(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function h(e){return e&&void 0!==e.shading&&e.shading===THREE.SmoothShading}function p(e){return e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial?!1:h(e)?THREE.SmoothShading:THREE.FlatShading}function d(e){return e.vertexColors?e.vertexColors:!1}function m(e){return e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e instanceof THREE.ShaderMaterial?!0:!1}function b(e){var t,n,i;for(t in e.attributes)i="index"===t?Lt.ELEMENT_ARRAY_BUFFER:Lt.ARRAY_BUFFER,n=e.attributes[t],void 0===n.numItems&&(n.numItems=n.array.length),n.buffer=Lt.createBuffer(),Lt.bindBuffer(i,n.buffer),Lt.bufferData(i,n.array,Lt.STATIC_DRAW)}function g(e,t,n){var i,r,s,a,o,l,u,c,f,h,p,d,m=e.vertices,b=m.length,g=e.colors,v=g.length,_=e.__vertexArray,E=e.__colorArray,y=e.__sortArray,T=e.verticesNeedUpdate,S=(e.elementsNeedUpdate,e.colorsNeedUpdate),w=e.__webglCustomAttributesList;
if(n.sortParticles){for(Tn.copy(yn),Tn.multiply(n.matrixWorld),i=0;b>i;i++)s=m[i],Sn.copy(s),Sn.applyProjection(Tn),y[i]=[Sn.z,i];for(y.sort(x),i=0;b>i;i++)s=m[y[i][1]],a=3*i,_[a]=s.x,_[a+1]=s.y,_[a+2]=s.z;for(r=0;v>r;r++)a=3*r,l=g[y[r][1]],E[a]=l.r,E[a+1]=l.g,E[a+2]=l.b;if(w)for(u=0,c=w.length;c>u;u++)if(d=w[u],void 0===d.boundTo||"vertices"===d.boundTo)if(a=0,h=d.value.length,1===d.size)for(f=0;h>f;f++)o=y[f][1],d.array[f]=d.value[o];else if(2===d.size)for(f=0;h>f;f++)o=y[f][1],p=d.value[o],d.array[a]=p.x,d.array[a+1]=p.y,a+=2;else if(3===d.size)if("c"===d.type)for(f=0;h>f;f++)o=y[f][1],p=d.value[o],d.array[a]=p.r,d.array[a+1]=p.g,d.array[a+2]=p.b,a+=3;else for(f=0;h>f;f++)o=y[f][1],p=d.value[o],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,a+=3;else if(4===d.size)for(f=0;h>f;f++)o=y[f][1],p=d.value[o],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,d.array[a+3]=p.w,a+=4}else{if(T)for(i=0;b>i;i++)s=m[i],a=3*i,_[a]=s.x,_[a+1]=s.y,_[a+2]=s.z;if(S)for(r=0;v>r;r++)l=g[r],a=3*r,E[a]=l.r,E[a+1]=l.g,E[a+2]=l.b;if(w)for(u=0,c=w.length;c>u;u++)if(d=w[u],d.needsUpdate&&(void 0===d.boundTo||"vertices"===d.boundTo))if(h=d.value.length,a=0,1===d.size)for(f=0;h>f;f++)d.array[f]=d.value[f];else if(2===d.size)for(f=0;h>f;f++)p=d.value[f],d.array[a]=p.x,d.array[a+1]=p.y,a+=2;else if(3===d.size)if("c"===d.type)for(f=0;h>f;f++)p=d.value[f],d.array[a]=p.r,d.array[a+1]=p.g,d.array[a+2]=p.b,a+=3;else for(f=0;h>f;f++)p=d.value[f],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,a+=3;else if(4===d.size)for(f=0;h>f;f++)p=d.value[f],d.array[a]=p.x,d.array[a+1]=p.y,d.array[a+2]=p.z,d.array[a+3]=p.w,a+=4}if((T||n.sortParticles)&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglVertexBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,_,t)),(S||n.sortParticles)&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglColorBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,E,t)),w)for(u=0,c=w.length;c>u;u++)d=w[u],(d.needsUpdate||n.sortParticles)&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,d.buffer),Lt.bufferData(Lt.ARRAY_BUFFER,d.array,t))}function v(e,t){var n,i,r,s,a,o,l,u,c,f,h,p,d=e.vertices,m=e.colors,b=e.lineDistances,g=d.length,v=m.length,_=b.length,E=e.__vertexArray,y=e.__colorArray,T=e.__lineDistanceArray,S=e.verticesNeedUpdate,w=e.colorsNeedUpdate,k=e.lineDistancesNeedUpdate,x=e.__webglCustomAttributesList;if(S){for(n=0;g>n;n++)s=d[n],a=3*n,E[a]=s.x,E[a+1]=s.y,E[a+2]=s.z;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglVertexBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,E,t)}if(w){for(i=0;v>i;i++)o=m[i],a=3*i,y[a]=o.r,y[a+1]=o.g,y[a+2]=o.b;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglColorBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,y,t)}if(k){for(r=0;_>r;r++)T[r]=b[r];Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,T,t)}if(x)for(l=0,u=x.length;u>l;l++)if(p=x[l],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo)){if(a=0,f=p.value.length,1===p.size)for(c=0;f>c;c++)p.array[c]=p.value[c];else if(2===p.size)for(c=0;f>c;c++)h=p.value[c],p.array[a]=h.x,p.array[a+1]=h.y,a+=2;else if(3===p.size)if("c"===p.type)for(c=0;f>c;c++)h=p.value[c],p.array[a]=h.r,p.array[a+1]=h.g,p.array[a+2]=h.b,a+=3;else for(c=0;f>c;c++)h=p.value[c],p.array[a]=h.x,p.array[a+1]=h.y,p.array[a+2]=h.z,a+=3;else if(4===p.size)for(c=0;f>c;c++)h=p.value[c],p.array[a]=h.x,p.array[a+1]=h.y,p.array[a+2]=h.z,p.array[a+3]=h.w,a+=4;Lt.bindBuffer(Lt.ARRAY_BUFFER,p.buffer),Lt.bufferData(Lt.ARRAY_BUFFER,p.array,t)}}function _(e,t){var n,i,r,s,a,o,l,u,c,f,h,p,d,m=e.vertices,b=e.colors,g=e.normals,v=m.length,_=b.length,E=g.length,y=e.__vertexArray,T=e.__colorArray,S=e.__normalArray,w=e.verticesNeedUpdate,k=e.colorsNeedUpdate,x=e.normalsNeedUpdate,R=e.__webglCustomAttributesList;if(w){for(n=0;v>n;n++)s=m[n],a=3*n,y[a]=s.x,y[a+1]=s.y,y[a+2]=s.z;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglVertexBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,y,t)}if(k){for(i=0;_>i;i++)o=b[i],a=3*i,T[a]=o.r,T[a+1]=o.g,T[a+2]=o.b;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglColorBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,T,t)}if(x){for(r=0;E>r;r++)l=g[r],a=3*r,S[a]=l.x,S[a+1]=l.y,S[a+2]=l.z;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglNormalBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,S,t)}if(R)for(u=0,c=R.length;c>u;u++)if(p=R[u],p.needsUpdate&&(void 0===p.boundTo||"vertices"===p.boundTo)){if(a=0,h=p.value.length,1===p.size)for(f=0;h>f;f++)p.array[f]=p.value[f];else if(2===p.size)for(f=0;h>f;f++)d=p.value[f],p.array[a]=d.x,p.array[a+1]=d.y,a+=2;else if(3===p.size)if("c"===p.type)for(f=0;h>f;f++)d=p.value[f],p.array[a]=d.r,p.array[a+1]=d.g,p.array[a+2]=d.b,a+=3;else for(f=0;h>f;f++)d=p.value[f],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,a+=3;else if(4===p.size)for(f=0;h>f;f++)d=p.value[f],p.array[a]=d.x,p.array[a+1]=d.y,p.array[a+2]=d.z,p.array[a+3]=d.w,a+=4;Lt.bindBuffer(Lt.ARRAY_BUFFER,p.buffer),Lt.bufferData(Lt.ARRAY_BUFFER,p.array,t)}}function E(e,t,n,i,r){if(e.__inittedArrays){var s,a,o,l,u,c,f,h,b,g,v,_,E,y,T,S,w,k,x,R,P,O,C,A,M,$,H,D,N,I,L,z,U,F,B,G,j,V,W,J,Y,q,X,K,Q,Z,et,tt,nt=p(r),it=d(r),rt=m(r),st=nt===THREE.SmoothShading,at=0,ot=0,lt=0,ut=0,ct=0,ft=0,ht=0,pt=0,dt=0,mt=0,bt=0,gt=0,vt=0,_t=e.__vertexArray,Et=e.__uvArray,yt=e.__uv2Array,Tt=e.__normalArray,St=e.__tangentArray,wt=e.__colorArray,kt=e.__skinIndexArray,xt=e.__skinWeightArray,Rt=e.__morphTargetsArrays,Pt=e.__morphNormalsArrays,Ot=e.__webglCustomAttributesList,Ct=e.__faceArray,At=e.__lineArray,Mt=t.geometry,$t=Mt.verticesNeedUpdate,Ht=Mt.elementsNeedUpdate,Dt=Mt.uvsNeedUpdate,Nt=Mt.normalsNeedUpdate,It=Mt.tangentsNeedUpdate,zt=Mt.colorsNeedUpdate,Ut=Mt.morphTargetsNeedUpdate,Ft=Mt.vertices,Bt=e.faces3,Gt=e.faces4,jt=Mt.faces,Vt=Mt.faceVertexUvs[0],Wt=Mt.faceVertexUvs[1],Jt=(Mt.colors,Mt.skinIndices),Yt=Mt.skinWeights,qt=Mt.morphTargets,Xt=Mt.morphNormals;if($t){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],_=Ft[l.a],E=Ft[l.b],y=Ft[l.c],_t[ot]=_.x,_t[ot+1]=_.y,_t[ot+2]=_.z,_t[ot+3]=E.x,_t[ot+4]=E.y,_t[ot+5]=E.z,_t[ot+6]=y.x,_t[ot+7]=y.y,_t[ot+8]=y.z,ot+=9;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],_=Ft[l.a],E=Ft[l.b],y=Ft[l.c],T=Ft[l.d],_t[ot]=_.x,_t[ot+1]=_.y,_t[ot+2]=_.z,_t[ot+3]=E.x,_t[ot+4]=E.y,_t[ot+5]=E.z,_t[ot+6]=y.x,_t[ot+7]=y.y,_t[ot+8]=y.z,_t[ot+9]=T.x,_t[ot+10]=T.y,_t[ot+11]=T.z,ot+=12;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglVertexBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,_t,n)}if(Ut)for(Y=0,q=qt.length;q>Y;Y++){for(bt=0,s=0,a=Bt.length;a>s;s++)Q=Bt[s],l=jt[Q],_=qt[Y].vertices[l.a],E=qt[Y].vertices[l.b],y=qt[Y].vertices[l.c],X=Rt[Y],X[bt]=_.x,X[bt+1]=_.y,X[bt+2]=_.z,X[bt+3]=E.x,X[bt+4]=E.y,X[bt+5]=E.z,X[bt+6]=y.x,X[bt+7]=y.y,X[bt+8]=y.z,r.morphNormals&&(st?(Z=Xt[Y].vertexNormals[Q],R=Z.a,P=Z.b,O=Z.c):(R=Xt[Y].faceNormals[Q],P=R,O=R),K=Pt[Y],K[bt]=R.x,K[bt+1]=R.y,K[bt+2]=R.z,K[bt+3]=P.x,K[bt+4]=P.y,K[bt+5]=P.z,K[bt+6]=O.x,K[bt+7]=O.y,K[bt+8]=O.z),bt+=9;for(s=0,a=Gt.length;a>s;s++)Q=Gt[s],l=jt[Q],_=qt[Y].vertices[l.a],E=qt[Y].vertices[l.b],y=qt[Y].vertices[l.c],T=qt[Y].vertices[l.d],X=Rt[Y],X[bt]=_.x,X[bt+1]=_.y,X[bt+2]=_.z,X[bt+3]=E.x,X[bt+4]=E.y,X[bt+5]=E.z,X[bt+6]=y.x,X[bt+7]=y.y,X[bt+8]=y.z,X[bt+9]=T.x,X[bt+10]=T.y,X[bt+11]=T.z,r.morphNormals&&(st?(Z=Xt[Y].vertexNormals[Q],R=Z.a,P=Z.b,O=Z.c,C=Z.d):(R=Xt[Y].faceNormals[Q],P=R,O=R,C=R),K=Pt[Y],K[bt]=R.x,K[bt+1]=R.y,K[bt+2]=R.z,K[bt+3]=P.x,K[bt+4]=P.y,K[bt+5]=P.z,K[bt+6]=O.x,K[bt+7]=O.y,K[bt+8]=O.z,K[bt+9]=C.x,K[bt+10]=C.y,K[bt+11]=C.z),bt+=12;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[Y]),Lt.bufferData(Lt.ARRAY_BUFFER,Rt[Y],n),r.morphNormals&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[Y]),Lt.bufferData(Lt.ARRAY_BUFFER,Pt[Y],n))}if(Yt.length){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],D=Yt[l.a],N=Yt[l.b],I=Yt[l.c],xt[mt]=D.x,xt[mt+1]=D.y,xt[mt+2]=D.z,xt[mt+3]=D.w,xt[mt+4]=N.x,xt[mt+5]=N.y,xt[mt+6]=N.z,xt[mt+7]=N.w,xt[mt+8]=I.x,xt[mt+9]=I.y,xt[mt+10]=I.z,xt[mt+11]=I.w,z=Jt[l.a],U=Jt[l.b],F=Jt[l.c],kt[mt]=z.x,kt[mt+1]=z.y,kt[mt+2]=z.z,kt[mt+3]=z.w,kt[mt+4]=U.x,kt[mt+5]=U.y,kt[mt+6]=U.z,kt[mt+7]=U.w,kt[mt+8]=F.x,kt[mt+9]=F.y,kt[mt+10]=F.z,kt[mt+11]=F.w,mt+=12;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],D=Yt[l.a],N=Yt[l.b],I=Yt[l.c],L=Yt[l.d],xt[mt]=D.x,xt[mt+1]=D.y,xt[mt+2]=D.z,xt[mt+3]=D.w,xt[mt+4]=N.x,xt[mt+5]=N.y,xt[mt+6]=N.z,xt[mt+7]=N.w,xt[mt+8]=I.x,xt[mt+9]=I.y,xt[mt+10]=I.z,xt[mt+11]=I.w,xt[mt+12]=L.x,xt[mt+13]=L.y,xt[mt+14]=L.z,xt[mt+15]=L.w,z=Jt[l.a],U=Jt[l.b],F=Jt[l.c],B=Jt[l.d],kt[mt]=z.x,kt[mt+1]=z.y,kt[mt+2]=z.z,kt[mt+3]=z.w,kt[mt+4]=U.x,kt[mt+5]=U.y,kt[mt+6]=U.z,kt[mt+7]=U.w,kt[mt+8]=F.x,kt[mt+9]=F.y,kt[mt+10]=F.z,kt[mt+11]=F.w,kt[mt+12]=B.x,kt[mt+13]=B.y,kt[mt+14]=B.z,kt[mt+15]=B.w,mt+=16;mt>0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,kt,n),Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,xt,n))}if(zt&&it){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],f=l.vertexColors,h=l.color,3===f.length&&it===THREE.VertexColors?(A=f[0],M=f[1],$=f[2]):(A=h,M=h,$=h),wt[dt]=A.r,wt[dt+1]=A.g,wt[dt+2]=A.b,wt[dt+3]=M.r,wt[dt+4]=M.g,wt[dt+5]=M.b,wt[dt+6]=$.r,wt[dt+7]=$.g,wt[dt+8]=$.b,dt+=9;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],f=l.vertexColors,h=l.color,4===f.length&&it===THREE.VertexColors?(A=f[0],M=f[1],$=f[2],H=f[3]):(A=h,M=h,$=h,H=h),wt[dt]=A.r,wt[dt+1]=A.g,wt[dt+2]=A.b,wt[dt+3]=M.r,wt[dt+4]=M.g,wt[dt+5]=M.b,wt[dt+6]=$.r,wt[dt+7]=$.g,wt[dt+8]=$.b,wt[dt+9]=H.r,wt[dt+10]=H.g,wt[dt+11]=H.b,dt+=12;dt>0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglColorBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,wt,n))}if(It&&Mt.hasTangents){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],b=l.vertexTangents,S=b[0],w=b[1],k=b[2],St[ht]=S.x,St[ht+1]=S.y,St[ht+2]=S.z,St[ht+3]=S.w,St[ht+4]=w.x,St[ht+5]=w.y,St[ht+6]=w.z,St[ht+7]=w.w,St[ht+8]=k.x,St[ht+9]=k.y,St[ht+10]=k.z,St[ht+11]=k.w,ht+=12;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],b=l.vertexTangents,S=b[0],w=b[1],k=b[2],x=b[3],St[ht]=S.x,St[ht+1]=S.y,St[ht+2]=S.z,St[ht+3]=S.w,St[ht+4]=w.x,St[ht+5]=w.y,St[ht+6]=w.z,St[ht+7]=w.w,St[ht+8]=k.x,St[ht+9]=k.y,St[ht+10]=k.z,St[ht+11]=k.w,St[ht+12]=x.x,St[ht+13]=x.y,St[ht+14]=x.z,St[ht+15]=x.w,ht+=16;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglTangentBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,St,n)}if(Nt&&nt){for(s=0,a=Bt.length;a>s;s++)if(l=jt[Bt[s]],u=l.vertexNormals,c=l.normal,3===u.length&&st)for(G=0;3>G;G++)V=u[G],Tt[ft]=V.x,Tt[ft+1]=V.y,Tt[ft+2]=V.z,ft+=3;else for(G=0;3>G;G++)Tt[ft]=c.x,Tt[ft+1]=c.y,Tt[ft+2]=c.z,ft+=3;for(s=0,a=Gt.length;a>s;s++)if(l=jt[Gt[s]],u=l.vertexNormals,c=l.normal,4===u.length&&st)for(G=0;4>G;G++)V=u[G],Tt[ft]=V.x,Tt[ft+1]=V.y,Tt[ft+2]=V.z,ft+=3;else for(G=0;4>G;G++)Tt[ft]=c.x,Tt[ft+1]=c.y,Tt[ft+2]=c.z,ft+=3;Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglNormalBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,Tt,n)}if(Dt&&Vt&&rt){for(s=0,a=Bt.length;a>s;s++)if(o=Bt[s],g=Vt[o],void 0!==g)for(G=0;3>G;G++)W=g[G],Et[lt]=W.x,Et[lt+1]=W.y,lt+=2;for(s=0,a=Gt.length;a>s;s++)if(o=Gt[s],g=Vt[o],void 0!==g)for(G=0;4>G;G++)W=g[G],Et[lt]=W.x,Et[lt+1]=W.y,lt+=2;lt>0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglUVBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,Et,n))}if(Dt&&Wt&&rt){for(s=0,a=Bt.length;a>s;s++)if(o=Bt[s],v=Wt[o],void 0!==v)for(G=0;3>G;G++)J=v[G],yt[ut]=J.x,yt[ut+1]=J.y,ut+=2;for(s=0,a=Gt.length;a>s;s++)if(o=Gt[s],v=Wt[o],void 0!==v)for(G=0;4>G;G++)J=v[G],yt[ut]=J.x,yt[ut+1]=J.y,ut+=2;ut>0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglUV2Buffer),Lt.bufferData(Lt.ARRAY_BUFFER,yt,n))}if(Ht){for(s=0,a=Bt.length;a>s;s++)Ct[ct]=at,Ct[ct+1]=at+1,Ct[ct+2]=at+2,ct+=3,At[pt]=at,At[pt+1]=at+1,At[pt+2]=at,At[pt+3]=at+2,At[pt+4]=at+1,At[pt+5]=at+2,pt+=6,at+=3;for(s=0,a=Gt.length;a>s;s++)Ct[ct]=at,Ct[ct+1]=at+1,Ct[ct+2]=at+3,Ct[ct+3]=at+1,Ct[ct+4]=at+2,Ct[ct+5]=at+3,ct+=6,At[pt]=at,At[pt+1]=at+1,At[pt+2]=at,At[pt+3]=at+3,At[pt+4]=at+1,At[pt+5]=at+2,At[pt+6]=at+2,At[pt+7]=at+3,pt+=8,at+=4;Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Lt.bufferData(Lt.ELEMENT_ARRAY_BUFFER,Ct,n),Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Lt.bufferData(Lt.ELEMENT_ARRAY_BUFFER,At,n)}if(Ot)for(G=0,j=Ot.length;j>G;G++)if(tt=Ot[G],tt.__original.needsUpdate){if(gt=0,vt=0,1===tt.size){if(void 0===tt.boundTo||"vertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],tt.array[gt]=tt.value[l.a],tt.array[gt+1]=tt.value[l.b],tt.array[gt+2]=tt.value[l.c],gt+=3;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],tt.array[gt]=tt.value[l.a],tt.array[gt+1]=tt.value[l.b],tt.array[gt+2]=tt.value[l.c],tt.array[gt+3]=tt.value[l.d],gt+=4}else if("faces"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],tt.array[gt]=et,tt.array[gt+1]=et,tt.array[gt+2]=et,gt+=3;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],tt.array[gt]=et,tt.array[gt+1]=et,tt.array[gt+2]=et,tt.array[gt+3]=et,gt+=4}}else if(2===tt.size){if(void 0===tt.boundTo||"vertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=E.x,tt.array[gt+3]=E.y,tt.array[gt+4]=y.x,tt.array[gt+5]=y.y,gt+=6;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],T=tt.value[l.d],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=E.x,tt.array[gt+3]=E.y,tt.array[gt+4]=y.x,tt.array[gt+5]=y.y,tt.array[gt+6]=T.x,tt.array[gt+7]=T.y,gt+=8}else if("faces"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],_=et,E=et,y=et,tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=E.x,tt.array[gt+3]=E.y,tt.array[gt+4]=y.x,tt.array[gt+5]=y.y,gt+=6;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],_=et,E=et,y=et,T=et,tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=E.x,tt.array[gt+3]=E.y,tt.array[gt+4]=y.x,tt.array[gt+5]=y.y,tt.array[gt+6]=T.x,tt.array[gt+7]=T.y,gt+=8}}else if(3===tt.size){var Kt;if(Kt="c"===tt.type?["r","g","b"]:["x","y","z"],void 0===tt.boundTo||"vertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],gt+=9;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],T=tt.value[l.d],tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],tt.array[gt+9]=T[Kt[0]],tt.array[gt+10]=T[Kt[1]],tt.array[gt+11]=T[Kt[2]],gt+=12}else if("faces"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],_=et,E=et,y=et,tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],gt+=9;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],_=et,E=et,y=et,T=et,tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],tt.array[gt+9]=T[Kt[0]],tt.array[gt+10]=T[Kt[1]],tt.array[gt+11]=T[Kt[2]],gt+=12}else if("faceVertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],_=et[0],E=et[1],y=et[2],tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],gt+=9;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],_=et[0],E=et[1],y=et[2],T=et[3],tt.array[gt]=_[Kt[0]],tt.array[gt+1]=_[Kt[1]],tt.array[gt+2]=_[Kt[2]],tt.array[gt+3]=E[Kt[0]],tt.array[gt+4]=E[Kt[1]],tt.array[gt+5]=E[Kt[2]],tt.array[gt+6]=y[Kt[0]],tt.array[gt+7]=y[Kt[1]],tt.array[gt+8]=y[Kt[2]],tt.array[gt+9]=T[Kt[0]],tt.array[gt+10]=T[Kt[1]],tt.array[gt+11]=T[Kt[2]],gt+=12}}else if(4===tt.size)if(void 0===tt.boundTo||"vertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)l=jt[Bt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,gt+=12;for(s=0,a=Gt.length;a>s;s++)l=jt[Gt[s]],_=tt.value[l.a],E=tt.value[l.b],y=tt.value[l.c],T=tt.value[l.d],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,tt.array[gt+12]=T.x,tt.array[gt+13]=T.y,tt.array[gt+14]=T.z,tt.array[gt+15]=T.w,gt+=16}else if("faces"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],_=et,E=et,y=et,tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,gt+=12;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],_=et,E=et,y=et,T=et,tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,tt.array[gt+12]=T.x,tt.array[gt+13]=T.y,tt.array[gt+14]=T.z,tt.array[gt+15]=T.w,gt+=16}else if("faceVertices"===tt.boundTo){for(s=0,a=Bt.length;a>s;s++)et=tt.value[Bt[s]],_=et[0],E=et[1],y=et[2],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,gt+=12;for(s=0,a=Gt.length;a>s;s++)et=tt.value[Gt[s]],_=et[0],E=et[1],y=et[2],T=et[3],tt.array[gt]=_.x,tt.array[gt+1]=_.y,tt.array[gt+2]=_.z,tt.array[gt+3]=_.w,tt.array[gt+4]=E.x,tt.array[gt+5]=E.y,tt.array[gt+6]=E.z,tt.array[gt+7]=E.w,tt.array[gt+8]=y.x,tt.array[gt+9]=y.y,tt.array[gt+10]=y.z,tt.array[gt+11]=y.w,tt.array[gt+12]=T.x,tt.array[gt+13]=T.y,tt.array[gt+14]=T.z,tt.array[gt+15]=T.w,gt+=16}Lt.bindBuffer(Lt.ARRAY_BUFFER,tt.buffer),Lt.bufferData(Lt.ARRAY_BUFFER,tt.array,n)}i&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function y(e,t,n){var i,r,s=e.attributes;for(i in s)r=s[i],r.needsUpdate&&("index"===i?(Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,r.buffer),Lt.bufferData(Lt.ELEMENT_ARRAY_BUFFER,r.array,t)):(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.buffer),Lt.bufferData(Lt.ARRAY_BUFFER,r.array,t)),r.needsUpdate=!1),n&&!r.dynamic&&(r.array=null)}function T(e){_n[e]||(Lt.enableVertexAttribArray(e),_n[e]=!0)}function S(){for(var e in _n)_n[e]&&(Lt.disableVertexAttribArray(e),_n[e]=!1)}function w(e,t,n){var i=e.program.attributes;if(-1!==n.morphTargetBase&&i.position>=0?(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[n.morphTargetBase]),T(i.position),Lt.vertexAttribPointer(i.position,3,Lt.FLOAT,!1,0,0)):i.position>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglVertexBuffer),T(i.position),Lt.vertexAttribPointer(i.position,3,Lt.FLOAT,!1,0,0)),n.morphTargetForcedOrder.length)for(var r=0,s=n.morphTargetForcedOrder,a=n.morphTargetInfluences;e.numSupportedMorphTargets>r&&s.length>r;)i["morphTarget"+r]>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[s[r]]),T(i["morphTarget"+r]),Lt.vertexAttribPointer(i["morphTarget"+r],3,Lt.FLOAT,!1,0,0)),i["morphNormal"+r]>=0&&e.morphNormals&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[s[r]]),T(i["morphNormal"+r]),Lt.vertexAttribPointer(i["morphNormal"+r],3,Lt.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[r]=a[s[r]],r++;else{var o,l,u=[],a=n.morphTargetInfluences,c=a.length;for(l=0;c>l;l++)o=a[l],o>0&&u.push([o,l]);u.length>e.numSupportedMorphTargets?(u.sort(x),u.length=e.numSupportedMorphTargets):u.length>e.numSupportedMorphNormals?u.sort(x):0===u.length&&u.push([0,0]);for(var f,r=0;e.numSupportedMorphTargets>r;)u[r]?(f=u[r][1],i["morphTarget"+r]>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[f]),T(i["morphTarget"+r]),Lt.vertexAttribPointer(i["morphTarget"+r],3,Lt.FLOAT,!1,0,0)),i["morphNormal"+r]>=0&&e.morphNormals&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[f]),T(i["morphNormal"+r]),Lt.vertexAttribPointer(i["morphNormal"+r],3,Lt.FLOAT,!1,0,0)),n.__webglMorphTargetInfluences[r]=a[f]):n.__webglMorphTargetInfluences[r]=0,r++}null!==e.program.uniforms.morphTargetInfluences&&Lt.uniform1fv(e.program.uniforms.morphTargetInfluences,n.__webglMorphTargetInfluences)}function k(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function x(e,t){return t[0]-e[0]}function R(e,t,n){if(e.length)for(var i=0,r=e.length;r>i;i++)Jt=null,Kt=null,nn=-1,on=-1,ln=-1,en=-1,tn=-1,Xt=-1,qt=-1,kn=!0,e[i].render(t,n,gn,vn),Jt=null,Kt=null,nn=-1,on=-1,ln=-1,en=-1,tn=-1,Xt=-1,qt=-1,kn=!0}function P(e,t,n,i,r,s,a,o){var l,u,c,f,h,p,d;t?(h=e.length-1,p=-1,d=-1):(h=0,p=e.length,d=1);for(var m=h;m!==p;m+=d)if(l=e[m],l.render){if(u=l.object,c=l.buffer,o)f=o;else{if(f=l[n],!f)continue;a&&jt.setBlending(f.blending,f.blendEquation,f.blendSrc,f.blendDst),jt.setDepthTest(f.depthTest),jt.setDepthWrite(f.depthWrite),ot(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits)}jt.setMaterialFaces(f),c instanceof THREE.BufferGeometry?jt.renderBufferDirect(i,r,s,f,c,u):jt.renderBuffer(i,r,s,f,c,u)}}function O(e,t,n,i,r,s,a){for(var o,l,u,c=0,f=e.length;f>c;c++)if(o=e[c],l=o.object,l.visible){if(a)u=a;else{if(u=o[t],!u)continue;s&&jt.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),jt.setDepthTest(u.depthTest),jt.setDepthWrite(u.depthWrite),ot(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}jt.renderImmediateObject(n,i,r,u,l)}}function C(e){var t=e.object,n=t.material;n.transparent?(e.transparent=n,e.opaque=null):(e.opaque=n,e.transparent=null)}function A(e){var t,n,i,r=e.object,s=e.buffer;i=r.material,i instanceof THREE.MeshFaceMaterial?(n=s.materialIndex,t=i.materials[n],t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)):(t=i,t&&(t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)))}function M(e,t){var n,i,r,s,a,o,l={},u=e.morphTargets.length,c=e.morphNormals.length,f=t instanceof THREE.MeshFaceMaterial;for(e.geometryGroups={},n=0,i=e.faces.length;i>n;n++)r=e.faces[n],s=f?r.materialIndex:0,void 0===l[s]&&(l[s]={hash:s,counter:0}),o=l[s].hash+"_"+l[s].counter,void 0===e.geometryGroups[o]&&(e.geometryGroups[o]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:u,numMorphNormals:c}),a=r instanceof THREE.Face3?3:4,e.geometryGroups[o].vertices+a>65535&&(l[s].counter+=1,o=l[s].hash+"_"+l[s].counter,void 0===e.geometryGroups[o]&&(e.geometryGroups[o]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:u,numMorphNormals:c})),r instanceof THREE.Face3?e.geometryGroups[o].faces3.push(n):e.geometryGroups[o].faces4.push(n),e.geometryGroups[o].vertices+=a;e.geometryGroupsList=[];for(var h in e.geometryGroups)e.geometryGroups[h].id=Qt++,e.geometryGroupsList.push(e.geometryGroups[h])}function $(e,s){var a,f,h,p;if(void 0===e.__webglInit)if(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener("dispose",zn)),f=e.geometry,void 0===f);else if(f instanceof THREE.BufferGeometry)b(f);else if(e instanceof THREE.Mesh){h=e.material,void 0===f.geometryGroups&&M(f,h);for(a in f.geometryGroups)p=f.geometryGroups[a],p.__webglVertexBuffer||(r(p),c(p,e),f.verticesNeedUpdate=!0,f.morphTargetsNeedUpdate=!0,f.elementsNeedUpdate=!0,f.uvsNeedUpdate=!0,f.normalsNeedUpdate=!0,f.tangentsNeedUpdate=!0,f.colorsNeedUpdate=!0)}else e instanceof THREE.Ribbon?f.__webglVertexBuffer||(i(f),u(f,e),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.normalsNeedUpdate=!0):e instanceof THREE.Line?f.__webglVertexBuffer||(n(f),l(f,e),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.lineDistancesNeedUpdate=!0):e instanceof THREE.ParticleSystem&&(f.__webglVertexBuffer||(t(f),o(f,e),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0));if(void 0===e.__webglActive){if(e instanceof THREE.Mesh){if(f=e.geometry,f instanceof THREE.BufferGeometry)H(s.__webglObjects,f,e);else if(f instanceof THREE.Geometry)for(a in f.geometryGroups)p=f.geometryGroups[a],H(s.__webglObjects,p,e)}else e instanceof THREE.Ribbon||e instanceof THREE.Line||e instanceof THREE.ParticleSystem?(f=e.geometry,H(s.__webglObjects,f,e)):e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback?D(s.__webglObjectsImmediate,e):e instanceof THREE.Sprite?s.__webglSprites.push(e):e instanceof THREE.LensFlare&&s.__webglFlares.push(e);e.__webglActive=!0}}function H(e,t,n){e.push({id:null,buffer:t,object:n,opaque:null,transparent:null,z:0})}function D(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function N(e){var t,n,i,r=e.geometry;if(r instanceof THREE.BufferGeometry)y(r,Lt.DYNAMIC_DRAW,!r.dynamic);else if(e instanceof THREE.Mesh){for(var s=0,a=r.geometryGroupsList.length;a>s;s++)t=r.geometryGroupsList[s],i=f(e,t),r.buffersNeedUpdate&&c(t,e),n=i.attributes&&I(i),(r.verticesNeedUpdate||r.morphTargetsNeedUpdate||r.elementsNeedUpdate||r.uvsNeedUpdate||r.normalsNeedUpdate||r.colorsNeedUpdate||r.tangentsNeedUpdate||n)&&E(t,e,Lt.DYNAMIC_DRAW,!r.dynamic,i);r.verticesNeedUpdate=!1,r.morphTargetsNeedUpdate=!1,r.elementsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.tangentsNeedUpdate=!1,r.buffersNeedUpdate=!1,i.attributes&&L(i)}else e instanceof THREE.Ribbon?(i=f(e,r),n=i.attributes&&I(i),(r.verticesNeedUpdate||r.colorsNeedUpdate||r.normalsNeedUpdate||n)&&_(r,Lt.DYNAMIC_DRAW),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,r.normalsNeedUpdate=!1,i.attributes&&L(i)):e instanceof THREE.Line?(i=f(e,r),n=i.attributes&&I(i),(r.verticesNeedUpdate||r.colorsNeedUpdate||r.lineDistancesNeedUpdate||n)&&v(r,Lt.DYNAMIC_DRAW),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,r.lineDistancesNeedUpdate=!1,i.attributes&&L(i)):e instanceof THREE.ParticleSystem&&(i=f(e,r),n=i.attributes&&I(i),(r.verticesNeedUpdate||r.colorsNeedUpdate||e.sortParticles||n)&&g(r,Lt.DYNAMIC_DRAW,e),r.verticesNeedUpdate=!1,r.colorsNeedUpdate=!1,i.attributes&&L(i))}function I(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function L(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function z(e,t){e instanceof THREE.Mesh||e instanceof THREE.ParticleSystem||e instanceof THREE.Ribbon||e instanceof THREE.Line?U(t.__webglObjects,e):e instanceof THREE.Sprite?F(t.__webglSprites,e):e instanceof THREE.LensFlare?F(t.__webglFlares,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&U(t.__webglObjectsImmediate,e),delete e.__webglActive}function U(e,t){for(var n=e.length-1;n>=0;n--)e[n].object===t&&e.splice(n,1)}function F(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)}function B(e,t){e.uniforms=THREE.UniformsUtils.clone(t.uniforms),e.vertexShader=t.vertexShader,e.fragmentShader=t.fragmentShader}function G(e,t,n,i,r){Zt=0,i.needsUpdate&&(i.program&&Wn(i),jt.initMaterial(i,t,n,r),i.needsUpdate=!1),i.morphTargets&&(r.__webglMorphTargetInfluences||(r.__webglMorphTargetInfluences=new Float32Array(jt.maxMorphTargets)));var s=!1,a=i.program,o=a.uniforms,l=i.uniforms;if(a!==Jt&&(Lt.useProgram(a),Jt=a,s=!0),i.id!==qt&&(qt=i.id,s=!0),(s||e!==Kt)&&(Lt.uniformMatrix4fv(o.projectionMatrix,!1,e.projectionMatrix.elements),e!==Kt&&(Kt=e)),i.skinning)if(Mn&&r.useVertexTexture){if(null!==o.boneTexture){var u=et();Lt.uniform1i(o.boneTexture,u),jt.setTexture(r.boneTexture,u)}}else null!==o.boneGlobalMatrices&&Lt.uniformMatrix4fv(o.boneGlobalMatrices,!1,r.boneMatrices);return s&&(n&&i.fog&&Y(l,n),(i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i.lights)&&(kn&&(st(a,t),kn=!1),K(l,xn)),(i instanceof THREE.MeshBasicMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.MeshPhongMaterial)&&j(l,i),i instanceof THREE.LineBasicMaterial?V(l,i):i instanceof THREE.LineDashedMaterial?(V(l,i),W(l,i)):i instanceof THREE.ParticleBasicMaterial?J(l,i):i instanceof THREE.MeshPhongMaterial?q(l,i):i instanceof THREE.MeshLambertMaterial?X(l,i):i instanceof THREE.MeshDepthMaterial?(l.mNear.value=e.near,l.mFar.value=e.far,l.opacity.value=i.opacity):i instanceof THREE.MeshNormalMaterial&&(l.opacity.value=i.opacity),r.receiveShadow&&!i._shadowPass&&Q(l,t),tt(a,i.uniformsList),(i instanceof THREE.ShaderMaterial||i instanceof THREE.MeshPhongMaterial||i.envMap)&&null!==o.cameraPosition&&(Sn.getPositionFromMatrix(e.matrixWorld),Lt.uniform3f(o.cameraPosition,Sn.x,Sn.y,Sn.z)),(i instanceof THREE.MeshPhongMaterial||i instanceof THREE.MeshLambertMaterial||i instanceof THREE.ShaderMaterial||i.skinning)&&null!==o.viewMatrix&&Lt.uniformMatrix4fv(o.viewMatrix,!1,e.matrixWorldInverse.elements)),Z(o,r),null!==o.modelMatrix&&Lt.uniformMatrix4fv(o.modelMatrix,!1,r.matrixWorld.elements),a}function j(e,t){e.opacity.value=t.opacity,jt.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.normalMap?n=t.normalMap:t.bumpMap&&(n=t.bumpMap),void 0!==n){var i=n.offset,r=n.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,e.reflectivity.value=jt.gammaInput?t.reflectivity:t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}function V(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function W(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function J(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=Ot.height/2,e.map.value=t.map}function Y(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function q(e,t){e.shininess.value=t.shininess,jt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function X(e,t){jt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function K(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function Q(e,t){if(e.shadowMatrix)for(var n=0,i=0,r=t.length;r>i;i++){var s=t[i];s.castShadow&&(s instanceof THREE.SpotLight||s instanceof THREE.DirectionalLight&&!s.shadowCascade)&&(e.shadowMap.value[n]=s.shadowMap,e.shadowMapSize.value[n]=s.shadowMapSize,e.shadowMatrix.value[n]=s.shadowMatrix,e.shadowDarkness.value[n]=s.shadowDarkness,e.shadowBias.value[n]=s.shadowBias,n++)}}function Z(e,t){Lt.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Lt.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)
}function et(){var e=Zt;return e>=Rn&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Rn),Zt+=1,e}function tt(e,t){var n,i,r,s,a,o,l,u,c,f,h;for(c=0,f=t.length;f>c;c++)if(s=e.uniforms[t[c][1]])if(n=t[c][0],r=n.type,i=n.value,"i"===r)Lt.uniform1i(s,i);else if("f"===r)Lt.uniform1f(s,i);else if("v2"===r)Lt.uniform2f(s,i.x,i.y);else if("v3"===r)Lt.uniform3f(s,i.x,i.y,i.z);else if("v4"===r)Lt.uniform4f(s,i.x,i.y,i.z,i.w);else if("c"===r)Lt.uniform3f(s,i.r,i.g,i.b);else if("iv1"===r)Lt.uniform1iv(s,i);else if("iv"===r)Lt.uniform3iv(s,i);else if("fv1"===r)Lt.uniform1fv(s,i);else if("fv"===r)Lt.uniform3fv(s,i);else if("v2v"===r){for(void 0===n._array&&(n._array=new Float32Array(2*i.length)),l=0,u=i.length;u>l;l++)h=2*l,n._array[h]=i[l].x,n._array[h+1]=i[l].y;Lt.uniform2fv(s,n._array)}else if("v3v"===r){for(void 0===n._array&&(n._array=new Float32Array(3*i.length)),l=0,u=i.length;u>l;l++)h=3*l,n._array[h]=i[l].x,n._array[h+1]=i[l].y,n._array[h+2]=i[l].z;Lt.uniform3fv(s,n._array)}else if("v4v"===r){for(void 0===n._array&&(n._array=new Float32Array(4*i.length)),l=0,u=i.length;u>l;l++)h=4*l,n._array[h]=i[l].x,n._array[h+1]=i[l].y,n._array[h+2]=i[l].z,n._array[h+3]=i[l].w;Lt.uniform4fv(s,n._array)}else if("m4"===r)void 0===n._array&&(n._array=new Float32Array(16)),i.flattenToArray(n._array),Lt.uniformMatrix4fv(s,!1,n._array);else if("m4v"===r){for(void 0===n._array&&(n._array=new Float32Array(16*i.length)),l=0,u=i.length;u>l;l++)i[l].flattenToArrayOffset(n._array,16*l);Lt.uniformMatrix4fv(s,!1,n._array)}else if("t"===r){if(a=i,o=et(),Lt.uniform1i(s,o),!a)continue;a.image instanceof Array&&6===a.image.length?gt(a,o):a instanceof THREE.WebGLRenderTargetCube?vt(a,o):jt.setTexture(a,o)}else if("tv"===r){for(void 0===n._array&&(n._array=[]),l=0,u=n.value.length;u>l;l++)n._array[l]=et();for(Lt.uniform1iv(s,n._array),l=0,u=n.value.length;u>l;l++)a=n.value[l],o=n._array[l],a&&jt.setTexture(a,o)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+r)}function nt(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function it(e,t,n,i){e[t]=n.r*n.r*i,e[t+1]=n.g*n.g*i,e[t+2]=n.b*n.b*i}function rt(e,t,n,i){e[t]=n.r*i,e[t+1]=n.g*i,e[t+2]=n.b*i}function st(e,t){var n,i,r,s,a,o,l,u,c,f=0,h=0,p=0,d=xn,m=d.directional.colors,b=d.directional.positions,g=d.point.colors,v=d.point.positions,_=d.point.distances,E=d.spot.colors,y=d.spot.positions,T=d.spot.distances,S=d.spot.directions,w=d.spot.anglesCos,k=d.spot.exponents,x=d.hemi.skyColors,R=d.hemi.groundColors,P=d.hemi.positions,O=0,C=0,A=0,M=0,$=0,H=0,D=0,N=0,I=0,L=0,z=0,U=0;for(n=0,i=t.length;i>n;n++)if(r=t[n],!r.onlyShadow)if(s=r.color,l=r.intensity,c=r.distance,r instanceof THREE.AmbientLight){if(!r.visible)continue;jt.gammaInput?(f+=s.r*s.r,h+=s.g*s.g,p+=s.b*s.b):(f+=s.r,h+=s.g,p+=s.b)}else if(r instanceof THREE.DirectionalLight){if($+=1,!r.visible)continue;if(wn.getPositionFromMatrix(r.matrixWorld),Sn.getPositionFromMatrix(r.target.matrixWorld),wn.sub(Sn),wn.normalize(),0===wn.x&&0===wn.y&&0===wn.z)continue;I=3*O,b[I]=wn.x,b[I+1]=wn.y,b[I+2]=wn.z,jt.gammaInput?it(m,I,s,l*l):rt(m,I,s,l),O+=1}else if(r instanceof THREE.PointLight){if(H+=1,!r.visible)continue;L=3*C,jt.gammaInput?it(g,L,s,l*l):rt(g,L,s,l),Sn.getPositionFromMatrix(r.matrixWorld),v[L]=Sn.x,v[L+1]=Sn.y,v[L+2]=Sn.z,_[C]=c,C+=1}else if(r instanceof THREE.SpotLight){if(D+=1,!r.visible)continue;z=3*A,jt.gammaInput?it(E,z,s,l*l):rt(E,z,s,l),Sn.getPositionFromMatrix(r.matrixWorld),y[z]=Sn.x,y[z+1]=Sn.y,y[z+2]=Sn.z,T[A]=c,wn.copy(Sn),Sn.getPositionFromMatrix(r.target.matrixWorld),wn.sub(Sn),wn.normalize(),S[z]=wn.x,S[z+1]=wn.y,S[z+2]=wn.z,w[A]=Math.cos(r.angle),k[A]=r.exponent,A+=1}else if(r instanceof THREE.HemisphereLight){if(N+=1,!r.visible)continue;if(wn.getPositionFromMatrix(r.matrixWorld),wn.normalize(),0===wn.x&&0===wn.y&&0===wn.z)continue;U=3*M,P[U]=wn.x,P[U+1]=wn.y,P[U+2]=wn.z,a=r.color,o=r.groundColor,jt.gammaInput?(u=l*l,it(x,U,a,u),it(R,U,o,u)):(rt(x,U,a,l),rt(R,U,o,l)),M+=1}for(n=3*O,i=Math.max(m.length,3*$);i>n;n++)m[n]=0;for(n=3*C,i=Math.max(g.length,3*H);i>n;n++)g[n]=0;for(n=3*A,i=Math.max(E.length,3*D);i>n;n++)E[n]=0;for(n=3*M,i=Math.max(x.length,3*N);i>n;n++)x[n]=0;for(n=3*M,i=Math.max(R.length,3*N);i>n;n++)R[n]=0;d.directional.length=O,d.point.length=C,d.spot.length=A,d.hemi.length=M,d.ambient[0]=f,d.ambient[1]=h,d.ambient[2]=p}function at(e){e!==hn&&(Lt.lineWidth(e),hn=e)}function ot(e,t,n){un!==e&&(e?Lt.enable(Lt.POLYGON_OFFSET_FILL):Lt.disable(Lt.POLYGON_OFFSET_FILL),un=e),!e||cn===t&&fn===n||(Lt.polygonOffset(t,n),cn=t,fn=n)}function lt(e){var t,n,i=[];for(var r in e)t=e[r],t!==!1&&(n="#define "+r+" "+t,i.push(n));return i.join("\n")}function ut(e,t,n,i,r,s,a){var o,l,u,c,f,h=[];e?h.push(e):(h.push(t),h.push(n));for(u in s)h.push(u),h.push(s[u]);for(o in a)h.push(o),h.push(a[o]);for(f=h.join(),o=0,l=Vt.length;l>o;o++){var p=Vt[o];if(p.code===f)return p.usedTimes++,p.program}var d="SHADOWMAP_TYPE_BASIC";a.shadowMapType===THREE.PCFShadowMap?d="SHADOWMAP_TYPE_PCF":a.shadowMapType===THREE.PCFSoftShadowMap&&(d="SHADOWMAP_TYPE_PCF_SOFT");var m=lt(s);c=Lt.createProgram();var b=["precision "+Ct+" float;",m,An?"#define VERTEX_TEXTURES":"",jt.gammaInput?"#define GAMMA_INPUT":"",jt.gammaOutput?"#define GAMMA_OUTPUT":"",jt.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,"#define MAX_BONES "+a.maxBones,a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.vertexColors?"#define USE_COLOR":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.boneTextureWidth?"#define N_BONE_PIXEL_X "+a.boneTextureWidth.toFixed(1):"",a.boneTextureHeight?"#define N_BONE_PIXEL_Y "+a.boneTextureHeight.toFixed(1):"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals?"#define USE_MORPHNORMALS":"",a.perPixel?"#define PHONG_PER_PIXEL":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;","#endif","#endif","#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;","#endif",""].join("\n"),g=["precision "+Ct+" float;",a.bumpMap||a.normalMap?"#extension GL_OES_standard_derivatives : enable":"",m,"#define MAX_DIR_LIGHTS "+a.maxDirLights,"#define MAX_POINT_LIGHTS "+a.maxPointLights,"#define MAX_SPOT_LIGHTS "+a.maxSpotLights,"#define MAX_HEMI_LIGHTS "+a.maxHemiLights,"#define MAX_SHADOWS "+a.maxShadows,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"",jt.gammaInput?"#define GAMMA_INPUT":"",jt.gammaOutput?"#define GAMMA_OUTPUT":"",jt.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.lightMap?"#define USE_LIGHTMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.vertexColors?"#define USE_COLOR":"",a.metal?"#define METAL":"",a.perPixel?"#define PHONG_PER_PIXEL":"",a.wrapAround?"#define WRAP_AROUND":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",a.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"),v=pt("vertex",b+n),_=pt("fragment",g+t);Lt.attachShader(c,v),Lt.attachShader(c,_),Lt.linkProgram(c),Lt.getProgramParameter(c,Lt.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+Lt.getProgramParameter(c,Lt.VALIDATE_STATUS)+", gl error ["+Lt.getError()+"]"),Lt.deleteShader(_),Lt.deleteShader(v),c.uniforms={},c.attributes={};var E,y,T,S;E=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"],a.useVertexTexture?E.push("boneTexture"):E.push("boneGlobalMatrices");for(y in i)E.push(y);for(ct(c,E),E=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"],S=0;a.maxMorphTargets>S;S++)E.push("morphTarget"+S);for(S=0;a.maxMorphNormals>S;S++)E.push("morphNormal"+S);for(T in r)E.push(T);return ft(c,E),c.id=Wt++,Vt.push({program:c,code:f,usedTimes:1}),jt.info.memory.programs=Vt.length,c}function ct(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)r=t[n],e.uniforms[r]=Lt.getUniformLocation(e,r)}function ft(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)r=t[n],e.attributes[r]=Lt.getAttribLocation(e,r)}function ht(e){for(var t=e.split("\n"),n=0,i=t.length;i>n;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function pt(e,t){var n;return"fragment"===e?n=Lt.createShader(Lt.FRAGMENT_SHADER):"vertex"===e&&(n=Lt.createShader(Lt.VERTEX_SHADER)),Lt.shaderSource(n,t),Lt.compileShader(n),Lt.getShaderParameter(n,Lt.COMPILE_STATUS)?n:(console.error(Lt.getShaderInfoLog(n)),console.error(ht(t)),null)}function dt(e){return 0===(e&e-1)}function mt(e,t,n){n?(Lt.texParameteri(e,Lt.TEXTURE_WRAP_S,St(t.wrapS)),Lt.texParameteri(e,Lt.TEXTURE_WRAP_T,St(t.wrapT)),Lt.texParameteri(e,Lt.TEXTURE_MAG_FILTER,St(t.magFilter)),Lt.texParameteri(e,Lt.TEXTURE_MIN_FILTER,St(t.minFilter))):(Lt.texParameteri(e,Lt.TEXTURE_WRAP_S,Lt.CLAMP_TO_EDGE),Lt.texParameteri(e,Lt.TEXTURE_WRAP_T,Lt.CLAMP_TO_EDGE),Lt.texParameteri(e,Lt.TEXTURE_MAG_FILTER,Tt(t.magFilter)),Lt.texParameteri(e,Lt.TEXTURE_MIN_FILTER,Tt(t.minFilter))),Bt&&t.type!==THREE.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Lt.texParameterf(e,Bt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Cn)),t.__oldAnisotropy=t.anisotropy)}function bt(e,t){if(t>=e.width&&t>=e.height)return e;var n=Math.max(e.width,e.height),i=Math.floor(e.width*t/n),r=Math.floor(e.height*t/n),s=document.createElement("canvas");s.width=i,s.height=r;var a=s.getContext("2d");return a.drawImage(e,0,0,e.width,e.height,0,0,i,r),s}function gt(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Un),e.image.__webglTextureCube=Lt.createTexture(),jt.info.memory.textures++),Lt.activeTexture(Lt.TEXTURE0+t),Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var n=e instanceof THREE.CompressedTexture,i=[],r=0;6>r;r++)i[r]=jt.autoScaleCubemaps&&!n?bt(e.image[r],On):e.image[r];var s=i[0],a=dt(s.width)&&dt(s.height),o=St(e.format),l=St(e.type);mt(Lt.TEXTURE_CUBE_MAP,e,a);for(var r=0;6>r;r++)if(n)for(var u,c=i[r].mipmaps,f=0,h=c.length;h>f;f++)u=c[f],Lt.compressedTexImage2D(Lt.TEXTURE_CUBE_MAP_POSITIVE_X+r,f,o,u.width,u.height,0,u.data);else Lt.texImage2D(Lt.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,o,o,l,i[r]);e.generateMipmaps&&a&&Lt.generateMipmap(Lt.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Lt.activeTexture(Lt.TEXTURE0+t),Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function vt(e,t){Lt.activeTexture(Lt.TEXTURE0+t),Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,e.__webglTexture)}function _t(e,t,n){Lt.bindFramebuffer(Lt.FRAMEBUFFER,e),Lt.framebufferTexture2D(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,n,t.__webglTexture,0)}function Et(e,t){Lt.bindRenderbuffer(Lt.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Lt.renderbufferStorage(Lt.RENDERBUFFER,Lt.DEPTH_COMPONENT16,t.width,t.height),Lt.framebufferRenderbuffer(Lt.FRAMEBUFFER,Lt.DEPTH_ATTACHMENT,Lt.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Lt.renderbufferStorage(Lt.RENDERBUFFER,Lt.DEPTH_STENCIL,t.width,t.height),Lt.framebufferRenderbuffer(Lt.FRAMEBUFFER,Lt.DEPTH_STENCIL_ATTACHMENT,Lt.RENDERBUFFER,e)):Lt.renderbufferStorage(Lt.RENDERBUFFER,Lt.RGBA4,t.width,t.height)}function yt(e){e instanceof THREE.WebGLRenderTargetCube?(Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,e.__webglTexture),Lt.generateMipmap(Lt.TEXTURE_CUBE_MAP),Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,null)):(Lt.bindTexture(Lt.TEXTURE_2D,e.__webglTexture),Lt.generateMipmap(Lt.TEXTURE_2D),Lt.bindTexture(Lt.TEXTURE_2D,null))}function Tt(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Lt.NEAREST:Lt.LINEAR}function St(e){if(e===THREE.RepeatWrapping)return Lt.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Lt.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Lt.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Lt.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Lt.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Lt.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Lt.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Lt.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Lt.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Lt.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Lt.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Lt.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Lt.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Lt.BYTE;if(e===THREE.ShortType)return Lt.SHORT;if(e===THREE.UnsignedShortType)return Lt.UNSIGNED_SHORT;if(e===THREE.IntType)return Lt.INT;if(e===THREE.UnsignedIntType)return Lt.UNSIGNED_INT;if(e===THREE.FloatType)return Lt.FLOAT;if(e===THREE.AlphaFormat)return Lt.ALPHA;if(e===THREE.RGBFormat)return Lt.RGB;if(e===THREE.RGBAFormat)return Lt.RGBA;if(e===THREE.LuminanceFormat)return Lt.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Lt.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Lt.FUNC_ADD;if(e===THREE.SubtractEquation)return Lt.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Lt.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Lt.ZERO;if(e===THREE.OneFactor)return Lt.ONE;if(e===THREE.SrcColorFactor)return Lt.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Lt.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Lt.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Lt.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Lt.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Lt.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Lt.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Lt.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Lt.SRC_ALPHA_SATURATE;if(void 0!==Gt){if(e===THREE.RGB_S3TC_DXT1_Format)return Gt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return Gt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return Gt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return Gt.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function wt(e){if(Mn&&e&&e.useVertexTexture)return 1024;var t=Lt.getParameter(Lt.MAX_VERTEX_UNIFORM_VECTORS),n=Math.floor((t-20)/4),i=n;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(i=Math.min(e.bones.length,i),e.bones.length>i&&console.warn("WebGLRenderer: too many bones - "+e.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function kt(e){for(var t=0,n=0,i=0,r=0,s=0,a=e.length;a>s;s++){var o=e[s];o.onlyShadow||(o instanceof THREE.DirectionalLight&&t++,o instanceof THREE.PointLight&&n++,o instanceof THREE.SpotLight&&i++,o instanceof THREE.HemisphereLight&&r++)}return{directional:t,point:n,spot:i,hemi:r}}function xt(e){for(var t=0,n=0,i=e.length;i>n;n++){var r=e[n];r.castShadow&&(r instanceof THREE.SpotLight&&t++,r instanceof THREE.DirectionalLight&&!r.shadowCascade&&t++)}return t}function Rt(){try{if(!(Lt=Ot.getContext("experimental-webgl",{alpha:At,premultipliedAlpha:Mt,antialias:$t,stencil:Ht,preserveDrawingBuffer:Dt})))throw"Error creating WebGL context."}catch(e){console.error(e)}zt=Lt.getExtension("OES_texture_float"),Ut=Lt.getExtension("OES_texture_float_linear"),Ft=Lt.getExtension("OES_standard_derivatives"),Bt=Lt.getExtension("EXT_texture_filter_anisotropic")||Lt.getExtension("MOZ_EXT_texture_filter_anisotropic")||Lt.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),Gt=Lt.getExtension("WEBGL_compressed_texture_s3tc")||Lt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Lt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),zt||console.log("THREE.WebGLRenderer: Float textures not supported."),Ft||console.log("THREE.WebGLRenderer: Standard derivatives not supported."),Bt||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),Gt||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),void 0===Lt.getShaderPrecisionFormat&&(Lt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}function Pt(){Lt.clearColor(0,0,0,1),Lt.clearDepth(1),Lt.clearStencil(0),Lt.enable(Lt.DEPTH_TEST),Lt.depthFunc(Lt.LEQUAL),Lt.frontFace(Lt.CCW),Lt.cullFace(Lt.BACK),Lt.enable(Lt.CULL_FACE),Lt.enable(Lt.BLEND),Lt.blendEquation(Lt.FUNC_ADD),Lt.blendFunc(Lt.SRC_ALPHA,Lt.ONE_MINUS_SRC_ALPHA),Lt.clearColor(Nt.r,Nt.g,Nt.b,It)}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var Ot=void 0!==e.canvas?e.canvas:document.createElement("canvas"),Ct=void 0!==e.precision?e.precision:"highp",At=void 0!==e.alpha?e.alpha:!0,Mt=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,$t=void 0!==e.antialias?e.antialias:!1,Ht=void 0!==e.stencil?e.stencil:!0,Dt=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Nt=new THREE.Color(0),It=0;void 0!==e.clearColor&&(console.warn("DEPRECATED: clearColor in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead."),Nt.setHex(e.clearColor)),void 0!==e.clearAlpha&&(console.warn("DEPRECATED: clearAlpha in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead."),It=e.clearAlpha),this.domElement=Ot,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==window.devicePixelRatio?window.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyBasedShading=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Lt,zt,Ut,Ft,Bt,Gt,jt=this,Vt=[],Wt=0,Jt=null,Yt=null,qt=-1,Xt=null,Kt=null,Qt=0,Zt=0,en=-1,tn=-1,nn=-1,rn=-1,sn=-1,an=-1,on=-1,ln=-1,un=null,cn=null,fn=null,hn=null,pn=0,dn=0,mn=0,bn=0,gn=0,vn=0,_n={},En=new THREE.Frustum,yn=new THREE.Matrix4,Tn=new THREE.Matrix4,Sn=new THREE.Vector3,wn=new THREE.Vector3,kn=!0,xn={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};Rt(),Pt(),this.context=Lt;var Rn=Lt.getParameter(Lt.MAX_TEXTURE_IMAGE_UNITS),Pn=Lt.getParameter(Lt.MAX_VERTEX_TEXTURE_IMAGE_UNITS);Lt.getParameter(Lt.MAX_TEXTURE_SIZE);var On=Lt.getParameter(Lt.MAX_CUBE_MAP_TEXTURE_SIZE),Cn=Bt?Lt.getParameter(Bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,An=Pn>0,Mn=An&&zt;Gt?Lt.getParameter(Lt.COMPRESSED_TEXTURE_FORMATS):[];var $n=Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.HIGH_FLOAT),Hn=Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.MEDIUM_FLOAT);Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.LOW_FLOAT);var Dn=Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.HIGH_FLOAT),Nn=Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.MEDIUM_FLOAT);Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.LOW_FLOAT),Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.HIGH_INT),Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.MEDIUM_INT),Lt.getShaderPrecisionFormat(Lt.VERTEX_SHADER,Lt.LOW_INT),Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.HIGH_INT),Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.MEDIUM_INT),Lt.getShaderPrecisionFormat(Lt.FRAGMENT_SHADER,Lt.LOW_INT);var In=$n.precision>0&&Dn.precision>0,Ln=Hn.precision>0&&Nn.precision>0;"highp"!==Ct||In||(Ln?(Ct="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(Ct="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))),"mediump"!==Ct||Ln||(Ct="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp")),this.getContext=function(){return Lt},this.supportsVertexTextures=function(){return An},this.supportsFloatTextures=function(){return zt},this.supportsStandardDerivatives=function(){return Ft},this.supportsCompressedTextureS3TC=function(){return Gt},this.getMaxAnisotropy=function(){return Cn},this.getPrecision=function(){return Ct},this.setSize=function(e,t,n){Ot.width=e*this.devicePixelRatio,Ot.height=t*this.devicePixelRatio,1!==this.devicePixelRatio&&n!==!1&&(Ot.style.width=e+"px",Ot.style.height=t+"px"),this.setViewport(0,0,Ot.width,Ot.height)},this.setViewport=function(e,t,n,i){pn=void 0!==e?e:0,dn=void 0!==t?t:0,mn=void 0!==n?n:Ot.width,bn=void 0!==i?i:Ot.height,Lt.viewport(pn,dn,mn,bn)},this.setScissor=function(e,t,n,i){Lt.scissor(e,t,n,i)},this.enableScissorTest=function(e){e?Lt.enable(Lt.SCISSOR_TEST):Lt.disable(Lt.SCISSOR_TEST)},this.setClearColor=function(e,t){Nt.set(e),It=void 0!==t?t:1,Lt.clearColor(Nt.r,Nt.g,Nt.b,It)},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return Nt},this.getClearAlpha=function(){return It},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=Lt.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Lt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Lt.STENCIL_BUFFER_BIT),Lt.clear(i)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){Jt=null,nn=-1,on=-1,ln=-1,Xt=-1,qt=-1,kn=!0,en=-1,tn=-1,this.shadowMapPlugin.update(e,t)};var zn=function(e){var t=e.target;t.removeEventListener("dispose",zn),Gn(t),jt.info.memory.geometries--},Un=function(e){var t=e.target;t.removeEventListener("dispose",Un),jn(t),jt.info.memory.textures--},Fn=function(e){var t=e.target;t.removeEventListener("dispose",Fn),Vn(t),jt.info.memory.textures--},Bn=function(e){var t=e.target;t.removeEventListener("dispose",Bn),Wn(t)},Gn=function(e){if(e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&Lt.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&Lt.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&Lt.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&Lt.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&Lt.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&Lt.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&Lt.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&Lt.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&Lt.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&Lt.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&Lt.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.geometryGroups)for(var t in e.geometryGroups){var n=e.geometryGroups[t];if(void 0!==n.numMorphTargets)for(var i=0,r=n.numMorphTargets;r>i;i++)Lt.deleteBuffer(n.__webglMorphTargetsBuffers[i]);if(void 0!==n.numMorphNormals)for(var i=0,r=n.numMorphNormals;r>i;i++)Lt.deleteBuffer(n.__webglMorphNormalsBuffers[i]);s(n)}s(e)},jn=function(e){if(e.image&&e.image.__webglTextureCube)Lt.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,Lt.deleteTexture(e.__webglTexture)}},Vn=function(e){if(e&&e.__webglTexture)if(Lt.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Lt.deleteFramebuffer(e.__webglFramebuffer[t]),Lt.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Lt.deleteFramebuffer(e.__webglFramebuffer),Lt.deleteRenderbuffer(e.__webglRenderbuffer)},Wn=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var n,i,r,s=!1;for(n=0,i=Vt.length;i>n;n++)if(r=Vt[n],r.program===t){r.usedTimes--,0===r.usedTimes&&(s=!0);break}if(s===!0){var a=[];for(n=0,i=Vt.length;i>n;n++)r=Vt[n],r.program!==t&&a.push(r);Vt=a,Lt.deleteProgram(t),jt.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,n){if(e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Lt.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Lt.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Lt.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Lt.createBuffer()),e.hasPositions&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglVertexBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,e.positionArray,Lt.DYNAMIC_DRAW),Lt.enableVertexAttribArray(t.attributes.position),Lt.vertexAttribPointer(t.attributes.position,3,Lt.FLOAT,!1,0,0)),e.hasNormals){if(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglNormalBuffer),n.shading===THREE.FlatShading){var i,r,s,a,o,l,u,c,f,h,p,d,m,b,g=3*e.count;for(b=0;g>b;b+=9)m=e.normalArray,a=m[b],u=m[b+1],h=m[b+2],o=m[b+3],c=m[b+4],p=m[b+5],l=m[b+6],f=m[b+7],d=m[b+8],i=(a+o+l)/3,r=(u+c+f)/3,s=(h+p+d)/3,m[b]=i,m[b+1]=r,m[b+2]=s,m[b+3]=i,m[b+4]=r,m[b+5]=s,m[b+6]=i,m[b+7]=r,m[b+8]=s}Lt.bufferData(Lt.ARRAY_BUFFER,e.normalArray,Lt.DYNAMIC_DRAW),Lt.enableVertexAttribArray(t.attributes.normal),Lt.vertexAttribPointer(t.attributes.normal,3,Lt.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglUvBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,e.uvArray,Lt.DYNAMIC_DRAW),Lt.enableVertexAttribArray(t.attributes.uv),Lt.vertexAttribPointer(t.attributes.uv,2,Lt.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==THREE.NoColors&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,e.__webglColorBuffer),Lt.bufferData(Lt.ARRAY_BUFFER,e.colorArray,Lt.DYNAMIC_DRAW),Lt.enableVertexAttribArray(t.attributes.color),Lt.vertexAttribPointer(t.attributes.color,3,Lt.FLOAT,!1,0,0)),Lt.drawArrays(Lt.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,s){if(i.visible!==!1){var a,o,l,u,c=G(e,t,n,i,s),f=c.attributes,h=r.attributes,p=!1,d=i.wireframe?1:0,m=16777215*r.id+2*c.id+d;if(m!==Xt&&(Xt=m,p=!0),p&&S(),s instanceof THREE.Mesh){var b=h.index;if(b){var g=r.offsets;g.length>1&&(p=!0);for(var v=0,_=g.length;_>v;v++){var E=g[v].index;if(p){for(o in h)"index"!==o&&(l=f[o],a=h[o],u=a.itemSize,l>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,a.buffer),T(l),Lt.vertexAttribPointer(l,u,Lt.FLOAT,!1,0,4*E*u)));Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,b.buffer)}Lt.drawElements(Lt.TRIANGLES,g[v].count,Lt.UNSIGNED_SHORT,2*g[v].start),jt.info.render.calls++,jt.info.render.vertices+=g[v].count,jt.info.render.faces+=g[v].count/3}}else{if(p)for(o in h)"index"!==o&&(l=f[o],a=h[o],u=a.itemSize,l>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,a.buffer),T(l),Lt.vertexAttribPointer(l,u,Lt.FLOAT,!1,0,0)));var y=r.attributes.position;Lt.drawArrays(Lt.TRIANGLES,0,y.numItems/3),jt.info.render.calls++,jt.info.render.vertices+=y.numItems/3,jt.info.render.faces+=y.numItems/3/3}}else if(s instanceof THREE.ParticleSystem){if(p){for(o in h)l=f[o],a=h[o],u=a.itemSize,l>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,a.buffer),T(l),Lt.vertexAttribPointer(l,u,Lt.FLOAT,!1,0,0));var y=h.position;Lt.drawArrays(Lt.POINTS,0,y.numItems/3),jt.info.render.calls++,jt.info.render.points+=y.numItems/3}}else if(s instanceof THREE.Line&&p){for(o in h)l=f[o],a=h[o],u=a.itemSize,l>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,a.buffer),T(l),Lt.vertexAttribPointer(l,u,Lt.FLOAT,!1,0,0));var w=s.type===THREE.LineStrip?Lt.LINE_STRIP:Lt.LINES;at(i.linewidth);var y=h.position;Lt.drawArrays(w,0,y.numItems/3),jt.info.render.calls++,jt.info.render.points+=y.numItems}}},this.renderBuffer=function(e,t,n,i,r,s){if(i.visible!==!1){var a,o,l,u=G(e,t,n,i,s),c=u.attributes,f=!1,h=i.wireframe?1:0,p=16777215*r.id+2*u.id+h;if(p!==Xt&&(Xt=p,f=!0),f&&S(),!i.morphTargets&&c.position>=0?f&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglVertexBuffer),T(c.position),Lt.vertexAttribPointer(c.position,3,Lt.FLOAT,!1,0,0)):s.morphTargetBase&&w(i,r,s),f){if(r.__webglCustomAttributesList)for(o=0,l=r.__webglCustomAttributesList.length;l>o;o++)a=r.__webglCustomAttributesList[o],c[a.buffer.belongsToAttribute]>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,a.buffer),T(c[a.buffer.belongsToAttribute]),Lt.vertexAttribPointer(c[a.buffer.belongsToAttribute],a.size,Lt.FLOAT,!1,0,0));c.color>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglColorBuffer),T(c.color),Lt.vertexAttribPointer(c.color,3,Lt.FLOAT,!1,0,0)),c.normal>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglNormalBuffer),T(c.normal),Lt.vertexAttribPointer(c.normal,3,Lt.FLOAT,!1,0,0)),c.tangent>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglTangentBuffer),T(c.tangent),Lt.vertexAttribPointer(c.tangent,4,Lt.FLOAT,!1,0,0)),c.uv>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglUVBuffer),T(c.uv),Lt.vertexAttribPointer(c.uv,2,Lt.FLOAT,!1,0,0)),c.uv2>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglUV2Buffer),T(c.uv2),Lt.vertexAttribPointer(c.uv2,2,Lt.FLOAT,!1,0,0)),i.skinning&&c.skinIndex>=0&&c.skinWeight>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglSkinIndicesBuffer),T(c.skinIndex),Lt.vertexAttribPointer(c.skinIndex,4,Lt.FLOAT,!1,0,0),Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglSkinWeightsBuffer),T(c.skinWeight),Lt.vertexAttribPointer(c.skinWeight,4,Lt.FLOAT,!1,0,0)),c.lineDistance>=0&&(Lt.bindBuffer(Lt.ARRAY_BUFFER,r.__webglLineDistanceBuffer),T(c.lineDistance),Lt.vertexAttribPointer(c.lineDistance,1,Lt.FLOAT,!1,0,0))}if(s instanceof THREE.Mesh)i.wireframe?(at(i.wireframeLinewidth),f&&Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,r.__webglLineBuffer),Lt.drawElements(Lt.LINES,r.__webglLineCount,Lt.UNSIGNED_SHORT,0)):(f&&Lt.bindBuffer(Lt.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),Lt.drawElements(Lt.TRIANGLES,r.__webglFaceCount,Lt.UNSIGNED_SHORT,0)),jt.info.render.calls++,jt.info.render.vertices+=r.__webglFaceCount,jt.info.render.faces+=r.__webglFaceCount/3;else if(s instanceof THREE.Line){var d=s.type===THREE.LineStrip?Lt.LINE_STRIP:Lt.LINES;at(i.linewidth),Lt.drawArrays(d,0,r.__webglLineCount),jt.info.render.calls++}else s instanceof THREE.ParticleSystem?(Lt.drawArrays(Lt.POINTS,0,r.__webglParticleCount),jt.info.render.calls++,jt.info.render.points+=r.__webglParticleCount):s instanceof THREE.Ribbon&&(Lt.drawArrays(Lt.TRIANGLE_STRIP,0,r.__webglVertexCount),jt.info.render.calls++)}},this.render=function(e,t,n,i){if(t instanceof THREE.Camera==!1)return console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."),void 0;var r,s,a,o,l,u=e.__lights,c=e.fog;for(qt=-1,kn=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),yn.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),En.setFromMatrix(yn),this.autoUpdateObjects&&this.initWebGLObjects(e),R(this.renderPluginsPre,e,t),jt.info.render.calls=0,jt.info.render.vertices=0,jt.info.render.faces=0,jt.info.render.points=0,this.setRenderTarget(n),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),l=e.__webglObjects,r=0,s=l.length;s>r;r++)a=l[r],o=a.object,a.id=r,a.render=!1,o.visible&&((o instanceof THREE.Mesh||o instanceof THREE.ParticleSystem)&&o.frustumCulled&&!En.intersectsObject(o)||(nt(o,t),A(a),a.render=!0,this.sortObjects===!0&&(null!==o.renderDepth?a.z=o.renderDepth:(Sn.getPositionFromMatrix(o.matrixWorld),Sn.applyProjection(yn),a.z=Sn.z))));
for(this.sortObjects&&l.sort(k),l=e.__webglObjectsImmediate,r=0,s=l.length;s>r;r++)a=l[r],o=a.object,o.visible&&(nt(o,t),C(a));if(e.overrideMaterial){var f=e.overrideMaterial;this.setBlending(f.blending,f.blendEquation,f.blendSrc,f.blendDst),this.setDepthTest(f.depthTest),this.setDepthWrite(f.depthWrite),ot(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits),P(e.__webglObjects,!1,"",t,u,c,!0,f),O(e.__webglObjectsImmediate,"",t,u,c,!1,f)}else{var f=null;this.setBlending(THREE.NoBlending),P(e.__webglObjects,!0,"opaque",t,u,c,!1,f),O(e.__webglObjectsImmediate,"opaque",t,u,c,!1,f),P(e.__webglObjects,!1,"transparent",t,u,c,!0,f),O(e.__webglObjectsImmediate,"transparent",t,u,c,!0,f)}R(this.renderPluginsPost,e,t),n&&n.generateMipmaps&&n.minFilter!==THREE.NearestFilter&&n.minFilter!==THREE.LinearFilter&&yt(n),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,n,i,r){var s=G(e,t,n,i,r);Xt=-1,jt.setMaterialFaces(i),r.immediateRenderCallback?r.immediateRenderCallback(s,Lt,En):r.render(function(e){jt.renderBufferImmediate(e,s,i)})},this.initWebGLObjects=function(e){for(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]);e.__objectsAdded.length;)$(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);for(;e.__objectsRemoved.length;)z(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,n=e.__webglObjects.length;n>t;t++){var i=e.__webglObjects[t].object;void 0===i.__webglInit&&(void 0!==i.__webglActive&&z(i,e),$(i,e)),N(i)}},this.initMaterial=function(e,t,n,i){e.addEventListener("dispose",Bn);var r,s,a,o,l,u,c;e instanceof THREE.MeshDepthMaterial?c="depth":e instanceof THREE.MeshNormalMaterial?c="normal":e instanceof THREE.MeshBasicMaterial?c="basic":e instanceof THREE.MeshLambertMaterial?c="lambert":e instanceof THREE.MeshPhongMaterial?c="phong":e instanceof THREE.LineBasicMaterial?c="basic":e instanceof THREE.LineDashedMaterial?c="dashed":e instanceof THREE.ParticleBasicMaterial&&(c="particle_basic"),c&&B(e,THREE.ShaderLib[c]),o=kt(t),u=xt(t),l=wt(i),a={map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,vertexColors:e.vertexColors,fog:n,useFog:e.fog,fogExp:n instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,skinning:e.skinning,maxBones:l,useVertexTexture:Mn&&i&&i.useVertexTexture,boneTextureWidth:i&&i.boneTextureWidth,boneTextureHeight:i&&i.boneTextureHeight,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:o.directional,maxPointLights:o.point,maxSpotLights:o.spot,maxHemiLights:o.hemi,maxShadows:u,shadowMapEnabled:this.shadowMapEnabled&&i.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,perPixel:e.perPixel,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},e.program=ut(c,e.fragmentShader,e.vertexShader,e.uniforms,e.attributes,e.defines,a);var f=e.program.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;var h,p="morphTarget";for(s=0;this.maxMorphTargets>s;s++)h=p+s,f[h]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var h,p="morphNormal";for(s=0;this.maxMorphNormals>s;s++)h=p+s,f[h]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(r in e.uniforms)e.uniformsList.push([e.uniforms[r],r])},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Lt.disable(Lt.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Lt.frontFace(Lt.CW):Lt.frontFace(Lt.CCW),e===THREE.CullFaceBack?Lt.cullFace(Lt.BACK):e===THREE.CullFaceFront?Lt.cullFace(Lt.FRONT):Lt.cullFace(Lt.FRONT_AND_BACK),Lt.enable(Lt.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide,n=e.side===THREE.BackSide;en!==t&&(t?Lt.disable(Lt.CULL_FACE):Lt.enable(Lt.CULL_FACE),en=t),tn!==n&&(n?Lt.frontFace(Lt.CW):Lt.frontFace(Lt.CCW),tn=n)},this.setDepthTest=function(e){on!==e&&(e?Lt.enable(Lt.DEPTH_TEST):Lt.disable(Lt.DEPTH_TEST),on=e)},this.setDepthWrite=function(e){ln!==e&&(Lt.depthMask(e),ln=e)},this.setBlending=function(e,t,n,i){e!==nn&&(e===THREE.NoBlending?Lt.disable(Lt.BLEND):e===THREE.AdditiveBlending?(Lt.enable(Lt.BLEND),Lt.blendEquation(Lt.FUNC_ADD),Lt.blendFunc(Lt.SRC_ALPHA,Lt.ONE)):e===THREE.SubtractiveBlending?(Lt.enable(Lt.BLEND),Lt.blendEquation(Lt.FUNC_ADD),Lt.blendFunc(Lt.ZERO,Lt.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(Lt.enable(Lt.BLEND),Lt.blendEquation(Lt.FUNC_ADD),Lt.blendFunc(Lt.ZERO,Lt.SRC_COLOR)):e===THREE.CustomBlending?Lt.enable(Lt.BLEND):(Lt.enable(Lt.BLEND),Lt.blendEquationSeparate(Lt.FUNC_ADD,Lt.FUNC_ADD),Lt.blendFuncSeparate(Lt.SRC_ALPHA,Lt.ONE_MINUS_SRC_ALPHA,Lt.ONE,Lt.ONE_MINUS_SRC_ALPHA)),nn=e),e===THREE.CustomBlending?(t!==rn&&(Lt.blendEquation(St(t)),rn=t),(n!==sn||i!==an)&&(Lt.blendFunc(St(n),St(i)),sn=n,an=i)):(rn=null,sn=null,an=null)},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",Un),e.__webglTexture=Lt.createTexture(),jt.info.memory.textures++),Lt.activeTexture(Lt.TEXTURE0+t),Lt.bindTexture(Lt.TEXTURE_2D,e.__webglTexture),Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,e.flipY),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Lt.pixelStorei(Lt.UNPACK_ALIGNMENT,e.unpackAlignment);var n=e.image,i=dt(n.width)&&dt(n.height),r=St(e.format),s=St(e.type);mt(Lt.TEXTURE_2D,e,i);var a,o=e.mipmaps;if(e instanceof THREE.DataTexture)if(o.length>0&&i){for(var l=0,u=o.length;u>l;l++)a=o[l],Lt.texImage2D(Lt.TEXTURE_2D,l,r,a.width,a.height,0,r,s,a.data);e.generateMipmaps=!1}else Lt.texImage2D(Lt.TEXTURE_2D,0,r,n.width,n.height,0,r,s,n.data);else if(e instanceof THREE.CompressedTexture)for(var l=0,u=o.length;u>l;l++)a=o[l],Lt.compressedTexImage2D(Lt.TEXTURE_2D,l,r,a.width,a.height,0,a.data);else if(o.length>0&&i){for(var l=0,u=o.length;u>l;l++)a=o[l],Lt.texImage2D(Lt.TEXTURE_2D,l,r,r,s,a);e.generateMipmaps=!1}else Lt.texImage2D(Lt.TEXTURE_2D,0,r,r,s,e.image);e.generateMipmaps&&i&&Lt.generateMipmap(Lt.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Lt.activeTexture(Lt.TEXTURE0+t),Lt.bindTexture(Lt.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Fn),e.__webglTexture=Lt.createTexture(),jt.info.memory.textures++;var n=dt(e.width)&&dt(e.height),i=St(e.format),r=St(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,e.__webglTexture),mt(Lt.TEXTURE_CUBE_MAP,e,n);for(var s=0;6>s;s++)e.__webglFramebuffer[s]=Lt.createFramebuffer(),e.__webglRenderbuffer[s]=Lt.createRenderbuffer(),Lt.texImage2D(Lt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,i,e.width,e.height,0,i,r,null),_t(e.__webglFramebuffer[s],e,Lt.TEXTURE_CUBE_MAP_POSITIVE_X+s),Et(e.__webglRenderbuffer[s],e);n&&Lt.generateMipmap(Lt.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Lt.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Lt.createRenderbuffer(),Lt.bindTexture(Lt.TEXTURE_2D,e.__webglTexture),mt(Lt.TEXTURE_2D,e,n),Lt.texImage2D(Lt.TEXTURE_2D,0,i,e.width,e.height,0,i,r,null),_t(e.__webglFramebuffer,e,Lt.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Lt.framebufferRenderbuffer(Lt.FRAMEBUFFER,Lt.DEPTH_ATTACHMENT,Lt.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Lt.framebufferRenderbuffer(Lt.FRAMEBUFFER,Lt.DEPTH_STENCIL_ATTACHMENT,Lt.RENDERBUFFER,e.__webglRenderbuffer):Et(e.__webglRenderbuffer,e),n&&Lt.generateMipmap(Lt.TEXTURE_2D);t?Lt.bindTexture(Lt.TEXTURE_CUBE_MAP,null):Lt.bindTexture(Lt.TEXTURE_2D,null),Lt.bindRenderbuffer(Lt.RENDERBUFFER,null),Lt.bindFramebuffer(Lt.FRAMEBUFFER,null)}var a,o,l,u,c;e?(a=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,o=e.width,l=e.height,u=0,c=0):(a=null,o=mn,l=bn,u=pn,c=dn),a!==Yt&&(Lt.bindFramebuffer(Lt.FRAMEBUFFER,a),Lt.viewport(u,c,o,l),Yt=a),gn=o,vn=l},this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:THREE.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==n.format?n.format:THREE.RGBAFormat,this.type=void 0!==n.type?n.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==n.depthBuffer?n.depthBuffer:!0,this.stencilBuffer=void 0!==n.stencilBuffer?n.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidModel=new THREE.Vector3,this.normalModel=new THREE.Vector3,this.normalModelView=new THREE.Vector3,this.vertexNormalsLength=0,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.color=null,this.material=null,this.uvs=[[]],this.z=0},THREE.RenderableFace4=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.v4=new THREE.RenderableVertex,this.centroidModel=new THREE.Vector3,this.normalModel=new THREE.Vector3,this.normalModelView=new THREE.Vector3,this.vertexNormalsLength=0,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsModelView=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.color=null,this.material=null,this.uvs=[[]],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableParticle=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=null,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(e,t,n){var i,r,s=e.vertices.length,a=(e.faceVertexUvs[0].length,t instanceof THREE.Mesh?t.geometry:t),o=e.vertices,l=a.vertices,u=e.faces,c=a.faces,f=e.faceVertexUvs[0],h=a.faceVertexUvs[0];void 0===n&&(n=0),t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,r=(new THREE.Matrix3).getNormalMatrix(i));for(var p=0,d=l.length;d>p;p++){var m=l[p],b=m.clone();i&&b.applyMatrix4(i),o.push(b)}for(p=0,d=c.length;d>p;p++){var g,v,_,E=c[p],y=E.vertexNormals,T=E.vertexColors;E instanceof THREE.Face3?g=new THREE.Face3(E.a+s,E.b+s,E.c+s):E instanceof THREE.Face4&&(g=new THREE.Face4(E.a+s,E.b+s,E.c+s,E.d+s)),g.normal.copy(E.normal),r&&g.normal.applyMatrix3(r).normalize();for(var S=0,w=y.length;w>S;S++)v=y[S].clone(),r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(E.color);for(var S=0,w=T.length;w>S;S++)_=T[S],g.vertexColors.push(_.clone());g.materialIndex=E.materialIndex+n,g.centroid.copy(E.centroid),i&&g.centroid.applyMatrix4(i),u.push(g)}for(p=0,d=h.length;d>p;p++){for(var k=h[p],x=[],S=0,w=k.length;w>S;S++)x.push(new THREE.Vector2(k[S].x,k[S].y));f.push(x)}},removeMaterials:function(e,t){for(var n={},i=0,r=t.length;r>i;i++)n[t[i]]=!0;for(var s,a=[],i=0,r=e.faces.length;r>i;i++)s=e.faces[i],s.materialIndex in n||a.push(s);e.faces=a},randomPointInTriangle:function(){var e=new THREE.Vector3;return function(t,n,i){var r=new THREE.Vector3,s=THREE.Math.random16(),a=THREE.Math.random16();s+a>1&&(s=1-s,a=1-a);var o=1-s-a;return r.copy(t),r.multiplyScalar(s),e.copy(n),e.multiplyScalar(a),r.add(e),e.copy(i),e.multiplyScalar(o),r.add(e),r}}(),randomPointInFace:function(e,t,n){var i,r,s,a;if(e instanceof THREE.Face3)return i=t.vertices[e.a],r=t.vertices[e.b],s=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(i,r,s);if(e instanceof THREE.Face4){i=t.vertices[e.a],r=t.vertices[e.b],s=t.vertices[e.c],a=t.vertices[e.d];var o,l;n?e._area1&&e._area2?(o=e._area1,l=e._area2):(o=THREE.GeometryUtils.triangleArea(i,r,a),l=THREE.GeometryUtils.triangleArea(r,s,a),e._area1=o,e._area2=l):(o=THREE.GeometryUtils.triangleArea(i,r,a),l=THREE.GeometryUtils.triangleArea(r,s,a));var u=THREE.Math.random16()*(o+l);return o>u?THREE.GeometryUtils.randomPointInTriangle(i,r,a):THREE.GeometryUtils.randomPointInTriangle(r,s,a)}},randomPointsInGeometry:function(e,t){function n(e){function t(n,i){if(n>i)return n;var r=n+Math.floor((i-n)/2);return p[r]>e?t(n,r-1):e>p[r]?t(r+1,i):r}var n=t(0,p.length-1);return n}var i,r,s,a,o,l,u=e.faces,c=e.vertices,f=u.length,h=0,p=[];for(r=0;f>r;r++)i=u[r],i instanceof THREE.Face3?(s=c[i.a],a=c[i.b],o=c[i.c],i._area=THREE.GeometryUtils.triangleArea(s,a,o)):i instanceof THREE.Face4&&(s=c[i.a],a=c[i.b],o=c[i.c],l=c[i.d],i._area1=THREE.GeometryUtils.triangleArea(s,a,l),i._area2=THREE.GeometryUtils.triangleArea(a,o,l),i._area=i._area1+i._area2),h+=i._area,p[r]=h;var d,m,b=[],g={};for(r=0;t>r;r++)d=THREE.Math.random16()*h,m=n(d),b[r]=THREE.GeometryUtils.randomPointInFace(u[m],e,!0),g[m]?g[m]+=1:g[m]=1;return b},triangleArea:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i,r){return e.subVectors(i,n),t.subVectors(r,n),e.cross(t),.5*e.length()}}(),center:function(e){e.computeBoundingBox();var t=e.boundingBox,n=new THREE.Vector3;return n.addVectors(t.min,t.max),n.multiplyScalar(-.5),e.applyMatrix((new THREE.Matrix4).makeTranslation(n.x,n.y,n.z)),e.computeBoundingBox(),n},triangulateQuads:function(e){var t,n,i,r,s=[],a=[],o=[];for(t=0,n=e.faceUvs.length;n>t;t++)a[t]=[];for(t=0,n=e.faceVertexUvs.length;n>t;t++)o[t]=[];for(t=0,n=e.faces.length;n>t;t++){var l=e.faces[t];if(l instanceof THREE.Face4){var u=l.a,c=l.b,f=l.c,h=l.d,p=new THREE.Face3,d=new THREE.Face3;for(p.color.copy(l.color),d.color.copy(l.color),p.materialIndex=l.materialIndex,d.materialIndex=l.materialIndex,p.a=u,p.b=c,p.c=h,d.a=c,d.b=f,d.c=h,4===l.vertexColors.length&&(p.vertexColors[0]=l.vertexColors[0].clone(),p.vertexColors[1]=l.vertexColors[1].clone(),p.vertexColors[2]=l.vertexColors[3].clone(),d.vertexColors[0]=l.vertexColors[1].clone(),d.vertexColors[1]=l.vertexColors[2].clone(),d.vertexColors[2]=l.vertexColors[3].clone()),s.push(p,d),i=0,r=e.faceVertexUvs.length;r>i;i++)if(e.faceVertexUvs[i].length){var m=e.faceVertexUvs[i][t],b=m[0],g=m[1],v=m[2],_=m[3],E=[b.clone(),g.clone(),_.clone()],y=[g.clone(),v.clone(),_.clone()];o[i].push(E,y)}for(i=0,r=e.faceUvs.length;r>i;i++)if(e.faceUvs[i].length){var T=e.faceUvs[i][t];a[i].push(T,T)}}else{for(s.push(l),i=0,r=e.faceUvs.length;r>i;i++)a[i].push(e.faceUvs[i][t]);for(i=0,r=e.faceVertexUvs.length;r>i;i++)o[i].push(e.faceVertexUvs[i][t])}}e.faces=s,e.faceUvs=a,e.faceVertexUvs=o,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()},setMaterialIndex:function(e,t,n,i){for(var r=e.faces,s=n||0,a=i||r.length-1,o=s;a>=o;o++)r[o].materialIndex=t}},THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(e,t,n){var i=new Image,r=new THREE.Texture(i,t),s=new THREE.ImageLoader;return s.crossOrigin=this.crossOrigin,s.load(e,function(e){r.image=e,r.needsUpdate=!0,n&&n(r)}),r.sourceFile=e,r},loadCompressedTexture:function(e,t,n,i){var r=new THREE.CompressedTexture;r.mapping=t;var s=new XMLHttpRequest;return s.onload=function(){var e=s.response,t=THREE.ImageUtils.parseDDS(e,!0);r.format=t.format,r.mipmaps=t.mipmaps,r.image.width=t.width,r.image.height=t.height,r.generateMipmaps=!1,r.needsUpdate=!0,n&&n(r)},s.onerror=i,s.open("GET",e,!0),s.responseType="arraybuffer",s.send(null),r},loadTextureCube:function(e,t,n,i){var r=[];r.loadCount=0;var s=new THREE.Texture;s.image=r,void 0!==t&&(s.mapping=t),s.flipY=!1;for(var a=0,o=e.length;o>a;++a){var l=new Image;r[a]=l,l.onload=function(){r.loadCount+=1,6===r.loadCount&&(s.needsUpdate=!0,n&&n(s))},l.onerror=i,l.crossOrigin=this.crossOrigin,l.src=e[a]}return s},loadCompressedTextureCube:function(e,t,n,i){var r=[];r.loadCount=0;var s=new THREE.CompressedTexture;s.image=r,void 0!==t&&(s.mapping=t),s.flipY=!1,s.generateMipmaps=!1;var a=function(e,t){return function(){var i=e.response,a=THREE.ImageUtils.parseDDS(i,!0);t.format=a.format,t.mipmaps=a.mipmaps,t.width=a.width,t.height=a.height,r.loadCount+=1,6===r.loadCount&&(s.format=a.format,s.needsUpdate=!0,n&&n(s))}};if(e instanceof Array)for(var o=0,l=e.length;l>o;++o){var u={};r[o]=u;var c=new XMLHttpRequest;c.onload=a(c,u),c.onerror=i;var f=e[o];c.open("GET",f,!0),c.responseType="arraybuffer",c.send(null)}else{var f=e,c=new XMLHttpRequest;c.onload=function(){var e=c.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap){for(var i=t.mipmaps.length/t.mipmapCount,a=0;i>a;a++){r[a]={mipmaps:[]};for(var o=0;t.mipmapCount>o;o++)r[a].mipmaps.push(t.mipmaps[a*t.mipmapCount+o]),r[a].format=t.format,r[a].width=t.width,r[a].height=t.height}s.format=t.format,s.needsUpdate=!0,n&&n(s)}},c.onerror=i,c.open("GET",f,!0),c.responseType="arraybuffer",c.send(null)}return s},parseDDS:function(e,t){function n(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function i(e){return String.fromCharCode(255&e,255&e>>8,255&e>>16,255&e>>24)}var r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},s=542327876,a=131072,o=512,l=4,u=n("DXT1"),c=n("DXT3"),f=n("DXT5"),h=31,p=0,d=1,m=2,b=3,g=4,v=7,_=20,E=21,y=28,T=new Int32Array(e,0,h);if(T[p]!==s)return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),r;if(!T[_]&l)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),r;var S,w=T[E];switch(w){case u:S=8,r.format=THREE.RGB_S3TC_DXT1_Format;break;case c:S=16,r.format=THREE.RGBA_S3TC_DXT3_Format;break;case f:S=16,r.format=THREE.RGBA_S3TC_DXT5_Format;break;default:return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",i(w)),r}r.mipmapCount=1,T[m]&a&&t!==!1&&(r.mipmapCount=Math.max(1,T[v])),r.isCubemap=T[y]&o?!0:!1,r.width=T[g],r.height=T[b];for(var k=T[d]+4,x=r.width,R=r.height,P=r.isCubemap?6:1,O=0;P>O;O++){for(var C=0;r.mipmapCount>C;C++){var A=Math.max(4,x)/4*Math.max(4,R)/4*S,M=new Uint8Array(e,k,A),$={data:M,width:x,height:R};r.mipmaps.push($),k+=A,x=Math.max(.5*x,1),R=Math.max(.5*R,1)}x=r.width,R=r.height}return r},getNormalMap:function(e,t){var n=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},i=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},r=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var s=e.width,a=e.height,o=document.createElement("canvas");o.width=s,o.height=a;var l=o.getContext("2d");l.drawImage(e,0,0);for(var u=l.getImageData(0,0,s,a).data,c=l.createImageData(s,a),f=c.data,h=0;s>h;h++)for(var p=0;a>p;p++){var d=0>p-1?0:p-1,m=p+1>a-1?a-1:p+1,b=0>h-1?0:h-1,g=h+1>s-1?s-1:h+1,v=[],_=[0,0,u[4*(p*s+h)]/255*t];v.push([-1,0,u[4*(p*s+b)]/255*t]),v.push([-1,-1,u[4*(d*s+b)]/255*t]),v.push([0,-1,u[4*(d*s+h)]/255*t]),v.push([1,-1,u[4*(d*s+g)]/255*t]),v.push([1,0,u[4*(p*s+g)]/255*t]),v.push([1,1,u[4*(m*s+g)]/255*t]),v.push([0,1,u[4*(m*s+h)]/255*t]),v.push([-1,1,u[4*(m*s+b)]/255*t]);for(var E=[],y=v.length,T=0;y>T;T++){var S=v[T],w=v[(T+1)%y];S=i(S,_),w=i(w,_),E.push(r(n(S,w)))}for(var k=[0,0,0],T=0;E.length>T;T++)k[0]+=E[T][0],k[1]+=E[T][1],k[2]+=E[T][2];k[0]/=E.length,k[1]/=E.length,k[2]/=E.length;var x=4*(p*s+h);f[x]=0|255*((k[0]+1)/2),f[x+1]=0|255*((k[1]+1)/2),f[x+2]=0|255*k[2],f[x+3]=255}return l.putImageData(c,0,0),o},generateDataTexture:function(e,t,n){for(var i=e*t,r=new Uint8Array(3*i),s=Math.floor(255*n.r),a=Math.floor(255*n.g),o=Math.floor(255*n.b),l=0;i>l;l++)r[3*l]=s,r[3*l+1]=a,r[3*l+2]=o;var u=new THREE.DataTexture(r,e,t,THREE.RGBFormat);return u.needsUpdate=!0,u}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new THREE.Object3D,i=0,r=t.length;r>i;i++)n.add(new THREE.Mesh(e,t[i]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var i=new THREE.Matrix4;i.getInverse(n.matrixWorld),e.applyMatrix(i),t.remove(e),n.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(e){var t=e.familyName.toLowerCase(),n=this;return n.faces[t]=n.faces[t]||{},n.faces[t][e.cssFontWeight]=n.faces[t][e.cssFontWeight]||{},n.faces[t][e.cssFontWeight][e.cssFontStyle]=e,n.faces[t][e.cssFontWeight][e.cssFontStyle]=e,e},drawText:function(e){var t,n=this.getFace(),i=this.size/n.resolution,r=0,s=(e+"").split(""),a=s.length,o=[];for(t=0;a>t;t++){var l=new THREE.Path,u=this.extractGlyphPoints(s[t],n,i,r,l);r+=u.offset,o.push(u.path)}var c=r/2;return{paths:o,offset:c}},extractGlyphPoints:function(e,t,n,i,r){var s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w=[],k=t.glyphs[e]||t.glyphs["?"];if(k){if(k.o)for(l=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),c=l.length,f=n,h=n,s=0;c>s;)switch(u=l[s++]){case"m":p=l[s++]*f+i,d=l[s++]*h,r.moveTo(p,d);break;case"l":p=l[s++]*f+i,d=l[s++]*h,r.lineTo(p,d);break;case"q":if(m=l[s++]*f+i,b=l[s++]*h,_=l[s++]*f+i,E=l[s++]*h,r.quadraticCurveTo(_,E,m,b),S=w[w.length-1])for(g=S.x,v=S.y,a=1,o=this.divisions;o>=a;a++){var x=a/o;THREE.Shape.Utils.b2(x,g,_,m),THREE.Shape.Utils.b2(x,v,E,b)}break;case"b":if(m=l[s++]*f+i,b=l[s++]*h,_=l[s++]*f+i,E=l[s++]*-h,y=l[s++]*f+i,T=l[s++]*-h,r.bezierCurveTo(m,b,_,E,y,T),S=w[w.length-1])for(g=S.x,v=S.y,a=1,o=this.divisions;o>=a;a++){var x=a/o;THREE.Shape.Utils.b3(x,g,_,y,m),THREE.Shape.Utils.b3(x,v,E,T,b)}}return{offset:k.ha*n,path:r}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var n=void 0!==t.size?t.size:100,i=void 0!==t.curveSegments?t.curveSegments:4,r=void 0!==t.font?t.font:"helvetiker",s=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=n,THREE.FontUtils.divisions=i,THREE.FontUtils.face=r,THREE.FontUtils.weight=s,THREE.FontUtils.style=a;for(var o=THREE.FontUtils.drawText(e),l=o.paths,u=[],c=0,f=l.length;f>c;c++)Array.prototype.push.apply(u,l[c].toShapes());return u},function(e){var t=1e-10,n=function(e,t){var n=e.length;if(3>n)return null;var s,a,o,l=[],u=[],c=[];if(i(e)>0)for(a=0;n>a;a++)u[a]=a;else for(a=0;n>a;a++)u[a]=n-1-a;var f=n,h=2*f;for(a=f-1;f>2;){if(0>=h--)return console.log("Warning, unable to triangulate polygon!"),t?c:l;if(s=a,s>=f&&(s=0),a=s+1,a>=f&&(a=0),o=a+1,o>=f&&(o=0),r(e,s,a,o,f,u)){var p,d,m,b,g;for(p=u[s],d=u[a],m=u[o],l.push([e[p],e[d],e[m]]),c.push([u[s],u[a],u[o]]),b=a,g=a+1;f>g;b++,g++)u[b]=u[g];f--,h=2*f}}return t?c:l},i=function(e){for(var t=e.length,n=0,i=t-1,r=0;t>r;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},r=function(e,n,i,r,s,a){var o,l,u,c,f,h,p,d,m;if(l=e[a[n]].x,u=e[a[n]].y,c=e[a[i]].x,f=e[a[i]].y,h=e[a[r]].x,p=e[a[r]].y,t>(c-l)*(p-u)-(f-u)*(h-l))return!1;var b,g,v,_,E,y,T,S,w,k,x,R,P,O,C;for(b=h-c,g=p-f,v=l-h,_=u-p,E=c-l,y=f-u,o=0;s>o;o++)if(o!==n&&o!==i&&o!==r&&(d=e[a[o]].x,m=e[a[o]].y,T=d-l,S=m-u,w=d-c,k=m-f,x=d-h,R=m-p,C=b*k-g*w,P=E*S-y*T,O=v*R-_*x,C>=0&&O>=0&&P>=0))return!1;return!0};return e.Triangulate=n,e.Triangulate.area=i,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;e>=t;t++)n.push(this.getPoint(t/e));return n},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;e>=t;t++)n.push(this.getPointAt(t/e));return n},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;e>=n;n++)t=this.getPoint(n/e),s+=t.distanceTo(r),i.push(s),r=t;return this.cacheArcLengths=i,i},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var n,i=this.getLengths(),r=0,s=i.length;n=t?t:e*i[s-1];for(var a,o=0,l=s-1;l>=o;)if(r=Math.floor(o+(l-o)/2),a=i[r]-n,0>a)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,i[r]==n){var u=r/(s-1);return u}var c=i[r],f=i[r+1],h=f-c,p=(n-c)/h,u=(r+p)/(s-1);return u},THREE.Curve.prototype.getTangent=function(e){var t=1e-4,n=e-t,i=e+t;0>n&&(n=0),i>1&&(i=1);var r=this.getPoint(n),s=this.getPoint(i),a=s.clone().sub(r);return a.normalize()},THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,n,i){return 2*(1-e)*(n-t)+2*e*(i-n)},tangentCubicBezier:function(e,t,n,i,r){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*i*(1-e)-3*e*e*i+3*e*e*r},tangentSpline:function(e){var t=6*e*e-6*e,n=3*e*e-4*e+1,i=-6*e*e+6*e,r=3*e*e-2*e;return t+n+i+r},interpolate:function(e,t,n,i,r){var s=.5*(n-e),a=.5*(i-t),o=r*r,l=r*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*r+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t,n,i=e*this.getLength(),r=this.getCurveLengths(),s=0;r.length>s;){if(r[s]>=i){t=r[s]-i,n=this.curves[s];var a=1-t/n.getLength();return n.getPointAt(a)}s++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],n=0,i=this.curves.length;for(e=0;i>e;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t,t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,n,i,r,s,a=this.getPoints();e=t=Number.NEGATIVE_INFINITY,i=r=Number.POSITIVE_INFINITY;var o,l,u,c,f=a[0]instanceof THREE.Vector3;for(c=f?new THREE.Vector3:new THREE.Vector2,l=0,u=a.length;u>l;l++)o=a[l],o.x>e?e=o.x:i>o.x&&(i=o.x),o.y>t?t=o.y:r>o.y&&(r=o.y),f&&(o.z>n?n=o.z:s>o.z&&(s=o.z)),c.add(o);var h={minX:i,minY:r,maxX:e,maxY:t,centroid:c.divideScalar(u)};return f&&(h.maxZ=n,h.minZ=s),h},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,n=0;e.length>n;n++)t.vertices.push(new THREE.Vector3(e[n].x,e[n].y,e[n].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var n,i,r=this.getPoints(e);for(t||(t=this.bends),n=0,i=t.length;i>n;n++)r=this.getWrapPoints(r,t[n]);return r},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n,i,r=this.getSpacedPoints(e);for(t||(t=this.bends),n=0,i=t.length;i>n;n++)r=this.getWrapPoints(r,t[n]);return r},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var n,i,r,s,a,o,l=this.getBoundingBox();for(n=0,i=e.length;i>n;n++){r=e[n],s=r.x,a=r.y,o=s/l.maxX,o=t.getUtoTmapping(o,s);var u=t.getPoint(o),c=t.getNormalVector(o).multiplyScalar(a);r.x=u.x+c.x,r.y=u.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;n>t;t++)this.children[t].updateMatrixWorld(e)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;n>t;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:e})},THREE.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,r=i[i.length-2],s=i[i.length-1],a=new THREE.LineCurve(new THREE.Vector2(r,s),new THREE.Vector2(e,t));this.curves.push(a),this.actions.push({action:THREE.PathActions.LINE_TO,args:n})},THREE.Path.prototype.quadraticCurveTo=function(e,t,n,i){var r=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,a=s[s.length-2],o=s[s.length-1],l=new THREE.QuadraticBezierCurve(new THREE.Vector2(a,o),new THREE.Vector2(e,t),new THREE.Vector2(n,i));this.curves.push(l),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:r})
},THREE.Path.prototype.bezierCurveTo=function(e,t,n,i,r,s){var a=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,l=o[o.length-2],u=o[o.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(l,u),new THREE.Vector2(e,t),new THREE.Vector2(n,i),new THREE.Vector2(r,s));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:a})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,i=n[n.length-2],r=n[n.length-1],s=[new THREE.Vector2(i,r)];Array.prototype.push.apply(s,e);var a=new THREE.SplineCurve(s);this.curves.push(a),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,n,i,r,s){var a=this.actions[this.actions.length-1].args,o=a[a.length-2],l=a[a.length-1];this.absarc(e+o,t+l,n,i,r,s)},THREE.Path.prototype.absarc=function(e,t,n,i,r,s){this.absellipse(e,t,n,n,i,r,s)},THREE.Path.prototype.ellipse=function(e,t,n,i,r,s,a){var o=this.actions[this.actions.length-1].args,l=o[o.length-2],u=o[o.length-1];this.absellipse(e+l,t+u,n,i,r,s,a)},THREE.Path.prototype.absellipse=function(e,t,n,i,r,s,a){var o=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,n,i,r,s,a);this.curves.push(l);var u=l.getPoint(a?1:0);o.push(u.x),o.push(u.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:o})},THREE.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],n=0;e>n;n++)t.push(this.getPoint(n/e));return t},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var n,i,r,s,a,o,l,u,c,f,h,p,d,m,b,g,v,_,E=[];for(n=0,i=this.actions.length;i>n;n++)switch(r=this.actions[n],s=r.action,a=r.args,s){case THREE.PathActions.MOVE_TO:E.push(new THREE.Vector2(a[0],a[1]));break;case THREE.PathActions.LINE_TO:E.push(new THREE.Vector2(a[0],a[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(o=a[2],l=a[3],f=a[0],h=a[1],E.length>0?(m=E[E.length-1],p=m.x,d=m.y):(m=this.actions[n-1].args,p=m[m.length-2],d=m[m.length-1]),b=1;e>=b;b++)g=b/e,v=THREE.Shape.Utils.b2(g,p,f,o),_=THREE.Shape.Utils.b2(g,d,h,l),E.push(new THREE.Vector2(v,_));break;case THREE.PathActions.BEZIER_CURVE_TO:for(o=a[4],l=a[5],f=a[0],h=a[1],u=a[2],c=a[3],E.length>0?(m=E[E.length-1],p=m.x,d=m.y):(m=this.actions[n-1].args,p=m[m.length-2],d=m[m.length-1]),b=1;e>=b;b++)g=b/e,v=THREE.Shape.Utils.b3(g,p,f,u,o),_=THREE.Shape.Utils.b3(g,d,h,c,l),E.push(new THREE.Vector2(v,_));break;case THREE.PathActions.CSPLINE_THRU:m=this.actions[n-1].args;var y=new THREE.Vector2(m[m.length-2],m[m.length-1]),T=[y],S=e*a[0].length;T=T.concat(a[0]);var w=new THREE.SplineCurve(T);for(b=1;S>=b;b++)E.push(w.getPointAt(b/S));break;case THREE.PathActions.ARC:var k,x=a[0],R=a[1],P=a[2],O=a[3],C=a[4],A=!!a[5],M=C-O,$=2*e;for(b=1;$>=b;b++)g=b/$,A||(g=1-g),k=O+g*M,v=x+P*Math.cos(k),_=R+P*Math.sin(k),E.push(new THREE.Vector2(v,_));break;case THREE.PathActions.ELLIPSE:var k,x=a[0],R=a[1],H=a[2],D=a[3],O=a[4],C=a[5],A=!!a[6],M=C-O,$=2*e;for(b=1;$>=b;b++)g=b/$,A||(g=1-g),k=O+g*M,v=x+H*Math.cos(k),_=R+D*Math.sin(k),E.push(new THREE.Vector2(v,_))}var N=E[E.length-1],I=1e-10;return I>Math.abs(N.x-E[0].x)&&I>Math.abs(N.y-E[0].y)&&E.splice(E.length-1,1),t&&E.push(E[0]),E},THREE.Path.prototype.toShapes=function(e){var t,n,i,r,s,a=[],o=new THREE.Path;for(t=0,n=this.actions.length;n>t;t++)i=this.actions[t],s=i.args,r=i.action,r==THREE.PathActions.MOVE_TO&&0!=o.actions.length&&(a.push(o),o=new THREE.Path),o[r].apply(o,s);if(0!=o.actions.length&&a.push(o),0==a.length)return[];var l,u,c,f=[];if(1==a.length)return u=a[0],c=new THREE.Shape,c.actions=u.actions,c.curves=u.curves,f.push(c),f;var h=!THREE.Shape.Utils.isClockWise(a[0].getPoints());if(h=e?!h:h)for(c=new THREE.Shape,t=0,n=a.length;n>t;t++)u=a[t],l=THREE.Shape.Utils.isClockWise(u.getPoints()),l=e?!l:l,l?(c.actions=u.actions,c.curves=u.curves,f.push(c),c=new THREE.Shape):c.holes.push(u);else{for(c=void 0,t=0,n=a.length;n>t;t++)u=a[t],l=THREE.Shape.Utils.isClockWise(u.getPoints()),l=e?!l:l,l?(c&&f.push(c),c=new THREE.Shape,c.actions=u.actions,c.curves=u.curves):c.holes.push(u);f.push(c)}return f},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,i=[];for(t=0;n>t;t++)i[t]=this.holes[t].getTransformedPoints(e,this.bends);return i},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,i=[];for(t=0;n>t;t++)i[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return i},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={removeHoles:function(e,t){var n,i,r,s,a,o,l,u,c,f,h,p,d,m,b,g,v=e.concat(),_=v.concat(),E=[];for(a=0;t.length>a;a++){for(l=t[a],Array.prototype.push.apply(_,l),u=Number.POSITIVE_INFINITY,o=0;l.length>o;o++){h=l[o];var y=[];for(f=0;v.length>f;f++)p=v[f],c=h.distanceToSquared(p),y.push(c),u>c&&(u=c,r=o,s=f)}n=s-1>=0?s-1:v.length-1,i=r-1>=0?r-1:l.length-1;var T=[l[r],v[s],v[n]],S=THREE.FontUtils.Triangulate.area(T),w=[l[r],l[i],v[s]],k=THREE.FontUtils.Triangulate.area(w),x=1,R=-1,P=s,O=r;s+=x,r+=R,0>s&&(s+=v.length),s%=v.length,0>r&&(r+=l.length),r%=l.length,n=s-1>=0?s-1:v.length-1,i=r-1>=0?r-1:l.length-1,T=[l[r],v[s],v[n]];var C=THREE.FontUtils.Triangulate.area(T);w=[l[r],l[i],v[s]];var A=THREE.FontUtils.Triangulate.area(w);S+k>C+A&&(s=P,r=O,0>s&&(s+=v.length),s%=v.length,0>r&&(r+=l.length),r%=l.length,n=s-1>=0?s-1:v.length-1,i=r-1>=0?r-1:l.length-1),d=v.slice(0,s),m=v.slice(s),b=l.slice(r),g=l.slice(0,r);var M=[l[r],v[s],v[n]],$=[l[r],l[i],v[s]];E.push(M),E.push($),v=d.concat(b).concat(g).concat(m)}return{shape:v,isolatedPts:E,allpoints:_}},triangulateShape:function(e,t){var n,i,r,s,a,o,l=THREE.Shape.Utils.removeHoles(e,t),u=l.shape,c=l.allpoints,f=l.isolatedPts,h=THREE.FontUtils.Triangulate(u,!1),p={};for(n=0,i=c.length;i>n;n++)a=c[n].x+":"+c[n].y,void 0!==p[a]&&console.log("Duplicate point",a),p[a]=n;for(n=0,i=h.length;i>n;n++)for(s=h[n],r=0;3>r;r++)a=s[r].x+":"+s[r].y,o=p[a],void 0!==o&&(s[r]=o);for(n=0,i=f.length;i>n;n++)for(s=f[n],r=0;3>r;r++)a=s[r].x+":"+s[r].y,o=p[a],void 0!==o&&(s[r]=o);return h.concat(f)},isClockWise:function(e){return 0>THREE.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,i){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,i)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){var n=1-e;return 3*n*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,i,r){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,i)+this.b3p3(e,r)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t,n;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),n=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(t,n)},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t,n;t=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),n=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);var i=new THREE.Vector2(t,n);return i.normalize(),i},THREE.CubicBezierCurve=function(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,n;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,n)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,n;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var i=new THREE.Vector2(t,n);return i.normalize(),i},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t,n,i,r=new THREE.Vector2,s=[],a=this.points;return t=(a.length-1)*e,n=Math.floor(t),i=t-n,s[0]=0==n?n:n-1,s[1]=n,s[2]=n>a.length-2?a.length-1:n+1,s[3]=n>a.length-3?a.length-1:n+2,r.x=THREE.Curve.Utils.interpolate(a[s[0]].x,a[s[1]].x,a[s[2]].x,a[s[3]].x,i),r.y=THREE.Curve.Utils.interpolate(a[s[0]].y,a[s[1]].y,a[s[2]].y,a[s[3]].y,i),r},THREE.EllipseCurve=function(e,t,n,i,r,s,a){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;this.aClockwise||(e=1-e);var n=this.aStartAngle+e*t,i=this.aX+this.xRadius*Math.cos(n),r=this.aY+this.yRadius*Math.sin(n);return new THREE.Vector2(i,r)},THREE.ArcCurve=function(e,t,n,i,r,s){THREE.EllipseCurve.call(this,e,t,n,n,i,r,s)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t,n,i;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),n=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),i=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(t,n,i)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i},function(e){var t,n,i;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),i=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(t,n,i)}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n,i,r=new THREE.Vector3,s=[],a=this.points;t=(a.length-1)*e,n=Math.floor(t),i=t-n,s[0]=0==n?n:n-1,s[1]=n,s[2]=n>a.length-2?a.length-1:n+1,s[3]=n>a.length-3?a.length-1:n+2;var o=a[s[0]],l=a[s[1]],u=a[s[2]],c=a[s[3]];return r.x=THREE.Curve.Utils.interpolate(o.x,l.x,u.x,c.x,i),r.y=THREE.Curve.Utils.interpolate(o.y,l.y,u.y,c.y,i),r.z=THREE.Curve.Utils.interpolate(o.z,l.z,u.z,c.z,i),r}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,n,i,r=new THREE.Vector3,s=[],a=this.points;return t=(a.length-0)*e,n=Math.floor(t),i=t-n,n+=n>0?0:(Math.floor(Math.abs(n)/a.length)+1)*a.length,s[0]=(n-1)%a.length,s[1]=n%a.length,s[2]=(n+1)%a.length,s[3]=(n+2)%a.length,r.x=THREE.Curve.Utils.interpolate(a[s[0]].x,a[s[1]].x,a[s[2]].x,a[s[3]].x,i),r.y=THREE.Curve.Utils.interpolate(a[s[0]].y,a[s[1]].y,a[s[2]].y,a[s[3]].y,i),r.z=THREE.Curve.Utils.interpolate(a[s[0]].z,a[s[1]].z,a[s[2]].z,a[s[3]].z,i),r}),THREE.AnimationHandler=function(){var e=[],t={},n={};n.update=function(t){for(var n=0;e.length>n;n++)e[n].update(t)},n.addToUpdate=function(t){-1===e.indexOf(t)&&e.push(t)},n.removeFromUpdate=function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},n.add=function(e){void 0!==t[e.name]&&console.log("THREE.AnimationHandler.add: Warning! "+e.name+" already exists in library. Overwriting."),t[e.name]=e,r(e)},n.get=function(e){return"string"==typeof e?t[e]?t[e]:(console.log("THREE.AnimationHandler.get: Couldn't find animation "+e),null):void 0},n.parse=function(e){var t=[];if(e instanceof THREE.SkinnedMesh)for(var n=0;e.bones.length>n;n++)t.push(e.bones[n]);else i(e,t);return t};var i=function(e,t){t.push(e);for(var n=0;e.children.length>n;n++)i(e.children[n],t)},r=function(e){if(e.initialized!==!0){for(var t=0;e.hierarchy.length>t;t++){for(var n=0;e.hierarchy[t].keys.length>n;n++)if(0>e.hierarchy[t].keys[n].time&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)){var i=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=new THREE.Quaternion(i[0],i[1],i[2],i[3])}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var r={},n=0;e.hierarchy[t].keys.length>n;n++)for(var s=0;e.hierarchy[t].keys[n].morphTargets.length>s;s++){var a=e.hierarchy[t].keys[n].morphTargets[s];r[a]=-1}e.hierarchy[t].usedMorphTargets=r;for(var n=0;e.hierarchy[t].keys.length>n;n++){var o={};for(var a in r){for(var s=0;e.hierarchy[t].keys[n].morphTargets.length>s;s++)if(e.hierarchy[t].keys[n].morphTargets[s]===a){o[a]=e.hierarchy[t].keys[n].morphTargetsInfluences[s];break}s===e.hierarchy[t].keys[n].morphTargets.length&&(o[a]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=o}}for(var n=1;e.hierarchy[t].keys.length>n;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(var n=0;e.hierarchy[t].keys.length>n;n++)e.hierarchy[t].keys[n].index=n}var l=parseInt(e.length*e.fps,10);e.JIT={},e.JIT.hierarchy=[];for(var t=0;e.hierarchy.length>t;t++)e.JIT.hierarchy.push(Array(l));e.initialized=!0}};return n.LINEAR=0,n.CATMULLROM=1,n.CATMULLROM_FORWARD=2,n}(),THREE.Animation=function(e,t,n){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.interpolationType=void 0!==n?n:THREE.AnimationHandler.LINEAR,this.points=[],this.target=new THREE.Vector3},THREE.Animation.prototype.play=function(e,t){if(this.isPlaying===!1){this.isPlaying=!0,this.loop=void 0!==e?e:!0,this.currentTime=void 0!==t?t:0;var n,i,r=this.hierarchy.length;for(n=0;r>n;n++){i=this.hierarchy[n],i.matrixAutoUpdate=!0,void 0===i.animationCache&&(i.animationCache={},i.animationCache.prevKey={pos:0,rot:0,scl:0},i.animationCache.nextKey={pos:0,rot:0,scl:0},i.animationCache.originalMatrix=i instanceof THREE.Bone?i.skinMatrix:i.matrix);var s=i.animationCache.prevKey,a=i.animationCache.nextKey;s.pos=this.data.hierarchy[n].keys[0],s.rot=this.data.hierarchy[n].keys[0],s.scl=this.data.hierarchy[n].keys[0],a.pos=this.getNextKeyWith("pos",n,1),a.rot=this.getNextKeyWith("rot",n,1),a.scl=this.getNextKeyWith("scl",n,1)}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.Animation.prototype.pause=function(){this.isPaused===!0?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this)},THREE.Animation.prototype.update=function(e){if(this.isPlaying!==!1){var t,n,i,r,s,a,o,l,u,c,f=["pos","rot","scl"];this.data.JIT.hierarchy;var h,p,d,m,b;this.currentTime+=e*this.timeScale,p=this.currentTime,h=this.currentTime=this.currentTime%this.data.length,c=parseInt(Math.min(h*this.data.fps,this.data.length*this.data.fps),10);for(var g=0,v=this.hierarchy.length;v>g;g++){l=this.hierarchy[g],u=l.animationCache;for(var _=0;3>_;_++){if(t=f[_],a=u.prevKey[t],o=u.nextKey[t],p>=o.time){if(p>h){if(!this.loop)return this.stop(),void 0;for(a=this.data.hierarchy[g].keys[0],o=this.getNextKeyWith(t,g,1);h>o.time;)a=o,o=this.getNextKeyWith(t,g,o.index+1)}else do a=o,o=this.getNextKeyWith(t,g,o.index+1);while(h>o.time);u.prevKey[t]=a,u.nextKey[t]=o}l.matrixAutoUpdate=!0,l.matrixWorldNeedsUpdate=!0,n=(h-a.time)/(o.time-a.time),r=a[t],s=o[t],(0>n||n>1)&&(console.log("THREE.Animation.update: Warning! Scale out of bounds:"+n+" on bone "+g),n=0>n?0:1),"pos"===t?(i=l.position,this.interpolationType===THREE.AnimationHandler.LINEAR?(i.x=r[0]+(s[0]-r[0])*n,i.y=r[1]+(s[1]-r[1])*n,i.z=r[2]+(s[2]-r[2])*n):(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)&&(this.points[0]=this.getPrevKeyWith("pos",g,a.index-1).pos,this.points[1]=r,this.points[2]=s,this.points[3]=this.getNextKeyWith("pos",g,o.index+1).pos,n=.33*n+.33,d=this.interpolateCatmullRom(this.points,n),i.x=d[0],i.y=d[1],i.z=d[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(m=this.interpolateCatmullRom(this.points,1.01*n),this.target.set(m[0],m[1],m[2]),this.target.sub(i),this.target.y=0,this.target.normalize(),b=Math.atan2(this.target.x,this.target.z),l.rotation.set(0,b,0)))):"rot"===t?THREE.Quaternion.slerp(r,s,l.quaternion,n):"scl"===t&&(i=l.scale,i.x=r[0]+(s[0]-r[0])*n,i.y=r[1]+(s[1]-r[1])*n,i.z=r[2]+(s[2]-r[2])*n)}}}},THREE.Animation.prototype.interpolateCatmullRom=function(e,t){var n,i,r,s,a,o,l,u,c,f=[],h=[];return n=(e.length-1)*t,i=Math.floor(n),r=n-i,f[0]=0===i?i:i-1,f[1]=i,f[2]=i>e.length-2?i:i+1,f[3]=i>e.length-3?i:i+2,o=e[f[0]],l=e[f[1]],u=e[f[2]],c=e[f[3]],s=r*r,a=r*s,h[0]=this.interpolate(o[0],l[0],u[0],c[0],r,s,a),h[1]=this.interpolate(o[1],l[1],u[1],c[1],r,s,a),h[2]=this.interpolate(o[2],l[2],u[2],c[2],r,s,a),h},THREE.Animation.prototype.interpolate=function(e,t,n,i,r,s,a){var o=.5*(n-e),l=.5*(i-t);return(2*(t-n)+o+l)*a+(-3*(t-n)-2*o-l)*s+o*r+t},THREE.Animation.prototype.getNextKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?n=i.length-1>n?n:i.length-1:n%=i.length;i.length>n;n++)if(void 0!==i[n][e])return i[n];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(n=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?n>0?n:0:n>=0?n:n+i.length;n>=0;n--)if(void 0!==i[n][e])return i[n];return this.data.hierarchy[t].keys[i.length-1]},THREE.KeyFrameAnimation=function(e,t,n){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.JITCompile=void 0!==n?n:!0;for(var i=0,r=this.hierarchy.length;r>i;i++){var s=this.data.hierarchy[i].keys,a=this.data.hierarchy[i].sids,o=this.hierarchy[i];if(s.length&&a){for(var l=0;a.length>l;l++){var u=a[l],c=this.getNextKeyWith(u,i,0);c&&c.apply(u)}o.matrixAutoUpdate=!1,this.data.hierarchy[i].node.updateMatrix(),o.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e,t){if(!this.isPlaying){this.isPlaying=!0,this.loop=void 0!==e?e:!0,this.currentTime=void 0!==t?t:0,this.startTimeMs=t,this.startTime=1e7,this.endTime=-this.startTime;var n,i,r,s=this.hierarchy.length;for(n=0;s>n;n++){i=this.hierarchy[n],r=this.data.hierarchy[n],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=i instanceof THREE.Bone?i.skinMatrix:i.matrix);var a=this.data.hierarchy[n].keys;a.length&&(r.animationCache.prevKey=a[0],r.animationCache.nextKey=a[1],this.startTime=Math.min(a[0].time,this.startTime),this.endTime=Math.max(a[a.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var e=0;this.data.hierarchy.length>e;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var i=n.animationCache.originalMatrix;t instanceof THREE.Bone?(i.copy(t.skinMatrix),t.skinMatrix=i):(i.copy(t.matrix),t.matrix=i),delete n.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying){var t,n,i,r,s,a,o,l,u=this.data.JIT.hierarchy;if(this.currentTime+=e*this.timeScale,o=this.currentTime,a=this.currentTime=this.currentTime%this.data.length,this.startTimeMs>a&&(a=this.currentTime=this.startTimeMs+a),s=parseInt(Math.min(a*this.data.fps,this.data.length*this.data.fps),10),l=o>a,l&&!this.loop){for(var c=0,f=this.hierarchy.length;f>c;c++){var h=this.data.hierarchy[c].keys,p=this.data.hierarchy[c].sids,d=h.length-1,m=this.hierarchy[c];if(h.length){for(var b=0;p.length>b;b++){var g=p[b],v=this.getPrevKeyWith(g,c,d);v&&v.apply(g)}this.data.hierarchy[c].node.updateMatrix(),m.matrixWorldNeedsUpdate=!0}}return this.stop(),void 0}if(!(this.startTime>a)){for(var c=0,f=this.hierarchy.length;f>c;c++){i=this.hierarchy[c],r=this.data.hierarchy[c];var h=r.keys,_=r.animationCache;if(this.JITCompile&&void 0!==u[c][s])i instanceof THREE.Bone?(i.skinMatrix=u[c][s],i.matrixWorldNeedsUpdate=!1):(i.matrix=u[c][s],i.matrixWorldNeedsUpdate=!0);else if(h.length){if(this.JITCompile&&_&&(i instanceof THREE.Bone?i.skinMatrix=_.originalMatrix:i.matrix=_.originalMatrix),t=_.prevKey,n=_.nextKey,t&&n){if(o>=n.time){if(l&&this.loop)for(t=h[0],n=h[1];a>n.time;)t=n,n=h[t.index+1];else if(!l)for(var E=h.length-1;a>n.time&&n.index!==E;)t=n,n=h[t.index+1];_.prevKey=t,_.nextKey=n}n.time>=a?t.interpolate(n,a):t.interpolate(n,n.time)}this.data.hierarchy[c].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}if(this.JITCompile&&void 0===u[0][s]){this.hierarchy[0].updateMatrixWorld(!0);for(var c=0;this.hierarchy.length>c;c++)u[c][s]=this.hierarchy[c]instanceof THREE.Bone?this.hierarchy[c].skinMatrix.clone():this.hierarchy[c].matrix.clone()}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(n%=i.length;i.length>n;n++)if(i[n].hasTarget(e))return i[n];return i[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){var i=this.data.hierarchy[t].keys;for(n=n>=0?n:n+i.length;n>=0;n--)if(i[n].hasTarget(e))return i[n];return i[i.length-1]},THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this);var i=90,r=1,s=new THREE.PerspectiveCamera(i,r,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(1,0,0)),this.add(s);var a=new THREE.PerspectiveCamera(i,r,e,t);a.up.set(0,-1,0),a.lookAt(new THREE.Vector3(-1,0,0)),this.add(a);var o=new THREE.PerspectiveCamera(i,r,e,t);o.up.set(0,0,1),o.lookAt(new THREE.Vector3(0,1,0)),this.add(o);var l=new THREE.PerspectiveCamera(i,r,e,t);l.up.set(0,0,-1),l.lookAt(new THREE.Vector3(0,-1,0)),this.add(l);var u=new THREE.PerspectiveCamera(i,r,e,t);u.up.set(0,-1,0),u.lookAt(new THREE.Vector3(0,0,1)),this.add(u);var c=new THREE.PerspectiveCamera(i,r,e,t);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,i=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,s,n),n.activeCubeFace=1,e.render(t,a,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,u,n),n.generateMipmaps=i,n.activeCubeFace=5,e.render(t,c,n)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CombinedCamera=function(e,t,n,i,r,s,a){THREE.Camera.call(this),this.fov=n,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.cameraO=new THREE.OrthographicCamera(e/-2,e/2,t/2,t/-2,s,a),this.cameraP=new THREE.PerspectiveCamera(n,e/t,i,r),this.zoom=1,this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.cameraP.aspect,n=this.cameraP.near,i=this.cameraP.far,r=(n+i)/2,s=Math.tan(e/2)*r,a=2*s,o=a*t,l=o/2;s/=this.zoom,l/=this.zoom,this.cameraO.left=-l,this.cameraO.right=l,this.cameraO.top=s,this.cameraO.bottom=-s,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.setSize=function(e,t){this.cameraP.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},THREE.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=24);var n=2*THREE.Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(n),n},THREE.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CircleGeometry=function(e,t,n,i){THREE.Geometry.call(this),e=e||50,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,t=void 0!==t?Math.max(3,t):8;var r,s=[],a=new THREE.Vector3,o=new THREE.Vector2(.5,.5);for(this.vertices.push(a),s.push(o),r=0;t>=r;r++){var l=new THREE.Vector3,u=n+r/t*i;l.x=e*Math.cos(u),l.y=e*Math.sin(u),this.vertices.push(l),s.push(new THREE.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var c=new THREE.Vector3(0,0,1);for(r=1;t>=r;r++){var f=r,h=r+1,p=0;this.faces.push(new THREE.Face3(f,h,p,[c,c,c])),this.faceVertexUvs[0].push([s[r],s[r+1],o])}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,n,i,r,s){function a(e,t,n,i,r,s,a,l){var u,c,f,h=o.widthSegments,p=o.heightSegments,d=r/2,m=s/2,b=o.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",p=o.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",h=o.depthSegments);var g=h+1,v=p+1,_=r/h,E=s/p,y=new THREE.Vector3;for(y[u]=a>0?1:-1,f=0;v>f;f++)for(c=0;g>c;c++){var T=new THREE.Vector3;T[e]=(c*_-d)*n,T[t]=(f*E-m)*i,T[u]=a,o.vertices.push(T)}for(f=0;p>f;f++)for(c=0;h>c;c++){var S=c+g*f,w=c+g*(f+1),k=c+1+g*(f+1),x=c+1+g*f,R=new THREE.Face4(S+b,w+b,k+b,x+b);R.normal.copy(y),R.vertexNormals.push(y.clone(),y.clone(),y.clone(),y.clone()),R.materialIndex=l,o.faces.push(R),o.faceVertexUvs[0].push([new THREE.Vector2(c/h,1-f/p),new THREE.Vector2(c/h,1-(f+1)/p),new THREE.Vector2((c+1)/h,1-(f+1)/p),new THREE.Vector2((c+1)/h,1-f/p)])}}THREE.Geometry.call(this);var o=this;this.width=e,this.height=t,this.depth=n,this.widthSegments=i||1,this.heightSegments=r||1,this.depthSegments=s||1;var l=this.width/2,u=this.height/2,c=this.depth/2;a("z","y",-1,-1,this.depth,this.height,l,0),a("z","y",1,-1,this.depth,this.height,-l,1),a("x","z",1,1,this.width,this.depth,u,2),a("x","z",1,-1,this.width,this.depth,-u,3),a("x","y",1,-1,this.width,this.height,c,4),a("x","y",-1,-1,this.width,this.height,-c,5),this.computeCentroids(),this.mergeVertices()},THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry=function(e,t,n,i,r,s){THREE.Geometry.call(this),this.radiusTop=e=void 0!==e?e:20,this.radiusBottom=t=void 0!==t?t:20,this.height=n=void 0!==n?n:100,this.radialSegments=i=i||8,this.heightSegments=r=r||1,this.openEnded=s=void 0!==s?s:!1;var a,o,l=n/2,u=[],c=[];for(o=0;r>=o;o++){var f=[],h=[],p=o/r,d=p*(t-e)+e;for(a=0;i>=a;a++){var m=a/i,b=new THREE.Vector3;b.x=d*Math.sin(2*m*Math.PI),b.y=-p*n+l,b.z=d*Math.cos(2*m*Math.PI),this.vertices.push(b),f.push(this.vertices.length-1),h.push(new THREE.Vector2(m,1-p))}u.push(f),c.push(h)}var g,v,_=(t-e)/n;for(a=0;i>a;a++)for(0!==e?(g=this.vertices[u[0][a]].clone(),v=this.vertices[u[0][a+1]].clone()):(g=this.vertices[u[1][a]].clone(),v=this.vertices[u[1][a+1]].clone()),g.setY(Math.sqrt(g.x*g.x+g.z*g.z)*_).normalize(),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*_).normalize(),o=0;r>o;o++){var E=u[o][a],y=u[o+1][a],T=u[o+1][a+1],S=u[o][a+1],w=g.clone(),k=g.clone(),x=v.clone(),R=v.clone(),P=c[o][a].clone(),O=c[o+1][a].clone(),C=c[o+1][a+1].clone(),A=c[o][a+1].clone();this.faces.push(new THREE.Face4(E,y,T,S,[w,k,x,R])),this.faceVertexUvs[0].push([P,O,C,A])}if(s===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,l,0)),a=0;i>a;a++){var E=u[0][a],y=u[0][a+1],T=this.vertices.length-1,w=new THREE.Vector3(0,1,0),k=new THREE.Vector3(0,1,0),x=new THREE.Vector3(0,1,0),P=c[0][a].clone(),O=c[0][a+1].clone(),C=new THREE.Vector2(O.u,0);this.faces.push(new THREE.Face3(E,y,T,[w,k,x])),this.faceVertexUvs[0].push([P,O,C])}if(s===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,-l,0)),a=0;i>a;a++){var E=u[o][a+1],y=u[o][a],T=this.vertices.length-1,w=new THREE.Vector3(0,-1,0),k=new THREE.Vector3(0,-1,0),x=new THREE.Vector3(0,-1,0),P=c[o][a+1].clone(),O=c[o][a].clone(),C=new THREE.Vector2(O.u,1);this.faces.push(new THREE.Face3(E,y,T,[w,k,x])),this.faceVertexUvs[0].push([P,O,C])}this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){return e===void 0?(e=[],void 0):(THREE.Geometry.call(this),e=e instanceof Array?e:[e],this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals(),void 0)},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,i=0;n>i;i++){var r=e[i];this.addShape(r,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.log("die"),t.clone().multiplyScalar(n).add(e)}function i(e,t,n){return s(e,t,n)}function r(e,t,n){var i=Math.atan2(t.y-e.y,t.x-e.x),r=Math.atan2(n.y-e.y,n.x-e.x);i>r&&(r+=2*Math.PI);var s=(i+r)/2,a=-Math.cos(s),o=-Math.sin(s),l=new THREE.Vector2(a,o);return l}function s(e,t,n){var i,s,a,o,l,u,c=THREE.ExtrudeGeometry.__v1,f=THREE.ExtrudeGeometry.__v2,h=THREE.ExtrudeGeometry.__v3,p=THREE.ExtrudeGeometry.__v4,d=THREE.ExtrudeGeometry.__v5,m=THREE.ExtrudeGeometry.__v6;return c.set(e.x-t.x,e.y-t.y),f.set(e.x-n.x,e.y-n.y),i=c.normalize(),s=f.normalize(),h.set(-i.y,i.x),p.set(s.y,-s.x),d.copy(e).add(h),m.copy(e).add(p),d.equals(m)?p.clone():(d.copy(t).add(h),m.copy(n).add(p),a=i.dot(p),o=m.sub(d).dot(p),0===a&&(console.log("Either infinite or no solutions!"),0===o?console.log("Its finite solutions."):console.log("Too bad, no solutions.")),l=o/a,0>l?r(e,t,n):(u=i.multiplyScalar(l).add(d),u.sub(e).clone()))
}function a(){if(g){var e=0,t=W*e;for(q=0;J>q;q++)V=L[q],c(V[2]+t,V[1]+t,V[0]+t,!0);for(e=_+2*b,t=W*e,q=0;J>q;q++)V=L[q],c(V[0]+t,V[1]+t,V[2]+t,!1)}else{for(q=0;J>q;q++)V=L[q],c(V[2],V[1],V[0],!0);for(q=0;J>q;q++)V=L[q],c(V[0]+W*_,V[1]+W*_,V[2]+W*_,!1)}}function o(){var e=0;for(l(z,e),e+=z.length,C=0,A=N.length;A>C;C++)O=N[C],l(O,e),e+=O.length}function l(e,t){var n,i;for(q=e.length;--q>=0;){n=q,i=q-1,0>i&&(i=e.length-1);var r=0,s=_+2*b;for(r=0;s>r;r++){var a=W*r,o=W*(r+1),l=t+n+a,u=t+i+a,c=t+i+o,h=t+n+o;f(l,u,c,h,e,r,s,n,i)}}}function u(e,t,n){M.vertices.push(new THREE.Vector3(e,t,n))}function c(n,i,r,s){n+=$,i+=$,r+=$,M.faces.push(new THREE.Face3(n,i,r,null,null,T));var a=s?w.generateBottomUV(M,e,t,n,i,r):w.generateTopUV(M,e,t,n,i,r);M.faceVertexUvs[0].push(a)}function f(n,i,r,s,a,o,l,u,c){n+=$,i+=$,r+=$,s+=$,M.faces.push(new THREE.Face4(n,i,r,s,null,null,S));var f=w.generateSideWallUV(M,e,a,t,n,i,r,s,o,l,u,c);M.faceVertexUvs[0].push(f)}var h,p=void 0!==t.amount?t.amount:100,d=void 0!==t.bevelThickness?t.bevelThickness:6,m=void 0!==t.bevelSize?t.bevelSize:d-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,g=void 0!==t.bevelEnabled?t.bevelEnabled:!0,v=void 0!==t.curveSegments?t.curveSegments:12,_=void 0!==t.steps?t.steps:1,E=t.extrudePath,y=!1,T=t.material,S=t.extrudeMaterial,w=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;this.shapebb;var k,x,R,P;E&&(h=E.getSpacedPoints(_),y=!0,g=!1,k=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(E,_,!1),x=new THREE.Vector3,R=new THREE.Vector3,P=new THREE.Vector3),g||(b=0,d=0,m=0);var O,C,A,M=this,$=this.vertices.length,H=e.extractPoints(v),D=H.shape,N=H.holes,I=!THREE.Shape.Utils.isClockWise(D);if(I){for(D=D.reverse(),C=0,A=N.length;A>C;C++)O=N[C],THREE.Shape.Utils.isClockWise(O)&&(N[C]=O.reverse());I=!1}var L=THREE.Shape.Utils.triangulateShape(D,N),z=D;for(C=0,A=N.length;A>C;C++)O=N[C],D=D.concat(O);var U,F,B,G,j,V,W=D.length,J=L.length;z.length,180/Math.PI;for(var Y=[],q=0,X=z.length,K=X-1,Q=q+1;X>q;q++,K++,Q++)K===X&&(K=0),Q===X&&(Q=0),z[q],z[K],z[Q],Y[q]=i(z[q],z[K],z[Q]);var Z,et=[],tt=Y.concat();for(C=0,A=N.length;A>C;C++){for(O=N[C],Z=[],q=0,X=O.length,K=X-1,Q=q+1;X>q;q++,K++,Q++)K===X&&(K=0),Q===X&&(Q=0),Z[q]=i(O[q],O[K],O[Q]);et.push(Z),tt=tt.concat(Z)}for(U=0;b>U;U++){for(B=U/b,G=d*(1-B),F=m*Math.sin(B*Math.PI/2),q=0,X=z.length;X>q;q++)j=n(z[q],Y[q],F),u(j.x,j.y,-G);for(C=0,A=N.length;A>C;C++)for(O=N[C],Z=et[C],q=0,X=O.length;X>q;q++)j=n(O[q],Z[q],F),u(j.x,j.y,-G)}for(F=m,q=0;W>q;q++)j=g?n(D[q],tt[q],F):D[q],y?(R.copy(k.normals[0]).multiplyScalar(j.x),x.copy(k.binormals[0]).multiplyScalar(j.y),P.copy(h[0]).add(R).add(x),u(P.x,P.y,P.z)):u(j.x,j.y,0);var nt;for(nt=1;_>=nt;nt++)for(q=0;W>q;q++)j=g?n(D[q],tt[q],F):D[q],y?(R.copy(k.normals[nt]).multiplyScalar(j.x),x.copy(k.binormals[nt]).multiplyScalar(j.y),P.copy(h[nt]).add(R).add(x),u(P.x,P.y,P.z)):u(j.x,j.y,p/_*nt);for(U=b-1;U>=0;U--){for(B=U/b,G=d*(1-B),F=m*Math.sin(B*Math.PI/2),q=0,X=z.length;X>q;q++)j=n(z[q],Y[q],F),u(j.x,j.y,p+G);for(C=0,A=N.length;A>C;C++)for(O=N[C],Z=et[C],q=0,X=O.length;X>q;q++)j=n(O[q],Z[q],F),y?u(j.x,j.y+h[_-1].y,h[_-1].x+G):u(j.x,j.y,p+G)}a(),o()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,i,r,s){var a=e.vertices[i].x,o=e.vertices[i].y,l=e.vertices[r].x,u=e.vertices[r].y,c=e.vertices[s].x,f=e.vertices[s].y;return[new THREE.Vector2(a,o),new THREE.Vector2(l,u),new THREE.Vector2(c,f)]},generateBottomUV:function(e,t,n,i,r,s){return this.generateTopUV(e,t,n,i,r,s)},generateSideWallUV:function(e,t,n,i,r,s,a,o){var l=e.vertices[r].x,u=e.vertices[r].y,c=e.vertices[r].z,f=e.vertices[s].x,h=e.vertices[s].y,p=e.vertices[s].z,d=e.vertices[a].x,m=e.vertices[a].y,b=e.vertices[a].z,g=e.vertices[o].x,v=e.vertices[o].y,_=e.vertices[o].z;return.01>Math.abs(u-h)?[new THREE.Vector2(l,1-c),new THREE.Vector2(f,1-p),new THREE.Vector2(d,1-b),new THREE.Vector2(g,1-_)]:[new THREE.Vector2(u,1-c),new THREE.Vector2(h,1-p),new THREE.Vector2(m,1-b),new THREE.Vector2(v,1-_)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),e instanceof Array==!1&&(e=[e]),this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,i=e.length;i>n;n++)this.addShape(e[n],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n=void 0!==t.curveSegments?t.curveSegments:12,i=t.material,r=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator;this.shapebb;var s,a,o,l=this.vertices.length,u=e.extractPoints(n),c=u.shape,f=u.holes,h=!THREE.Shape.Utils.isClockWise(c);if(h){for(c=c.reverse(),s=0,a=f.length;a>s;s++)o=f[s],THREE.Shape.Utils.isClockWise(o)&&(f[s]=o.reverse());h=!1}var p=THREE.Shape.Utils.triangulateShape(c,f),d=c;for(s=0,a=f.length;a>s;s++)o=f[s],c=c.concat(o);var m,b,g=c.length,v=p.length;for(d.length,s=0;g>s;s++)m=c[s],this.vertices.push(new THREE.Vector3(m.x,m.y,0));for(s=0;v>s;s++){b=p[s];var _=b[0]+l,E=b[1]+l,y=b[2]+l;this.faces.push(new THREE.Face3(_,E,y,null,null,i)),this.faceVertexUvs[0].push(r.generateBottomUV(this,e,t,_,E,y))}},THREE.LatheGeometry=function(e,t,n,i){THREE.Geometry.call(this),t=t||12,n=n||0,i=i||2*Math.PI;for(var r=1/(e.length-1),s=1/t,a=0,o=t;o>=a;a++)for(var l=n+a*s*i,u=Math.cos(l),c=Math.sin(l),f=0,h=e.length;h>f;f++){var p=e[f],d=new THREE.Vector3;d.x=u*p.x-c*p.y,d.y=c*p.x+u*p.y,d.z=p.z,this.vertices.push(d)}for(var m=e.length,a=0,o=t;o>a;a++)for(var f=0,h=e.length-1;h>f;f++){var b=f+m*a,g=b,v=b+m,u=b+1+m,_=b+1;this.faces.push(new THREE.Face4(g,v,u,_));var E=a*s,y=f*r,T=E+s,S=y+r;this.faceVertexUvs[0].push([new THREE.Vector2(E,y),new THREE.Vector2(T,y),new THREE.Vector2(T,S),new THREE.Vector2(E,S)])}this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,n,i){THREE.Geometry.call(this),this.width=e,this.height=t,this.widthSegments=n||1,this.heightSegments=i||1;var r,s,a=e/2,o=t/2,l=this.widthSegments,u=this.heightSegments,c=l+1,f=u+1,h=this.width/l,p=this.height/u,d=new THREE.Vector3(0,0,1);for(s=0;f>s;s++)for(r=0;c>r;r++){var m=r*h-a,b=s*p-o;this.vertices.push(new THREE.Vector3(m,-b,0))}for(s=0;u>s;s++)for(r=0;l>r;r++){var g=r+c*s,v=r+c*(s+1),_=r+1+c*(s+1),E=r+1+c*s,y=new THREE.Face4(g,v,_,E);y.normal.copy(d),y.vertexNormals.push(d.clone(),d.clone(),d.clone(),d.clone()),this.faces.push(y),this.faceVertexUvs[0].push([new THREE.Vector2(r/l,1-s/u),new THREE.Vector2(r/l,1-(s+1)/u),new THREE.Vector2((r+1)/l,1-(s+1)/u),new THREE.Vector2((r+1)/l,1-s/u)])}this.computeCentroids()},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(e,t,n,i,r,s){THREE.Geometry.call(this),e=e||0,t=t||50,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(3,i):8;var a,o,l=[],u=e,c=(t-e)/i;for(a=0;i>=a;a++){for(o=0;n>=o;o++){var f=new THREE.Vector3,h=r+o/n*s;f.x=u*Math.cos(h),f.y=u*Math.sin(h),this.vertices.push(f),l.push(new THREE.Vector2((f.x/u+1)/2,-(f.y/u+1)/2+1))}u+=c}var p=new THREE.Vector3(0,0,1);for(a=0;i>a;a++){var d=a*n;for(o=0;n>=o;o++){var h=o+d,m=h+a,b=h+n+a,g=h+n+1+a;this.faces.push(new THREE.Face3(m,b,g,[p,p,p])),this.faceVertexUvs[0].push([l[m],l[b],l[g]]),m=h+a,b=h+n+1+a,g=h+1+a,this.faces.push(new THREE.Face3(m,b,g,[p,p,p])),this.faceVertexUvs[0].push([l[m],l[b],l[g]])}}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,u)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,n,i,r,s,a){THREE.Geometry.call(this),this.radius=e=e||50,this.widthSegments=t=Math.max(3,Math.floor(t)||8),this.heightSegments=n=Math.max(2,Math.floor(n)||6),this.phiStart=i=void 0!==i?i:0,this.phiLength=r=void 0!==r?r:2*Math.PI,this.thetaStart=s=void 0!==s?s:0,this.thetaLength=a=void 0!==a?a:Math.PI;var o,l,u=[],c=[];for(l=0;n>=l;l++){var f=[],h=[];for(o=0;t>=o;o++){var p=o/t,d=l/n,m=new THREE.Vector3;m.x=-e*Math.cos(i+p*r)*Math.sin(s+d*a),m.y=e*Math.cos(s+d*a),m.z=e*Math.sin(i+p*r)*Math.sin(s+d*a),this.vertices.push(m),f.push(this.vertices.length-1),h.push(new THREE.Vector2(p,1-d))}u.push(f),c.push(h)}for(l=0;this.heightSegments>l;l++)for(o=0;this.widthSegments>o;o++){var b=u[l][o+1],g=u[l][o],v=u[l+1][o],_=u[l+1][o+1],E=this.vertices[b].clone().normalize(),y=this.vertices[g].clone().normalize(),T=this.vertices[v].clone().normalize(),S=this.vertices[_].clone().normalize(),w=c[l][o+1].clone(),k=c[l][o].clone(),x=c[l+1][o].clone(),R=c[l+1][o+1].clone();Math.abs(this.vertices[b].y)===this.radius?(this.faces.push(new THREE.Face3(b,v,_,[E,T,S])),this.faceVertexUvs[0].push([w,x,R])):Math.abs(this.vertices[v].y)===this.radius?(this.faces.push(new THREE.Face3(b,g,v,[E,y,T])),this.faceVertexUvs[0].push([w,k,x])):(this.faces.push(new THREE.Face4(b,g,v,_,[E,y,T,S])),this.faceVertexUvs[0].push([w,k,x,R]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var n=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,n,t)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,n,i,r){THREE.Geometry.call(this),this.radius=e||100,this.tube=t||40,this.radialSegments=n||8,this.tubularSegments=i||6,this.arc=r||2*Math.PI;for(var s=new THREE.Vector3,a=[],o=[],l=0;this.radialSegments>=l;l++)for(var u=0;this.tubularSegments>=u;u++){var c=u/this.tubularSegments*this.arc,f=2*l/this.radialSegments*Math.PI;s.x=this.radius*Math.cos(c),s.y=this.radius*Math.sin(c);var h=new THREE.Vector3;h.x=(this.radius+this.tube*Math.cos(f))*Math.cos(c),h.y=(this.radius+this.tube*Math.cos(f))*Math.sin(c),h.z=this.tube*Math.sin(f),this.vertices.push(h),a.push(new THREE.Vector2(u/this.tubularSegments,l/this.radialSegments)),o.push(h.clone().sub(s).normalize())}for(var l=1;this.radialSegments>=l;l++)for(var u=1;this.tubularSegments>=u;u++){var p=(this.tubularSegments+1)*l+u-1,d=(this.tubularSegments+1)*(l-1)+u-1,m=(this.tubularSegments+1)*(l-1)+u,b=(this.tubularSegments+1)*l+u,g=new THREE.Face4(p,d,m,b,[o[p],o[d],o[m],o[b]]);g.normal.add(o[p]),g.normal.add(o[d]),g.normal.add(o[m]),g.normal.add(o[b]),g.normal.normalize(),this.faces.push(g),this.faceVertexUvs[0].push([a[p].clone(),a[d].clone(),a[m].clone(),a[b].clone()])}this.computeCentroids()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,n,i,r,s,a){function o(e,t,n,i,r){var s=Math.cos(e),a=Math.sin(e),o=t/n*e,l=Math.cos(o),u=.5*i*(2+l)*s,c=.5*i*(2+l)*a,f=.5*r*i*Math.sin(o);return new THREE.Vector3(u,c,f)}THREE.Geometry.call(this);var l=this;this.radius=e||100,this.tube=t||40,this.radialSegments=n||64,this.tubularSegments=i||8,this.p=r||2,this.q=s||3,this.heightScale=a||1,this.grid=Array(this.radialSegments);for(var u=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Vector3,h=0;this.radialSegments>h;++h){this.grid[h]=Array(this.tubularSegments);var p=2*(h/this.radialSegments)*this.p*Math.PI,d=o(p,this.q,this.p,this.radius,this.heightScale),m=o(p+.01,this.q,this.p,this.radius,this.heightScale);u.subVectors(m,d),c.addVectors(m,d),f.crossVectors(u,c),c.crossVectors(f,u),f.normalize(),c.normalize();for(var b=0;this.tubularSegments>b;++b){var g=2*(b/this.tubularSegments)*Math.PI,v=-this.tube*Math.cos(g),_=this.tube*Math.sin(g),E=new THREE.Vector3;E.x=d.x+v*c.x+_*f.x,E.y=d.y+v*c.y+_*f.y,E.z=d.z+v*c.z+_*f.z,this.grid[h][b]=l.vertices.push(E)-1}}for(var h=0;this.radialSegments>h;++h)for(var b=0;this.tubularSegments>b;++b){var y=(h+1)%this.radialSegments,T=(b+1)%this.tubularSegments,S=this.grid[h][b],w=this.grid[y][b],k=this.grid[y][T],x=this.grid[h][T],R=new THREE.Vector2(h/this.radialSegments,b/this.tubularSegments),P=new THREE.Vector2((h+1)/this.radialSegments,b/this.tubularSegments),O=new THREE.Vector2((h+1)/this.radialSegments,(b+1)/this.tubularSegments),C=new THREE.Vector2(h/this.radialSegments,(b+1)/this.tubularSegments);this.faces.push(new THREE.Face4(S,w,k,x)),this.faceVertexUvs[0].push([R,P,O,C])}this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,n,i,r){function s(e,t,n){return x.vertices.push(new THREE.Vector3(e,t,n))-1}THREE.Geometry.call(this),this.path=e,this.segments=t||64,this.radius=n||1,this.radialSegments=i||8,this.closed=r||!1,this.grid=[];var a,o,l,u,c,f,h,p,d,m,b,g,v,_,E,y,T,S,w,k,x=this,R=this.segments+1,P=new THREE.Vector3,O=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed),C=O.tangents,A=O.normals,M=O.binormals;for(this.tangents=C,this.normals=A,this.binormals=M,d=0;R>d;d++)for(this.grid[d]=[],u=d/(R-1),p=e.getPointAt(u),a=C[d],o=A[d],l=M[d],m=0;this.radialSegments>m;m++)c=2*(m/this.radialSegments)*Math.PI,f=-this.radius*Math.cos(c),h=this.radius*Math.sin(c),P.copy(p),P.x+=f*o.x+h*l.x,P.y+=f*o.y+h*l.y,P.z+=f*o.z+h*l.z,this.grid[d][m]=s(P.x,P.y,P.z);for(d=0;this.segments>d;d++)for(m=0;this.radialSegments>m;m++)b=this.closed?(d+1)%this.segments:d+1,g=(m+1)%this.radialSegments,v=this.grid[d][m],_=this.grid[b][m],E=this.grid[b][g],y=this.grid[d][g],T=new THREE.Vector2(d/this.segments,m/this.radialSegments),S=new THREE.Vector2((d+1)/this.segments,m/this.radialSegments),w=new THREE.Vector2((d+1)/this.segments,(m+1)/this.radialSegments),k=new THREE.Vector2(d/this.segments,(m+1)/this.radialSegments),this.faces.push(new THREE.Face4(v,_,E,y)),this.faceVertexUvs[0].push([T,S,w,k]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,n){function i(){p[0]=new THREE.Vector3,d[0]=new THREE.Vector3,s=Number.MAX_VALUE,a=Math.abs(h[0].x),o=Math.abs(h[0].y),l=Math.abs(h[0].z),s>=a&&(s=a,f.set(1,0,0)),s>=o&&(s=o,f.set(0,1,0)),s>=l&&f.set(0,0,1),m.crossVectors(h[0],f).normalize(),p[0].crossVectors(h[0],m),d[0].crossVectors(h[0],p[0])}var r,s,a,o,l,u,c,f=(new THREE.Vector3,new THREE.Vector3),h=(new THREE.Vector3,[]),p=[],d=[],m=new THREE.Vector3,b=new THREE.Matrix4,g=t+1,v=1e-4;for(this.tangents=h,this.normals=p,this.binormals=d,u=0;g>u;u++)c=u/(g-1),h[u]=e.getTangentAt(c),h[u].normalize();for(i(),u=1;g>u;u++)p[u]=p[u-1].clone(),d[u]=d[u-1].clone(),m.crossVectors(h[u-1],h[u]),m.length()>v&&(m.normalize(),r=Math.acos(THREE.Math.clamp(h[u-1].dot(h[u]),-1,1)),p[u].applyMatrix4(b.makeRotationAxis(m,r))),d[u].crossVectors(h[u],p[u]);if(n)for(r=Math.acos(THREE.Math.clamp(p[0].dot(p[g-1]),-1,1)),r/=g-1,h[0].dot(m.crossVectors(p[0],p[g-1]))>0&&(r=-r),u=1;g>u;u++)p[u].applyMatrix4(b.makeRotationAxis(h[u],r*u)),d[u].crossVectors(h[u],p[u])},THREE.PolyhedronGeometry=function(e,t,n,i){function r(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var n=o(e)/2/Math.PI+.5,i=l(e)/Math.PI+.5;return t.uv=new THREE.Vector2(n,1-i),t}function s(e,t,n){var i=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);i.centroid.add(e).add(t).add(n).divideScalar(3),c.faces.push(i);var r=o(i.centroid);c.faceVertexUvs[0].push([u(e.uv,e,r),u(t.uv,t,r),u(n.uv,n,r)])}function a(e,t){var n=Math.pow(2,t);Math.pow(4,t);for(var i=r(c.vertices[e.a]),a=r(c.vertices[e.b]),o=r(c.vertices[e.c]),l=[],u=0;n>=u;u++){l[u]=[];for(var f=r(i.clone().lerp(o,u/n)),h=r(a.clone().lerp(o,u/n)),p=n-u,d=0;p>=d;d++)l[u][d]=0==d&&u==n?f:r(f.clone().lerp(h,d/p))}for(var u=0;n>u;u++)for(var d=0;2*(n-u)-1>d;d++){var m=Math.floor(d/2);0==d%2?s(l[u][m+1],l[u+1][m],l[u][m]):s(l[u][m+1],l[u+1][m+1],l[u+1][m])}}function o(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function u(e,t,n){return 0>n&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),n=n||1,i=i||0;for(var c=this,f=0,h=e.length;h>f;f++)r(new THREE.Vector3(e[f][0],e[f][1],e[f][2]));for(var p=this.vertices,d=[],f=0,h=t.length;h>f;f++){var m=p[t[f][0]],b=p[t[f][1]],g=p[t[f][2]];d[f]=new THREE.Face3(m.index,b.index,g.index,[m.clone(),b.clone(),g.clone()])}for(var f=0,h=d.length;h>f;f++)a(d[f],i);for(var f=0,h=this.faceVertexUvs[0].length;h>f;f++){var v=this.faceVertexUvs[0][f],_=v[0].x,E=v[1].x,y=v[2].x,T=Math.max(_,Math.max(E,y)),S=Math.min(_,Math.min(E,y));T>.9&&.1>S&&(.2>_&&(v[0].x+=1),.2>E&&(v[1].x+=1),.2>y&&(v[2].x+=1))}for(var f=0,h=this.vertices.length;h>f;f++)this.vertices[f].multiplyScalar(n);this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){this.radius=e,this.detail=t;var n=(1+Math.sqrt(5))/2,i=[[-1,n,0],[1,n,0],[-1,-n,0],[1,-n,0],[0,-1,n],[0,1,n],[0,-1,-n],[0,1,-n],[n,0,-1],[n,0,1],[-n,0,-1],[-n,0,1]],r=[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]];THREE.PolyhedronGeometry.call(this,i,r,e,t)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){var n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]];THREE.PolyhedronGeometry.call(this,n,i,e,t)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){var n=[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],i=[[2,1,0],[0,3,2],[1,3,0],[2,3,1]];THREE.PolyhedronGeometry.call(this,n,i,e,t)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,n,i){THREE.Geometry.call(this);var r=this.vertices,s=this.faces,a=this.faceVertexUvs[0];i=void 0===i?!1:i;var o,l,u,c,f,h=t+1;for(o=0;n>=o;o++)for(f=o/n,l=0;t>=l;l++)c=l/t,u=e(c,f),r.push(u);var p,d,m,b,g,v,_,E;for(o=0;n>o;o++)for(l=0;t>l;l++)p=o*h+l,d=o*h+l+1,m=(o+1)*h+l,b=(o+1)*h+l+1,g=new THREE.Vector2(l/t,o/n),v=new THREE.Vector2((l+1)/t,o/n),_=new THREE.Vector2(l/t,(o+1)/n),E=new THREE.Vector2((l+1)/t,(o+1)/n),i?(s.push(new THREE.Face3(p,d,m)),s.push(new THREE.Face3(d,b,m)),a.push([g,v,_]),a.push([v,E,_])):(s.push(new THREE.Face4(p,d,b,m)),a.push([g,v,E,_]));this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3,new THREE.Vector3(e,0,0),new THREE.Vector3,new THREE.Vector3(0,e,0),new THREE.Vector3,new THREE.Vector3(0,0,e)),t.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,t,n,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(e,t,n,i){THREE.Object3D.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),this.position=t;var r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(0,0,0)),r.vertices.push(new THREE.Vector3(0,1,0)),this.line=new THREE.Line(r,new THREE.LineBasicMaterial({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line);var s=new THREE.CylinderGeometry(0,.05,.25,5,1);s.applyMatrix((new THREE.Matrix4).makeTranslation(0,.875,0)),this.cone=new THREE.Mesh(s,new THREE.MeshBasicMaterial({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n)},THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e){this.scale.set(e,e,e)},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.setHex(e),this.cone.material.color.setHex(e)},THREE.BoxHelper=function(e){var t=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=t;var n=new THREE.Geometry;n.vertices.push(t[0],t[1],t[1],t[2],t[2],t[3],t[3],t[0],t[4],t[5],t[5],t[6],t[6],t[7],t[7],t[4],t[0],t[4],t[1],t[5],t[2],t[6],t[3],t[7]),THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var n=t.boundingBox.min,i=t.boundingBox.max,r=this.vertices;r[0].set(i.x,i.y,i.z),r[1].set(n.x,i.y,i.z),r[2].set(n.x,n.y,i.z),r[3].set(i.x,n.y,i.z),r[4].set(i.x,i.y,n.z),r[5].set(n.x,i.y,n.z),r[6].set(n.x,n.y,n.z),r[7].set(i.x,n.y,n.z),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.BoundingBoxHelper=function(e,t){var n=t||8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){i.vertices.push(new THREE.Vector3),i.colors.push(new THREE.Color(t)),void 0===s[e]&&(s[e]=[]),s[e].push(i.vertices.length-1)}var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),s={},a=16755200,o=16711680,l=43775,u=16777215,c=3355443;t("n1","n2",a),t("n2","n4",a),t("n4","n3",a),t("n3","n1",a),t("f1","f2",a),t("f2","f4",a),t("f4","f3",a),t("f3","f1",a),t("n1","f1",a),t("n2","f2",a),t("n3","f3",a),t("n4","f4",a),t("p","n1",o),t("p","n2",o),t("p","n3",o),t("p","n4",o),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",u),t("p","c",c),t("cn1","cn2",c),t("cn3","cn4",c),t("cf1","cf2",c),t("cf3","cf4",c),THREE.Line.call(this,i,r,THREE.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Camera,n=new THREE.Projector;return function(){function i(i,s,a,o){e.set(s,a,o),n.unprojectVector(e,t);var l=r.pointMap[i];if(void 0!==l)for(var u=0,c=l.length;c>u;u++)r.geometry.vertices[l[u]].copy(e)}var r=this,s=1,a=1;t.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-s,-a,-1),i("n2",s,-a,-1),i("n3",-s,a,-1),i("n4",s,a,-1),i("f1",-s,-a,1),i("f2",s,-a,1),i("f3",-s,a,1),i("f4",s,a,1),i("u1",.7*s,1.1*a,-1),i("u2",.7*-s,1.1*a,-1),i("u3",0,2*a,-1),i("cf1",-s,0,1),i("cf2",s,0,1),i("cf3",0,-a,1),i("cf4",0,a,1),i("cn1",-s,0,-1),i("cn2",s,0,-1),i("cn3",0,-a,-1),i("cn4",0,a,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new THREE.PlaneGeometry(t,t),i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Mesh(n,i),this.add(this.lightPlane),n=new THREE.Geometry,n.vertices.push(new THREE.Vector3),n.vertices.push(new THREE.Vector3),n.computeLineDistances(),i=new THREE.LineBasicMaterial({fog:!1}),i.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(n,i),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){e.getPositionFromMatrix(this.light.matrixWorld).negate(),this.lightPlane.lookAt(e),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(e),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.FaceNormalsHelper=function(e,t,n,i){this.object=e,this.size=t||1;for(var r=n||16776960,s=i||1,a=new THREE.Geometry,o=this.object.geometry.faces,l=0,u=o.length;u>l;l++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:r,linewidth:s}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var t=this.geometry.vertices,n=this.object.geometry.faces,i=this.object.matrixWorld,r=0,s=n.length;s>r;r++){var a=n[r];e.copy(a.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var o=2*r;t[o].copy(a.centroid).applyMatrix4(i),t[o+1].addVectors(t[o],e)}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var n=new THREE.Geometry,i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var r=-e;e>=r;r+=t){n.vertices.push(new THREE.Vector3(-e,0,r),new THREE.Vector3(e,0,r),new THREE.Vector3(r,0,-e),new THREE.Vector3(r,0,e));var s=0===r?this.color1:this.color2;n.colors.push(s,s,s,s)}THREE.Line.call(this,n,i,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var n=new THREE.SphereGeometry(t,4,2);n.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var i=0,r=8;r>i;i++)n.faces[i].color=this.colors[4>i?0:1];var s=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(n,s),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.getPositionFromMatrix(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2),i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,n,i),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var n=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,n),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=this.light.distance?this.light.distance:1e4,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),this.cone.lookAt(e.getPositionFromMatrix(this.light.matrixWorld).negate()),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,n,i){this.object=e,this.size=t||1;var r=n||16711680,s=i||1,a=new THREE.Geometry;e.geometry.vertices;for(var o=e.geometry.faces,l=0,u=o.length;u>l;l++)for(var c=o[l],f=0,h=c.vertexNormals.length;h>f;f++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:r,linewidth:s}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,r=this.object.geometry.faces,s=this.object.matrixWorld,a=0,o=0,l=r.length;l>o;o++)for(var u=r[o],c=0,f=u.vertexNormals.length;f>c;c++){var h=u[t[c]],p=i[h],d=u.vertexNormals[c];n[a].copy(p).applyMatrix4(s),e.copy(d).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,n,i){this.object=e,this.size=t||1;var r=n||255,s=i||1,a=new THREE.Geometry;e.geometry.vertices;for(var o=e.geometry.faces,l=0,u=o.length;u>l;l++)for(var c=o[l],f=0,h=c.vertexTangents.length;h>f;f++)a.vertices.push(new THREE.Vector3),a.vertices.push(new THREE.Vector3);THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:r,linewidth:s}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,i=this.object.geometry.vertices,r=this.object.geometry.faces,s=this.object.matrixWorld,a=0,o=0,l=r.length;l>o;o++)for(var u=r[o],c=0,f=u.vertexTangents.length;f>c;c++){var h=u[t[c]],p=i[h],d=u.vertexTangents[c];n[a].copy(p).applyMatrix4(s),e.copy(d).transformDirection(s).multiplyScalar(this.size),e.add(n[a]),a+=1,n[a].copy(e),a+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e){for(var t=[0,0],n={},i=function(e,t){return e-t},r=["a","b","c","d"],s=new THREE.Geometry,a=e.geometry.vertices,o=e.geometry.faces,l=0,u=o.length;u>l;l++)for(var c=o[l],f=c instanceof THREE.Face4?4:3,h=0;f>h;h++){t[0]=c[r[h]],t[1]=c[r[(h+1)%f]],t.sort(i);var p=""+t;void 0===n[p]&&(s.vertices.push(a[t[0]]),s.vertices.push(a[t[1]]),n[p]=!0)
}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:16777215}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(e,t,n,i,r){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,i,r)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,n,i,r,s){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=new THREE.Color(16777215)),void 0===i&&(i=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:s,color:r,blending:i})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(e=0;n>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+r*t.distance,t.wantedRotation=.25*t.x*Math.PI,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,i="__default",r=0,s=n-1,a=n/1;this.createAnimation(i,r,s,a),this.setAnimationWeight(i,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,i){var r={startFrame:t,endFrame:n,length:n-t+1,fps:i,duration:(n-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=r,this.animationsList.push(r)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)(\d+)/,i={},r=this.geometry,s=0,a=r.morphTargets.length;a>s;s++){var o=r.morphTargets[s],l=o.name.match(n);if(l&&l.length>1){var u=l[1];l[2],i[u]||(i[u]={start:1/0,end:-1/0});var c=i[u];c.start>s&&(c.start=s),s>c.end&&(c.end=s),t||(t=u)}}for(var u in i){var c=i[u];this.createAnimation(u,c.start,c.end,e)}this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;n>t;t++){var i=this.animationsList[t];if(i.active){var r=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||0>i.time)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),0>i.time&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,0>i.time&&(i.time+=i.duration));var s=i.startFrame+THREE.Math.clamp(Math.floor(i.time/r),0,i.length-1),a=i.weight;s!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*a,this.morphTargetInfluences[s]=0,i.lastFrame=i.currentFrame,i.currentFrame=s);var o=i.time%r/r;i.directionBackwards&&(o=1-o),this.morphTargetInfluences[i.currentFrame]=o*a,this.morphTargetInfluences[i.lastFrame]=(1-o)*a}}},THREE.LensFlarePlugin=function(){function e(e,n){var i=t.createProgram(),r=t.createShader(t.FRAGMENT_SHADER),s=t.createShader(t.VERTEX_SHADER),a="precision "+n+" float;\n";return t.shaderSource(r,a+e.fragmentShader),t.shaderSource(s,a+e.vertexShader),t.compileShader(r),t.compileShader(s),t.attachShader(i,r),t.attachShader(i,s),t.linkProgram(i),i}var t,n,i,r={};this.init=function(s){t=s.context,n=s,i=s.getPrecision(),r.vertices=new Float32Array(16),r.faces=new Uint16Array(6);var a=0;r.vertices[a++]=-1,r.vertices[a++]=-1,r.vertices[a++]=0,r.vertices[a++]=0,r.vertices[a++]=1,r.vertices[a++]=-1,r.vertices[a++]=1,r.vertices[a++]=0,r.vertices[a++]=1,r.vertices[a++]=1,r.vertices[a++]=1,r.vertices[a++]=1,r.vertices[a++]=-1,r.vertices[a++]=1,r.vertices[a++]=0,r.vertices[a++]=1,a=0,r.faces[a++]=0,r.faces[a++]=1,r.faces[a++]=2,r.faces[a++]=0,r.faces[a++]=2,r.faces[a++]=3,r.vertexBuffer=t.createBuffer(),r.elementBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r.vertices,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.elementBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r.faces,t.STATIC_DRAW),r.tempTexture=t.createTexture(),r.occlusionTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,r.tempTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,r.occlusionTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),0>=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(r.hasVertexTexture=!1,r.program=e(THREE.ShaderFlares.lensFlare,i)):(r.hasVertexTexture=!0,r.program=e(THREE.ShaderFlares.lensFlareVertexTexture,i)),r.attributes={},r.uniforms={},r.attributes.vertex=t.getAttribLocation(r.program,"position"),r.attributes.uv=t.getAttribLocation(r.program,"uv"),r.uniforms.renderType=t.getUniformLocation(r.program,"renderType"),r.uniforms.map=t.getUniformLocation(r.program,"map"),r.uniforms.occlusionMap=t.getUniformLocation(r.program,"occlusionMap"),r.uniforms.opacity=t.getUniformLocation(r.program,"opacity"),r.uniforms.color=t.getUniformLocation(r.program,"color"),r.uniforms.scale=t.getUniformLocation(r.program,"scale"),r.uniforms.rotation=t.getUniformLocation(r.program,"rotation"),r.uniforms.screenPosition=t.getUniformLocation(r.program,"screenPosition")},this.render=function(e,i,s,a){var o=e.__webglFlares,l=o.length;if(l){var u=new THREE.Vector3,c=a/s,f=.5*s,h=.5*a,p=16/a,d=new THREE.Vector2(p*c,p),m=new THREE.Vector3(1,1,0),b=new THREE.Vector2(1,1),g=r.uniforms,v=r.attributes;t.useProgram(r.program),t.enableVertexAttribArray(r.attributes.vertex),t.enableVertexAttribArray(r.attributes.uv),t.uniform1i(g.occlusionMap,0),t.uniform1i(g.map,1),t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.vertexAttribPointer(v.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(v.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.elementBuffer),t.disable(t.CULL_FACE),t.depthMask(!1);var _,E,y,T,S;for(_=0;l>_;_++)if(p=16/a,d.set(p*c,p),T=o[_],u.set(T.matrixWorld.elements[12],T.matrixWorld.elements[13],T.matrixWorld.elements[14]),u.applyMatrix4(i.matrixWorldInverse),u.applyProjection(i.projectionMatrix),m.copy(u),b.x=m.x*f+f,b.y=m.y*h+h,r.hasVertexTexture||b.x>0&&s>b.x&&b.y>0&&a>b.y)for(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,r.tempTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,b.x-8,b.y-8,16,16,0),t.uniform1i(g.renderType,0),t.uniform2f(g.scale,d.x,d.y),t.uniform3f(g.screenPosition,m.x,m.y,m.z),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.occlusionTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,b.x-8,b.y-8,16,16,0),t.uniform1i(g.renderType,1),t.disable(t.DEPTH_TEST),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,r.tempTexture),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),T.positionScreen.copy(m),T.customUpdateCallback?T.customUpdateCallback(T):T.updateLensFlares(),t.uniform1i(g.renderType,2),t.enable(t.BLEND),E=0,y=T.lensFlares.length;y>E;E++)S=T.lensFlares[E],S.opacity>.001&&S.scale>.001&&(m.x=S.x,m.y=S.y,m.z=S.z,p=S.size*S.scale/a,d.x=p*c,d.y=p,t.uniform3f(g.screenPosition,m.x,m.y,m.z),t.uniform2f(g.scale,d.x,d.y),t.uniform1f(g.rotation,S.rotation),t.uniform1f(g.opacity,S.opacity),t.uniform3f(g.color,S.color.r,S.color.g,S.color.b),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),n.setTexture(S.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0));t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){function e(e,t){var n=new THREE.DirectionalLight;n.isVirtual=!0,n.onlyShadow=!0,n.castShadow=!0,n.shadowCameraNear=e.shadowCameraNear,n.shadowCameraFar=e.shadowCameraFar,n.shadowCameraLeft=e.shadowCameraLeft,n.shadowCameraRight=e.shadowCameraRight,n.shadowCameraBottom=e.shadowCameraBottom,n.shadowCameraTop=e.shadowCameraTop,n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t],n.shadowMapWidth=e.shadowCascadeWidth[t],n.shadowMapHeight=e.shadowCascadeHeight[t],n.pointsWorld=[],n.pointsFrustum=[];for(var i=n.pointsWorld,r=n.pointsFrustum,s=0;8>s;s++)i[s]=new THREE.Vector3,r[s]=new THREE.Vector3;var a=e.shadowCascadeNearZ[t],o=e.shadowCascadeFarZ[t];return r[0].set(-1,-1,a),r[1].set(1,-1,a),r[2].set(-1,1,a),r[3].set(1,1,a),r[4].set(-1,-1,o),r[5].set(1,-1,o),r[6].set(-1,1,o),r[7].set(1,1,o),n}function t(e,t){var n=e.shadowCascadeArray[t];n.position.copy(e.position),n.target.position.copy(e.target.position),n.lookAt(n.target),n.shadowCameraVisible=e.shadowCameraVisible,n.shadowDarkness=e.shadowDarkness,n.shadowBias=e.shadowCascadeBias[t];var i=e.shadowCascadeNearZ[t],r=e.shadowCascadeFarZ[t],s=n.pointsFrustum;s[0].z=i,s[1].z=i,s[2].z=i,s[3].z=i,s[4].z=r,s[5].z=r,s[6].z=r,s[7].z=r}function n(e,t){var n=t.shadowCamera,i=t.pointsFrustum,r=t.pointsWorld;h.set(1/0,1/0,1/0),p.set(-1/0,-1/0,-1/0);for(var s=0;8>s;s++){var a=r[s];a.copy(i[s]),THREE.ShadowMapPlugin.__projector.unprojectVector(a,e),a.applyMatrix4(n.matrixWorldInverse),a.x<h.x&&(h.x=a.x),a.x>p.x&&(p.x=a.x),a.y<h.y&&(h.y=a.y),a.y>p.y&&(p.y=a.y),a.z<h.z&&(h.z=a.z),a.z>p.z&&(p.z=a.z)}n.left=h.x,n.right=p.x,n.top=p.y,n.bottom=h.y,n.updateProjectionMatrix()}function i(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var r,s,a,o,l,u,c=new THREE.Frustum,f=new THREE.Matrix4,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3;this.init=function(e){r=e.context,s=e;var t=THREE.ShaderLib.depthRGBA,n=THREE.UniformsUtils.clone(t.uniforms);a=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n}),o=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,morphTargets:!0}),l=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,skinning:!0}),u=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n,morphTargets:!0,skinning:!0}),a._shadowPass=!0,o._shadowPass=!0,l._shadowPass=!0,u._shadowPass=!0},this.render=function(e,t){s.shadowMapEnabled&&s.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(h,p){var m,b,g,v,_,E,y,T,S,w,k,x,R,P,O=[],C=0,A=null;for(r.clearColor(1,1,1,1),r.disable(r.BLEND),r.enable(r.CULL_FACE),r.frontFace(r.CCW),s.shadowMapCullFace===THREE.CullFaceFront?r.cullFace(r.FRONT):r.cullFace(r.BACK),s.setDepthTest(!0),m=0,b=h.__lights.length;b>m;m++)if(R=h.__lights[m],R.castShadow)if(R instanceof THREE.DirectionalLight&&R.shadowCascade)for(_=0;R.shadowCascadeCount>_;_++){var M;if(R.shadowCascadeArray[_])M=R.shadowCascadeArray[_];else{M=e(R,_),M.originalCamera=p;var $=new THREE.Gyroscope;$.position=R.shadowCascadeOffset,$.add(M),$.add(M.target),p.add($),R.shadowCascadeArray[_]=M,console.log("Created virtualLight",M)}t(R,_),O[C]=M,C++}else O[C]=R,C++;for(m=0,b=O.length;b>m;m++){if(R=O[m],!R.shadowMap){var H=THREE.LinearFilter;s.shadowMapType===THREE.PCFSoftShadowMap&&(H=THREE.NearestFilter);var D={minFilter:H,magFilter:H,format:THREE.RGBAFormat};R.shadowMap=new THREE.WebGLRenderTarget(R.shadowMapWidth,R.shadowMapHeight,D),R.shadowMapSize=new THREE.Vector2(R.shadowMapWidth,R.shadowMapHeight),R.shadowMatrix=new THREE.Matrix4}if(!R.shadowCamera){if(R instanceof THREE.SpotLight)R.shadowCamera=new THREE.PerspectiveCamera(R.shadowCameraFov,R.shadowMapWidth/R.shadowMapHeight,R.shadowCameraNear,R.shadowCameraFar);else{if(!(R instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}R.shadowCamera=new THREE.OrthographicCamera(R.shadowCameraLeft,R.shadowCameraRight,R.shadowCameraTop,R.shadowCameraBottom,R.shadowCameraNear,R.shadowCameraFar)}h.add(R.shadowCamera),h.autoUpdate===!0&&h.updateMatrixWorld()}for(R.shadowCameraVisible&&!R.cameraHelper&&(R.cameraHelper=new THREE.CameraHelper(R.shadowCamera),R.shadowCamera.add(R.cameraHelper)),R.isVirtual&&M.originalCamera==p&&n(p,R),E=R.shadowMap,y=R.shadowMatrix,T=R.shadowCamera,T.position.getPositionFromMatrix(R.matrixWorld),d.getPositionFromMatrix(R.target.matrixWorld),T.lookAt(d),T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),R.cameraHelper&&(R.cameraHelper.visible=R.shadowCameraVisible),R.shadowCameraVisible&&R.cameraHelper.update(),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(T.projectionMatrix),y.multiply(T.matrixWorldInverse),f.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),c.setFromMatrix(f),s.setRenderTarget(E),s.clear(),P=h.__webglObjects,g=0,v=P.length;v>g;g++)k=P[g],x=k.object,k.render=!1,x.visible&&x.castShadow&&((x instanceof THREE.Mesh||x instanceof THREE.ParticleSystem)&&x.frustumCulled&&!c.intersectsObject(x)||(x._modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,x.matrixWorld),k.render=!0));var N,I,L;for(g=0,v=P.length;v>g;g++)k=P[g],k.render&&(x=k.object,S=k.buffer,N=i(x),I=x.geometry.morphTargets.length>0&&N.morphTargets,L=x instanceof THREE.SkinnedMesh&&N.skinning,w=x.customDepthMaterial?x.customDepthMaterial:L?I?u:l:I?o:a,S instanceof THREE.BufferGeometry?s.renderBufferDirect(T,h.__lights,A,w,S,x):s.renderBuffer(T,h.__lights,A,w,S,x));for(P=h.__webglObjectsImmediate,g=0,v=P.length;v>g;g++)k=P[g],x=k.object,x.visible&&x.castShadow&&(x._modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,x.matrixWorld),s.renderImmediateObject(T,h.__lights,A,a,x))}var z=s.getClearColor(),U=s.getClearAlpha();r.clearColor(z.r,z.g,z.b,U),r.enable(r.BLEND),s.shadowMapCullFace===THREE.CullFaceFront&&r.cullFace(r.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function e(e,t){var i=n.createProgram(),r=n.createShader(n.FRAGMENT_SHADER),s=n.createShader(n.VERTEX_SHADER),a="precision "+t+" float;\n";return n.shaderSource(r,a+e.fragmentShader),n.shaderSource(s,a+e.vertexShader),n.compileShader(r),n.compileShader(s),n.attachShader(i,r),n.attachShader(i,s),n.linkProgram(i),i}function t(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var n,i,r,s={};this.init=function(t){n=t.context,i=t,r=t.getPrecision(),s.vertices=new Float32Array(16),s.faces=new Uint16Array(6);var a=0;s.vertices[a++]=-1,s.vertices[a++]=-1,s.vertices[a++]=0,s.vertices[a++]=0,s.vertices[a++]=1,s.vertices[a++]=-1,s.vertices[a++]=1,s.vertices[a++]=0,s.vertices[a++]=1,s.vertices[a++]=1,s.vertices[a++]=1,s.vertices[a++]=1,s.vertices[a++]=-1,s.vertices[a++]=1,s.vertices[a++]=0,s.vertices[a++]=1,a=0,s.faces[a++]=0,s.faces[a++]=1,s.faces[a++]=2,s.faces[a++]=0,s.faces[a++]=2,s.faces[a++]=3,s.vertexBuffer=n.createBuffer(),s.elementBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,s.vertexBuffer),n.bufferData(n.ARRAY_BUFFER,s.vertices,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.elementBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,s.faces,n.STATIC_DRAW),s.program=e(THREE.ShaderSprite.sprite,r),s.attributes={},s.uniforms={},s.attributes.position=n.getAttribLocation(s.program,"position"),s.attributes.uv=n.getAttribLocation(s.program,"uv"),s.uniforms.uvOffset=n.getUniformLocation(s.program,"uvOffset"),s.uniforms.uvScale=n.getUniformLocation(s.program,"uvScale"),s.uniforms.rotation=n.getUniformLocation(s.program,"rotation"),s.uniforms.scale=n.getUniformLocation(s.program,"scale"),s.uniforms.alignment=n.getUniformLocation(s.program,"alignment"),s.uniforms.color=n.getUniformLocation(s.program,"color"),s.uniforms.map=n.getUniformLocation(s.program,"map"),s.uniforms.opacity=n.getUniformLocation(s.program,"opacity"),s.uniforms.useScreenCoordinates=n.getUniformLocation(s.program,"useScreenCoordinates"),s.uniforms.sizeAttenuation=n.getUniformLocation(s.program,"sizeAttenuation"),s.uniforms.screenPosition=n.getUniformLocation(s.program,"screenPosition"),s.uniforms.modelViewMatrix=n.getUniformLocation(s.program,"modelViewMatrix"),s.uniforms.projectionMatrix=n.getUniformLocation(s.program,"projectionMatrix"),s.uniforms.fogType=n.getUniformLocation(s.program,"fogType"),s.uniforms.fogDensity=n.getUniformLocation(s.program,"fogDensity"),s.uniforms.fogNear=n.getUniformLocation(s.program,"fogNear"),s.uniforms.fogFar=n.getUniformLocation(s.program,"fogFar"),s.uniforms.fogColor=n.getUniformLocation(s.program,"fogColor"),s.uniforms.alphaTest=n.getUniformLocation(s.program,"alphaTest")},this.render=function(e,r,a,o){var l=e.__webglSprites,u=l.length;if(u){var c=s.attributes,f=s.uniforms,h=o/a,p=.5*a,d=.5*o;n.useProgram(s.program),n.enableVertexAttribArray(c.position),n.enableVertexAttribArray(c.uv),n.disable(n.CULL_FACE),n.enable(n.BLEND),n.bindBuffer(n.ARRAY_BUFFER,s.vertexBuffer),n.vertexAttribPointer(c.position,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(c.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.elementBuffer),n.uniformMatrix4fv(f.projectionMatrix,!1,r.projectionMatrix.elements),n.activeTexture(n.TEXTURE0),n.uniform1i(f.map,0);var m=0,b=0,g=e.fog;g?(n.uniform3f(f.fogColor,g.color.r,g.color.g,g.color.b),g instanceof THREE.Fog?(n.uniform1f(f.fogNear,g.near),n.uniform1f(f.fogFar,g.far),n.uniform1i(f.fogType,1),m=1,b=1):g instanceof THREE.FogExp2&&(n.uniform1f(f.fogDensity,g.density),n.uniform1i(f.fogType,2),m=2,b=2)):(n.uniform1i(f.fogType,0),m=0,b=0);var v,_,E,y,T,S=[];for(v=0;u>v;v++)_=l[v],E=_.material,_.visible&&0!==E.opacity&&(E.useScreenCoordinates?_.z=-_.position.z:(_._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,_.matrixWorld),_.z=-_._modelViewMatrix.elements[14]));for(l.sort(t),v=0;u>v;v++)_=l[v],E=_.material,_.visible&&0!==E.opacity&&E.map&&E.map.image&&E.map.image.width&&(n.uniform1f(f.alphaTest,E.alphaTest),E.useScreenCoordinates===!0?(n.uniform1i(f.useScreenCoordinates,1),n.uniform3f(f.screenPosition,(_.position.x*i.devicePixelRatio-p)/p,(d-_.position.y*i.devicePixelRatio)/d,Math.max(0,Math.min(1,_.position.z))),S[0]=i.devicePixelRatio,S[1]=i.devicePixelRatio):(n.uniform1i(f.useScreenCoordinates,0),n.uniform1i(f.sizeAttenuation,E.sizeAttenuation?1:0),n.uniformMatrix4fv(f.modelViewMatrix,!1,_._modelViewMatrix.elements),S[0]=1,S[1]=1),T=e.fog&&E.fog?b:0,m!==T&&(n.uniform1i(f.fogType,T),m=T),y=1/(E.scaleByViewport?o:1),S[0]*=y*h*_.scale.x,S[1]*=y*_.scale.y,n.uniform2f(f.uvScale,E.uvScale.x,E.uvScale.y),n.uniform2f(f.uvOffset,E.uvOffset.x,E.uvOffset.y),n.uniform2f(f.alignment,E.alignment.x,E.alignment.y),n.uniform1f(f.opacity,E.opacity),n.uniform3f(f.color,E.color.r,E.color.g,E.color.b),n.uniform1f(f.rotation,_.rotation),n.uniform2fv(f.scale,S),i.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst),i.setDepthTest(E.depthTest),i.setDepthWrite(E.depthWrite),i.setTexture(E.map,0),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0));n.enable(n.CULL_FACE)}}},THREE.DepthPassPlugin=function(){function e(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}this.enabled=!1,this.renderTarget=null;var t,n,i,r,s,a,o=new THREE.Frustum,l=new THREE.Matrix4;this.init=function(e){t=e.context,n=e;var o=THREE.ShaderLib.depthRGBA,l=THREE.UniformsUtils.clone(o.uniforms);i=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:l}),r=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:l,morphTargets:!0}),s=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:l,skinning:!0}),a=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:l,morphTargets:!0,skinning:!0}),i._shadowPass=!0,r._shadowPass=!0,s._shadowPass=!0,a._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(u,c){var f,h,p,d,m,b,g,v=null;for(t.clearColor(1,1,1,1),t.disable(t.BLEND),n.setDepthTest(!0),u.autoUpdate===!0&&u.updateMatrixWorld(),c.matrixWorldInverse.getInverse(c.matrixWorld),l.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),o.setFromMatrix(l),n.setRenderTarget(this.renderTarget),n.clear(),g=u.__webglObjects,f=0,h=g.length;h>f;f++)m=g[f],b=m.object,m.render=!1,b.visible&&((b instanceof THREE.Mesh||b instanceof THREE.ParticleSystem)&&b.frustumCulled&&!o.intersectsObject(b)||(b._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,b.matrixWorld),m.render=!0));var _,E,y;for(f=0,h=g.length;h>f;f++)if(m=g[f],m.render){if(b=m.object,p=m.buffer,b instanceof THREE.ParticleSystem&&!b.customDepthMaterial)continue;_=e(b),_&&n.setMaterialFaces(b.material),E=b.geometry.morphTargets.length>0&&_.morphTargets,y=b instanceof THREE.SkinnedMesh&&_.skinning,d=b.customDepthMaterial?b.customDepthMaterial:y?E?a:s:E?r:i,p instanceof THREE.BufferGeometry?n.renderBufferDirect(c,u.__lights,v,d,p,b):n.renderBuffer(c,u.__lights,v,d,p,b)}for(g=u.__webglObjectsImmediate,f=0,h=g.length;h>f;f++)m=g[f],b=m.object,b.visible&&(b._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,b.matrixWorld),n.renderImmediateObject(c,u.__lights,v,i,b));var T=n.getClearColor(),S=n.getClearAlpha();t.clearColor(T.r,T.g,T.b,S),t.enable(t.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}},THREE.ShaderSprite={sprite:{vertexShader:["uniform int useScreenCoordinates;","uniform int sizeAttenuation;","uniform vec3 screenPosition;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position + alignment;","vec2 rotatedPosition;","rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;","rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;","vec4 finalPosition;","if( useScreenCoordinates != 0 ) {","finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );","} else {","finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );","}","gl_Position = finalPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")}};var TWEEN=TWEEN||function(){var e=[];return{REVISION:"10",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){t=e.indexOf(t),-1!==t&&e.splice(t,1)},update:function(t){if(0===e.length)return!1;for(var n=0,i=e.length,t=void 0!==t?t:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();i>n;)e[n].update(t)?n++:(e.splice(n,1),i--);return!0}}}();TWEEN.Tween=function(e){var t,n={},i={},r={},s=1e3,a=0,o=0,l=null,u=TWEEN.Easing.Linear.None,c=TWEEN.Interpolation.Linear,f=[],h=null,p=!1,d=null,m=null;for(t in e)n[t]=parseFloat(e[t],10);this.to=function(e,t){return void 0!==t&&(s=t),i=e,this},this.start=function(t){TWEEN.add(this),p=!1,l=void 0!==t?t:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),l+=o;for(var s in i){if(i[s]instanceof Array){if(0===i[s].length)continue;i[s]=[e[s]].concat(i[s])}n[s]=e[s],!1==n[s]instanceof Array&&(n[s]*=1),r[s]=n[s]||0}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(e){return o=e,this},this.repeat=function(e){return a=e,this},this.easing=function(e){return u=e,this},this.interpolation=function(e){return c=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return h=e,this},this.onUpdate=function(e){return d=e,this},this.onComplete=function(e){return m=e,this},this.update=function(t){if(l>t)return!0;!1===p&&(null!==h&&h.call(e),p=!0);var b,g=(t-l)/s,g=g>1?1:g,v=u(g);for(b in i){var _=n[b]||0,E=i[b];E instanceof Array?e[b]=c(E,v):("string"==typeof E&&(E=_+parseFloat(E,10)),e[b]=_+(E-_)*v)}if(null!==d&&d.call(e,v),1==g){if(!(a>0)){for(null!==m&&m.call(e),g=0,v=f.length;v>g;g++)f[g].start(t);return!1}isFinite(a)&&a--;for(b in r)"string"==typeof i[b]&&(r[b]+=parseFloat(i[b],10)),n[b]=r[b];l=t+o}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-.5*n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4):.5*n*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5
}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),s=TWEEN.Interpolation.Utils.Linear;return 0>t?s(e[0],e[1],i):t>1?s(e[n],e[n-1],n-i):s(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){var n,i=0,r=e.length-1,s=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein;for(n=0;r>=n;n++)i+=s(1-t,r-n)*s(t,n)*e[n]*a(r,n);return i},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),s=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>t&&(r=Math.floor(i=n*(1+t))),s(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):0>t?e[0]-(s(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(s(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):s(e[r?r-1:0],e[r],e[r+1>n?n:r+1],e[r+2>n?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n,i=1;if(e[t])return e[t];for(n=t;n>1;n--)i*=n;return e[t]=i}}(),CatmullRom:function(e,t,n,i,r){var e=.5*(n-e),i=.5*(i-t),s=r*r;return(2*t-2*n+e+i)*r*s+(-3*t+3*n-2*e-i)*s+e*r+t}}},function(e,t,n,i,r,s,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,s=t.createElement(n),a=t.getElementsByTagName(n)[0],s.async=1,s.src=i,a.parentNode.insertBefore(s,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,r=0,s=0,a=1/0,o=0,l=0,u=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),v(++u%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(f);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",f.appendChild(h);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(p);74>p.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(d)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var b=document.createElement("div");b.id="msText",b.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",b.innerHTML="MS",m.appendChild(b);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(d)}var v=function(e){switch(u=e){case 0:f.style.display="block",m.style.display="none";break;case 1:f.style.display="none",m.style.display="block"}},_=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:11,domElement:c,setMode:v,begin:function(){e=Date.now()},end:function(){var u=Date.now();return n=u-e,i=Math.min(i,n),r=Math.max(r,n),b.textContent=n+" MS ("+i+"-"+r+")",_(g,Math.min(30,30-30*(n/200))),l++,u>t+1e3&&(s=Math.round(1e3*l/(u-t)),a=Math.min(a,s),o=Math.max(o,s),h.textContent=s+" FPS ("+a+"-"+o+")",_(p,Math.min(30,30-30*(s/100))),t=u,l=0),u},update:function(){e=this.end()}}};(function(){angular.module("app",["async","jed","jquery","underscore"]).run(["$rootScope","$location","GitHub","cookie","i18n",function(e,t,n,i,r){var s,a,o;return s="github-application-client-id",o="github-token",a="github-login",e.i18n=r,e.breadcrumbStrategy={progressive:!1},e.clientId=function(){return i.getItem(s)},e.log=function(e){return console.log(e)},e.alert=function(e){return alert(e)},e.isLoggedIn=function(){return i.hasItem(o)},e.loginEnabled=function(){return!i.hasItem(o)},e.logout=function(){return i.removeItem(o),i.removeItem(a)},e.userLogin=function(){return i.getItem(a)}}])}).call(this),function(){angular.module("app").controller("BrowseCtrl",["$scope","$window","$location",function(){var e;return e="browse",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/browse"),ga("send","pageview")}])}.call(this),function(){angular.module("app").controller("HomeCtrl",["$rootScope","$scope","$http","$location","$window","GitHub","cookie",function(e,t,n,i,r,s,a){var o,l,u,c,f,h;return o="home",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/home"),ga("send","pageview"),l=""+i.protocol()+"://"+i.host()+":"+i.port(),c="github-token",u="github-login",h=r.location.href.match(/\?code=([a-z0-9]*)/),h&&(i.search({}),f=h[1],n.get(""+l+"/authenticate/"+f).success(function(e){var t;t=e.token,a.setItem(c,t),s.getUser(t,function(e,t){e?alert("Error retrieving your user login!"):a.setItem(u,t.login)})}).error(function(){alert("Something is rotten in Denmark.")})),h=r.location.href.match(/\?error=access_denied/),h&&i.search({}),t.work=function(){ga("send","event",o,"work"),i.path("/work")},t.browse=function(){ga("send","event",o,"browse"),i.path("/browse")},t.user=function(){var e;ga("send","event",o,"user"),e="/users/"+t.userLogin(),i.path(e)}}])}.call(this),function(){angular.module("app").controller("NewFileCtrl",["$scope","GitHub","Base64","cookie","$","_","$async",function(e,t,n,i,r,s){var a,o,l;return a="new-file",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/new-file"),ga("send","pageview"),o="github-token",l=i.getItem(o),r("#new-file-dialog").on("show",function(){return e.file={name:"",message:""}}),r("#new-file-dialog").on("shown",function(){}),r("#new-file-dialog").on("hide",function(){}),r("#new-file-dialog").on("hidden",function(){}),e.createFile=function(){var i,o;return ga("send","event",a,"createFile"),i=n.encode("# "+e.file.name+"\n"),o=e.path?""+e.path+"/"+e.file.name:e.file.name,t.putFile(l,e.user.login,e.repo.name,o,e.file.message,i,void 0,function(t,n){var i;return t?(i=s.map(n.errors,function(e){return e.message}).join(),alert(i)):(e.$emit("createdFile",e.user,e.repo,n.content,n.commit),r("#new-file-dialog").modal("hide"))})}}])}.call(this),function(){angular.module("app").controller("NewRepoCtrl",["$scope","GitHub","cookie","$","_","$async",function(e,t,n,i,r){var s,a,o;return s="new-repo",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/new-repo"),ga("send","pageview"),a="github-token",o=n.getItem(a),i("#new-repo-dialog").on("show",function(){return e.repo={path:"",description:"","private":"false",markdownReadme:!0,pythonReadme:!0}}),i("#new-repo-dialog").on("shown",function(){}),i("#new-repo-dialog").on("hide",function(){}),i("#new-repo-dialog").on("hidden",function(){}),e.createRepo=function(){return ga("send","event",s,"createRepo"),t.postRepo(o,e.repo.name,e.repo.description,!1,e.repo.markdownReadme,function(t,n){var s;return t?(s=r.map(response.errors,function(e){return e.message}).join(),alert(s)):(console.log("repo: "+JSON.stringify(n,null,2)),e.$emit("createdRepo",e.user,n),i("#new-repo-dialog").modal("hide"))})}}])}.call(this),function(){angular.module("app").controller("PrinterCtrl",["$scope","GitHub","cookie","$","_","$async",function(e){var t,n,i;return t="printer",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/printer"),ga("send","pageview"),n="a5f435e0-c92e-11e2-8b8b-0800200c9a66",i=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},e.$on("reset",function(){var e;return e=document.getElementById(n),e?e.innerHTML="":console.log("Unable to find element with Id "+n)}),e.$on("print",function(e,t){var r;return r=document.getElementById(n),r?r.innerHTML=r.innerHTML+i(t):console.log("Unable to find element with Id "+n)})}])}.call(this),function(){angular.module("app").controller("TreeCtrl",["$rootScope","$scope","$window","$routeParams","$","_","GitHub","Base64","cookie",function(e,t,n,i,r,s,a,o,l){var u,c,f,h,p,d;if(u="tree",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/tree"),ga("send","pageview"),c="github-token",p=l.getItem(c),t.messages=[],r(".carousel").carousel({interval:!1}),t.contextItem={},i.user&&i.repo){for(t.user={login:i.user},t.repo={name:i.repo},t.branch={name:i.branch},h=[],f=d=0;6>=d;f=++d)i["step"+f]&&h.push(i["step"+f]);t.path=h.join("/"),t.contextItem.name=t.repo.name,t.contextItem.type="repo",a.getPathContents(p,t.user.login,t.repo.name,t.path,function(e,n){return e?alert(""+e.message+". Cause: "+n.message+"."):t.contextItem.childItems=n})}else t.contextItem.name="",t.contextItem.type=void 0;t.isNewFileEnabled=function(){return t.isLoggedIn()&&t.userLogin()===t.user.login},t.newFile=function(){return t.isNewFileEnabled()?r("#new-file-dialog").modal({show:!0,backdrop:!0}):alert("Create a New File is not enabled.")},t.$on("createdFile",function(e,n,i,r){return t.contextItem.childItems.push(r)}),t.isDeleteItemEnabled=function(){return t.isLoggedIn()&&t.userLogin()===t.user.login},t.deleteItem=function(e){var n;return ga("send","event",u,"deleteItem"),n=t.contextItem.childItems[e],a.deleteFile(p,t.user.login,t.repo.name,n.path,"Delete item.",n.sha,function(n){return n?alert("Error deleting item: "+n):t.contextItem.childItems.splice(e,1)})},t.homeBreadcrumbClass=function(){return e.breadcrumbStrategy.progressive?"active":""},t.userBreadcrumbClass=function(){return e.breadcrumbStrategy.progressive?"active":""},t.repoBreadcrumbClass=function(){return"active"},t.hrefFromItem=function(e){var n;return n="file"===e.type?"blob":"dir"===e.type?"tree":"unknown","/users/"+t.user.login+"/repos/"+t.repo.name+"/"+n+"/"+t.branch.name+"/"+e.path},t.iconFromItem=function(e){switch(e.type){case"file":return"icon-file";case"dir":return"icon-dir";default:return"icon-question"}}}])}.call(this),function(){angular.module("app").controller("UserCtrl",["$rootScope","$scope","GitHub","cookie","$","_","$async",function(e,t,n,i,r,s,a){var o,l,u;return o="user",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/user"),ga("send","pageview"),l="github-token",u=i.getItem(l),a.parallel([function(e){return n.getUser(u,function(n,i){return n?alert("Error retrieving user profile"):t.user=i,e(n,i)})},function(e){return n.getUserRepos(u,function(n,i){return n?alert("Error retrieving user repositories"):t.repos=s.filter(i,function(e){return"Python"===e.language}),e(n,i)})}],function(){}),t.homeBreadcrumbClass=function(){return e.breadcrumbStrategy.progressive?"active distance-1":""},t.userBreadcrumbClass=function(){return e.breadcrumbStrategy.progressive?"active distance-0":"active distance-0"},t.newRepo=function(){return r("#new-repo-dialog").modal({show:!0,backdrop:!0})},t.$on("createdRepo",function(e,n,i){return t.repos.push(i)})}])}.call(this),function(){angular.module("app").controller("WorkCtrl",["$rootScope","$scope","$window","$routeParams","$","_","GitHub","Base64","cookie",function($rootScope,$scope,$window,$routeParams,$,_,github,base64,cookie){var EVENT_CATEGORY,GITHUB_TOKEN_COOKIE_NAME,code,editor,isFullScreen,n,setFullScreen,steps,token,winHeight,winWidth,_i;if(EVENT_CATEGORY="work",ga("create","UA-41504069-1","geometryzen.org"),ga("set","page","/work"),ga("send","pageview"),GITHUB_TOKEN_COOKIE_NAME="github-token",token=cookie.getItem(GITHUB_TOKEN_COOKIE_NAME),$scope.messages=[],$(".carousel").carousel({interval:!1}),$scope.contextItem={},$routeParams.user&&$routeParams.repo){for($scope.user={login:$routeParams.user},$scope.repo={name:$routeParams.repo},$scope.branch={name:$routeParams.branch},steps=[],n=_i=0;6>=_i;n=++_i)$routeParams["step"+n]&&steps.push($routeParams["step"+n]);$scope.path=steps.join("/"),$scope.contextItem.name=$routeParams.repo,$scope.contextItem.type="repo",github.getPathContents(token,$scope.user.login,$scope.repo.name,$scope.path,function(e,t){var n;return e?alert("Error retrieving the page"):(n={name:t.name,path:t.path,sha:t.sha,type:t.type,parentItem:$scope.contextItem,childItems:[]},$scope.contextItem=n,"base64"===t.encoding?editor.setValue(base64.decode(t.content)):alert("Unknown encoding: "+t.encoding))})}else $scope.contextItem.name="",$scope.contextItem.type=void 0;winHeight=function(){return $window.innerHeight||($window.document.documentElement||$window.document.body).clientHeight},winWidth=function(){return $window.innerWidth||($window.document.documentElement||$window.document.body).clientWidth},isFullScreen=function(e){return/\bCodeMirror-fullscreen\b/.test(e.getWrapperElement().className)},setFullScreen=function(e,t){var n;return n=e.getWrapperElement(),t?(n.className+=" CodeMirror-fullscreen",n.style.height=winHeight()+"px",document.documentElement.style.overflow="hidden"):(n.className=n.className.replace(" CodeMirror-fullscreen",""),n.style.height="800px",document.documentElement.style.overflow=""),e.refresh()},code=document.getElementById("code"),code?editor=CodeMirror.fromTextArea(code,{autofocus:!1,indentUnit:4,lineNumbers:!0,lineWrapping:!0,autoMatchParens:!0,parserConfig:{pythonVersion:2,strictErrors:!0},theme:"twilight",extraKeys:{Tab:function(e){var t;return t=Array(e.getOption("indentUnit")+1).join(" "),e.replaceSelection(t,"end","+input")},"Ctrl-S":function(){return $scope.saveFile()},"Ctrl-Enter":function(){return $scope.run()}}}):alert("The code element could not be found"),$scope.run=function(){var e,message,name,prog,text;if(ga("send","event",EVENT_CATEGORY,"run"),$rootScope.$broadcast("reset"),$scope.messages.length=0,prog=editor.getValue(),Sk.canvas="canvas",Sk.configure({output:function(e){return $rootScope.$broadcast("print",e)},read:function(e){if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[e])throw Error("File not found: '"+e+"'");return Sk.builtinFiles.files[e]}}),prog.trim().length>0)try{return eval(Sk.importMainWithBody("<stdin>",!1,prog.trim()))}catch(_error){return e=_error,message=""+e,name=message.substring(0,message.indexOf(":")),text=message.substring(message.indexOf(":")+1),$scope.messages.push({name:name,text:text,severity:"error"})}},$scope.saveFile=function(){var e;return ga("send","event",EVENT_CATEGORY,"savePage"),e=base64.encode(editor.getValue()),github.putFile(token,$scope.user.login,$scope.repo.name,$scope.contextItem.path,"Save file.",e,$scope.contextItem.sha,function(e,t){return e?alert("Error saving file to repository. Cause: "+e.message):$scope.contextItem.sha=t.content.sha})},$scope.homeBreadcrumbClass=function(){return $rootScope.breadcrumbStrategy.progressive?"active":""},$scope.userBreadcrumbClass=function(){return $rootScope.breadcrumbStrategy.progressive?"active":""},$scope.repoBreadcrumbClass=function(){return $rootScope.breadcrumbStrategy.progressive?"active":$scope.workEnabled()?"":"active"},$scope.repoEnabled=function(){return $scope.repo&&$scope.repo.name},$scope.workEnabled=function(){return $scope.contextItem&&"file"===$scope.contextItem.type||!($scope.repo&&$scope.repo.name)},$scope.saveEnabled=function(){return $scope.isLoggedIn()&&$scope.userLogin()===$scope.user.login&&$scope.contextItem&&"file"===$scope.contextItem.type},$scope.runEnabled=function(){return $scope.workEnabled()},$scope.iconFromItem=function(e){switch(e.type){case"file":return"icon-file";case"dir":return"icon-dir";default:return"icon-question"}},editor&&setFullScreen(editor,!1),CodeMirror.on($window,"resize",function(){var e;return e=$window.document.body.getElementsByClassName("CodeMirror-fullscreen")[0],e?e.CodeMirror.getWrapperElement().style.height=winHeight()+"px":void 0})}])}.call(this),function(){angular.module("app").directive("aBrand",function(){return{restrict:"E",replace:!0,templateUrl:"angular/a-brand.html"}})}.call(this),function(){angular.module("app").directive("aHome",function(){return{restrict:"E",replace:!0,templateUrl:"angular/a-home.html"}})}.call(this),function(){angular.module("app").directive("formSearch",function(){return{restrict:"E",templateUrl:"angular/form-search.html"}})}.call(this),function(){angular.module("app").directive("githubAuthorize",function(){return{restrict:"E",replace:!0,templateUrl:"angular/github-authorize.html"}})}.call(this),function(){angular.module("app").directive("printer",function(){return{restrict:"E",templateUrl:"angular/printer.html"}})}.call(this),function(){angular.module("app").directive("titleMarketing",function(){return{restrict:"E",replace:!0,templateUrl:"angular/title-marketing.html"}})}.call(this),function(){angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){return e.when("/",{templateUrl:"angular/home.html",controller:"HomeCtrl"}),e.when("/users/:user/repos/:repo/blob/:branch/:step0/:step1/:step2",{templateUrl:"angular/work.html",controller:"WorkCtrl"}),e.when("/users/:user/repos/:repo/blob/:branch/:step0/:step1",{templateUrl:"angular/work.html",controller:"WorkCtrl"}),e.when("/users/:user/repos/:repo/blob/:branch/:step0",{templateUrl:"angular/work.html",controller:"WorkCtrl"}),e.when("/users/:user/repos/:repo/tree/:branch/:step0/:step1",{templateUrl:"angular/tree.html",controller:"TreeCtrl"}),e.when("/users/:user/repos/:repo/tree/:branch/:step0",{templateUrl:"angular/tree.html",controller:"TreeCtrl"}),e.when("/users/:user/repos/:repo/tree/:branch",{templateUrl:"angular/tree.html",controller:"TreeCtrl"}),e.when("/users/:user",{templateUrl:"angular/user.html",controller:"UserCtrl"}),e.when("/work",{templateUrl:"angular/work.html",controller:"WorkCtrl"}),e.otherwise({redirectTo:"/"}),t.html5Mode(!0)}])}.call(this),function(){var e,t,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=function(e){var t,n,i,r,s,a;for(a="",s=0,t=n=i=0;e.length>s;)t=e.charCodeAt(s),128>t?(a+=String.fromCharCode(t),s++):t>191&&224>t?(i=e.charCodeAt(s+1),a+=String.fromCharCode((31&t)<<6|63&i),s+=2):(i=e.charCodeAt(s+1),r=e.charCodeAt(s+2),a+=String.fromCharCode((15&t)<<12|(63&i)<<6|63&r),s+=3);return a},n=function(e){var t,n,i,r,s;for(e=e.replace(/\r\n/g,"\n"),i="",n=r=0,s=e.length-1;s>=0?s>=r:r>=s;n=s>=0?++r:--r)t=e.charCodeAt(n),128>t?i+=String.fromCharCode(t):t>127&&2048>t?(i+=String.fromCharCode(192|t>>6),i+=String.fromCharCode(128|63&t)):(i+=String.fromCharCode(224|t>>12),i+=String.fromCharCode(128|63&t>>6),i+=String.fromCharCode(128|63&t));return i},angular.module("app").factory("Base64",["$window",function(){return{decode:function(n){var i,r,s,a,o,l,u,c,f;for(f="",c=0,n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");n.length>c;)a=e.indexOf(n.charAt(c++)),o=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),i=a<<2|o>>4,r=(15&o)<<4|l>>2,s=(3&l)<<6|u,f+=String.fromCharCode(i),64!==l&&(f+=String.fromCharCode(r)),64!==u&&(f+=String.fromCharCode(s));return f=t(f)},encode:function(t){var i,r,s,a,o,l,u,c,f;for(f="",c=0,t=n(t);t.length>c;)i=t.charCodeAt(c++),r=t.charCodeAt(c++),s=t.charCodeAt(c++),a=i>>2,o=(3&i)<<4|r>>4,l=(15&r)<<2|s>>6,u=63&s,isNaN(r)?l=u=64:isNaN(s)&&(u=64),f=f+e.charAt(a)+e.charAt(o)+e.charAt(l)+e.charAt(u);return f}}}])}.call(this),function(){angular.module("app").factory("GitHub",["$http",function(e){var t,n,i,r,s,a,o,l;return n="https",t="api.github.com",i="DELETE",r="GET",s="POST",a="PUT",l=function(){function e(e,t){this.name=e,this.login=t}return e}(),o=function(){function e(e,t,n,i){this.name=e,this.description=t,this.language=n,this.github_html_url=i}return e}(),{getUser:function(i,s){var a;return a=i?{Authorization:"token "+i}:{},e({method:r,url:""+n+"://"+t+"/user",headers:a}).success(function(e,t,n,i){return s(null,new l(e.name,e.login),t,n,i)}).error(function(e,t,n,i){return s(Error(e.message),e,t,n,i)})},getUserRepos:function(i,s){var a;return a=i?{Authorization:"token "+i}:{},e({method:r,url:""+n+"://"+t+"/user/repos",headers:a}).success(function(e,t,n,i){return e=_.map(e,function(e){return new o(e.name,e.description,e.language,e.html_url)}),s(null,e,t,n,i)}).error(function(e,t,n,i){return s(Error(e.message),e,t,n,i)})},getRepoContents:function(i,s,a,o){var l;return l=""+n+"://"+t+"/repos/"+s+"/"+a+"/contents",e({method:r,url:l,headers:{Authorization:"token "+i}}).success(function(e,t,n,i){return o(null,e,t,n,i)}).error(function(e,t,n,i){return o(Error(e.message),e,t,n,i)})},getPathContents:function(i,s,a,o,l){var u,c;return c=""+n+"://"+t+"/repos/"+s+"/"+a+"/contents",o&&(c=""+c+"/"+o),u=i?{Authorization:"token "+i}:{},e({method:r,url:c,headers:u}).success(function(e,t,n,i){return l(null,e,t,n,i)}).error(function(e,t,n,i){return l(Error(e.message),e,t,n,i)})},putFile:function(i,r,s,o,l,u,c,f){var h,p,d;return d=""+n+"://"+t+"/repos/"+r+"/"+s+"/contents/"+o,h={message:l,content:u},c&&(h.sha=c),p=i?{Authorization:"token "+i}:{},e({method:a,url:d,data:h,headers:p}).success(function(e,t,n,i){return f(null,e,t,n,i)}).error(function(e,t,n,i){return f(Error(e.message),e,t,n,i)})},deleteFile:function(r,s,a,o,l,u,c){var f,h;return h=""+n+"://"+t+"/repos/"+s+"/"+a+"/contents/"+o,f={message:l,sha:u},e({method:i,url:h,data:f,headers:{Authorization:"token "+r}}).success(function(e,t,n,i){return c(null,e,t,n,i)}).error(function(e,t,n,i){return c(Error(e.message),e,t,n,i)})},postRepo:function(i,r,a,o,l,u){var c,f,h;return h=""+n+"://"+t+"/user/repos",c={name:r,description:a,"private":o,auto_init:l},f=i?{Authorization:"token "+i}:{},e({method:s,url:h,data:c,headers:f}).success(function(e,t,n,i){return u(null,e,t,n,i)}).error(function(e,t,n,i){return u(Error(e.message),e,t,n,i)})}}}])}.call(this),function(){angular.module("async",[]).factory("$async",["$window",function(e){return e.async}])}.call(this),function(){angular.module("app").factory("cookie",[function(){return{getItem:function(e){var t;return t=escape(e).replace(/[\-\.\+\*]/g,"\\$&"),unescape(document.cookie.replace(RegExp("(?:(?:^|.*;)\\s*"+t+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,i,r,s){var a,o;if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))throw Error("Illegal name");if(n)switch(n.constructor){case Number:o=1/0===n?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toGMTString();break;default:o=""}else o="";r=r?"; domain="+r:"",i=i?"; path="+i:"",s=s?"; secure":"",a=""+escape(e)+"="+escape(t)+o+r+i+s,document.cookie=a},removeItem:function(e,t){return e&&this.hasItem(e)?this.setItem(e,"",new Date(0),t):!1},hasItem:function(e){return RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}}}])}.call(this),function(){var e;e={messages_3:{"":{domain:"messages_3",lang:"en","plural-forms":"nplurals=2; plural=(n != 1);"},test:[null,"test_1"],"test singular":["test plural","test_1 singular","test_1 plural"],"contexttest":[null,"test_1 context"],"contexttest singular":["test context plural","test_1 context singular","test_1 context plural"]},messages_4:{"":{domain:"messages_4",lang:"en","plural-forms":"nplurals=2; plural=(n != 1);"},test:[null,"test_2"],"test singular":["test plural","test_2 singular","test_2 plural"],"contexttest":[null,"test_2 context"],"contexttest singular":["test context plural","test_2 context singular","test_2 context plural"]}},angular.module("jed",[]).factory("i18n",["$window",function(e){return new e.Jed({domain:"the_domain",missing_key_callback:function(e){return console.log(e)},locale_data:{the_domain:{"":{domain:"the_domain",lang:"en","plural-forms":"nplurals=2; plural=(n != 1);"},"Create a New Repo":[null,"Create a New Project"],"Create repo":[null,"Create project"],Repo:[null,"Project","Projects"],"Repo name":[null,"Project name"],"My Repo":[null,"My Project","My Projects"],"Great repo names are short and memorable.":[null,"Great project names are short and memorable."],"Initialize this repo with a README.md":[null,"Initialize this project with a README.md"],"This will allow you to clone the repo immediately in GitHub.":[null,"This will allow you to clone the project immediately in GitHub."],"Create a New File":[null,"Create a New File"],"Create file":[null,"Create file"],File:[null,"File","Files"],"File name":[null,"File name"],"My Space":[null,"My Universe"],"icon-repo":[null,"icon-briefcase"],"icon-dir":[null,"icon-book"],"icon-file":[null,"icon-file-alt"],"icon-question":[null,"icon-question"]}}})}])}.call(this),function(){angular.module("jquery",[]).factory("$",["$window",function(e){return e.$}])}.call(this),function(){angular.module("underscore",[]).factory("_",["$window",function(e){return e._}])}.call(this),angular.module("app").run(["$templateCache",function(e){e.put("angular/a-brand.html",'<a class="brand" href="/">\n  <span class="brandname">{{marketing.name}} <sup class="version">{{marketing.version}} {{npm.version}}</sup></span>\n</a>\n'),e.put("angular/a-home.html",'<a href="/">\n  <i class="icon-home"></i>\n  <span>Home</span>\n</a>\n'),e.put("angular/browse.html",'<div id="browse">\n  <header>\n    <div class="navbar navbar-inverse navbar-fixed-top">\n      <nav class="navbar-inner">\n        <div class="container">\n          <a-brand></a-brand>\n          <ul class="nav pull-left">\n            <li class="divider-vertical"></li>\n          </ul>\n          <ul class="nav pull-right">\n            <li class="divider-vertical"></li>\n            <li>\n              <form-search></form-search>\n            </li>\n            <li class="divider-vertical"></li>\n            <li>\n              <github-authorize></github-authorize>\n            </li>\n          </ul>\n        </div>\n      </nav>\n    </div>\n  </header>\n</div>\n'),e.put("angular/form-search.html",'<form class="navbar-search pull-right ng-pristine ng-valid" method="GET" action="https://www.google.com/search">\n  <input type="text" name="as_q" class="search-query" placeholder="Search">\n  <input type="hidden" name="as_sitesearch" value="geometryzen.org">\n</form>\n'),e.put("angular/github-authorize.html",'<li>\n  <!-- When logged out, present the user with an OAuth link-->\n  <a ng-hide="isLoggedIn()" ng-href="https://github.com/login/oauth/authorize?client_id={{clientId()}}&amp;scope=repo,user,gist">\n    <i class="icon-signin"></i>\n    <span>Log In</span>\n  </a>\n\n  <!-- TODO: When logged in, we would like to have a dropdown menu-->\n  <a ng-show="isLoggedIn()" ng-click="logout()" href="#">\n    <i class="icon-signout icon-white"></i>\n    <span>{{userLogin()}}</span>\n  </a>\n</li>\n'),e.put("angular/home.html",'<div id="home-view">\n  <div class="subnavbar">\n    <div class="subnavbar-inner">\n      <div class="container">\n        <a class="btn-subnavbar collapsed" data-toggle="collapse" data-target=".subnav-collapse">\n          <i class="icon-reorder"></i>\n        </a>\n        <div class="subnav-collapse collapse">\n          <ul class="mainnav">\n            <li class="active">\n              <a-home></a-home>\n            </li>\n            <li ng-show="isLoggedIn()">\n              <a ng-href="/users/{{userLogin()}}">\n                <i class="icon-user"></i>\n                <span>{{i18n.translate("My Space").fetch()}}</span>\n              </a>\n            </li>\n            <li class="dropdown">\n              <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">\n                <i class="icon-eye-open"></i>\n                <span>Learn</span>\n                <b class="caret"></b>\n              </a>\n              <ul class="dropdown-menu">\n                <!--li><a href="http://www.youtube.com/user/geometryzen">Watch</a></li-->\n                <li><a href="/users/geometryzen/repos/demos/tree/master">Browse Examples</a></li>\n              </ul>\n            </li>\n            <li class="dropdown">\n              <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">\n                <i class="icon-external-link"></i>\n                <span>Discuss</span>\n                <b class="caret"></b>\n              </a>\n              <ul class="dropdown-menu">\n                <li><a href="http://groups.google.com/group/geometryzen?src=email&amp;hl=en" target="_blank">Mailing List</a></li>\n                <li><a href="http://webchat.freenode.net/?channels=geometryzen&amp;uio=d4" target="_blank">Web Chat</a></li>\n                <li class="divider"></li>\n                <li><a href="https://twitter.com/#!/geometryzen" target="_blank">Twitter</a></li>\n                <li><a href="https://plus.google.com/u/0/s/Geometry%20Zen/communities" target="_blank">Google+</a></li>\n                <li class="divider"></li>\n                <li class="dropdown-submenu">\n                  <a href="#">Source Code</a>\n                  <ul class="dropdown-menu">\n                    <li><a href="https://github.com/david-geo-holmes/geometry-zen" target="_blank">Application Repository</a></li>\n                    <li><a href="https://github.com/geometryzen/geometryzen.github.io" target="_blank">Documentation Repository</a></li>\n                  </ul>\n                </li>\n                <li class="divider"></li>\n                <li><a href="https://github.com/geometryzen/geometryzen/issues" target="_blank">Issue Tracker</a></li>\n              </ul>\n            </li>\n            <li>\n              <a href="http://geometryzen.github.io/faq/" target="_blank" style="text-decoration: none">\n                <i class="icon-question-sign"></i>\n                <span>FAQ</span>\n              </a>\n            </li>\n            <li>\n              <a href="http://geometryzen.github.io/" target="_blank" style="text-decoration: none">\n                <i class="icon-book"></i>\n                <span>Manual</span>\n              </a>\n            </li>\n          </ul>\n          <ul class="mainnav pull-right">\n            <github-authorize></github-authorize>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="container-fluid">\n    <div class="row-fluid">\n      <div class="span8">\n        <div class="widget">\n          <div class="widget-header">\n            <i class="icon-cogs"></i>\n            <h3>Geometry Zen</h3>\n          </div>\n          <div class="widget-content">\n            <div class="text-center">\n              <h1>\n                <large>Geometry Zen</large>\n              </h1>\n              <h1>\n                <small><em>Looking at the multiverse from a Geometric Algebra perspective</em></small>\n              </h1>\n              <br/>\n              <p><em>Geometry Zen</em> is a free, online, open-source, and collaborative tool for <em>Computational Modeling</em> combining the <em>Python</em> programming language, <em>WebGL</em> 3D visualization and <em>Geometric Algebra</em>.</p>\n              <br/>\n            </div>\n            <div class="text-right">\n              <blockquote>\n                <p class="muted">...for geometry, you know, is the gate of science,<br/>and the gate is so low and small<br/>that one can only enter it as a little child.</p>\n                <small>\n                  <a href="http://en.wikipedia.org/wiki/William_Kingdon_Clifford" target="_blank">William K. Clifford</a> <cite title="Source Title"></cite>\n                </small>\n              </blockquote>\n              <blockquote>\n                <p class="muted">Geometry without algebra is dumb!<br/>Algebra without geometry is blind!</p>\n                <small><a href="http://en.wikipedia.org/wiki/David_Hestenes" target="_blank">David O. Hestenes</a> <cite title="Source Title"></cite>\n                </small>\n              </blockquote>\n            </div>\n            <div class="text-center">\n              <a href="/users/geometryzen/repos/demos/tree/master" class="btn btn-secondary">\n                <i class="icon-th"></i>\n                <span>Browse Examples</span>\n              </a>\n              <a href="http://geometryzen.github.io/start/" class="btn btn-primary" target="_blank">\n                <i class="icon-thumbs-up"></i> Start Me Up!\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="span4">\n        <div class="widget widget-nopad stacked">\n          <div class="widget-header">\n            <i class="icon-road"></i>\n            <h3>Road Map</h3>\n          </div>\n          <div class="widget-content">\n          <ul class="news-items">\n            <li>\n              <div class="news-item-detail">\n                <a href="https://github.com/geometryzen/geometryzen/issues/3" target="_blank" class="news-item-title">GitHub Gists</a>\n                <p class="news-item-preview">While it is possible to create your own permanent GitHub repository of Geometry Zen examples, these represent independent programs without supporting context such as descriptions or theory. The user should be able to create self-contained tutorials or lessons. A more appropriate packaging might be a GitHub Gist, which is a repository containing a single project with potentially many files.</p>\n              </div>\n              <div class="news-item-date">\n                <span class="news-item-day">26</span>\n                <span class="news-item-month">Jul</span>\n              </div>\n            </li>\n            <li>\n              <div class="news-item-detail">\n                <a href="https://github.com/geometryzen/geometryzen/issues" target="_blank" class="news-item-title">What would you like to see?</a>\n                <p class="news-item-preview">Let us know your enhancement requests, bug reports, or simply ask questions using the Geometry Zen <a href="https://github.com/geometryzen/geometryzen/issues" target="_blank">Issue Tracker</a></p>\n              </div>\n              <div class="news-item-date">\n                <span class="news-item-day">26</span>\n                <span class="news-item-month">Jul</span>\n              </div>\n            </li>\n          </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row-fluid">\n      <div class="span6">\n        <div class="widget stacked">\n          <div class="widget-header">\n            <i class="icon-bullhorn"></i>\n            <h3>Tell me More!</h3>\n          </div>\n          <div class="widget-content">\n            <div id="introCarousel" class="carousel slide" data-interval="false">\n              <ol class="carousel-indicators">\n                <li data-target="#introCarousel" data-slide-to="0" class="active"></li>\n                <li data-target="#introCarousel" data-slide-to="1"></li>\n                <li data-target="#introCarousel" data-slide-to="2"></li>\n                <li data-target="#introCarousel" data-slide-to="3"></li>\n                <li data-target="#introCarousel" data-slide-to="4"></li>\n                <li data-target="#introCarousel" data-slide-to="5"></li>\n                <li data-target="#introCarousel" data-slide-to="6"></li>\n              </ol>\n              <!-- Carousel items -->\n              <div class="carousel-inner">\n\n                <div class="active item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>How does Geometry Zen work?</h4>\n                    <p>Students, researchers and educators construct a concise mathematical model of the system of interest using the Python programming language. They then get to experience their model through a WebGL 3D Visualization along with keyboard, mouse and touch interaction. Geometry Zen provides native tools for Multivectors (Geometric Numbers that generalize vectors and scalars), Dimensionality checking (Mass, Length, Time), automated Units of Measure conversion, and Coordinate systems.</p>\n                    <h5 class="muted">[1 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>Will it do what I want?</h4>\n                    <p>The Geometry Zen programming environment is completely general (there is full access to the browser window and document object model), allowing for the construction of arbitrarly complex demonstrations, problem sets, simulations, and even games. Models may be exchanged through private and public repositories allowing for collaborative development of learning materials and problem solving.</p>\n                    <h5 class="muted">[2 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>Will it cost me anything?</h4>\n                    <p>Geometry Zen is 100% free to use and is Open Source Software. Grants and donations are used to further develop and maintain the software through student workshops.</p>\n                    <h5 class="muted">[3 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>What do I need to get started?</h4>\n                    <p>Geometry Zen requires no software installation other than a WebGL compliant web browser. <a href="https://www.google.com/chrome" target="_blank">The Google Chrome browser</a> is strongly recommended. Geometry Zen is certified for use on a Personal Computer (Linux, Mac or Windows) and we are working out the kinks to have it run on Android and iOS tablets.</p>\n                    <h5 class="muted">[4 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>How do I get started?</h4>\n                    <p>Take a look at some of the examples in the tutorials and try them in the Modeling Workbench. You\'ll soon want to Log In and create yourself a GitHub account (if you don\'t have one already), that way you will be able to save your work and share it with others. GitHub provides a host of other useful features for storing content; it\'s what all the cool kids are using to manage content and code.</p>\n                    <h5 class="muted">[5 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>What if I have more questions?</h4>\n                    <p>The frequently asked questions page is probably you best next stop. There\'s also the Geometry Zen <em>pages</em> and the online Geometry Zen community.</p>\n                    <h5 class="muted">[6 of 7]</h5>\n                  </div>\n                </div>\n\n                <div class="item">\n                  <img src="img/stand-back.jpg" width="1920" height="1200" alt>\n                  <div class="carousel-caption">\n                    <h4>What if want to contribute or get involved?</h4>\n                    <p>You can donate, <a href="https://github.com/david-geo-holmes/geometry-zen" target="_blank">write code</a>, create learning content, create documentation, and provide <a href="https://github.com/david-geo-holmes/geometry-zen/issues" target="_blank">feedback</a>.</p>\n                    <h5 class="muted">[7 of 7]</h5>\n                  </div>\n                </div>\n\n              </div> <!-- div.carousel.inner -->\n              <!-- Carousel nav -->\n              <a class="carousel-control left" data-target="#introCarousel" data-slide="prev">&lsaquo;</a>\n              <a class="carousel-control right" data-target="#introCarousel" data-slide="next">&rsaquo;</a>\n            </div> <!-- div.carousel.slide -->\n          </div> <!-- div.widget-content -->\n        </div> <!-- div.widget -->\n      </div> <!-- div.span -->\n      <div class="span6">\n        <div class="widget">\n          <div class="widget-header">\n            <i class="icon-thumbs-up"></i>\n            <h3>Features and Benefits</h3>\n          </div>\n          <div class="widget-content">\n            <div class="accordion" id="fabAccordion">\n              <!-- Web Browser Platform -->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse0">\n                    Web Browser Platform\n                  </a>\n                </div>\n                <div id="fabCollapse0" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Nothing to install. Just use a WebGL compliant browser such as Chrome or Firefox.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Optimized for Mobile -->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse1">\n                    Optimized for Mobile\n                  </a>\n                </div>\n                <div id="fabCollapse1" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Designed to be easily used on mobile tablet devices.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Modeling Workbench -->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse2">\n                    Modeling Workbench\n                  </a>\n                </div>\n                <div id="fabCollapse2" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Juxtaposes an analytical programming editor with a 3D geometry view reinforcing the learning of the mathematical notation as well as the geometric interpretation.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Python Language -->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse3">\n                    Python Language\n                  </a>\n                </div>\n                <div id="fabCollapse3" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Mathematical binary operators are natural to use. Easy to learn. Widely used in academia.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- WebGL rendering -->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse4">\n                    WebGL 3D rendering\n                  </a>\n                </div>\n                <div id="fabCollapse4" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Fast GPU-based rendering provides smooth animation of simulations.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Geometric Algebra-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse5">\n                    Geometric Algebra(s)\n                  </a>\n                </div>\n                <div id="fabCollapse5" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Support for 2D and 3D Euclidean (Now), Spacetime and Conformal algebras (Coming soon).</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Dimensional Analysis-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse6">\n                    Dimensional Analysis\n                  </a>\n                </div>\n                <div id="fabCollapse6" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Automatic verification of the correctness of physical expressions (Coming soon).</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Units of Measure-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse7">\n                    Units of Measure\n                  </a>\n                </div>\n                <div id="fabCollapse7" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Permits algebraic manipulations, even if the units differ, with automatic conversion (Coming soon).</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Coordinate Systems-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse8">\n                    Coordinate Systems\n                  </a>\n                </div>\n                <div id="fabCollapse8" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Enter initial configuration in a coordinate system that reflects the symmetry of the system.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Tutorials-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse9">\n                    Tutorials\n                  </a>\n                </div>\n                <div id="fabCollapse9" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>A comprehensive introduction to {{marketing.name}} and Geometric Algebra (Coming soon).</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Examples-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse10">\n                    Examples\n                  </a>\n                </div>\n                <div id="fabCollapse10" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Allow you to explore the capabilities and potential of {{marketing.name}}.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Works disconnected-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse11">\n                    Works disconnected\n                  </a>\n                </div>\n                <div id="fabCollapse11" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>No need to be connected to the internet unless you want to share your work with others.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- OAuth authentication-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse13">\n                    OAuth authentication\n                  </a>\n                </div>\n                <div id="fabCollapse13" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Secure authentication and authorization using GitHub. No extra passwords to memorize.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- GitHub repository-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse14">\n                    GitHub repository\n                  </a>\n                </div>\n                <div id="fabCollapse14" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Save and share your models in public repositories or use private repositories for assignments and problems. Search for public {{marketing.name}} models by other authors, improve on them, return the favor by offering back your changes.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Issue Tracking-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse15">\n                    Issue Tracking\n                  </a>\n                </div>\n                <div id="fabCollapse15" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Want something incorporated, fixed or improved? <a href="https://github.com/david-geo-holmes/geometry-zen/issues">Discuss your issue</a> with the {{marketing.name}} community!</p>\n                  </div>\n                </div>\n              </div>\n              <!-- 100% freedom-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse16">\n                    100% freedom\n                  </a>\n                </div>\n                <div id="fabCollapse16" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>Freedom to run, copy, distribute, study, improve and change the software.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- 100% free-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse17">\n                    100% free\n                  </a>\n                </div>\n                <div id="fabCollapse17" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>That\'s right.</p>\n                  </div>\n                </div>\n              </div>\n              <!-- Open Source Software-->\n              <div class="accordion-group">\n                <div class="accordion-heading">\n                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#fabAccordion" data-target="#fabCollapse18">\n                    Open Source Software\n                  </a>\n                </div> <!-- accordion-toggle -->\n                <div id="fabCollapse18" class="accordion-body collapse">\n                  <div class="accordion-inner">\n                    <p>What else would it be? Just head over to the <a href="https://github.com/david-geo-holmes/geometry-zen">{{marketing.name}} GitHub project.</a></p>\n                  </div> <!-- accordion-inner -->\n                </div> <!-- accordion-body -->\n              </div> <!-- accordion-group -->\n            </div> <!-- accordion -->\n          </div> <!-- div.widget-content -->\n        </div> <!-- div.widget -->\n      </div> <!-- div.span -->\n    </div> <!-- div.row-fluid -->\n    <div class="row-fluid">\n      <div class="span6">\n        <div class="widget">\n          <div class="widget-header">\n            <i class="icon-cogs"></i>\n            <h3>Geometric Algebra</h3>\n          </div>\n          <div class="widget-content">\n            <p>Geometric Algebra is the generalization of the concept of a number to describe geometric quantities and defines the rules for manipulating those numbers. In essence, Geometric Algebra is about learning how to correctly multiply and interpret Geometric Numbers.</p>\n            <p>Many of the Physical Laws that describe the phenomena of nature are Geometric and Algebraic in Character. That is to say, the laws have a precise mathematical structure that is amenable to a geometric interpretation. Geometric Algebra unifies these two aspects in a single mathematical tool. By learning and using Geometric Algebra (and Geometric Calculus) the student gains a new perspective and a lasting foundation for understanding the universe and making new discoveries.</p>\n          </div> <!-- div.widget-content -->\n        </div> <!-- div.widget -->\n      </div> <!-- div.span -->\n      <div class="span6">\n        <div class="widget">\n          <div class="widget-header">\n            <i class="icon-time"></i>\n            <h3>Timeline</h3>\n          </div>\n          <div class="widget-content">\n            <table class="table table-condensed">\n              <tbody>\n                <tr>\n                  <td><span nowrap=nowrap>300 BCE</span></td>\n                  <td>Euclid</td>\n                  <td><em>Geometry</em></td>\n                </tr>\n                <tr>\n                  <td><span nowrap=nowrap>250 CE</span></td>\n                  <td>Diophantes</td>\n                  <td><em>Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1545</td>\n                  <td>Cardano</td>\n                  <td><em>Imaginary numbers</em></td>\n                </tr>\n                <tr>\n                  <td>1637</td>\n                  <td>Descartes</td>\n                  <td><em>Coordinates</em></td>\n                </tr>\n                <tr>\n                  <td>1798</td>\n                  <td>Gauss</td>\n                  <td><em>Complex Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1840</td>\n                  <td>Grassman</td>\n                  <td><em>Linear Algebra, Vector Space</em></td>\n                </tr>\n                <tr>\n                  <td>1843</td>\n                  <td>Hamilton</td>\n                  <td><em>Quaternions</em></td>\n                </tr>\n                <tr>\n                  <td>1844</td>\n                  <td>Grassman</td>\n                  <td><em>Extensive Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1854</td>\n                  <td>Cayley</td>\n                  <td><em>Matrix Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1870</td>\n                  <td>Gibbs and Heaviside</td>\n                  <td><em>Vector Calculus</em></td>\n                </tr>\n                <tr>\n                  <td>1878</td>\n                  <td>Clifford</td>\n                  <td><em>Geometric Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1890</td>\n                  <td>Ricci</td>\n                  <td><em>Tensors</em></td>\n                </tr>\n                <tr>\n                  <td>1899</td>\n                  <td>Cartan</td>\n                  <td><em>Differential Forms</em></td>\n                </tr>\n                <tr>\n                  <td>1928</td>\n                  <td>Dirac</td>\n                  <td><em>Spin Algebra</em></td>\n                </tr>\n                <tr>\n                  <td>1957</td>\n                  <td>Riesz</td>\n                  <td><em>Clifford Numbers, Spinors</em></td>\n                </tr>\n                <tr>\n                  <td>1966</td>\n                  <td>Hestenes</td>\n                  <td><em>Space Time Algebra, Geometric Calculus</em></td>\n                </tr>\n              </tbody>\n            </table> <!-- table.table-->\n            <dl class="dl-horizontal">\n            </dl>\n          </div> <!-- dive.widget-content -->\n        </div> <!-- div.widget -->\n      </div> <!-- div.span4 -->\n    </div> <!-- div.row-fluid -->\n  </div> <!-- div.container-fluid -->\n</div> <!-- div.home-view -->\n<script>\n  $(\'.accordion\').on(\'show\', function (e) {\n    $(e.target).prev(\'.accordion-heading\').parent ().addClass(\'open\');\n  });\n\n  $(\'.accordion\').on(\'hide\', function (e) {\n    $(this).find(\'.accordion-toggle\').not($(e.target)).parents (\'.accordion-group\').removeClass(\'open\');\n  });\n    \n  $(\'.accordion\').each (function () {       \n    $(this).find (\'.accordion-body.in\').parent ().addClass (\'open\');\n  });\n</script>\n'),e.put("angular/printer.html",'<div ng-controller="PrinterCtrl" class="container-fluid">\n  <div class="row-fluid">\n    <div class="span12">\n      <!-- Using anything other than a pre(serve) element is likely too be slow -->\n      <!-- PRESERVE_ELEMENT_ID is defined in the printer controller -->\n      <pre id="a5f435e0-c92e-11e2-8b8b-0800200c9a66" class="printer"></pre>\n    </div>\n  </div>\n</div>\n\n'),e.put("angular/title-marketing.html","<title>Geometry Zen</title>"),e.put("angular/tree.html",'<div id="repo-view">\n\n  <div class="subnavbar">\n    <div class="subnavbar-inner">\n      <div class="container">\n        <a class="btn-subnavbar collapsed" data-toggle="collapse" data-target=".subnav-collapse">\n          <i class="icon-reorder"></i>\n        </a>\n        <div class="subnav-collapse collapse">\n          <ul class="mainnav">\n            <li class="{{homeBreadcrumbClass()}}">\n              <a-home></a-home>\n            </li>\n            <li ng-show="isLoggedIn()" class="{{userBreadcrumbClass()}}">\n              <a ng-href="/users/{{user.login}}">\n                <i class="icon-user"></i>\n                <span>{{i18n.translate("My Space").fetch()}}</span>\n              </a>\n            </li>\n            <li class="{{repoBreadcrumbClass()}}">\n              <a ng-click="bookView()" href="#">\n                <i class="{{i18n.translate(\'icon-repo\').fetch()}}"></i>\n                <span>{{i18n.translate("Repo").fetch()}}</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <div id="work-layout" class="container-fluid">\n    <div class="row-fluid">\n      <div class="widget">\n        <div class="widget-header">\n          <i class="{{i18n.translate(\'icon-repo\').fetch()}}"></i>\n          <h3>{{repo.name}}</h3>\n        </div>\n        <div class="widget-content">\n          <div>\n            <!--\n            <i class="icon-user muted"></i>\n            <span><a ng-href="/users/{{user.login}}">{{user.login}}</a></span>\n            -->\n            <!--\n            <a ng-href="https://github.com/{{user.login}}" target="_blank" class="muted">\n              <i class="icon-github"></i>\n            </a>\n            -->\n            <span>{{repo.description}}</span>\n          </div>\n          <ul class="nav nav-tabs" id="myTab">\n            <li><a data-target="#items" data-toggle="tab">{{i18n.translate(\'File\').ifPlural(2, \'Files\').fetch()}}</a></li>\n            <!--li><a data-target="#commits" data-toggle="tab">Commits</a></li-->\n            <!--li><a data-target="#branches" data-toggle="tab">Branches</a></li-->\n          </ul>\n          <div class="tab-content">\n            <div class="tab-pane" id="items">\n              <div class ="row-fluid">\n                <table class="table table-condensed">\n                  <tbody>\n                    <tr ng-show="isNewFileEnabled()">\n                      <td nowrap=nowrap>\n                        <!--input type="text" placeHolder="Filter..."></input-->\n                      </td>\n                      <td nowrap=nowrap>\n                        <button ng-click="newFile()" ng-show="isNewFileEnabled()" class="btn btn-primary">\n                          <i class="icon-plus-sign-alt"></i> <i class="{{i18n.translate(\'icon-file\').fetch()}}"></i>\n                          <span>{{i18n.translate("Create a New File").fetch()}}</span>\n                        </button>\n                      </td>\n                    </tr>\n                    <!-- Reminder: An item is a book or a page -->\n                    <tr ng-repeat="item in contextItem.childItems">\n                      <td nowrap=nowrap>\n                        <h3>\n                          <i class="{{i18n.translate(iconFromItem(item)).fetch()}} muted"></i>\n                          <a href="{{hrefFromItem(item)}}" class="btn btn-link">\n                            <span>{{item.name}}</span>\n                          </a>\n                        </h3>\n                      </td>\n                      <td nowrap=nowrap>\n                        <!-- Make use of the HATEOAS links -->\n                        <!--\n                        <h3>\n                          <i class="icon-github muted"></i>\n                          <a ng-href="{{item.html_url}}" target="_blank" class="btn btn-link">\n                            <span>GitHub</span>\n                          </a>\n                        </h3>\n                        -->\n                        <button ng-click="deleteItem($index)" ng-show="isDeleteItemEnabled()" class="btn btn-tertiary">\n                          <i class="icon-minus-sign-alt"></i>\n                          <span>Delete</span>\n                        </button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div class="tab-pane" id="commits">\n              <p>Under Construction: Commits</p>\n            </div>\n            <div class="tab-pane" id="branches">\n              <p>Under Construction: Branches</p>\n            </div>\n          </div>\n          <script>\n            $(function () {\n              $(\'#myTab a[data-target="#items"]\').tab(\'show\');\n            })\n          </script>\n          <script>\n            $(\'#myTab a[data-target="#items"]\').click(function(e) {\n              e.preventDefault();\n              $(this).tab(\'show\');\n            });\n          </script>\n          <script>\n            $(\'#myTab a[data-target="#commits"]\').click(function(e) {\n              e.preventDefault();\n              $(this).tab(\'show\');\n            });\n          </script>\n          <script>\n            $(\'#myTab a[data-target="#branches"]\').click(function(e) {\n              e.preventDefault();\n              $(this).tab(\'show\');\n            });\n          </script>\n        </div> <!-- div.widget-content -->\n      </div> <!-- div.widget -->\n    </div> <!-- div.row-fluid -->\n  </div> <!-- div.container-fluid -->\n  <div id="new-file-dialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="new-file-dialog-label" aria-hidden="true">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h3 id="new-file-dialog-label"><i class="icon-plus-sign-alt muted"></i> <i class="{{i18n.translate(\'icon-file\').fetch()}} muted"></i> {{i18n.translate("Create a New File").fetch()}}</h3>\n    </div>\n    <form ng-controller="NewFileCtrl">\n      <fieldset>\n        <div class="modal-body">\n          <label>{{i18n.translate(\'File name\').fetch()}}</label>\n          <input type="text" name="name" ng-model="file.name"></input>\n          <label>Commit message:</label>\n          <input type="text" name="message" ng-model="file.message" placeholder="{{i18n.translate(\'Create file\').fetch()}}"></input>\n        </div>\n        <div class="modal-footer">\n          <button id="btnCancel" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>\n          <button type="submit" ng-click="createFile()" id="btnOK" class="btn btn-primary">{{i18n.translate("Create file").fetch()}}</button>\n        </div>\n      </fieldset>\n    </form>\n  </div>\n</div>\n'),e.put("angular/user.html",'<div id="user-view">\n  <div class="subnavbar">\n    <div class="subnavbar-inner">\n      <div class="container">\n        <a class="btn-subnavbar collapsed" data-toggle="collapse" data-target=".subnav-collapse">\n          <i class="icon-reorder"></i>\n        </a>\n        <div class="subnav-collapse collapse">\n          <ul class="mainnav">\n            <li class="{{homeBreadcrumbClass()}}">\n              <a-home></a-home>\n            </li>\n            <li class="{{userBreadcrumbClass()}}">\n              <a ng-href="/users/{{user.login}}">\n                <i class="icon-user"></i>\n                <span>{{i18n.translate("My Space").fetch()}}</span>\n              </a>\n            </li>\n          </ul>\n        </div> <!-- /.subnav-collapse -->\n      </div> <!-- /container -->\n    </div> <!-- /subnavbar-inner -->\n  </div> <!-- /subnavbar -->\n\n  <div class="container-fluid">\n    <div class="row-fluid">\n      <div class="span4">\n        <div class="widget">\n          <div class="widget-header">\n              <i class="icon-user"></i>\n              <h3>Profile</h3>\n          </div>\n          <div class="widget-content">\n            <h3>\n              <span>{{user.name}}</span>\n            </h3>\n            <h4>\n              <span>{{user.login}}</span>\n            </h4>\n            <!-- HATEOAS GitHub link? -->\n            <!--\n            <a href="https://github.com/{{user.login}}?tab=repositories" target="_blank" class="btn btn-secondary">\n              <i class="icon-github"></i>\n              <span>GitHub</span>\n            </a>\n            -->\n          </div>\n        </div>\n      </div>\n      <div class="span8">\n        <div class="widget stacked">\n          <div class="widget-content">\n            <ul class="nav nav-tabs" id="myTab">\n              <!--li><a data-target="#contributions" data-toggle="tab">Contributions</a></li-->\n              <li><a data-target="#repositories" data-toggle="tab">{{i18n.translate("Repo").ifPlural(2, "Repos").fetch()}}</a></li>\n              <!--li><a data-target="#activity" data-toggle="tab">Public Activity</a></li-->\n            </ul>\n            <div class="tab-content">\n              <div class="tab-pane" id="contributions">\n                <p>Under Construction: Contributions</p>\n              </div>\n              <div class="tab-pane" id="repositories">\n                <div class ="row-fluid">\n                  <table class="table table-condensed">\n                    <tbody>\n                      <tr>\n                        <td nowrap=nowrap>\n                          <!--input type="text" placeHolder="Filter..."></input-->\n                        </td>\n                        <td nowrap=nowrap>\n                          <button ng-click="newRepo()" class="btn btn-primary">\n                            <i class="icon-plus-sign-alt"></i> <i class="{{i18n.translate(\'icon-repo\').fetch()}}"></i>\n                            <span>{{i18n.translate("Create a New Repo").fetch()}}</span>\n                          </button>\n                        </td>\n                      </tr>\n                      <tr ng-repeat="repo in repos">\n                        <td nowrap=nowrap>\n                          <h3>\n                            <i class="{{i18n.translate(\'icon-repo\').fetch()}} muted"></i>\n                            <a href="/users/{{user.login}}/repos/{{repo.name}}/tree/master" class="btn btn-link">\n                              <span>{{repo.name}}</span>\n                            </a>\n                          </h3>\n                          <p>{{repo.description}}</p>\n                        </td>\n                        <td nowrap=nowrap>\n                          <!-- HATEOAS GitHub link-->\n                          <!--\n                          <a href="{{repo.github_html_url}}" target="_blank" class="btn btn-secondary">\n                            <i class="icon-github"></i>\n                            <span>GitHub</span>\n                          </a>\n                          -->\n                          <button ng-click="deleteRepo($index)" class="btn btn-tertiary">\n                            <i class="icon-minus-sign-alt"></i>\n                            <span>Delete</span>\n                          </button>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div class="tab-pane" id="activity">\n                <p>Under Construction: Public Activity</p>\n              </div>\n            </div>\n            <script>\n              $(function () {\n                $(\'#myTab a[data-target="#repositories"]\').tab(\'show\');\n              })\n            </script>\n            <script>\n              $(\'#myTab a[data-target="#contributions"]\').click(function(e) {\n                e.preventDefault();\n                $(this).tab(\'show\');\n              });\n            </script>\n            <script>\n              $(\'#myTab a[data-target="#repositories"]\').click(function(e) {\n                e.preventDefault();\n                $(this).tab(\'show\');\n              });\n            </script>\n            <script>\n              $(\'#myTab a[data-target="#activity"]\').click(function(e) {\n                e.preventDefault();\n                $(this).tab(\'show\');\n              });\n            </script>\n          </div>\n        </div>\n\n        <div id="new-repo-dialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="new-repo-dialog-label" aria-hidden="true">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h3 id="new-repo-dialog-label"><i class="icon-plus-sign-alt muted"></i> <i class="{{i18n.translate(\'icon-repo\').fetch()}} muted"></i> {{i18n.translate("Create a New Repo").fetch()}}</h3>\n          </div>\n          <form ng-controller="NewRepoCtrl">\n            <fieldset>\n              <div class="modal-body">\n                <label>{{i18n.translate("Repo name").fetch()}}</label>\n                <input type="text" name="repo" ng-model="repo.name"></input>\n                <span class="help-block">{{i18n.translate("Great repo names are short and memorable.").fetch()}}</span>\n                <label>Description<span class="muted"> (optional)</span></label>\n                <input type="text" name="description" ng-model="repo.description"></input>\n                <!--\n                <hr/>\n                <input type="radio" ng-model="repo.private" value="false"> <i class="{{i18n.translate(\'icon-repo\').fetch()}} muted"></i> Public<br/>\n                <span class="help-block">Anyone can see this repository. You choose who can commit.</span>\n                <input type="radio" ng-model="repo.private" value="true"> Private <br/>\n                <span class="help-block">You choose who can see and commit to this repository.</span>\n                -->\n                <hr/>\n                <label class="checkbox">\n                  <input type="checkbox" name="markdown-readme" ng-model="repo.markdownReadme"> {{i18n.translate("Initialize this repo with a README.md").fetch()}}</input>\n                </label>\n                <span class="help-block">{{i18n.translate("This will allow you to clone the repo immediately in GitHub.").fetch()}}</span>\n                <!--\n                <label class="checkbox">\n                  <input type="checkbox" name="python-readme" ng-model="repo.pythonReadme"> Initialize this book with a README.py</input>\n                </label>\n                <span class="help-block">Having at least one Python file will ensure that the GitHub repository is visible to Geometry Zen.</span>\n                -->\n              </div>\n              <div class="modal-footer">\n                <button id="btnCancel" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>\n                <button type="submit" ng-click="createRepo()" id="btnOK" class="btn btn-primary">{{i18n.translate("Create repo").fetch()}}</button>\n              </div>\n            </fieldset>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'),e.put("angular/work.html",'<div id="work-view">\n  <div class="subnavbar">\n    <div class="subnavbar-inner">\n      <div class="container">\n        <a class="btn-subnavbar collapsed" data-toggle="collapse" data-target=".subnav-collapse">\n          <i class="icon-reorder"></i>\n        </a>\n        <div class="subnav-collapse collapse">\n          <ul class="mainnav">\n            <li class="{{homeBreadcrumbClass()}}">\n              <a-home></a-home>\n            </li>\n            <li ng-show="isLoggedIn()" class="{{userBreadcrumbClass()}}">\n              <a ng-href="/users/{{user.name}}">\n                <i class="icon-user"></i>\n                <span>{{i18n.translate("My Space").fetch()}}</span>\n              </a>\n            </li>\n            <li class="active">\n              <a ng-click="reload()" href="#">\n                <i class="icon-edit"></i>\n                <span>Workbench</span>\n              </a>\n            </li>\n            <li ng-show="saveEnabled()">\n              <a ng-click="saveFile()" href="#">\n                <i class="icon-save"></i>\n                <span>Save</span>\n              </a>\n            </li>\n            <li ng-show="runEnabled()">\n              <a ng-click="run()" href="#">\n                <i class="icon-cogs"></i>\n                <span>Run</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <div id="work-layout" class="container-fluid">\n    <div class="row-fluid" ng-show="messages.length &gt; 0">\n      <div class="span12">\n        <div class="widget stacked">\n          <div class="widget-header">\n            <i class="icon-inbox"></i>\n            <h3>Message</h3>\n          </div>\n          <div class="widget-content">\n            <div class="alert alert-block alert-{{message.severity}}" ng-repeat="message in messages">\n              <button type="button" class="close" data-dismiss="alert">&times;</button>\n              <h4>{{message.name}}</h4>\n              {{message.text}}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row-fluid">\n      <div class="span6">\n        <div class="widget">\n          <div class="widget-header">\n            <i class="{{i18n.translate(\'icon-file\').fetch()}} muted"></i>\n            <h3>{{contextItem.name}}</h3>\n          </div>\n          <div id="textarea-container" class="widget-plain">\n            <textarea id="code"></textarea>\n          </div>\n        </div>\n      </div>\n      <div class="span6">\n        <div class="row-fluid">\n          <div class="span12">\n            <div class="widget">\n              <div id="canvas-container" class="widget-plain">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="row-fluid">\n          <div class="span12">\n            <div class="widget">\n              <div class="widget-header">\n                <i class="icon-print"></i>\n                <h3>Printer</h3>\n              </div>\n              <div id="printer-container" class="widget-content">\n                <printer></printer>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')
}]);